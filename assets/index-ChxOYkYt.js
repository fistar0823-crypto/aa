var jP=Object.defineProperty;var UP=(n,e,t)=>e in n?jP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ye=(n,e,t)=>UP(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function XC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var q0={exports:{}},Zh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rA;function FP(){if(rA)return Zh;rA=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,i,r){var o=null;if(r!==void 0&&(o=""+r),i.key!==void 0&&(o=""+i.key),"key"in i){r={};for(var c in i)c!=="key"&&(r[c]=i[c])}else r=i;return i=r.ref,{$$typeof:n,type:s,key:o,ref:i!==void 0?i:null,props:r}}return Zh.Fragment=e,Zh.jsx=t,Zh.jsxs=t,Zh}var aA;function BP(){return aA||(aA=1,q0.exports=FP()),q0.exports}var y=BP(),G0={exports:{}},He={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oA;function zP(){if(oA)return He;oA=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),_=Symbol.iterator;function b(B){return B===null||typeof B!="object"?null:(B=_&&B[_]||B["@@iterator"],typeof B=="function"?B:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function R(B,se,de){this.props=B,this.context=se,this.refs=T,this.updater=de||E}R.prototype.isReactComponent={},R.prototype.setState=function(B,se){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,se,"setState")},R.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function k(){}k.prototype=R.prototype;function L(B,se,de){this.props=B,this.context=se,this.refs=T,this.updater=de||E}var M=L.prototype=new k;M.constructor=L,S(M,R.prototype),M.isPureReactComponent=!0;var H=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function C(B,se,de,fe,ve,Ve){return de=Ve.ref,{$$typeof:n,type:B,key:se,ref:de!==void 0?de:null,props:Ve}}function I(B,se){return C(B.type,se,void 0,void 0,void 0,B.props)}function N(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function V(B){var se={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(de){return se[de]})}var j=/\/+/g;function F(B,se){return typeof B=="object"&&B!==null&&B.key!=null?V(""+B.key):se.toString(36)}function O(){}function ne(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(O,O):(B.status="pending",B.then(function(se){B.status==="pending"&&(B.status="fulfilled",B.value=se)},function(se){B.status==="pending"&&(B.status="rejected",B.reason=se)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function be(B,se,de,fe,ve){var Ve=typeof B;(Ve==="undefined"||Ve==="boolean")&&(B=null);var Ie=!1;if(B===null)Ie=!0;else switch(Ve){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(B.$$typeof){case n:case e:Ie=!0;break;case m:return Ie=B._init,be(Ie(B._payload),se,de,fe,ve)}}if(Ie)return ve=ve(B),Ie=fe===""?"."+F(B,0):fe,H(ve)?(de="",Ie!=null&&(de=Ie.replace(j,"$&/")+"/"),be(ve,se,de,"",function($t){return $t})):ve!=null&&(N(ve)&&(ve=I(ve,de+(ve.key==null||B&&B.key===ve.key?"":(""+ve.key).replace(j,"$&/")+"/")+Ie)),se.push(ve)),1;Ie=0;var Ct=fe===""?".":fe+":";if(H(B))for(var nt=0;nt<B.length;nt++)fe=B[nt],Ve=Ct+F(fe,nt),Ie+=be(fe,se,de,Ve,ve);else if(nt=b(B),typeof nt=="function")for(B=nt.call(B),nt=0;!(fe=B.next()).done;)fe=fe.value,Ve=Ct+F(fe,nt++),Ie+=be(fe,se,de,Ve,ve);else if(Ve==="object"){if(typeof B.then=="function")return be(ne(B),se,de,fe,ve);throw se=String(B),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function Y(B,se,de){if(B==null)return B;var fe=[],ve=0;return be(B,fe,"","",function(Ve){return se.call(de,Ve,ve++)}),fe}function ae(B){if(B._status===-1){var se=B._result;se=se(),se.then(function(de){(B._status===0||B._status===-1)&&(B._status=1,B._result=de)},function(de){(B._status===0||B._status===-1)&&(B._status=2,B._result=de)}),B._status===-1&&(B._status=0,B._result=se)}if(B._status===1)return B._result.default;throw B._result}var ge=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function Ne(){}return He.Children={map:Y,forEach:function(B,se,de){Y(B,function(){se.apply(this,arguments)},de)},count:function(B){var se=0;return Y(B,function(){se++}),se},toArray:function(B){return Y(B,function(se){return se})||[]},only:function(B){if(!N(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},He.Component=R,He.Fragment=t,He.Profiler=i,He.PureComponent=L,He.StrictMode=s,He.Suspense=h,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,He.__COMPILER_RUNTIME={__proto__:null,c:function(B){return U.H.useMemoCache(B)}},He.cache=function(B){return function(){return B.apply(null,arguments)}},He.cloneElement=function(B,se,de){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var fe=S({},B.props),ve=B.key,Ve=void 0;if(se!=null)for(Ie in se.ref!==void 0&&(Ve=void 0),se.key!==void 0&&(ve=""+se.key),se)!z.call(se,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&se.ref===void 0||(fe[Ie]=se[Ie]);var Ie=arguments.length-2;if(Ie===1)fe.children=de;else if(1<Ie){for(var Ct=Array(Ie),nt=0;nt<Ie;nt++)Ct[nt]=arguments[nt+2];fe.children=Ct}return C(B.type,ve,void 0,void 0,Ve,fe)},He.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:r,_context:B},B},He.createElement=function(B,se,de){var fe,ve={},Ve=null;if(se!=null)for(fe in se.key!==void 0&&(Ve=""+se.key),se)z.call(se,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(ve[fe]=se[fe]);var Ie=arguments.length-2;if(Ie===1)ve.children=de;else if(1<Ie){for(var Ct=Array(Ie),nt=0;nt<Ie;nt++)Ct[nt]=arguments[nt+2];ve.children=Ct}if(B&&B.defaultProps)for(fe in Ie=B.defaultProps,Ie)ve[fe]===void 0&&(ve[fe]=Ie[fe]);return C(B,Ve,void 0,void 0,null,ve)},He.createRef=function(){return{current:null}},He.forwardRef=function(B){return{$$typeof:c,render:B}},He.isValidElement=N,He.lazy=function(B){return{$$typeof:m,_payload:{_status:-1,_result:B},_init:ae}},He.memo=function(B,se){return{$$typeof:d,type:B,compare:se===void 0?null:se}},He.startTransition=function(B){var se=U.T,de={};U.T=de;try{var fe=B(),ve=U.S;ve!==null&&ve(de,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(Ne,ge)}catch(Ve){ge(Ve)}finally{U.T=se}},He.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},He.use=function(B){return U.H.use(B)},He.useActionState=function(B,se,de){return U.H.useActionState(B,se,de)},He.useCallback=function(B,se){return U.H.useCallback(B,se)},He.useContext=function(B){return U.H.useContext(B)},He.useDebugValue=function(){},He.useDeferredValue=function(B,se){return U.H.useDeferredValue(B,se)},He.useEffect=function(B,se,de){var fe=U.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return fe.useEffect(B,se)},He.useId=function(){return U.H.useId()},He.useImperativeHandle=function(B,se,de){return U.H.useImperativeHandle(B,se,de)},He.useInsertionEffect=function(B,se){return U.H.useInsertionEffect(B,se)},He.useLayoutEffect=function(B,se){return U.H.useLayoutEffect(B,se)},He.useMemo=function(B,se){return U.H.useMemo(B,se)},He.useOptimistic=function(B,se){return U.H.useOptimistic(B,se)},He.useReducer=function(B,se,de){return U.H.useReducer(B,se,de)},He.useRef=function(B){return U.H.useRef(B)},He.useState=function(B){return U.H.useState(B)},He.useSyncExternalStore=function(B,se,de){return U.H.useSyncExternalStore(B,se,de)},He.useTransition=function(){return U.H.useTransition()},He.version="19.1.1",He}var lA;function Hb(){return lA||(lA=1,G0.exports=zP()),G0.exports}var ce=Hb();const HP=XC(ce);var W0={exports:{}},Jh={},$0={exports:{}},Y0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cA;function qP(){return cA||(cA=1,(function(n){function e(Y,ae){var ge=Y.length;Y.push(ae);e:for(;0<ge;){var Ne=ge-1>>>1,B=Y[Ne];if(0<i(B,ae))Y[Ne]=ae,Y[ge]=B,ge=Ne;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var ae=Y[0],ge=Y.pop();if(ge!==ae){Y[0]=ge;e:for(var Ne=0,B=Y.length,se=B>>>1;Ne<se;){var de=2*(Ne+1)-1,fe=Y[de],ve=de+1,Ve=Y[ve];if(0>i(fe,ge))ve<B&&0>i(Ve,fe)?(Y[Ne]=Ve,Y[ve]=ge,Ne=ve):(Y[Ne]=fe,Y[de]=ge,Ne=de);else if(ve<B&&0>i(Ve,ge))Y[Ne]=Ve,Y[ve]=ge,Ne=ve;else break e}}return ae}function i(Y,ae){var ge=Y.sortIndex-ae.sortIndex;return ge!==0?ge:Y.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var h=[],d=[],m=1,_=null,b=3,E=!1,S=!1,T=!1,R=!1,k=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function H(Y){for(var ae=t(d);ae!==null;){if(ae.callback===null)s(d);else if(ae.startTime<=Y)s(d),ae.sortIndex=ae.expirationTime,e(h,ae);else break;ae=t(d)}}function U(Y){if(T=!1,H(Y),!S)if(t(h)!==null)S=!0,z||(z=!0,F());else{var ae=t(d);ae!==null&&be(U,ae.startTime-Y)}}var z=!1,C=-1,I=5,N=-1;function V(){return R?!0:!(n.unstable_now()-N<I)}function j(){if(R=!1,z){var Y=n.unstable_now();N=Y;var ae=!0;try{e:{S=!1,T&&(T=!1,L(C),C=-1),E=!0;var ge=b;try{t:{for(H(Y),_=t(h);_!==null&&!(_.expirationTime>Y&&V());){var Ne=_.callback;if(typeof Ne=="function"){_.callback=null,b=_.priorityLevel;var B=Ne(_.expirationTime<=Y);if(Y=n.unstable_now(),typeof B=="function"){_.callback=B,H(Y),ae=!0;break t}_===t(h)&&s(h),H(Y)}else s(h);_=t(h)}if(_!==null)ae=!0;else{var se=t(d);se!==null&&be(U,se.startTime-Y),ae=!1}}break e}finally{_=null,b=ge,E=!1}ae=void 0}}finally{ae?F():z=!1}}}var F;if(typeof M=="function")F=function(){M(j)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,ne=O.port2;O.port1.onmessage=j,F=function(){ne.postMessage(null)}}else F=function(){k(j,0)};function be(Y,ae){C=k(function(){Y(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(Y){switch(b){case 1:case 2:case 3:var ae=3;break;default:ae=b}var ge=b;b=ae;try{return Y()}finally{b=ge}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function(Y,ae){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ge=b;b=Y;try{return ae()}finally{b=ge}},n.unstable_scheduleCallback=function(Y,ae,ge){var Ne=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Ne+ge:Ne):ge=Ne,Y){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=ge+B,Y={id:m++,callback:ae,priorityLevel:Y,startTime:ge,expirationTime:B,sortIndex:-1},ge>Ne?(Y.sortIndex=ge,e(d,Y),t(h)===null&&Y===t(d)&&(T?(L(C),C=-1):T=!0,be(U,ge-Ne))):(Y.sortIndex=B,e(h,Y),S||E||(S=!0,z||(z=!0,F()))),Y},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(Y){var ae=b;return function(){var ge=b;b=ae;try{return Y.apply(this,arguments)}finally{b=ge}}}})(Y0)),Y0}var uA;function GP(){return uA||(uA=1,$0.exports=qP()),$0.exports}var K0={exports:{}},Fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hA;function WP(){if(hA)return Fn;hA=1;var n=Hb();function e(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function r(h,d,m){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:_==null?null:""+_,children:h,containerInfo:d,implementation:m}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Fn.createPortal=function(h,d){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return r(h,d,null,m)},Fn.flushSync=function(h){var d=o.T,m=s.p;try{if(o.T=null,s.p=2,h)return h()}finally{o.T=d,s.p=m,s.d.f()}},Fn.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(h,d))},Fn.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},Fn.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var m=d.as,_=c(m,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,E=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;m==="style"?s.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:E}):m==="script"&&s.d.X(h,{crossOrigin:_,integrity:b,fetchPriority:E,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Fn.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var m=c(d.as,d.crossOrigin);s.d.M(h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(h)},Fn.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var m=d.as,_=c(m,d.crossOrigin);s.d.L(h,m,{crossOrigin:_,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Fn.preloadModule=function(h,d){if(typeof h=="string")if(d){var m=c(d.as,d.crossOrigin);s.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(h)},Fn.requestFormReset=function(h){s.d.r(h)},Fn.unstable_batchedUpdates=function(h,d){return h(d)},Fn.useFormState=function(h,d,m){return o.H.useFormState(h,d,m)},Fn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Fn.version="19.1.1",Fn}var dA;function $P(){if(dA)return K0.exports;dA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),K0.exports=WP(),K0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fA;function YP(){if(fA)return Jh;fA=1;var n=GP(),e=Hb(),t=$P();function s(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function r(a){var l=a,u=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(u=l.return),a=l.return;while(a)}return l.tag===3?u:null}function o(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function c(a){if(r(a)!==a)throw Error(s(188))}function h(a){var l=a.alternate;if(!l){if(l=r(a),l===null)throw Error(s(188));return l!==a?null:a}for(var u=a,f=l;;){var p=u.return;if(p===null)break;var v=p.alternate;if(v===null){if(f=p.return,f!==null){u=f;continue}break}if(p.child===v.child){for(v=p.child;v;){if(v===u)return c(p),a;if(v===f)return c(p),l;v=v.sibling}throw Error(s(188))}if(u.return!==f.return)u=p,f=v;else{for(var A=!1,D=p.child;D;){if(D===u){A=!0,u=p,f=v;break}if(D===f){A=!0,f=p,u=v;break}D=D.sibling}if(!A){for(D=v.child;D;){if(D===u){A=!0,u=v,f=p;break}if(D===f){A=!0,f=v,u=p;break}D=D.sibling}if(!A)throw Error(s(189))}}if(u.alternate!==f)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?a:l}function d(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=d(a),l!==null)return l;a=a.sibling}return null}var m=Object.assign,_=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),M=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function F(a){return a===null||typeof a!="object"?null:(a=j&&a[j]||a["@@iterator"],typeof a=="function"?a:null)}var O=Symbol.for("react.client.reference");function ne(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===O?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case S:return"Fragment";case R:return"Profiler";case T:return"StrictMode";case U:return"Suspense";case z:return"SuspenseList";case N:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case E:return"Portal";case M:return(a.displayName||"Context")+".Provider";case L:return(a._context.displayName||"Context")+".Consumer";case H:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case C:return l=a.displayName||null,l!==null?l:ne(a.type)||"Memo";case I:l=a._payload,a=a._init;try{return ne(a(l))}catch{}}return null}var be=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Ne=[],B=-1;function se(a){return{current:a}}function de(a){0>B||(a.current=Ne[B],Ne[B]=null,B--)}function fe(a,l){B++,Ne[B]=a.current,a.current=l}var ve=se(null),Ve=se(null),Ie=se(null),Ct=se(null);function nt(a,l){switch(fe(Ie,l),fe(Ve,a),fe(ve,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?OS(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=OS(l),a=MS(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}de(ve),fe(ve,a)}function $t(){de(ve),de(Ve),de(Ie)}function Br(a){a.memoizedState!==null&&fe(Ct,a);var l=ve.current,u=MS(l,a.type);l!==u&&(fe(Ve,a),fe(ve,u))}function mi(a){Ve.current===a&&(de(ve),de(Ve)),Ct.current===a&&(de(Ct),$h._currentValue=ge)}var Ki=Object.prototype.hasOwnProperty,Qi=n.unstable_scheduleCallback,zr=n.unstable_cancelCallback,G_=n.unstable_shouldYield,$u=n.unstable_requestPaint,as=n.unstable_now,nm=n.unstable_getCurrentPriorityLevel,un=n.unstable_ImmediatePriority,vn=n.unstable_UserBlockingPriority,Xi=n.unstable_NormalPriority,W_=n.unstable_LowPriority,Yu=n.unstable_IdlePriority,$_=n.log,yo=n.unstable_setDisableYieldValue,Hr=null,Ln=null;function Ds(a){if(typeof $_=="function"&&yo(a),Ln&&typeof Ln.setStrictMode=="function")try{Ln.setStrictMode(Hr,a)}catch{}}var Qn=Math.clz32?Math.clz32:im,Y_=Math.log,sm=Math.LN2;function im(a){return a>>>=0,a===0?32:31-(Y_(a)/sm|0)|0}var gi=256,qr=4194304;function Ks(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function ks(a,l,u){var f=a.pendingLanes;if(f===0)return 0;var p=0,v=a.suspendedLanes,A=a.pingedLanes;a=a.warmLanes;var D=f&134217727;return D!==0?(f=D&~v,f!==0?p=Ks(f):(A&=D,A!==0?p=Ks(A):u||(u=D&~a,u!==0&&(p=Ks(u))))):(D=f&~v,D!==0?p=Ks(D):A!==0?p=Ks(A):u||(u=f&~a,u!==0&&(p=Ks(u)))),p===0?0:l!==0&&l!==p&&(l&v)===0&&(v=p&-p,u=l&-l,v>=u||v===32&&(u&4194048)!==0)?l:p}function Gr(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function $l(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ku(){var a=gi;return gi<<=1,(gi&4194048)===0&&(gi=256),a}function Wr(){var a=qr;return qr<<=1,(qr&62914560)===0&&(qr=4194304),a}function Yl(a){for(var l=[],u=0;31>u;u++)l.push(a);return l}function Yt(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function rm(a,l,u,f,p,v){var A=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var D=a.entanglements,q=a.expirationTimes,X=a.hiddenUpdates;for(u=A&~u;0<u;){var ie=31-Qn(u),oe=1<<ie;D[ie]=0,q[ie]=-1;var Z=X[ie];if(Z!==null)for(X[ie]=null,ie=0;ie<Z.length;ie++){var J=Z[ie];J!==null&&(J.lane&=-536870913)}u&=~oe}f!==0&&$r(a,f,0),v!==0&&p===0&&a.tag!==0&&(a.suspendedLanes|=v&~(A&~l))}function $r(a,l,u){a.pendingLanes|=l,a.suspendedLanes&=~l;var f=31-Qn(l);a.entangledLanes|=l,a.entanglements[f]=a.entanglements[f]|1073741824|u&4194090}function Yr(a,l){var u=a.entangledLanes|=l;for(a=a.entanglements;u;){var f=31-Qn(u),p=1<<f;p&l|a[f]&l&&(a[f]|=l),u&=~p}}function Qu(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Xu(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Zi(){var a=ae.p;return a!==0?a:(a=window.event,a===void 0?32:JS(a.type))}function K_(a,l){var u=ae.p;try{return ae.p=a,l()}finally{ae.p=u}}var pi=Math.random().toString(36).slice(2),Kt="__reactFiber$"+pi,Rn="__reactProps$"+pi,Ji="__reactContainer$"+pi,vo="__reactEvents$"+pi,bo="__reactListeners$"+pi,Q_="__reactHandles$"+pi,Qs="__reactResources$"+pi,Kr="__reactMarker$"+pi;function Kl(a){delete a[Kt],delete a[Rn],delete a[vo],delete a[bo],delete a[Q_]}function _i(a){var l=a[Kt];if(l)return l;for(var u=a.parentNode;u;){if(l=u[Ji]||u[Kt]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(a=jS(a);a!==null;){if(u=a[Kt])return u;a=jS(a)}return l}a=u,u=a.parentNode}return null}function yi(a){if(a=a[Kt]||a[Ji]){var l=a.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return a}return null}function Qr(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(s(33))}function Xr(a){var l=a[Qs];return l||(l=a[Qs]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Qt(a){a[Kr]=!0}var am=new Set,xo={};function vi(a,l){bi(a,l),bi(a+"Capture",l)}function bi(a,l){for(xo[a]=l,a=0;a<l.length;a++)am.add(l[a])}var Eo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xi={},Ql={};function X_(a){return Ki.call(Ql,a)?!0:Ki.call(xi,a)?!1:Eo.test(a)?Ql[a]=!0:(xi[a]=!0,!1)}function To(a,l,u){if(X_(l))if(u===null)a.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var f=l.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+u)}}function wo(a,l,u){if(u===null)a.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+u)}}function Os(a,l,u,f){if(f===null)a.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(l,u,""+f)}}var So,Xl;function er(a){if(So===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);So=l&&l[1]||"",Xl=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+So+a+Xl}var Zl=!1;function Jl(a,l){if(!a||Zl)return"";Zl=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(l){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(J){var Z=J}Reflect.construct(a,[],oe)}else{try{oe.call()}catch(J){Z=J}a.call(oe.prototype)}}else{try{throw Error()}catch(J){Z=J}(oe=a())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(J){if(J&&Z&&typeof J.stack=="string")return[J.stack,Z.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=f.DetermineComponentFrameRoot(),A=v[0],D=v[1];if(A&&D){var q=A.split(`
`),X=D.split(`
`);for(p=f=0;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;for(;p<X.length&&!X[p].includes("DetermineComponentFrameRoot");)p++;if(f===q.length||p===X.length)for(f=q.length-1,p=X.length-1;1<=f&&0<=p&&q[f]!==X[p];)p--;for(;1<=f&&0<=p;f--,p--)if(q[f]!==X[p]){if(f!==1||p!==1)do if(f--,p--,0>p||q[f]!==X[p]){var ie=`
`+q[f].replace(" at new "," at ");return a.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",a.displayName)),ie}while(1<=f&&0<=p);break}}}finally{Zl=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?er(u):""}function Z_(a){switch(a.tag){case 26:case 27:case 5:return er(a.type);case 16:return er("Lazy");case 13:return er("Suspense");case 19:return er("SuspenseList");case 0:case 15:return Jl(a.type,!1);case 11:return Jl(a.type.render,!1);case 1:return Jl(a.type,!0);case 31:return er("Activity");default:return""}}function Xs(a){try{var l="";do l+=Z_(a),a=a.return;while(a);return l}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Lt(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Zr(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Ao(a){var l=Zr(a)?"checked":"value",u=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),f=""+a[l];if(!a.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,v=u.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return p.call(this)},set:function(A){f=""+A,v.call(this,A)}}),Object.defineProperty(a,l,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(A){f=""+A},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Jr(a){a._valueTracker||(a._valueTracker=Ao(a))}function pt(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var u=l.getValue(),f="";return a&&(f=Zr(a)?a.checked?"true":"false":a.value),a=f,a!==u?(l.setValue(a),!0):!1}function tr(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Io=/[\n"\\]/g;function bn(a){return a.replace(Io,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Zu(a,l,u,f,p,v,A,D){a.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?a.type=A:a.removeAttribute("type"),l!=null?A==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+Lt(l)):a.value!==""+Lt(l)&&(a.value=""+Lt(l)):A!=="submit"&&A!=="reset"||a.removeAttribute("value"),l!=null?eh(a,A,Lt(l)):u!=null?eh(a,A,Lt(u)):f!=null&&a.removeAttribute("value"),p==null&&v!=null&&(a.defaultChecked=!!v),p!=null&&(a.checked=p&&typeof p!="function"&&typeof p!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?a.name=""+Lt(D):a.removeAttribute("name")}function Ju(a,l,u,f,p,v,A,D){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(a.type=v),l!=null||u!=null){if(!(v!=="submit"&&v!=="reset"||l!=null))return;u=u!=null?""+Lt(u):"",l=l!=null?""+Lt(l):u,D||l===a.value||(a.value=l),a.defaultValue=l}f=f??p,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=D?a.checked:!!f,a.defaultChecked=!!f,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(a.name=A)}function eh(a,l,u){l==="number"&&tr(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function ea(a,l,u,f){if(a=a.options,l){l={};for(var p=0;p<u.length;p++)l["$"+u[p]]=!0;for(u=0;u<a.length;u++)p=l.hasOwnProperty("$"+a[u].value),a[u].selected!==p&&(a[u].selected=p),p&&f&&(a[u].defaultSelected=!0)}else{for(u=""+Lt(u),l=null,p=0;p<a.length;p++){if(a[p].value===u){a[p].selected=!0,f&&(a[p].defaultSelected=!0);return}l!==null||a[p].disabled||(l=a[p])}l!==null&&(l.selected=!0)}}function om(a,l,u){if(l!=null&&(l=""+Lt(l),l!==a.value&&(a.value=l),u==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=u!=null?""+Lt(u):""}function lm(a,l,u,f){if(l==null){if(f!=null){if(u!=null)throw Error(s(92));if(be(f)){if(1<f.length)throw Error(s(93));f=f[0]}u=f}u==null&&(u=""),l=u}u=Lt(l),a.defaultValue=u,f=a.textContent,f===u&&f!==""&&f!==null&&(a.value=f)}function Ms(a,l){if(l){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=l;return}}a.textContent=l}var nr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function th(a,l,u){var f=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":f?a.setProperty(l,u):typeof u!="number"||u===0||nr.has(l)?l==="float"?a.cssFloat=u:a[l]=(""+u).trim():a[l]=u+"px"}function nh(a,l,u){if(l!=null&&typeof l!="object")throw Error(s(62));if(a=a.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||l!=null&&l.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var p in l)f=l[p],l.hasOwnProperty(p)&&u[p]!==f&&th(a,p,f)}else for(var v in l)l.hasOwnProperty(v)&&th(a,v,l[v])}function ec(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),um=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zs(a){return um.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var sh=null;function ih(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ta=null,Xn=null;function hm(a){var l=yi(a);if(l&&(a=l.stateNode)){var u=a[Rn]||null;e:switch(a=l.stateNode,l.type){case"input":if(Zu(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+bn(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var f=u[l];if(f!==a&&f.form===a.form){var p=f[Rn]||null;if(!p)throw Error(s(90));Zu(f,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(l=0;l<u.length;l++)f=u[l],f.form===a.form&&pt(f)}break e;case"textarea":om(a,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&ea(a,!!u.multiple,l,!1)}}}var Ro=!1;function Co(a,l,u){if(Ro)return a(l,u);Ro=!0;try{var f=a(l);return f}finally{if(Ro=!1,(ta!==null||Xn!==null)&&(eg(),ta&&(l=ta,a=Xn,Xn=ta=null,hm(l),a)))for(l=0;l<a.length;l++)hm(a[l])}}function na(a,l){var u=a.stateNode;if(u===null)return null;var f=u[Rn]||null;if(f===null)return null;u=f[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(s(231,l,typeof u));return u}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sr=!1;if(Zn)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){sr=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{sr=!1}var Ps=null,xt=null,tc=null;function dm(){if(tc)return tc;var a,l=xt,u=l.length,f,p="value"in Ps?Ps.value:Ps.textContent,v=p.length;for(a=0;a<u&&l[a]===p[a];a++);var A=u-a;for(f=1;f<=A&&l[u-f]===p[v-f];f++);return tc=p.slice(a,1<f?1-f:void 0)}function No(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Do(){return!0}function rh(){return!1}function hn(a){function l(u,f,p,v,A){this._reactName=u,this._targetInst=p,this.type=f,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var D in a)a.hasOwnProperty(D)&&(u=a[D],this[D]=u?u(v):v[D]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Do:rh,this.isPropagationStopped=rh,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Do)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Do)},persist:function(){},isPersistent:Do}),l}var jn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ko=hn(jn),Oo=m({},jn,{view:0,detail:0}),Mo=hn(Oo),nc,Po,Ei,Vo=m({},Oo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rc,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ei&&(Ei&&a.type==="mousemove"?(nc=a.screenX-Ei.screenX,Po=a.screenY-Ei.screenY):Po=nc=0,Ei=a),nc)},movementY:function(a){return"movementY"in a?a.movementY:Po}}),Lo=hn(Vo),J_=m({},Vo,{dataTransfer:0}),fm=hn(J_),jo=m({},Oo,{relatedTarget:0}),sc=hn(jo),mm=m({},jn,{animationName:0,elapsedTime:0,pseudoElement:0}),ah=hn(mm),oh=m({},jn,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),gm=hn(oh),ic=m({},jn,{data:0}),lh=hn(ic),pm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ir={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_m={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ym(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=_m[a])?!!l[a]:!1}function rc(){return ym}var vm=m({},Oo,{key:function(a){if(a.key){var l=pm[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=No(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?ir[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rc,charCode:function(a){return a.type==="keypress"?No(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?No(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),ac=hn(vm),Jn=m({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ch=hn(Jn),bm=m({},Oo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rc}),ia=hn(bm),g=m({},jn,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=hn(g),w=m({},Vo,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),P=hn(w),Q=m({},jn,{newState:0,oldState:0}),te=hn(Q),pe=[9,13,27,32],je=Zn&&"CompositionEvent"in window,At=null;Zn&&"documentMode"in document&&(At=document.documentMode);var ut=Zn&&"TextEvent"in window&&!At,Xt=Zn&&(!je||At&&8<At&&11>=At),ps=" ",Ti=!1;function Js(a,l){switch(a){case"keyup":return pe.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ei(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ti=!1;function uh(a,l){switch(a){case"compositionend":return ei(l);case"keypress":return l.which!==32?null:(Ti=!0,ps);case"textInput":return a=l.data,a===ps&&Ti?null:a;default:return null}}function hM(a,l){if(ti)return a==="compositionend"||!je&&Js(a,l)?(a=dm(),tc=xt=Ps=null,ti=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return Xt&&l.locale!=="ko"?null:l.data;default:return null}}var dM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $E(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!dM[a.type]:l==="textarea"}function YE(a,l,u,f){ta?Xn?Xn.push(f):Xn=[f]:ta=f,l=ag(l,"onChange"),0<l.length&&(u=new ko("onChange","change",null,u,f),a.push({event:u,listeners:l}))}var hh=null,dh=null;function fM(a){RS(a,0)}function xm(a){var l=Qr(a);if(pt(l))return a}function KE(a,l){if(a==="change")return l}var QE=!1;if(Zn){var ey;if(Zn){var ty="oninput"in document;if(!ty){var XE=document.createElement("div");XE.setAttribute("oninput","return;"),ty=typeof XE.oninput=="function"}ey=ty}else ey=!1;QE=ey&&(!document.documentMode||9<document.documentMode)}function ZE(){hh&&(hh.detachEvent("onpropertychange",JE),dh=hh=null)}function JE(a){if(a.propertyName==="value"&&xm(dh)){var l=[];YE(l,dh,a,ih(a)),Co(fM,l)}}function mM(a,l,u){a==="focusin"?(ZE(),hh=l,dh=u,hh.attachEvent("onpropertychange",JE)):a==="focusout"&&ZE()}function gM(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return xm(dh)}function pM(a,l){if(a==="click")return xm(l)}function _M(a,l){if(a==="input"||a==="change")return xm(l)}function yM(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var _s=typeof Object.is=="function"?Object.is:yM;function fh(a,l){if(_s(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var u=Object.keys(a),f=Object.keys(l);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var p=u[f];if(!Ki.call(l,p)||!_s(a[p],l[p]))return!1}return!0}function eT(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function tT(a,l){var u=eT(a);a=0;for(var f;u;){if(u.nodeType===3){if(f=a+u.textContent.length,a<=l&&f>=l)return{node:u,offset:l-a};a=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=eT(u)}}function nT(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?nT(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function sT(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=tr(a.document);l instanceof a.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)a=l.contentWindow;else break;l=tr(a.document)}return l}function ny(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var vM=Zn&&"documentMode"in document&&11>=document.documentMode,oc=null,sy=null,mh=null,iy=!1;function iT(a,l,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;iy||oc==null||oc!==tr(f)||(f=oc,"selectionStart"in f&&ny(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),mh&&fh(mh,f)||(mh=f,f=ag(sy,"onSelect"),0<f.length&&(l=new ko("onSelect","select",null,l,u),a.push({event:l,listeners:f}),l.target=oc)))}function Uo(a,l){var u={};return u[a.toLowerCase()]=l.toLowerCase(),u["Webkit"+a]="webkit"+l,u["Moz"+a]="moz"+l,u}var lc={animationend:Uo("Animation","AnimationEnd"),animationiteration:Uo("Animation","AnimationIteration"),animationstart:Uo("Animation","AnimationStart"),transitionrun:Uo("Transition","TransitionRun"),transitionstart:Uo("Transition","TransitionStart"),transitioncancel:Uo("Transition","TransitionCancel"),transitionend:Uo("Transition","TransitionEnd")},ry={},rT={};Zn&&(rT=document.createElement("div").style,"AnimationEvent"in window||(delete lc.animationend.animation,delete lc.animationiteration.animation,delete lc.animationstart.animation),"TransitionEvent"in window||delete lc.transitionend.transition);function Fo(a){if(ry[a])return ry[a];if(!lc[a])return a;var l=lc[a],u;for(u in l)if(l.hasOwnProperty(u)&&u in rT)return ry[a]=l[u];return a}var aT=Fo("animationend"),oT=Fo("animationiteration"),lT=Fo("animationstart"),bM=Fo("transitionrun"),xM=Fo("transitionstart"),EM=Fo("transitioncancel"),cT=Fo("transitionend"),uT=new Map,ay="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ay.push("scrollEnd");function ni(a,l){uT.set(a,l),vi(l,[a])}var hT=new WeakMap;function Vs(a,l){if(typeof a=="object"&&a!==null){var u=hT.get(a);return u!==void 0?u:(l={value:a,source:l,stack:Xs(l)},hT.set(a,l),l)}return{value:a,source:l,stack:Xs(l)}}var Ls=[],cc=0,oy=0;function Em(){for(var a=cc,l=oy=cc=0;l<a;){var u=Ls[l];Ls[l++]=null;var f=Ls[l];Ls[l++]=null;var p=Ls[l];Ls[l++]=null;var v=Ls[l];if(Ls[l++]=null,f!==null&&p!==null){var A=f.pending;A===null?p.next=p:(p.next=A.next,A.next=p),f.pending=p}v!==0&&dT(u,p,v)}}function Tm(a,l,u,f){Ls[cc++]=a,Ls[cc++]=l,Ls[cc++]=u,Ls[cc++]=f,oy|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function ly(a,l,u,f){return Tm(a,l,u,f),wm(a)}function uc(a,l){return Tm(a,null,null,l),wm(a)}function dT(a,l,u){a.lanes|=u;var f=a.alternate;f!==null&&(f.lanes|=u);for(var p=!1,v=a.return;v!==null;)v.childLanes|=u,f=v.alternate,f!==null&&(f.childLanes|=u),v.tag===22&&(a=v.stateNode,a===null||a._visibility&1||(p=!0)),a=v,v=v.return;return a.tag===3?(v=a.stateNode,p&&l!==null&&(p=31-Qn(u),a=v.hiddenUpdates,f=a[p],f===null?a[p]=[l]:f.push(l),l.lane=u|536870912),v):null}function wm(a){if(50<Uh)throw Uh=0,m0=null,Error(s(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var hc={};function TM(a,l,u,f){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ys(a,l,u,f){return new TM(a,l,u,f)}function cy(a){return a=a.prototype,!(!a||!a.isReactComponent)}function rr(a,l){var u=a.alternate;return u===null?(u=ys(a.tag,l,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=l,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,l=a.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function fT(a,l){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,l=u.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function Sm(a,l,u,f,p,v){var A=0;if(f=a,typeof a=="function")cy(a)&&(A=1);else if(typeof a=="string")A=SP(a,u,ve.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case N:return a=ys(31,u,l,p),a.elementType=N,a.lanes=v,a;case S:return Bo(u.children,p,v,l);case T:A=8,p|=24;break;case R:return a=ys(12,u,l,p|2),a.elementType=R,a.lanes=v,a;case U:return a=ys(13,u,l,p),a.elementType=U,a.lanes=v,a;case z:return a=ys(19,u,l,p),a.elementType=z,a.lanes=v,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case k:case M:A=10;break e;case L:A=9;break e;case H:A=11;break e;case C:A=14;break e;case I:A=16,f=null;break e}A=29,u=Error(s(130,a===null?"null":typeof a,"")),f=null}return l=ys(A,u,l,p),l.elementType=a,l.type=f,l.lanes=v,l}function Bo(a,l,u,f){return a=ys(7,a,f,l),a.lanes=u,a}function uy(a,l,u){return a=ys(6,a,null,l),a.lanes=u,a}function hy(a,l,u){return l=ys(4,a.children!==null?a.children:[],a.key,l),l.lanes=u,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var dc=[],fc=0,Am=null,Im=0,js=[],Us=0,zo=null,ar=1,or="";function Ho(a,l){dc[fc++]=Im,dc[fc++]=Am,Am=a,Im=l}function mT(a,l,u){js[Us++]=ar,js[Us++]=or,js[Us++]=zo,zo=a;var f=ar;a=or;var p=32-Qn(f)-1;f&=~(1<<p),u+=1;var v=32-Qn(l)+p;if(30<v){var A=p-p%5;v=(f&(1<<A)-1).toString(32),f>>=A,p-=A,ar=1<<32-Qn(l)+p|u<<p|f,or=v+a}else ar=1<<v|u<<p|f,or=a}function dy(a){a.return!==null&&(Ho(a,1),mT(a,1,0))}function fy(a){for(;a===Am;)Am=dc[--fc],dc[fc]=null,Im=dc[--fc],dc[fc]=null;for(;a===zo;)zo=js[--Us],js[Us]=null,or=js[--Us],js[Us]=null,ar=js[--Us],js[Us]=null}var es=null,Bt=null,lt=!1,qo=null,wi=!1,my=Error(s(519));function Go(a){var l=Error(s(418,""));throw _h(Vs(l,a)),my}function gT(a){var l=a.stateNode,u=a.type,f=a.memoizedProps;switch(l[Kt]=a,l[Rn]=f,u){case"dialog":Ye("cancel",l),Ye("close",l);break;case"iframe":case"object":case"embed":Ye("load",l);break;case"video":case"audio":for(u=0;u<Bh.length;u++)Ye(Bh[u],l);break;case"source":Ye("error",l);break;case"img":case"image":case"link":Ye("error",l),Ye("load",l);break;case"details":Ye("toggle",l);break;case"input":Ye("invalid",l),Ju(l,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Jr(l);break;case"select":Ye("invalid",l);break;case"textarea":Ye("invalid",l),lm(l,f.value,f.defaultValue,f.children),Jr(l)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||f.suppressHydrationWarning===!0||kS(l.textContent,u)?(f.popover!=null&&(Ye("beforetoggle",l),Ye("toggle",l)),f.onScroll!=null&&Ye("scroll",l),f.onScrollEnd!=null&&Ye("scrollend",l),f.onClick!=null&&(l.onclick=og),l=!0):l=!1,l||Go(a)}function pT(a){for(es=a.return;es;)switch(es.tag){case 5:case 13:wi=!1;return;case 27:case 3:wi=!0;return;default:es=es.return}}function gh(a){if(a!==es)return!1;if(!lt)return pT(a),lt=!0,!1;var l=a.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||N0(a.type,a.memoizedProps)),u=!u),u&&Bt&&Go(a),pT(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(s(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8)if(u=a.data,u==="/$"){if(l===0){Bt=ii(a.nextSibling);break e}l--}else u!=="$"&&u!=="$!"&&u!=="$?"||l++;a=a.nextSibling}Bt=null}}else l===27?(l=Bt,ba(a.type)?(a=M0,M0=null,Bt=a):Bt=l):Bt=es?ii(a.stateNode.nextSibling):null;return!0}function ph(){Bt=es=null,lt=!1}function _T(){var a=qo;return a!==null&&(cs===null?cs=a:cs.push.apply(cs,a),qo=null),a}function _h(a){qo===null?qo=[a]:qo.push(a)}var gy=se(null),Wo=null,lr=null;function ra(a,l,u){fe(gy,l._currentValue),l._currentValue=u}function cr(a){a._currentValue=gy.current,de(gy)}function py(a,l,u){for(;a!==null;){var f=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,f!==null&&(f.childLanes|=l)):f!==null&&(f.childLanes&l)!==l&&(f.childLanes|=l),a===u)break;a=a.return}}function _y(a,l,u,f){var p=a.child;for(p!==null&&(p.return=a);p!==null;){var v=p.dependencies;if(v!==null){var A=p.child;v=v.firstContext;e:for(;v!==null;){var D=v;v=p;for(var q=0;q<l.length;q++)if(D.context===l[q]){v.lanes|=u,D=v.alternate,D!==null&&(D.lanes|=u),py(v.return,u,a),f||(A=null);break e}v=D.next}}else if(p.tag===18){if(A=p.return,A===null)throw Error(s(341));A.lanes|=u,v=A.alternate,v!==null&&(v.lanes|=u),py(A,u,a),A=null}else A=p.child;if(A!==null)A.return=p;else for(A=p;A!==null;){if(A===a){A=null;break}if(p=A.sibling,p!==null){p.return=A.return,A=p;break}A=A.return}p=A}}function yh(a,l,u,f){a=null;for(var p=l,v=!1;p!==null;){if(!v){if((p.flags&524288)!==0)v=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var A=p.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var D=p.type;_s(p.pendingProps.value,A.value)||(a!==null?a.push(D):a=[D])}}else if(p===Ct.current){if(A=p.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(a!==null?a.push($h):a=[$h])}p=p.return}a!==null&&_y(l,a,u,f),l.flags|=262144}function Rm(a){for(a=a.firstContext;a!==null;){if(!_s(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function $o(a){Wo=a,lr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Un(a){return yT(Wo,a)}function Cm(a,l){return Wo===null&&$o(a),yT(a,l)}function yT(a,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},lr===null){if(a===null)throw Error(s(308));lr=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else lr=lr.next=l;return u}var wM=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(u,f){a.push(f)}};this.abort=function(){l.aborted=!0,a.forEach(function(u){return u()})}},SM=n.unstable_scheduleCallback,AM=n.unstable_NormalPriority,dn={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yy(){return{controller:new wM,data:new Map,refCount:0}}function vh(a){a.refCount--,a.refCount===0&&SM(AM,function(){a.controller.abort()})}var bh=null,vy=0,mc=0,gc=null;function IM(a,l){if(bh===null){var u=bh=[];vy=0,mc=x0(),gc={status:"pending",value:void 0,then:function(f){u.push(f)}}}return vy++,l.then(vT,vT),l}function vT(){if(--vy===0&&bh!==null){gc!==null&&(gc.status="fulfilled");var a=bh;bh=null,mc=0,gc=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function RM(a,l){var u=[],f={status:"pending",value:null,reason:null,then:function(p){u.push(p)}};return a.then(function(){f.status="fulfilled",f.value=l;for(var p=0;p<u.length;p++)(0,u[p])(l)},function(p){for(f.status="rejected",f.reason=p,p=0;p<u.length;p++)(0,u[p])(void 0)}),f}var bT=Y.S;Y.S=function(a,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&IM(a,l),bT!==null&&bT(a,l)};var Yo=se(null);function by(){var a=Yo.current;return a!==null?a:Et.pooledCache}function Nm(a,l){l===null?fe(Yo,Yo.current):fe(Yo,l.pool)}function xT(){var a=by();return a===null?null:{parent:dn._currentValue,pool:a}}var xh=Error(s(460)),ET=Error(s(474)),Dm=Error(s(542)),xy={then:function(){}};function TT(a){return a=a.status,a==="fulfilled"||a==="rejected"}function km(){}function wT(a,l,u){switch(u=a[u],u===void 0?a.push(l):u!==l&&(l.then(km,km),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,AT(a),a;default:if(typeof l.status=="string")l.then(km,km);else{if(a=Et,a!==null&&100<a.shellSuspendCounter)throw Error(s(482));a=l,a.status="pending",a.then(function(f){if(l.status==="pending"){var p=l;p.status="fulfilled",p.value=f}},function(f){if(l.status==="pending"){var p=l;p.status="rejected",p.reason=f}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,AT(a),a}throw Eh=l,xh}}var Eh=null;function ST(){if(Eh===null)throw Error(s(459));var a=Eh;return Eh=null,a}function AT(a){if(a===xh||a===Dm)throw Error(s(483))}var aa=!1;function Ey(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ty(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function oa(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function la(a,l,u){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(ht&2)!==0){var p=f.pending;return p===null?l.next=l:(l.next=p.next,p.next=l),f.pending=l,l=wm(a),dT(a,null,u),l}return Tm(a,f,l,u),wm(a)}function Th(a,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var f=l.lanes;f&=a.pendingLanes,u|=f,l.lanes=u,Yr(a,u)}}function wy(a,l){var u=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var p=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var A={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};v===null?p=v=A:v=v.next=A,u=u.next}while(u!==null);v===null?p=v=l:v=v.next=l}else p=v=l;u={baseState:f.baseState,firstBaseUpdate:p,lastBaseUpdate:v,shared:f.shared,callbacks:f.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=l}var Sy=!1;function wh(){if(Sy){var a=gc;if(a!==null)throw a}}function Sh(a,l,u,f){Sy=!1;var p=a.updateQueue;aa=!1;var v=p.firstBaseUpdate,A=p.lastBaseUpdate,D=p.shared.pending;if(D!==null){p.shared.pending=null;var q=D,X=q.next;q.next=null,A===null?v=X:A.next=X,A=q;var ie=a.alternate;ie!==null&&(ie=ie.updateQueue,D=ie.lastBaseUpdate,D!==A&&(D===null?ie.firstBaseUpdate=X:D.next=X,ie.lastBaseUpdate=q))}if(v!==null){var oe=p.baseState;A=0,ie=X=q=null,D=v;do{var Z=D.lane&-536870913,J=Z!==D.lane;if(J?(et&Z)===Z:(f&Z)===Z){Z!==0&&Z===mc&&(Sy=!0),ie!==null&&(ie=ie.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Pe=a,Oe=D;Z=l;var vt=u;switch(Oe.tag){case 1:if(Pe=Oe.payload,typeof Pe=="function"){oe=Pe.call(vt,oe,Z);break e}oe=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Oe.payload,Z=typeof Pe=="function"?Pe.call(vt,oe,Z):Pe,Z==null)break e;oe=m({},oe,Z);break e;case 2:aa=!0}}Z=D.callback,Z!==null&&(a.flags|=64,J&&(a.flags|=8192),J=p.callbacks,J===null?p.callbacks=[Z]:J.push(Z))}else J={lane:Z,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ie===null?(X=ie=J,q=oe):ie=ie.next=J,A|=Z;if(D=D.next,D===null){if(D=p.shared.pending,D===null)break;J=D,D=J.next,J.next=null,p.lastBaseUpdate=J,p.shared.pending=null}}while(!0);ie===null&&(q=oe),p.baseState=q,p.firstBaseUpdate=X,p.lastBaseUpdate=ie,v===null&&(p.shared.lanes=0),pa|=A,a.lanes=A,a.memoizedState=oe}}function IT(a,l){if(typeof a!="function")throw Error(s(191,a));a.call(l)}function RT(a,l){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)IT(u[a],l)}var pc=se(null),Om=se(0);function CT(a,l){a=pr,fe(Om,a),fe(pc,l),pr=a|l.baseLanes}function Ay(){fe(Om,pr),fe(pc,pc.current)}function Iy(){pr=Om.current,de(pc),de(Om)}var ca=0,qe=null,_t=null,rn=null,Mm=!1,_c=!1,Ko=!1,Pm=0,Ah=0,yc=null,CM=0;function Zt(){throw Error(s(321))}function Ry(a,l){if(l===null)return!1;for(var u=0;u<l.length&&u<a.length;u++)if(!_s(a[u],l[u]))return!1;return!0}function Cy(a,l,u,f,p,v){return ca=v,qe=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,Y.H=a===null||a.memoizedState===null?dw:fw,Ko=!1,v=u(f,p),Ko=!1,_c&&(v=DT(l,u,f,p)),NT(a),v}function NT(a){Y.H=Bm;var l=_t!==null&&_t.next!==null;if(ca=0,rn=_t=qe=null,Mm=!1,Ah=0,yc=null,l)throw Error(s(300));a===null||xn||(a=a.dependencies,a!==null&&Rm(a)&&(xn=!0))}function DT(a,l,u,f){qe=a;var p=0;do{if(_c&&(yc=null),Ah=0,_c=!1,25<=p)throw Error(s(301));if(p+=1,rn=_t=null,a.updateQueue!=null){var v=a.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}Y.H=VM,v=l(u,f)}while(_c);return v}function NM(){var a=Y.H,l=a.useState()[0];return l=typeof l.then=="function"?Ih(l):l,a=a.useState()[0],(_t!==null?_t.memoizedState:null)!==a&&(qe.flags|=1024),l}function Ny(){var a=Pm!==0;return Pm=0,a}function Dy(a,l,u){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~u}function ky(a){if(Mm){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}Mm=!1}ca=0,rn=_t=qe=null,_c=!1,Ah=Pm=0,yc=null}function os(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?qe.memoizedState=rn=a:rn=rn.next=a,rn}function an(){if(_t===null){var a=qe.alternate;a=a!==null?a.memoizedState:null}else a=_t.next;var l=rn===null?qe.memoizedState:rn.next;if(l!==null)rn=l,_t=a;else{if(a===null)throw qe.alternate===null?Error(s(467)):Error(s(310));_t=a,a={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},rn===null?qe.memoizedState=rn=a:rn=rn.next=a}return rn}function Oy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ih(a){var l=Ah;return Ah+=1,yc===null&&(yc=[]),a=wT(yc,a,l),l=qe,(rn===null?l.memoizedState:rn.next)===null&&(l=l.alternate,Y.H=l===null||l.memoizedState===null?dw:fw),a}function Vm(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ih(a);if(a.$$typeof===M)return Un(a)}throw Error(s(438,String(a)))}function My(a){var l=null,u=qe.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var f=qe.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(l={data:f.data.map(function(p){return p.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=Oy(),qe.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(a),f=0;f<a;f++)u[f]=V;return l.index++,u}function ur(a,l){return typeof l=="function"?l(a):l}function Lm(a){var l=an();return Py(l,_t,a)}function Py(a,l,u){var f=a.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=u;var p=a.baseQueue,v=f.pending;if(v!==null){if(p!==null){var A=p.next;p.next=v.next,v.next=A}l.baseQueue=p=v,f.pending=null}if(v=a.baseState,p===null)a.memoizedState=v;else{l=p.next;var D=A=null,q=null,X=l,ie=!1;do{var oe=X.lane&-536870913;if(oe!==X.lane?(et&oe)===oe:(ca&oe)===oe){var Z=X.revertLane;if(Z===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),oe===mc&&(ie=!0);else if((ca&Z)===Z){X=X.next,Z===mc&&(ie=!0);continue}else oe={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},q===null?(D=q=oe,A=v):q=q.next=oe,qe.lanes|=Z,pa|=Z;oe=X.action,Ko&&u(v,oe),v=X.hasEagerState?X.eagerState:u(v,oe)}else Z={lane:oe,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},q===null?(D=q=Z,A=v):q=q.next=Z,qe.lanes|=oe,pa|=oe;X=X.next}while(X!==null&&X!==l);if(q===null?A=v:q.next=D,!_s(v,a.memoizedState)&&(xn=!0,ie&&(u=gc,u!==null)))throw u;a.memoizedState=v,a.baseState=A,a.baseQueue=q,f.lastRenderedState=v}return p===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function Vy(a){var l=an(),u=l.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=a;var f=u.dispatch,p=u.pending,v=l.memoizedState;if(p!==null){u.pending=null;var A=p=p.next;do v=a(v,A.action),A=A.next;while(A!==p);_s(v,l.memoizedState)||(xn=!0),l.memoizedState=v,l.baseQueue===null&&(l.baseState=v),u.lastRenderedState=v}return[v,f]}function kT(a,l,u){var f=qe,p=an(),v=lt;if(v){if(u===void 0)throw Error(s(407));u=u()}else u=l();var A=!_s((_t||p).memoizedState,u);A&&(p.memoizedState=u,xn=!0),p=p.queue;var D=PT.bind(null,f,p,a);if(Rh(2048,8,D,[a]),p.getSnapshot!==l||A||rn!==null&&rn.memoizedState.tag&1){if(f.flags|=2048,vc(9,jm(),MT.bind(null,f,p,u,l),null),Et===null)throw Error(s(349));v||(ca&124)!==0||OT(f,l,u)}return u}function OT(a,l,u){a.flags|=16384,a={getSnapshot:l,value:u},l=qe.updateQueue,l===null?(l=Oy(),qe.updateQueue=l,l.stores=[a]):(u=l.stores,u===null?l.stores=[a]:u.push(a))}function MT(a,l,u,f){l.value=u,l.getSnapshot=f,VT(l)&&LT(a)}function PT(a,l,u){return u(function(){VT(l)&&LT(a)})}function VT(a){var l=a.getSnapshot;a=a.value;try{var u=l();return!_s(a,u)}catch{return!0}}function LT(a){var l=uc(a,2);l!==null&&Ts(l,a,2)}function Ly(a){var l=os();if(typeof a=="function"){var u=a;if(a=u(),Ko){Ds(!0);try{u()}finally{Ds(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:a},l}function jT(a,l,u,f){return a.baseState=u,Py(a,_t,typeof f=="function"?f:ur)}function DM(a,l,u,f,p){if(Fm(a))throw Error(s(485));if(a=l.action,a!==null){var v={payload:p,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};Y.T!==null?u(!0):v.isTransition=!1,f(v),u=l.pending,u===null?(v.next=l.pending=v,UT(l,v)):(v.next=u.next,l.pending=u.next=v)}}function UT(a,l){var u=l.action,f=l.payload,p=a.state;if(l.isTransition){var v=Y.T,A={};Y.T=A;try{var D=u(p,f),q=Y.S;q!==null&&q(A,D),FT(a,l,D)}catch(X){jy(a,l,X)}finally{Y.T=v}}else try{v=u(p,f),FT(a,l,v)}catch(X){jy(a,l,X)}}function FT(a,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){BT(a,l,f)},function(f){return jy(a,l,f)}):BT(a,l,u)}function BT(a,l,u){l.status="fulfilled",l.value=u,zT(l),a.state=u,l=a.pending,l!==null&&(u=l.next,u===l?a.pending=null:(u=u.next,l.next=u,UT(a,u)))}function jy(a,l,u){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do l.status="rejected",l.reason=u,zT(l),l=l.next;while(l!==f)}a.action=null}function zT(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function HT(a,l){return l}function qT(a,l){if(lt){var u=Et.formState;if(u!==null){e:{var f=qe;if(lt){if(Bt){t:{for(var p=Bt,v=wi;p.nodeType!==8;){if(!v){p=null;break t}if(p=ii(p.nextSibling),p===null){p=null;break t}}v=p.data,p=v==="F!"||v==="F"?p:null}if(p){Bt=ii(p.nextSibling),f=p.data==="F!";break e}}Go(f)}f=!1}f&&(l=u[0])}}return u=os(),u.memoizedState=u.baseState=l,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:HT,lastRenderedState:l},u.queue=f,u=cw.bind(null,qe,f),f.dispatch=u,f=Ly(!1),v=Hy.bind(null,qe,!1,f.queue),f=os(),p={state:l,dispatch:null,action:a,pending:null},f.queue=p,u=DM.bind(null,qe,p,v,u),p.dispatch=u,f.memoizedState=a,[l,u,!1]}function GT(a){var l=an();return WT(l,_t,a)}function WT(a,l,u){if(l=Py(a,l,HT)[0],a=Lm(ur)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var f=Ih(l)}catch(A){throw A===xh?Dm:A}else f=l;l=an();var p=l.queue,v=p.dispatch;return u!==l.memoizedState&&(qe.flags|=2048,vc(9,jm(),kM.bind(null,p,u),null)),[f,v,a]}function kM(a,l){a.action=l}function $T(a){var l=an(),u=_t;if(u!==null)return WT(l,u,a);an(),l=l.memoizedState,u=an();var f=u.queue.dispatch;return u.memoizedState=a,[l,f,!1]}function vc(a,l,u,f){return a={tag:a,create:u,deps:f,inst:l,next:null},l=qe.updateQueue,l===null&&(l=Oy(),qe.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=a.next=a:(f=u.next,u.next=a,a.next=f,l.lastEffect=a),a}function jm(){return{destroy:void 0,resource:void 0}}function YT(){return an().memoizedState}function Um(a,l,u,f){var p=os();f=f===void 0?null:f,qe.flags|=a,p.memoizedState=vc(1|l,jm(),u,f)}function Rh(a,l,u,f){var p=an();f=f===void 0?null:f;var v=p.memoizedState.inst;_t!==null&&f!==null&&Ry(f,_t.memoizedState.deps)?p.memoizedState=vc(l,v,u,f):(qe.flags|=a,p.memoizedState=vc(1|l,v,u,f))}function KT(a,l){Um(8390656,8,a,l)}function QT(a,l){Rh(2048,8,a,l)}function XT(a,l){return Rh(4,2,a,l)}function ZT(a,l){return Rh(4,4,a,l)}function JT(a,l){if(typeof l=="function"){a=a();var u=l(a);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function ew(a,l,u){u=u!=null?u.concat([a]):null,Rh(4,4,JT.bind(null,l,a),u)}function Uy(){}function tw(a,l){var u=an();l=l===void 0?null:l;var f=u.memoizedState;return l!==null&&Ry(l,f[1])?f[0]:(u.memoizedState=[a,l],a)}function nw(a,l){var u=an();l=l===void 0?null:l;var f=u.memoizedState;if(l!==null&&Ry(l,f[1]))return f[0];if(f=a(),Ko){Ds(!0);try{a()}finally{Ds(!1)}}return u.memoizedState=[f,l],f}function Fy(a,l,u){return u===void 0||(ca&1073741824)!==0?a.memoizedState=l:(a.memoizedState=u,a=rS(),qe.lanes|=a,pa|=a,u)}function sw(a,l,u,f){return _s(u,l)?u:pc.current!==null?(a=Fy(a,u,f),_s(a,l)||(xn=!0),a):(ca&42)===0?(xn=!0,a.memoizedState=u):(a=rS(),qe.lanes|=a,pa|=a,l)}function iw(a,l,u,f,p){var v=ae.p;ae.p=v!==0&&8>v?v:8;var A=Y.T,D={};Y.T=D,Hy(a,!1,l,u);try{var q=p(),X=Y.S;if(X!==null&&X(D,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ie=RM(q,f);Ch(a,l,ie,Es(a))}else Ch(a,l,f,Es(a))}catch(oe){Ch(a,l,{then:function(){},status:"rejected",reason:oe},Es())}finally{ae.p=v,Y.T=A}}function OM(){}function By(a,l,u,f){if(a.tag!==5)throw Error(s(476));var p=rw(a).queue;iw(a,p,l,ge,u===null?OM:function(){return aw(a),u(f)})}function rw(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:ge},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:u},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function aw(a){var l=rw(a).next.queue;Ch(a,l,{},Es())}function zy(){return Un($h)}function ow(){return an().memoizedState}function lw(){return an().memoizedState}function MM(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var u=Es();a=oa(u);var f=la(l,a,u);f!==null&&(Ts(f,l,u),Th(f,l,u)),l={cache:yy()},a.payload=l;return}l=l.return}}function PM(a,l,u){var f=Es();u={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Fm(a)?uw(l,u):(u=ly(a,l,u,f),u!==null&&(Ts(u,a,f),hw(u,l,f)))}function cw(a,l,u){var f=Es();Ch(a,l,u,f)}function Ch(a,l,u,f){var p={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Fm(a))uw(l,p);else{var v=a.alternate;if(a.lanes===0&&(v===null||v.lanes===0)&&(v=l.lastRenderedReducer,v!==null))try{var A=l.lastRenderedState,D=v(A,u);if(p.hasEagerState=!0,p.eagerState=D,_s(D,A))return Tm(a,l,p,0),Et===null&&Em(),!1}catch{}finally{}if(u=ly(a,l,p,f),u!==null)return Ts(u,a,f),hw(u,l,f),!0}return!1}function Hy(a,l,u,f){if(f={lane:2,revertLane:x0(),action:f,hasEagerState:!1,eagerState:null,next:null},Fm(a)){if(l)throw Error(s(479))}else l=ly(a,u,f,2),l!==null&&Ts(l,a,2)}function Fm(a){var l=a.alternate;return a===qe||l!==null&&l===qe}function uw(a,l){_c=Mm=!0;var u=a.pending;u===null?l.next=l:(l.next=u.next,u.next=l),a.pending=l}function hw(a,l,u){if((u&4194048)!==0){var f=l.lanes;f&=a.pendingLanes,u|=f,l.lanes=u,Yr(a,u)}}var Bm={readContext:Un,use:Vm,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt},dw={readContext:Un,use:Vm,useCallback:function(a,l){return os().memoizedState=[a,l===void 0?null:l],a},useContext:Un,useEffect:KT,useImperativeHandle:function(a,l,u){u=u!=null?u.concat([a]):null,Um(4194308,4,JT.bind(null,l,a),u)},useLayoutEffect:function(a,l){return Um(4194308,4,a,l)},useInsertionEffect:function(a,l){Um(4,2,a,l)},useMemo:function(a,l){var u=os();l=l===void 0?null:l;var f=a();if(Ko){Ds(!0);try{a()}finally{Ds(!1)}}return u.memoizedState=[f,l],f},useReducer:function(a,l,u){var f=os();if(u!==void 0){var p=u(l);if(Ko){Ds(!0);try{u(l)}finally{Ds(!1)}}}else p=l;return f.memoizedState=f.baseState=p,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:p},f.queue=a,a=a.dispatch=PM.bind(null,qe,a),[f.memoizedState,a]},useRef:function(a){var l=os();return a={current:a},l.memoizedState=a},useState:function(a){a=Ly(a);var l=a.queue,u=cw.bind(null,qe,l);return l.dispatch=u,[a.memoizedState,u]},useDebugValue:Uy,useDeferredValue:function(a,l){var u=os();return Fy(u,a,l)},useTransition:function(){var a=Ly(!1);return a=iw.bind(null,qe,a.queue,!0,!1),os().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,u){var f=qe,p=os();if(lt){if(u===void 0)throw Error(s(407));u=u()}else{if(u=l(),Et===null)throw Error(s(349));(et&124)!==0||OT(f,l,u)}p.memoizedState=u;var v={value:u,getSnapshot:l};return p.queue=v,KT(PT.bind(null,f,v,a),[a]),f.flags|=2048,vc(9,jm(),MT.bind(null,f,v,u,l),null),u},useId:function(){var a=os(),l=Et.identifierPrefix;if(lt){var u=or,f=ar;u=(f&~(1<<32-Qn(f)-1)).toString(32)+u,l="«"+l+"R"+u,u=Pm++,0<u&&(l+="H"+u.toString(32)),l+="»"}else u=CM++,l="«"+l+"r"+u.toString(32)+"»";return a.memoizedState=l},useHostTransitionStatus:zy,useFormState:qT,useActionState:qT,useOptimistic:function(a){var l=os();l.memoizedState=l.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=Hy.bind(null,qe,!0,u),u.dispatch=l,[a,l]},useMemoCache:My,useCacheRefresh:function(){return os().memoizedState=MM.bind(null,qe)}},fw={readContext:Un,use:Vm,useCallback:tw,useContext:Un,useEffect:QT,useImperativeHandle:ew,useInsertionEffect:XT,useLayoutEffect:ZT,useMemo:nw,useReducer:Lm,useRef:YT,useState:function(){return Lm(ur)},useDebugValue:Uy,useDeferredValue:function(a,l){var u=an();return sw(u,_t.memoizedState,a,l)},useTransition:function(){var a=Lm(ur)[0],l=an().memoizedState;return[typeof a=="boolean"?a:Ih(a),l]},useSyncExternalStore:kT,useId:ow,useHostTransitionStatus:zy,useFormState:GT,useActionState:GT,useOptimistic:function(a,l){var u=an();return jT(u,_t,a,l)},useMemoCache:My,useCacheRefresh:lw},VM={readContext:Un,use:Vm,useCallback:tw,useContext:Un,useEffect:QT,useImperativeHandle:ew,useInsertionEffect:XT,useLayoutEffect:ZT,useMemo:nw,useReducer:Vy,useRef:YT,useState:function(){return Vy(ur)},useDebugValue:Uy,useDeferredValue:function(a,l){var u=an();return _t===null?Fy(u,a,l):sw(u,_t.memoizedState,a,l)},useTransition:function(){var a=Vy(ur)[0],l=an().memoizedState;return[typeof a=="boolean"?a:Ih(a),l]},useSyncExternalStore:kT,useId:ow,useHostTransitionStatus:zy,useFormState:$T,useActionState:$T,useOptimistic:function(a,l){var u=an();return _t!==null?jT(u,_t,a,l):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:My,useCacheRefresh:lw},bc=null,Nh=0;function zm(a){var l=Nh;return Nh+=1,bc===null&&(bc=[]),wT(bc,a,l)}function Dh(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function Hm(a,l){throw l.$$typeof===_?Error(s(525)):(a=Object.prototype.toString.call(l),Error(s(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function mw(a){var l=a._init;return l(a._payload)}function gw(a){function l(W,G){if(a){var K=W.deletions;K===null?(W.deletions=[G],W.flags|=16):K.push(G)}}function u(W,G){if(!a)return null;for(;G!==null;)l(W,G),G=G.sibling;return null}function f(W){for(var G=new Map;W!==null;)W.key!==null?G.set(W.key,W):G.set(W.index,W),W=W.sibling;return G}function p(W,G){return W=rr(W,G),W.index=0,W.sibling=null,W}function v(W,G,K){return W.index=K,a?(K=W.alternate,K!==null?(K=K.index,K<G?(W.flags|=67108866,G):K):(W.flags|=67108866,G)):(W.flags|=1048576,G)}function A(W){return a&&W.alternate===null&&(W.flags|=67108866),W}function D(W,G,K,re){return G===null||G.tag!==6?(G=uy(K,W.mode,re),G.return=W,G):(G=p(G,K),G.return=W,G)}function q(W,G,K,re){var we=K.type;return we===S?ie(W,G,K.props.children,re,K.key):G!==null&&(G.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===I&&mw(we)===G.type)?(G=p(G,K.props),Dh(G,K),G.return=W,G):(G=Sm(K.type,K.key,K.props,null,W.mode,re),Dh(G,K),G.return=W,G)}function X(W,G,K,re){return G===null||G.tag!==4||G.stateNode.containerInfo!==K.containerInfo||G.stateNode.implementation!==K.implementation?(G=hy(K,W.mode,re),G.return=W,G):(G=p(G,K.children||[]),G.return=W,G)}function ie(W,G,K,re,we){return G===null||G.tag!==7?(G=Bo(K,W.mode,re,we),G.return=W,G):(G=p(G,K),G.return=W,G)}function oe(W,G,K){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=uy(""+G,W.mode,K),G.return=W,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case b:return K=Sm(G.type,G.key,G.props,null,W.mode,K),Dh(K,G),K.return=W,K;case E:return G=hy(G,W.mode,K),G.return=W,G;case I:var re=G._init;return G=re(G._payload),oe(W,G,K)}if(be(G)||F(G))return G=Bo(G,W.mode,K,null),G.return=W,G;if(typeof G.then=="function")return oe(W,zm(G),K);if(G.$$typeof===M)return oe(W,Cm(W,G),K);Hm(W,G)}return null}function Z(W,G,K,re){var we=G!==null?G.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return we!==null?null:D(W,G,""+K,re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case b:return K.key===we?q(W,G,K,re):null;case E:return K.key===we?X(W,G,K,re):null;case I:return we=K._init,K=we(K._payload),Z(W,G,K,re)}if(be(K)||F(K))return we!==null?null:ie(W,G,K,re,null);if(typeof K.then=="function")return Z(W,G,zm(K),re);if(K.$$typeof===M)return Z(W,G,Cm(W,K),re);Hm(W,K)}return null}function J(W,G,K,re,we){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return W=W.get(K)||null,D(G,W,""+re,we);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case b:return W=W.get(re.key===null?K:re.key)||null,q(G,W,re,we);case E:return W=W.get(re.key===null?K:re.key)||null,X(G,W,re,we);case I:var Ge=re._init;return re=Ge(re._payload),J(W,G,K,re,we)}if(be(re)||F(re))return W=W.get(K)||null,ie(G,W,re,we,null);if(typeof re.then=="function")return J(W,G,K,zm(re),we);if(re.$$typeof===M)return J(W,G,K,Cm(G,re),we);Hm(G,re)}return null}function Pe(W,G,K,re){for(var we=null,Ge=null,De=G,Me=G=0,Tn=null;De!==null&&Me<K.length;Me++){De.index>Me?(Tn=De,De=null):Tn=De.sibling;var it=Z(W,De,K[Me],re);if(it===null){De===null&&(De=Tn);break}a&&De&&it.alternate===null&&l(W,De),G=v(it,G,Me),Ge===null?we=it:Ge.sibling=it,Ge=it,De=Tn}if(Me===K.length)return u(W,De),lt&&Ho(W,Me),we;if(De===null){for(;Me<K.length;Me++)De=oe(W,K[Me],re),De!==null&&(G=v(De,G,Me),Ge===null?we=De:Ge.sibling=De,Ge=De);return lt&&Ho(W,Me),we}for(De=f(De);Me<K.length;Me++)Tn=J(De,W,Me,K[Me],re),Tn!==null&&(a&&Tn.alternate!==null&&De.delete(Tn.key===null?Me:Tn.key),G=v(Tn,G,Me),Ge===null?we=Tn:Ge.sibling=Tn,Ge=Tn);return a&&De.forEach(function(Sa){return l(W,Sa)}),lt&&Ho(W,Me),we}function Oe(W,G,K,re){if(K==null)throw Error(s(151));for(var we=null,Ge=null,De=G,Me=G=0,Tn=null,it=K.next();De!==null&&!it.done;Me++,it=K.next()){De.index>Me?(Tn=De,De=null):Tn=De.sibling;var Sa=Z(W,De,it.value,re);if(Sa===null){De===null&&(De=Tn);break}a&&De&&Sa.alternate===null&&l(W,De),G=v(Sa,G,Me),Ge===null?we=Sa:Ge.sibling=Sa,Ge=Sa,De=Tn}if(it.done)return u(W,De),lt&&Ho(W,Me),we;if(De===null){for(;!it.done;Me++,it=K.next())it=oe(W,it.value,re),it!==null&&(G=v(it,G,Me),Ge===null?we=it:Ge.sibling=it,Ge=it);return lt&&Ho(W,Me),we}for(De=f(De);!it.done;Me++,it=K.next())it=J(De,W,Me,it.value,re),it!==null&&(a&&it.alternate!==null&&De.delete(it.key===null?Me:it.key),G=v(it,G,Me),Ge===null?we=it:Ge.sibling=it,Ge=it);return a&&De.forEach(function(LP){return l(W,LP)}),lt&&Ho(W,Me),we}function vt(W,G,K,re){if(typeof K=="object"&&K!==null&&K.type===S&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case b:e:{for(var we=K.key;G!==null;){if(G.key===we){if(we=K.type,we===S){if(G.tag===7){u(W,G.sibling),re=p(G,K.props.children),re.return=W,W=re;break e}}else if(G.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===I&&mw(we)===G.type){u(W,G.sibling),re=p(G,K.props),Dh(re,K),re.return=W,W=re;break e}u(W,G);break}else l(W,G);G=G.sibling}K.type===S?(re=Bo(K.props.children,W.mode,re,K.key),re.return=W,W=re):(re=Sm(K.type,K.key,K.props,null,W.mode,re),Dh(re,K),re.return=W,W=re)}return A(W);case E:e:{for(we=K.key;G!==null;){if(G.key===we)if(G.tag===4&&G.stateNode.containerInfo===K.containerInfo&&G.stateNode.implementation===K.implementation){u(W,G.sibling),re=p(G,K.children||[]),re.return=W,W=re;break e}else{u(W,G);break}else l(W,G);G=G.sibling}re=hy(K,W.mode,re),re.return=W,W=re}return A(W);case I:return we=K._init,K=we(K._payload),vt(W,G,K,re)}if(be(K))return Pe(W,G,K,re);if(F(K)){if(we=F(K),typeof we!="function")throw Error(s(150));return K=we.call(K),Oe(W,G,K,re)}if(typeof K.then=="function")return vt(W,G,zm(K),re);if(K.$$typeof===M)return vt(W,G,Cm(W,K),re);Hm(W,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,G!==null&&G.tag===6?(u(W,G.sibling),re=p(G,K),re.return=W,W=re):(u(W,G),re=uy(K,W.mode,re),re.return=W,W=re),A(W)):u(W,G)}return function(W,G,K,re){try{Nh=0;var we=vt(W,G,K,re);return bc=null,we}catch(De){if(De===xh||De===Dm)throw De;var Ge=ys(29,De,null,W.mode);return Ge.lanes=re,Ge.return=W,Ge}finally{}}}var xc=gw(!0),pw=gw(!1),Fs=se(null),Si=null;function ua(a){var l=a.alternate;fe(fn,fn.current&1),fe(Fs,a),Si===null&&(l===null||pc.current!==null||l.memoizedState!==null)&&(Si=a)}function _w(a){if(a.tag===22){if(fe(fn,fn.current),fe(Fs,a),Si===null){var l=a.alternate;l!==null&&l.memoizedState!==null&&(Si=a)}}else ha()}function ha(){fe(fn,fn.current),fe(Fs,Fs.current)}function hr(a){de(Fs),Si===a&&(Si=null),de(fn)}var fn=se(0);function qm(a){for(var l=a;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||O0(u)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function qy(a,l,u,f){l=a.memoizedState,u=u(f,l),u=u==null?l:m({},l,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var Gy={enqueueSetState:function(a,l,u){a=a._reactInternals;var f=Es(),p=oa(f);p.payload=l,u!=null&&(p.callback=u),l=la(a,p,f),l!==null&&(Ts(l,a,f),Th(l,a,f))},enqueueReplaceState:function(a,l,u){a=a._reactInternals;var f=Es(),p=oa(f);p.tag=1,p.payload=l,u!=null&&(p.callback=u),l=la(a,p,f),l!==null&&(Ts(l,a,f),Th(l,a,f))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var u=Es(),f=oa(u);f.tag=2,l!=null&&(f.callback=l),l=la(a,f,u),l!==null&&(Ts(l,a,u),Th(l,a,u))}};function yw(a,l,u,f,p,v,A){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,v,A):l.prototype&&l.prototype.isPureReactComponent?!fh(u,f)||!fh(p,v):!0}function vw(a,l,u,f){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,f),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,f),l.state!==a&&Gy.enqueueReplaceState(l,l.state,null)}function Qo(a,l){var u=l;if("ref"in l){u={};for(var f in l)f!=="ref"&&(u[f]=l[f])}if(a=a.defaultProps){u===l&&(u=m({},u));for(var p in a)u[p]===void 0&&(u[p]=a[p])}return u}var Gm=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function bw(a){Gm(a)}function xw(a){console.error(a)}function Ew(a){Gm(a)}function Wm(a,l){try{var u=a.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(f){setTimeout(function(){throw f})}}function Tw(a,l,u){try{var f=a.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Wy(a,l,u){return u=oa(u),u.tag=3,u.payload={element:null},u.callback=function(){Wm(a,l)},u}function ww(a){return a=oa(a),a.tag=3,a}function Sw(a,l,u,f){var p=u.type.getDerivedStateFromError;if(typeof p=="function"){var v=f.value;a.payload=function(){return p(v)},a.callback=function(){Tw(l,u,f)}}var A=u.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(a.callback=function(){Tw(l,u,f),typeof p!="function"&&(_a===null?_a=new Set([this]):_a.add(this));var D=f.stack;this.componentDidCatch(f.value,{componentStack:D!==null?D:""})})}function LM(a,l,u,f,p){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(l=u.alternate,l!==null&&yh(l,u,p,!0),u=Fs.current,u!==null){switch(u.tag){case 13:return Si===null?p0():u.alternate===null&&zt===0&&(zt=3),u.flags&=-257,u.flags|=65536,u.lanes=p,f===xy?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([f]):l.add(f),y0(a,f,p)),!1;case 22:return u.flags|=65536,f===xy?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([f]):u.add(f)),y0(a,f,p)),!1}throw Error(s(435,u.tag))}return y0(a,f,p),p0(),!1}if(lt)return l=Fs.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=p,f!==my&&(a=Error(s(422),{cause:f}),_h(Vs(a,u)))):(f!==my&&(l=Error(s(423),{cause:f}),_h(Vs(l,u))),a=a.current.alternate,a.flags|=65536,p&=-p,a.lanes|=p,f=Vs(f,u),p=Wy(a.stateNode,f,p),wy(a,p),zt!==4&&(zt=2)),!1;var v=Error(s(520),{cause:f});if(v=Vs(v,u),jh===null?jh=[v]:jh.push(v),zt!==4&&(zt=2),l===null)return!0;f=Vs(f,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,a=p&-p,u.lanes|=a,a=Wy(u.stateNode,f,a),wy(u,a),!1;case 1:if(l=u.type,v=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(_a===null||!_a.has(v))))return u.flags|=65536,p&=-p,u.lanes|=p,p=ww(p),Sw(p,a,u,f),wy(u,p),!1}u=u.return}while(u!==null);return!1}var Aw=Error(s(461)),xn=!1;function Cn(a,l,u,f){l.child=a===null?pw(l,null,u,f):xc(l,a.child,u,f)}function Iw(a,l,u,f,p){u=u.render;var v=l.ref;if("ref"in f){var A={};for(var D in f)D!=="ref"&&(A[D]=f[D])}else A=f;return $o(l),f=Cy(a,l,u,A,v,p),D=Ny(),a!==null&&!xn?(Dy(a,l,p),dr(a,l,p)):(lt&&D&&dy(l),l.flags|=1,Cn(a,l,f,p),l.child)}function Rw(a,l,u,f,p){if(a===null){var v=u.type;return typeof v=="function"&&!cy(v)&&v.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=v,Cw(a,l,v,f,p)):(a=Sm(u.type,null,f,l,l.mode,p),a.ref=l.ref,a.return=l,l.child=a)}if(v=a.child,!e0(a,p)){var A=v.memoizedProps;if(u=u.compare,u=u!==null?u:fh,u(A,f)&&a.ref===l.ref)return dr(a,l,p)}return l.flags|=1,a=rr(v,f),a.ref=l.ref,a.return=l,l.child=a}function Cw(a,l,u,f,p){if(a!==null){var v=a.memoizedProps;if(fh(v,f)&&a.ref===l.ref)if(xn=!1,l.pendingProps=f=v,e0(a,p))(a.flags&131072)!==0&&(xn=!0);else return l.lanes=a.lanes,dr(a,l,p)}return $y(a,l,u,f,p)}function Nw(a,l,u){var f=l.pendingProps,p=f.children,v=a!==null?a.memoizedState:null;if(f.mode==="hidden"){if((l.flags&128)!==0){if(f=v!==null?v.baseLanes|u:u,a!==null){for(p=l.child=a.child,v=0;p!==null;)v=v|p.lanes|p.childLanes,p=p.sibling;l.childLanes=v&~f}else l.childLanes=0,l.child=null;return Dw(a,l,f,u)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&Nm(l,v!==null?v.cachePool:null),v!==null?CT(l,v):Ay(),_w(l);else return l.lanes=l.childLanes=536870912,Dw(a,l,v!==null?v.baseLanes|u:u,u)}else v!==null?(Nm(l,v.cachePool),CT(l,v),ha(),l.memoizedState=null):(a!==null&&Nm(l,null),Ay(),ha());return Cn(a,l,p,u),l.child}function Dw(a,l,u,f){var p=by();return p=p===null?null:{parent:dn._currentValue,pool:p},l.memoizedState={baseLanes:u,cachePool:p},a!==null&&Nm(l,null),Ay(),_w(l),a!==null&&yh(a,l,f,!0),null}function $m(a,l){var u=l.ref;if(u===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(a===null||a.ref!==u)&&(l.flags|=4194816)}}function $y(a,l,u,f,p){return $o(l),u=Cy(a,l,u,f,void 0,p),f=Ny(),a!==null&&!xn?(Dy(a,l,p),dr(a,l,p)):(lt&&f&&dy(l),l.flags|=1,Cn(a,l,u,p),l.child)}function kw(a,l,u,f,p,v){return $o(l),l.updateQueue=null,u=DT(l,f,u,p),NT(a),f=Ny(),a!==null&&!xn?(Dy(a,l,v),dr(a,l,v)):(lt&&f&&dy(l),l.flags|=1,Cn(a,l,u,v),l.child)}function Ow(a,l,u,f,p){if($o(l),l.stateNode===null){var v=hc,A=u.contextType;typeof A=="object"&&A!==null&&(v=Un(A)),v=new u(f,v),l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Gy,l.stateNode=v,v._reactInternals=l,v=l.stateNode,v.props=f,v.state=l.memoizedState,v.refs={},Ey(l),A=u.contextType,v.context=typeof A=="object"&&A!==null?Un(A):hc,v.state=l.memoizedState,A=u.getDerivedStateFromProps,typeof A=="function"&&(qy(l,u,A,f),v.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&Gy.enqueueReplaceState(v,v.state,null),Sh(l,f,v,p),wh(),v.state=l.memoizedState),typeof v.componentDidMount=="function"&&(l.flags|=4194308),f=!0}else if(a===null){v=l.stateNode;var D=l.memoizedProps,q=Qo(u,D);v.props=q;var X=v.context,ie=u.contextType;A=hc,typeof ie=="object"&&ie!==null&&(A=Un(ie));var oe=u.getDerivedStateFromProps;ie=typeof oe=="function"||typeof v.getSnapshotBeforeUpdate=="function",D=l.pendingProps!==D,ie||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(D||X!==A)&&vw(l,v,f,A),aa=!1;var Z=l.memoizedState;v.state=Z,Sh(l,f,v,p),wh(),X=l.memoizedState,D||Z!==X||aa?(typeof oe=="function"&&(qy(l,u,oe,f),X=l.memoizedState),(q=aa||yw(l,u,q,f,Z,X,A))?(ie||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(l.flags|=4194308)):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=f,l.memoizedState=X),v.props=f,v.state=X,v.context=A,f=q):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),f=!1)}else{v=l.stateNode,Ty(a,l),A=l.memoizedProps,ie=Qo(u,A),v.props=ie,oe=l.pendingProps,Z=v.context,X=u.contextType,q=hc,typeof X=="object"&&X!==null&&(q=Un(X)),D=u.getDerivedStateFromProps,(X=typeof D=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==oe||Z!==q)&&vw(l,v,f,q),aa=!1,Z=l.memoizedState,v.state=Z,Sh(l,f,v,p),wh();var J=l.memoizedState;A!==oe||Z!==J||aa||a!==null&&a.dependencies!==null&&Rm(a.dependencies)?(typeof D=="function"&&(qy(l,u,D,f),J=l.memoizedState),(ie=aa||yw(l,u,ie,f,Z,J,q)||a!==null&&a.dependencies!==null&&Rm(a.dependencies))?(X||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(f,J,q),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(f,J,q)),typeof v.componentDidUpdate=="function"&&(l.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===a.memoizedProps&&Z===a.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===a.memoizedProps&&Z===a.memoizedState||(l.flags|=1024),l.memoizedProps=f,l.memoizedState=J),v.props=f,v.state=J,v.context=q,f=ie):(typeof v.componentDidUpdate!="function"||A===a.memoizedProps&&Z===a.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===a.memoizedProps&&Z===a.memoizedState||(l.flags|=1024),f=!1)}return v=f,$m(a,l),f=(l.flags&128)!==0,v||f?(v=l.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:v.render(),l.flags|=1,a!==null&&f?(l.child=xc(l,a.child,null,p),l.child=xc(l,null,u,p)):Cn(a,l,u,p),l.memoizedState=v.state,a=l.child):a=dr(a,l,p),a}function Mw(a,l,u,f){return ph(),l.flags|=256,Cn(a,l,u,f),l.child}var Yy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ky(a){return{baseLanes:a,cachePool:xT()}}function Qy(a,l,u){return a=a!==null?a.childLanes&~u:0,l&&(a|=Bs),a}function Pw(a,l,u){var f=l.pendingProps,p=!1,v=(l.flags&128)!==0,A;if((A=v)||(A=a!==null&&a.memoizedState===null?!1:(fn.current&2)!==0),A&&(p=!0,l.flags&=-129),A=(l.flags&32)!==0,l.flags&=-33,a===null){if(lt){if(p?ua(l):ha(),lt){var D=Bt,q;if(q=D){e:{for(q=D,D=wi;q.nodeType!==8;){if(!D){D=null;break e}if(q=ii(q.nextSibling),q===null){D=null;break e}}D=q}D!==null?(l.memoizedState={dehydrated:D,treeContext:zo!==null?{id:ar,overflow:or}:null,retryLane:536870912,hydrationErrors:null},q=ys(18,null,null,0),q.stateNode=D,q.return=l,l.child=q,es=l,Bt=null,q=!0):q=!1}q||Go(l)}if(D=l.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return O0(D)?l.lanes=32:l.lanes=536870912,null;hr(l)}return D=f.children,f=f.fallback,p?(ha(),p=l.mode,D=Ym({mode:"hidden",children:D},p),f=Bo(f,p,u,null),D.return=l,f.return=l,D.sibling=f,l.child=D,p=l.child,p.memoizedState=Ky(u),p.childLanes=Qy(a,A,u),l.memoizedState=Yy,f):(ua(l),Xy(l,D))}if(q=a.memoizedState,q!==null&&(D=q.dehydrated,D!==null)){if(v)l.flags&256?(ua(l),l.flags&=-257,l=Zy(a,l,u)):l.memoizedState!==null?(ha(),l.child=a.child,l.flags|=128,l=null):(ha(),p=f.fallback,D=l.mode,f=Ym({mode:"visible",children:f.children},D),p=Bo(p,D,u,null),p.flags|=2,f.return=l,p.return=l,f.sibling=p,l.child=f,xc(l,a.child,null,u),f=l.child,f.memoizedState=Ky(u),f.childLanes=Qy(a,A,u),l.memoizedState=Yy,l=p);else if(ua(l),O0(D)){if(A=D.nextSibling&&D.nextSibling.dataset,A)var X=A.dgst;A=X,f=Error(s(419)),f.stack="",f.digest=A,_h({value:f,source:null,stack:null}),l=Zy(a,l,u)}else if(xn||yh(a,l,u,!1),A=(u&a.childLanes)!==0,xn||A){if(A=Et,A!==null&&(f=u&-u,f=(f&42)!==0?1:Qu(f),f=(f&(A.suspendedLanes|u))!==0?0:f,f!==0&&f!==q.retryLane))throw q.retryLane=f,uc(a,f),Ts(A,a,f),Aw;D.data==="$?"||p0(),l=Zy(a,l,u)}else D.data==="$?"?(l.flags|=192,l.child=a.child,l=null):(a=q.treeContext,Bt=ii(D.nextSibling),es=l,lt=!0,qo=null,wi=!1,a!==null&&(js[Us++]=ar,js[Us++]=or,js[Us++]=zo,ar=a.id,or=a.overflow,zo=l),l=Xy(l,f.children),l.flags|=4096);return l}return p?(ha(),p=f.fallback,D=l.mode,q=a.child,X=q.sibling,f=rr(q,{mode:"hidden",children:f.children}),f.subtreeFlags=q.subtreeFlags&65011712,X!==null?p=rr(X,p):(p=Bo(p,D,u,null),p.flags|=2),p.return=l,f.return=l,f.sibling=p,l.child=f,f=p,p=l.child,D=a.child.memoizedState,D===null?D=Ky(u):(q=D.cachePool,q!==null?(X=dn._currentValue,q=q.parent!==X?{parent:X,pool:X}:q):q=xT(),D={baseLanes:D.baseLanes|u,cachePool:q}),p.memoizedState=D,p.childLanes=Qy(a,A,u),l.memoizedState=Yy,f):(ua(l),u=a.child,a=u.sibling,u=rr(u,{mode:"visible",children:f.children}),u.return=l,u.sibling=null,a!==null&&(A=l.deletions,A===null?(l.deletions=[a],l.flags|=16):A.push(a)),l.child=u,l.memoizedState=null,u)}function Xy(a,l){return l=Ym({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function Ym(a,l){return a=ys(22,a,null,l),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Zy(a,l,u){return xc(l,a.child,null,u),a=Xy(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function Vw(a,l,u){a.lanes|=l;var f=a.alternate;f!==null&&(f.lanes|=l),py(a.return,l,u)}function Jy(a,l,u,f,p){var v=a.memoizedState;v===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:p}:(v.isBackwards=l,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=u,v.tailMode=p)}function Lw(a,l,u){var f=l.pendingProps,p=f.revealOrder,v=f.tail;if(Cn(a,l,f.children,u),f=fn.current,(f&2)!==0)f=f&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Vw(a,u,l);else if(a.tag===19)Vw(a,u,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}switch(fe(fn,f),p){case"forwards":for(u=l.child,p=null;u!==null;)a=u.alternate,a!==null&&qm(a)===null&&(p=u),u=u.sibling;u=p,u===null?(p=l.child,l.child=null):(p=u.sibling,u.sibling=null),Jy(l,!1,p,u,v);break;case"backwards":for(u=null,p=l.child,l.child=null;p!==null;){if(a=p.alternate,a!==null&&qm(a)===null){l.child=p;break}a=p.sibling,p.sibling=u,u=p,p=a}Jy(l,!0,u,null,v);break;case"together":Jy(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function dr(a,l,u){if(a!==null&&(l.dependencies=a.dependencies),pa|=l.lanes,(u&l.childLanes)===0)if(a!==null){if(yh(a,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(s(153));if(l.child!==null){for(a=l.child,u=rr(a,a.pendingProps),l.child=u,u.return=l;a.sibling!==null;)a=a.sibling,u=u.sibling=rr(a,a.pendingProps),u.return=l;u.sibling=null}return l.child}function e0(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&Rm(a)))}function jM(a,l,u){switch(l.tag){case 3:nt(l,l.stateNode.containerInfo),ra(l,dn,a.memoizedState.cache),ph();break;case 27:case 5:Br(l);break;case 4:nt(l,l.stateNode.containerInfo);break;case 10:ra(l,l.type,l.memoizedProps.value);break;case 13:var f=l.memoizedState;if(f!==null)return f.dehydrated!==null?(ua(l),l.flags|=128,null):(u&l.child.childLanes)!==0?Pw(a,l,u):(ua(l),a=dr(a,l,u),a!==null?a.sibling:null);ua(l);break;case 19:var p=(a.flags&128)!==0;if(f=(u&l.childLanes)!==0,f||(yh(a,l,u,!1),f=(u&l.childLanes)!==0),p){if(f)return Lw(a,l,u);l.flags|=128}if(p=l.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),fe(fn,fn.current),f)break;return null;case 22:case 23:return l.lanes=0,Nw(a,l,u);case 24:ra(l,dn,a.memoizedState.cache)}return dr(a,l,u)}function jw(a,l,u){if(a!==null)if(a.memoizedProps!==l.pendingProps)xn=!0;else{if(!e0(a,u)&&(l.flags&128)===0)return xn=!1,jM(a,l,u);xn=(a.flags&131072)!==0}else xn=!1,lt&&(l.flags&1048576)!==0&&mT(l,Im,l.index);switch(l.lanes=0,l.tag){case 16:e:{a=l.pendingProps;var f=l.elementType,p=f._init;if(f=p(f._payload),l.type=f,typeof f=="function")cy(f)?(a=Qo(f,a),l.tag=1,l=Ow(null,l,f,a,u)):(l.tag=0,l=$y(null,l,f,a,u));else{if(f!=null){if(p=f.$$typeof,p===H){l.tag=11,l=Iw(null,l,f,a,u);break e}else if(p===C){l.tag=14,l=Rw(null,l,f,a,u);break e}}throw l=ne(f)||f,Error(s(306,l,""))}}return l;case 0:return $y(a,l,l.type,l.pendingProps,u);case 1:return f=l.type,p=Qo(f,l.pendingProps),Ow(a,l,f,p,u);case 3:e:{if(nt(l,l.stateNode.containerInfo),a===null)throw Error(s(387));f=l.pendingProps;var v=l.memoizedState;p=v.element,Ty(a,l),Sh(l,f,null,u);var A=l.memoizedState;if(f=A.cache,ra(l,dn,f),f!==v.cache&&_y(l,[dn],u,!0),wh(),f=A.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:A.cache},l.updateQueue.baseState=v,l.memoizedState=v,l.flags&256){l=Mw(a,l,f,u);break e}else if(f!==p){p=Vs(Error(s(424)),l),_h(p),l=Mw(a,l,f,u);break e}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Bt=ii(a.firstChild),es=l,lt=!0,qo=null,wi=!0,u=pw(l,null,f,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(ph(),f===p){l=dr(a,l,u);break e}Cn(a,l,f,u)}l=l.child}return l;case 26:return $m(a,l),a===null?(u=zS(l.type,null,l.pendingProps,null))?l.memoizedState=u:lt||(u=l.type,a=l.pendingProps,f=lg(Ie.current).createElement(u),f[Kt]=l,f[Rn]=a,Dn(f,u,a),Qt(f),l.stateNode=f):l.memoizedState=zS(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return Br(l),a===null&&lt&&(f=l.stateNode=US(l.type,l.pendingProps,Ie.current),es=l,wi=!0,p=Bt,ba(l.type)?(M0=p,Bt=ii(f.firstChild)):Bt=p),Cn(a,l,l.pendingProps.children,u),$m(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&lt&&((p=f=Bt)&&(f=dP(f,l.type,l.pendingProps,wi),f!==null?(l.stateNode=f,es=l,Bt=ii(f.firstChild),wi=!1,p=!0):p=!1),p||Go(l)),Br(l),p=l.type,v=l.pendingProps,A=a!==null?a.memoizedProps:null,f=v.children,N0(p,v)?f=null:A!==null&&N0(p,A)&&(l.flags|=32),l.memoizedState!==null&&(p=Cy(a,l,NM,null,null,u),$h._currentValue=p),$m(a,l),Cn(a,l,f,u),l.child;case 6:return a===null&&lt&&((a=u=Bt)&&(u=fP(u,l.pendingProps,wi),u!==null?(l.stateNode=u,es=l,Bt=null,a=!0):a=!1),a||Go(l)),null;case 13:return Pw(a,l,u);case 4:return nt(l,l.stateNode.containerInfo),f=l.pendingProps,a===null?l.child=xc(l,null,f,u):Cn(a,l,f,u),l.child;case 11:return Iw(a,l,l.type,l.pendingProps,u);case 7:return Cn(a,l,l.pendingProps,u),l.child;case 8:return Cn(a,l,l.pendingProps.children,u),l.child;case 12:return Cn(a,l,l.pendingProps.children,u),l.child;case 10:return f=l.pendingProps,ra(l,l.type,f.value),Cn(a,l,f.children,u),l.child;case 9:return p=l.type._context,f=l.pendingProps.children,$o(l),p=Un(p),f=f(p),l.flags|=1,Cn(a,l,f,u),l.child;case 14:return Rw(a,l,l.type,l.pendingProps,u);case 15:return Cw(a,l,l.type,l.pendingProps,u);case 19:return Lw(a,l,u);case 31:return f=l.pendingProps,u=l.mode,f={mode:f.mode,children:f.children},a===null?(u=Ym(f,u),u.ref=l.ref,l.child=u,u.return=l,l=u):(u=rr(a.child,f),u.ref=l.ref,l.child=u,u.return=l,l=u),l;case 22:return Nw(a,l,u);case 24:return $o(l),f=Un(dn),a===null?(p=by(),p===null&&(p=Et,v=yy(),p.pooledCache=v,v.refCount++,v!==null&&(p.pooledCacheLanes|=u),p=v),l.memoizedState={parent:f,cache:p},Ey(l),ra(l,dn,p)):((a.lanes&u)!==0&&(Ty(a,l),Sh(l,null,null,u),wh()),p=a.memoizedState,v=l.memoizedState,p.parent!==f?(p={parent:f,cache:f},l.memoizedState=p,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=p),ra(l,dn,f)):(f=v.cache,ra(l,dn,f),f!==p.cache&&_y(l,[dn],u,!0))),Cn(a,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(s(156,l.tag))}function fr(a){a.flags|=4}function Uw(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!$S(l)){if(l=Fs.current,l!==null&&((et&4194048)===et?Si!==null:(et&62914560)!==et&&(et&536870912)===0||l!==Si))throw Eh=xy,ET;a.flags|=8192}}function Km(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?Wr():536870912,a.lanes|=l,Sc|=l)}function kh(a,l){if(!lt)switch(a.tailMode){case"hidden":l=a.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function jt(a){var l=a.alternate!==null&&a.alternate.child===a.child,u=0,f=0;if(l)for(var p=a.child;p!==null;)u|=p.lanes|p.childLanes,f|=p.subtreeFlags&65011712,f|=p.flags&65011712,p.return=a,p=p.sibling;else for(p=a.child;p!==null;)u|=p.lanes|p.childLanes,f|=p.subtreeFlags,f|=p.flags,p.return=a,p=p.sibling;return a.subtreeFlags|=f,a.childLanes=u,l}function UM(a,l,u){var f=l.pendingProps;switch(fy(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(l),null;case 1:return jt(l),null;case 3:return u=l.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),cr(dn),$t(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(gh(l)?fr(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,_T())),jt(l),null;case 26:return u=l.memoizedState,a===null?(fr(l),u!==null?(jt(l),Uw(l,u)):(jt(l),l.flags&=-16777217)):u?u!==a.memoizedState?(fr(l),jt(l),Uw(l,u)):(jt(l),l.flags&=-16777217):(a.memoizedProps!==f&&fr(l),jt(l),l.flags&=-16777217),null;case 27:mi(l),u=Ie.current;var p=l.type;if(a!==null&&l.stateNode!=null)a.memoizedProps!==f&&fr(l);else{if(!f){if(l.stateNode===null)throw Error(s(166));return jt(l),null}a=ve.current,gh(l)?gT(l):(a=US(p,f,u),l.stateNode=a,fr(l))}return jt(l),null;case 5:if(mi(l),u=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==f&&fr(l);else{if(!f){if(l.stateNode===null)throw Error(s(166));return jt(l),null}if(a=ve.current,gh(l))gT(l);else{switch(p=lg(Ie.current),a){case 1:a=p.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:a=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":a=p.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":a=p.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":a=p.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof f.is=="string"?p.createElement("select",{is:f.is}):p.createElement("select"),f.multiple?a.multiple=!0:f.size&&(a.size=f.size);break;default:a=typeof f.is=="string"?p.createElement(u,{is:f.is}):p.createElement(u)}}a[Kt]=l,a[Rn]=f;e:for(p=l.child;p!==null;){if(p.tag===5||p.tag===6)a.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break e;for(;p.sibling===null;){if(p.return===null||p.return===l)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}l.stateNode=a;e:switch(Dn(a,u,f),u){case"button":case"input":case"select":case"textarea":a=!!f.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&fr(l)}}return jt(l),l.flags&=-16777217,null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==f&&fr(l);else{if(typeof f!="string"&&l.stateNode===null)throw Error(s(166));if(a=Ie.current,gh(l)){if(a=l.stateNode,u=l.memoizedProps,f=null,p=es,p!==null)switch(p.tag){case 27:case 5:f=p.memoizedProps}a[Kt]=l,a=!!(a.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||kS(a.nodeValue,u)),a||Go(l)}else a=lg(a).createTextNode(f),a[Kt]=l,l.stateNode=a}return jt(l),null;case 13:if(f=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(p=gh(l),f!==null&&f.dehydrated!==null){if(a===null){if(!p)throw Error(s(318));if(p=l.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[Kt]=l}else ph(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;jt(l),p=!1}else p=_T(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=p),p=!0;if(!p)return l.flags&256?(hr(l),l):(hr(l),null)}if(hr(l),(l.flags&128)!==0)return l.lanes=u,l;if(u=f!==null,a=a!==null&&a.memoizedState!==null,u){f=l.child,p=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(p=f.alternate.memoizedState.cachePool.pool);var v=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(v=f.memoizedState.cachePool.pool),v!==p&&(f.flags|=2048)}return u!==a&&u&&(l.child.flags|=8192),Km(l,l.updateQueue),jt(l),null;case 4:return $t(),a===null&&S0(l.stateNode.containerInfo),jt(l),null;case 10:return cr(l.type),jt(l),null;case 19:if(de(fn),p=l.memoizedState,p===null)return jt(l),null;if(f=(l.flags&128)!==0,v=p.rendering,v===null)if(f)kh(p,!1);else{if(zt!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(v=qm(a),v!==null){for(l.flags|=128,kh(p,!1),a=v.updateQueue,l.updateQueue=a,Km(l,a),l.subtreeFlags=0,a=u,u=l.child;u!==null;)fT(u,a),u=u.sibling;return fe(fn,fn.current&1|2),l.child}a=a.sibling}p.tail!==null&&as()>Zm&&(l.flags|=128,f=!0,kh(p,!1),l.lanes=4194304)}else{if(!f)if(a=qm(v),a!==null){if(l.flags|=128,f=!0,a=a.updateQueue,l.updateQueue=a,Km(l,a),kh(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!lt)return jt(l),null}else 2*as()-p.renderingStartTime>Zm&&u!==536870912&&(l.flags|=128,f=!0,kh(p,!1),l.lanes=4194304);p.isBackwards?(v.sibling=l.child,l.child=v):(a=p.last,a!==null?a.sibling=v:l.child=v,p.last=v)}return p.tail!==null?(l=p.tail,p.rendering=l,p.tail=l.sibling,p.renderingStartTime=as(),l.sibling=null,a=fn.current,fe(fn,f?a&1|2:a&1),l):(jt(l),null);case 22:case 23:return hr(l),Iy(),f=l.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(l.flags|=8192):f&&(l.flags|=8192),f?(u&536870912)!==0&&(l.flags&128)===0&&(jt(l),l.subtreeFlags&6&&(l.flags|=8192)):jt(l),u=l.updateQueue,u!==null&&Km(l,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==u&&(l.flags|=2048),a!==null&&de(Yo),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),cr(dn),jt(l),null;case 25:return null;case 30:return null}throw Error(s(156,l.tag))}function FM(a,l){switch(fy(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return cr(dn),$t(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return mi(l),null;case 13:if(hr(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(s(340));ph()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return de(fn),null;case 4:return $t(),null;case 10:return cr(l.type),null;case 22:case 23:return hr(l),Iy(),a!==null&&de(Yo),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return cr(dn),null;case 25:return null;default:return null}}function Fw(a,l){switch(fy(l),l.tag){case 3:cr(dn),$t();break;case 26:case 27:case 5:mi(l);break;case 4:$t();break;case 13:hr(l);break;case 19:de(fn);break;case 10:cr(l.type);break;case 22:case 23:hr(l),Iy(),a!==null&&de(Yo);break;case 24:cr(dn)}}function Oh(a,l){try{var u=l.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&a)===a){f=void 0;var v=u.create,A=u.inst;f=v(),A.destroy=f}u=u.next}while(u!==p)}}catch(D){bt(l,l.return,D)}}function da(a,l,u){try{var f=l.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var v=p.next;f=v;do{if((f.tag&a)===a){var A=f.inst,D=A.destroy;if(D!==void 0){A.destroy=void 0,p=l;var q=u,X=D;try{X()}catch(ie){bt(p,q,ie)}}}f=f.next}while(f!==v)}}catch(ie){bt(l,l.return,ie)}}function Bw(a){var l=a.updateQueue;if(l!==null){var u=a.stateNode;try{RT(l,u)}catch(f){bt(a,a.return,f)}}}function zw(a,l,u){u.props=Qo(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(f){bt(a,l,f)}}function Mh(a,l){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof u=="function"?a.refCleanup=u(f):u.current=f}}catch(p){bt(a,l,p)}}function Ai(a,l){var u=a.ref,f=a.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(p){bt(a,l,p)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(p){bt(a,l,p)}else u.current=null}function Hw(a){var l=a.type,u=a.memoizedProps,f=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(p){bt(a,a.return,p)}}function t0(a,l,u){try{var f=a.stateNode;oP(f,a.type,u,l),f[Rn]=l}catch(p){bt(a,a.return,p)}}function qw(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&ba(a.type)||a.tag===4}function n0(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||qw(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&ba(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function s0(a,l,u){var f=a.tag;if(f===5||f===6)a=a.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(a),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=og));else if(f!==4&&(f===27&&ba(a.type)&&(u=a.stateNode,l=null),a=a.child,a!==null))for(s0(a,l,u),a=a.sibling;a!==null;)s0(a,l,u),a=a.sibling}function Qm(a,l,u){var f=a.tag;if(f===5||f===6)a=a.stateNode,l?u.insertBefore(a,l):u.appendChild(a);else if(f!==4&&(f===27&&ba(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(Qm(a,l,u),a=a.sibling;a!==null;)Qm(a,l,u),a=a.sibling}function Gw(a){var l=a.stateNode,u=a.memoizedProps;try{for(var f=a.type,p=l.attributes;p.length;)l.removeAttributeNode(p[0]);Dn(l,f,u),l[Kt]=a,l[Rn]=u}catch(v){bt(a,a.return,v)}}var mr=!1,Jt=!1,i0=!1,Ww=typeof WeakSet=="function"?WeakSet:Set,En=null;function BM(a,l){if(a=a.containerInfo,R0=mg,a=sT(a),ny(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var p=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var A=0,D=-1,q=-1,X=0,ie=0,oe=a,Z=null;t:for(;;){for(var J;oe!==u||p!==0&&oe.nodeType!==3||(D=A+p),oe!==v||f!==0&&oe.nodeType!==3||(q=A+f),oe.nodeType===3&&(A+=oe.nodeValue.length),(J=oe.firstChild)!==null;)Z=oe,oe=J;for(;;){if(oe===a)break t;if(Z===u&&++X===p&&(D=A),Z===v&&++ie===f&&(q=A),(J=oe.nextSibling)!==null)break;oe=Z,Z=oe.parentNode}oe=J}u=D===-1||q===-1?null:{start:D,end:q}}else u=null}u=u||{start:0,end:0}}else u=null;for(C0={focusedElem:a,selectionRange:u},mg=!1,En=l;En!==null;)if(l=En,a=l.child,(l.subtreeFlags&1024)!==0&&a!==null)a.return=l,En=a;else for(;En!==null;){switch(l=En,v=l.alternate,a=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&v!==null){a=void 0,u=l,p=v.memoizedProps,v=v.memoizedState,f=u.stateNode;try{var Pe=Qo(u.type,p,u.elementType===u.type);a=f.getSnapshotBeforeUpdate(Pe,v),f.__reactInternalSnapshotBeforeUpdate=a}catch(Oe){bt(u,u.return,Oe)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,u=a.nodeType,u===9)k0(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":k0(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(s(163))}if(a=l.sibling,a!==null){a.return=l.return,En=a;break}En=l.return}}function $w(a,l,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:fa(a,u),f&4&&Oh(5,u);break;case 1:if(fa(a,u),f&4)if(a=u.stateNode,l===null)try{a.componentDidMount()}catch(A){bt(u,u.return,A)}else{var p=Qo(u.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(p,l,a.__reactInternalSnapshotBeforeUpdate)}catch(A){bt(u,u.return,A)}}f&64&&Bw(u),f&512&&Mh(u,u.return);break;case 3:if(fa(a,u),f&64&&(a=u.updateQueue,a!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{RT(a,l)}catch(A){bt(u,u.return,A)}}break;case 27:l===null&&f&4&&Gw(u);case 26:case 5:fa(a,u),l===null&&f&4&&Hw(u),f&512&&Mh(u,u.return);break;case 12:fa(a,u);break;case 13:fa(a,u),f&4&&Qw(a,u),f&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=QM.bind(null,u),mP(a,u))));break;case 22:if(f=u.memoizedState!==null||mr,!f){l=l!==null&&l.memoizedState!==null||Jt,p=mr;var v=Jt;mr=f,(Jt=l)&&!v?ma(a,u,(u.subtreeFlags&8772)!==0):fa(a,u),mr=p,Jt=v}break;case 30:break;default:fa(a,u)}}function Yw(a){var l=a.alternate;l!==null&&(a.alternate=null,Yw(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&Kl(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Nt=null,ls=!1;function gr(a,l,u){for(u=u.child;u!==null;)Kw(a,l,u),u=u.sibling}function Kw(a,l,u){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(Hr,u)}catch{}switch(u.tag){case 26:Jt||Ai(u,l),gr(a,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Jt||Ai(u,l);var f=Nt,p=ls;ba(u.type)&&(Nt=u.stateNode,ls=!1),gr(a,l,u),Hh(u.stateNode),Nt=f,ls=p;break;case 5:Jt||Ai(u,l);case 6:if(f=Nt,p=ls,Nt=null,gr(a,l,u),Nt=f,ls=p,Nt!==null)if(ls)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(u.stateNode)}catch(v){bt(u,l,v)}else try{Nt.removeChild(u.stateNode)}catch(v){bt(u,l,v)}break;case 18:Nt!==null&&(ls?(a=Nt,LS(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),Xh(a)):LS(Nt,u.stateNode));break;case 4:f=Nt,p=ls,Nt=u.stateNode.containerInfo,ls=!0,gr(a,l,u),Nt=f,ls=p;break;case 0:case 11:case 14:case 15:Jt||da(2,u,l),Jt||da(4,u,l),gr(a,l,u);break;case 1:Jt||(Ai(u,l),f=u.stateNode,typeof f.componentWillUnmount=="function"&&zw(u,l,f)),gr(a,l,u);break;case 21:gr(a,l,u);break;case 22:Jt=(f=Jt)||u.memoizedState!==null,gr(a,l,u),Jt=f;break;default:gr(a,l,u)}}function Qw(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Xh(a)}catch(u){bt(l,l.return,u)}}function zM(a){switch(a.tag){case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new Ww),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new Ww),l;default:throw Error(s(435,a.tag))}}function r0(a,l){var u=zM(a);l.forEach(function(f){var p=XM.bind(null,a,f);u.has(f)||(u.add(f),f.then(p,p))})}function vs(a,l){var u=l.deletions;if(u!==null)for(var f=0;f<u.length;f++){var p=u[f],v=a,A=l,D=A;e:for(;D!==null;){switch(D.tag){case 27:if(ba(D.type)){Nt=D.stateNode,ls=!1;break e}break;case 5:Nt=D.stateNode,ls=!1;break e;case 3:case 4:Nt=D.stateNode.containerInfo,ls=!0;break e}D=D.return}if(Nt===null)throw Error(s(160));Kw(v,A,p),Nt=null,ls=!1,v=p.alternate,v!==null&&(v.return=null),p.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)Xw(l,a),l=l.sibling}var si=null;function Xw(a,l){var u=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:vs(l,a),bs(a),f&4&&(da(3,a,a.return),Oh(3,a),da(5,a,a.return));break;case 1:vs(l,a),bs(a),f&512&&(Jt||u===null||Ai(u,u.return)),f&64&&mr&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var p=si;if(vs(l,a),bs(a),f&512&&(Jt||u===null||Ai(u,u.return)),f&4){var v=u!==null?u.memoizedState:null;if(f=a.memoizedState,u===null)if(f===null)if(a.stateNode===null){e:{f=a.type,u=a.memoizedProps,p=p.ownerDocument||p;t:switch(f){case"title":v=p.getElementsByTagName("title")[0],(!v||v[Kr]||v[Kt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=p.createElement(f),p.head.insertBefore(v,p.querySelector("head > title"))),Dn(v,f,u),v[Kt]=a,Qt(v),f=v;break e;case"link":var A=GS("link","href",p).get(f+(u.href||""));if(A){for(var D=0;D<A.length;D++)if(v=A[D],v.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&v.getAttribute("rel")===(u.rel==null?null:u.rel)&&v.getAttribute("title")===(u.title==null?null:u.title)&&v.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){A.splice(D,1);break t}}v=p.createElement(f),Dn(v,f,u),p.head.appendChild(v);break;case"meta":if(A=GS("meta","content",p).get(f+(u.content||""))){for(D=0;D<A.length;D++)if(v=A[D],v.getAttribute("content")===(u.content==null?null:""+u.content)&&v.getAttribute("name")===(u.name==null?null:u.name)&&v.getAttribute("property")===(u.property==null?null:u.property)&&v.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&v.getAttribute("charset")===(u.charSet==null?null:u.charSet)){A.splice(D,1);break t}}v=p.createElement(f),Dn(v,f,u),p.head.appendChild(v);break;default:throw Error(s(468,f))}v[Kt]=a,Qt(v),f=v}a.stateNode=f}else WS(p,a.type,a.stateNode);else a.stateNode=qS(p,f,a.memoizedProps);else v!==f?(v===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):v.count--,f===null?WS(p,a.type,a.stateNode):qS(p,f,a.memoizedProps)):f===null&&a.stateNode!==null&&t0(a,a.memoizedProps,u.memoizedProps)}break;case 27:vs(l,a),bs(a),f&512&&(Jt||u===null||Ai(u,u.return)),u!==null&&f&4&&t0(a,a.memoizedProps,u.memoizedProps);break;case 5:if(vs(l,a),bs(a),f&512&&(Jt||u===null||Ai(u,u.return)),a.flags&32){p=a.stateNode;try{Ms(p,"")}catch(J){bt(a,a.return,J)}}f&4&&a.stateNode!=null&&(p=a.memoizedProps,t0(a,p,u!==null?u.memoizedProps:p)),f&1024&&(i0=!0);break;case 6:if(vs(l,a),bs(a),f&4){if(a.stateNode===null)throw Error(s(162));f=a.memoizedProps,u=a.stateNode;try{u.nodeValue=f}catch(J){bt(a,a.return,J)}}break;case 3:if(hg=null,p=si,si=cg(l.containerInfo),vs(l,a),si=p,bs(a),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Xh(l.containerInfo)}catch(J){bt(a,a.return,J)}i0&&(i0=!1,Zw(a));break;case 4:f=si,si=cg(a.stateNode.containerInfo),vs(l,a),bs(a),si=f;break;case 12:vs(l,a),bs(a);break;case 13:vs(l,a),bs(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(h0=as()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,r0(a,f)));break;case 22:p=a.memoizedState!==null;var q=u!==null&&u.memoizedState!==null,X=mr,ie=Jt;if(mr=X||p,Jt=ie||q,vs(l,a),Jt=ie,mr=X,bs(a),f&8192)e:for(l=a.stateNode,l._visibility=p?l._visibility&-2:l._visibility|1,p&&(u===null||q||mr||Jt||Xo(a)),u=null,l=a;;){if(l.tag===5||l.tag===26){if(u===null){q=u=l;try{if(v=q.stateNode,p)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{D=q.stateNode;var oe=q.memoizedProps.style,Z=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;D.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(J){bt(q,q.return,J)}}}else if(l.tag===6){if(u===null){q=l;try{q.stateNode.nodeValue=p?"":q.memoizedProps}catch(J){bt(q,q.return,J)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}f&4&&(f=a.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,r0(a,u))));break;case 19:vs(l,a),bs(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,r0(a,f)));break;case 30:break;case 21:break;default:vs(l,a),bs(a)}}function bs(a){var l=a.flags;if(l&2){try{for(var u,f=a.return;f!==null;){if(qw(f)){u=f;break}f=f.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var p=u.stateNode,v=n0(a);Qm(a,v,p);break;case 5:var A=u.stateNode;u.flags&32&&(Ms(A,""),u.flags&=-33);var D=n0(a);Qm(a,D,A);break;case 3:case 4:var q=u.stateNode.containerInfo,X=n0(a);s0(a,X,q);break;default:throw Error(s(161))}}catch(ie){bt(a,a.return,ie)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function Zw(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;Zw(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function fa(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)$w(a,l.alternate,l),l=l.sibling}function Xo(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:da(4,l,l.return),Xo(l);break;case 1:Ai(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&zw(l,l.return,u),Xo(l);break;case 27:Hh(l.stateNode);case 26:case 5:Ai(l,l.return),Xo(l);break;case 22:l.memoizedState===null&&Xo(l);break;case 30:Xo(l);break;default:Xo(l)}a=a.sibling}}function ma(a,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var f=l.alternate,p=a,v=l,A=v.flags;switch(v.tag){case 0:case 11:case 15:ma(p,v,u),Oh(4,v);break;case 1:if(ma(p,v,u),f=v,p=f.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(X){bt(f,f.return,X)}if(f=v,p=f.updateQueue,p!==null){var D=f.stateNode;try{var q=p.shared.hiddenCallbacks;if(q!==null)for(p.shared.hiddenCallbacks=null,p=0;p<q.length;p++)IT(q[p],D)}catch(X){bt(f,f.return,X)}}u&&A&64&&Bw(v),Mh(v,v.return);break;case 27:Gw(v);case 26:case 5:ma(p,v,u),u&&f===null&&A&4&&Hw(v),Mh(v,v.return);break;case 12:ma(p,v,u);break;case 13:ma(p,v,u),u&&A&4&&Qw(p,v);break;case 22:v.memoizedState===null&&ma(p,v,u),Mh(v,v.return);break;case 30:break;default:ma(p,v,u)}l=l.sibling}}function a0(a,l){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&vh(u))}function o0(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&vh(a))}function Ii(a,l,u,f){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Jw(a,l,u,f),l=l.sibling}function Jw(a,l,u,f){var p=l.flags;switch(l.tag){case 0:case 11:case 15:Ii(a,l,u,f),p&2048&&Oh(9,l);break;case 1:Ii(a,l,u,f);break;case 3:Ii(a,l,u,f),p&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&vh(a)));break;case 12:if(p&2048){Ii(a,l,u,f),a=l.stateNode;try{var v=l.memoizedProps,A=v.id,D=v.onPostCommit;typeof D=="function"&&D(A,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(q){bt(l,l.return,q)}}else Ii(a,l,u,f);break;case 13:Ii(a,l,u,f);break;case 23:break;case 22:v=l.stateNode,A=l.alternate,l.memoizedState!==null?v._visibility&2?Ii(a,l,u,f):Ph(a,l):v._visibility&2?Ii(a,l,u,f):(v._visibility|=2,Ec(a,l,u,f,(l.subtreeFlags&10256)!==0)),p&2048&&a0(A,l);break;case 24:Ii(a,l,u,f),p&2048&&o0(l.alternate,l);break;default:Ii(a,l,u,f)}}function Ec(a,l,u,f,p){for(p=p&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var v=a,A=l,D=u,q=f,X=A.flags;switch(A.tag){case 0:case 11:case 15:Ec(v,A,D,q,p),Oh(8,A);break;case 23:break;case 22:var ie=A.stateNode;A.memoizedState!==null?ie._visibility&2?Ec(v,A,D,q,p):Ph(v,A):(ie._visibility|=2,Ec(v,A,D,q,p)),p&&X&2048&&a0(A.alternate,A);break;case 24:Ec(v,A,D,q,p),p&&X&2048&&o0(A.alternate,A);break;default:Ec(v,A,D,q,p)}l=l.sibling}}function Ph(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=a,f=l,p=f.flags;switch(f.tag){case 22:Ph(u,f),p&2048&&a0(f.alternate,f);break;case 24:Ph(u,f),p&2048&&o0(f.alternate,f);break;default:Ph(u,f)}l=l.sibling}}var Vh=8192;function Tc(a){if(a.subtreeFlags&Vh)for(a=a.child;a!==null;)eS(a),a=a.sibling}function eS(a){switch(a.tag){case 26:Tc(a),a.flags&Vh&&a.memoizedState!==null&&IP(si,a.memoizedState,a.memoizedProps);break;case 5:Tc(a);break;case 3:case 4:var l=si;si=cg(a.stateNode.containerInfo),Tc(a),si=l;break;case 22:a.memoizedState===null&&(l=a.alternate,l!==null&&l.memoizedState!==null?(l=Vh,Vh=16777216,Tc(a),Vh=l):Tc(a));break;default:Tc(a)}}function tS(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function Lh(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var f=l[u];En=f,sS(f,a)}tS(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)nS(a),a=a.sibling}function nS(a){switch(a.tag){case 0:case 11:case 15:Lh(a),a.flags&2048&&da(9,a,a.return);break;case 3:Lh(a);break;case 12:Lh(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,Xm(a)):Lh(a);break;default:Lh(a)}}function Xm(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var f=l[u];En=f,sS(f,a)}tS(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:da(8,l,l.return),Xm(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,Xm(l));break;default:Xm(l)}a=a.sibling}}function sS(a,l){for(;En!==null;){var u=En;switch(u.tag){case 0:case 11:case 15:da(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:vh(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,En=f;else e:for(u=a;En!==null;){f=En;var p=f.sibling,v=f.return;if(Yw(f),f===u){En=null;break e}if(p!==null){p.return=v,En=p;break e}En=v}}}var HM={getCacheForType:function(a){var l=Un(dn),u=l.data.get(a);return u===void 0&&(u=a(),l.data.set(a,u)),u}},qM=typeof WeakMap=="function"?WeakMap:Map,ht=0,Et=null,$e=null,et=0,dt=0,xs=null,ga=!1,wc=!1,l0=!1,pr=0,zt=0,pa=0,Zo=0,c0=0,Bs=0,Sc=0,jh=null,cs=null,u0=!1,h0=0,Zm=1/0,Jm=null,_a=null,Nn=0,ya=null,Ac=null,Ic=0,d0=0,f0=null,iS=null,Uh=0,m0=null;function Es(){if((ht&2)!==0&&et!==0)return et&-et;if(Y.T!==null){var a=mc;return a!==0?a:x0()}return Zi()}function rS(){Bs===0&&(Bs=(et&536870912)===0||lt?Ku():536870912);var a=Fs.current;return a!==null&&(a.flags|=32),Bs}function Ts(a,l,u){(a===Et&&(dt===2||dt===9)||a.cancelPendingCommit!==null)&&(Rc(a,0),va(a,et,Bs,!1)),Yt(a,u),((ht&2)===0||a!==Et)&&(a===Et&&((ht&2)===0&&(Zo|=u),zt===4&&va(a,et,Bs,!1)),Ri(a))}function aS(a,l,u){if((ht&6)!==0)throw Error(s(327));var f=!u&&(l&124)===0&&(l&a.expiredLanes)===0||Gr(a,l),p=f?$M(a,l):_0(a,l,!0),v=f;do{if(p===0){wc&&!f&&va(a,l,0,!1);break}else{if(u=a.current.alternate,v&&!GM(u)){p=_0(a,l,!1),v=!1;continue}if(p===2){if(v=l,a.errorRecoveryDisabledLanes&v)var A=0;else A=a.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){l=A;e:{var D=a;p=jh;var q=D.current.memoizedState.isDehydrated;if(q&&(Rc(D,A).flags|=256),A=_0(D,A,!1),A!==2){if(l0&&!q){D.errorRecoveryDisabledLanes|=v,Zo|=v,p=4;break e}v=cs,cs=p,v!==null&&(cs===null?cs=v:cs.push.apply(cs,v))}p=A}if(v=!1,p!==2)continue}}if(p===1){Rc(a,0),va(a,l,0,!0);break}e:{switch(f=a,v=p,v){case 0:case 1:throw Error(s(345));case 4:if((l&4194048)!==l)break;case 6:va(f,l,Bs,!ga);break e;case 2:cs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((l&62914560)===l&&(p=h0+300-as(),10<p)){if(va(f,l,Bs,!ga),ks(f,0,!0)!==0)break e;f.timeoutHandle=PS(oS.bind(null,f,u,cs,Jm,u0,l,Bs,Zo,Sc,ga,v,2,-0,0),p);break e}oS(f,u,cs,Jm,u0,l,Bs,Zo,Sc,ga,v,0,-0,0)}}break}while(!0);Ri(a)}function oS(a,l,u,f,p,v,A,D,q,X,ie,oe,Z,J){if(a.timeoutHandle=-1,oe=l.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Wh={stylesheets:null,count:0,unsuspend:AP},eS(l),oe=RP(),oe!==null)){a.cancelPendingCommit=oe(mS.bind(null,a,l,v,u,f,p,A,D,q,ie,1,Z,J)),va(a,v,A,!X);return}mS(a,l,v,u,f,p,A,D,q)}function GM(a){for(var l=a;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var p=u[f],v=p.getSnapshot;p=p.value;try{if(!_s(v(),p))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function va(a,l,u,f){l&=~c0,l&=~Zo,a.suspendedLanes|=l,a.pingedLanes&=~l,f&&(a.warmLanes|=l),f=a.expirationTimes;for(var p=l;0<p;){var v=31-Qn(p),A=1<<v;f[v]=-1,p&=~A}u!==0&&$r(a,u,l)}function eg(){return(ht&6)===0?(Fh(0),!1):!0}function g0(){if($e!==null){if(dt===0)var a=$e.return;else a=$e,lr=Wo=null,ky(a),bc=null,Nh=0,a=$e;for(;a!==null;)Fw(a.alternate,a),a=a.return;$e=null}}function Rc(a,l){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,cP(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),g0(),Et=a,$e=u=rr(a.current,null),et=l,dt=0,xs=null,ga=!1,wc=Gr(a,l),l0=!1,Sc=Bs=c0=Zo=pa=zt=0,cs=jh=null,u0=!1,(l&8)!==0&&(l|=l&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=l;0<f;){var p=31-Qn(f),v=1<<p;l|=a[p],f&=~v}return pr=l,Em(),u}function lS(a,l){qe=null,Y.H=Bm,l===xh||l===Dm?(l=ST(),dt=3):l===ET?(l=ST(),dt=4):dt=l===Aw?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,xs=l,$e===null&&(zt=1,Wm(a,Vs(l,a.current)))}function cS(){var a=Y.H;return Y.H=Bm,a===null?Bm:a}function uS(){var a=Y.A;return Y.A=HM,a}function p0(){zt=4,ga||(et&4194048)!==et&&Fs.current!==null||(wc=!0),(pa&134217727)===0&&(Zo&134217727)===0||Et===null||va(Et,et,Bs,!1)}function _0(a,l,u){var f=ht;ht|=2;var p=cS(),v=uS();(Et!==a||et!==l)&&(Jm=null,Rc(a,l)),l=!1;var A=zt;e:do try{if(dt!==0&&$e!==null){var D=$e,q=xs;switch(dt){case 8:g0(),A=6;break e;case 3:case 2:case 9:case 6:Fs.current===null&&(l=!0);var X=dt;if(dt=0,xs=null,Cc(a,D,q,X),u&&wc){A=0;break e}break;default:X=dt,dt=0,xs=null,Cc(a,D,q,X)}}WM(),A=zt;break}catch(ie){lS(a,ie)}while(!0);return l&&a.shellSuspendCounter++,lr=Wo=null,ht=f,Y.H=p,Y.A=v,$e===null&&(Et=null,et=0,Em()),A}function WM(){for(;$e!==null;)hS($e)}function $M(a,l){var u=ht;ht|=2;var f=cS(),p=uS();Et!==a||et!==l?(Jm=null,Zm=as()+500,Rc(a,l)):wc=Gr(a,l);e:do try{if(dt!==0&&$e!==null){l=$e;var v=xs;t:switch(dt){case 1:dt=0,xs=null,Cc(a,l,v,1);break;case 2:case 9:if(TT(v)){dt=0,xs=null,dS(l);break}l=function(){dt!==2&&dt!==9||Et!==a||(dt=7),Ri(a)},v.then(l,l);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:TT(v)?(dt=0,xs=null,dS(l)):(dt=0,xs=null,Cc(a,l,v,7));break;case 5:var A=null;switch($e.tag){case 26:A=$e.memoizedState;case 5:case 27:var D=$e;if(!A||$S(A)){dt=0,xs=null;var q=D.sibling;if(q!==null)$e=q;else{var X=D.return;X!==null?($e=X,tg(X)):$e=null}break t}}dt=0,xs=null,Cc(a,l,v,5);break;case 6:dt=0,xs=null,Cc(a,l,v,6);break;case 8:g0(),zt=6;break e;default:throw Error(s(462))}}YM();break}catch(ie){lS(a,ie)}while(!0);return lr=Wo=null,Y.H=f,Y.A=p,ht=u,$e!==null?0:(Et=null,et=0,Em(),zt)}function YM(){for(;$e!==null&&!G_();)hS($e)}function hS(a){var l=jw(a.alternate,a,pr);a.memoizedProps=a.pendingProps,l===null?tg(a):$e=l}function dS(a){var l=a,u=l.alternate;switch(l.tag){case 15:case 0:l=kw(u,l,l.pendingProps,l.type,void 0,et);break;case 11:l=kw(u,l,l.pendingProps,l.type.render,l.ref,et);break;case 5:ky(l);default:Fw(u,l),l=$e=fT(l,pr),l=jw(u,l,pr)}a.memoizedProps=a.pendingProps,l===null?tg(a):$e=l}function Cc(a,l,u,f){lr=Wo=null,ky(l),bc=null,Nh=0;var p=l.return;try{if(LM(a,p,l,u,et)){zt=1,Wm(a,Vs(u,a.current)),$e=null;return}}catch(v){if(p!==null)throw $e=p,v;zt=1,Wm(a,Vs(u,a.current)),$e=null;return}l.flags&32768?(lt||f===1?a=!0:wc||(et&536870912)!==0?a=!1:(ga=a=!0,(f===2||f===9||f===3||f===6)&&(f=Fs.current,f!==null&&f.tag===13&&(f.flags|=16384))),fS(l,a)):tg(l)}function tg(a){var l=a;do{if((l.flags&32768)!==0){fS(l,ga);return}a=l.return;var u=UM(l.alternate,l,pr);if(u!==null){$e=u;return}if(l=l.sibling,l!==null){$e=l;return}$e=l=a}while(l!==null);zt===0&&(zt=5)}function fS(a,l){do{var u=FM(a.alternate,a);if(u!==null){u.flags&=32767,$e=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(a=a.sibling,a!==null)){$e=a;return}$e=a=u}while(a!==null);zt=6,$e=null}function mS(a,l,u,f,p,v,A,D,q){a.cancelPendingCommit=null;do ng();while(Nn!==0);if((ht&6)!==0)throw Error(s(327));if(l!==null){if(l===a.current)throw Error(s(177));if(v=l.lanes|l.childLanes,v|=oy,rm(a,u,v,A,D,q),a===Et&&($e=Et=null,et=0),Ac=l,ya=a,Ic=u,d0=v,f0=p,iS=f,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,ZM(Xi,function(){return vS(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||f){f=Y.T,Y.T=null,p=ae.p,ae.p=2,A=ht,ht|=4;try{BM(a,l,u)}finally{ht=A,ae.p=p,Y.T=f}}Nn=1,gS(),pS(),_S()}}function gS(){if(Nn===1){Nn=0;var a=ya,l=Ac,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null;var f=ae.p;ae.p=2;var p=ht;ht|=4;try{Xw(l,a);var v=C0,A=sT(a.containerInfo),D=v.focusedElem,q=v.selectionRange;if(A!==D&&D&&D.ownerDocument&&nT(D.ownerDocument.documentElement,D)){if(q!==null&&ny(D)){var X=q.start,ie=q.end;if(ie===void 0&&(ie=X),"selectionStart"in D)D.selectionStart=X,D.selectionEnd=Math.min(ie,D.value.length);else{var oe=D.ownerDocument||document,Z=oe&&oe.defaultView||window;if(Z.getSelection){var J=Z.getSelection(),Pe=D.textContent.length,Oe=Math.min(q.start,Pe),vt=q.end===void 0?Oe:Math.min(q.end,Pe);!J.extend&&Oe>vt&&(A=vt,vt=Oe,Oe=A);var W=tT(D,Oe),G=tT(D,vt);if(W&&G&&(J.rangeCount!==1||J.anchorNode!==W.node||J.anchorOffset!==W.offset||J.focusNode!==G.node||J.focusOffset!==G.offset)){var K=oe.createRange();K.setStart(W.node,W.offset),J.removeAllRanges(),Oe>vt?(J.addRange(K),J.extend(G.node,G.offset)):(K.setEnd(G.node,G.offset),J.addRange(K))}}}}for(oe=[],J=D;J=J.parentNode;)J.nodeType===1&&oe.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<oe.length;D++){var re=oe[D];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}mg=!!R0,C0=R0=null}finally{ht=p,ae.p=f,Y.T=u}}a.current=l,Nn=2}}function pS(){if(Nn===2){Nn=0;var a=ya,l=Ac,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=Y.T,Y.T=null;var f=ae.p;ae.p=2;var p=ht;ht|=4;try{$w(a,l.alternate,l)}finally{ht=p,ae.p=f,Y.T=u}}Nn=3}}function _S(){if(Nn===4||Nn===3){Nn=0,$u();var a=ya,l=Ac,u=Ic,f=iS;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Nn=5:(Nn=0,Ac=ya=null,yS(a,a.pendingLanes));var p=a.pendingLanes;if(p===0&&(_a=null),Xu(u),l=l.stateNode,Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(Hr,l,void 0,(l.current.flags&128)===128)}catch{}if(f!==null){l=Y.T,p=ae.p,ae.p=2,Y.T=null;try{for(var v=a.onRecoverableError,A=0;A<f.length;A++){var D=f[A];v(D.value,{componentStack:D.stack})}}finally{Y.T=l,ae.p=p}}(Ic&3)!==0&&ng(),Ri(a),p=a.pendingLanes,(u&4194090)!==0&&(p&42)!==0?a===m0?Uh++:(Uh=0,m0=a):Uh=0,Fh(0)}}function yS(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,vh(l)))}function ng(a){return gS(),pS(),_S(),vS()}function vS(){if(Nn!==5)return!1;var a=ya,l=d0;d0=0;var u=Xu(Ic),f=Y.T,p=ae.p;try{ae.p=32>u?32:u,Y.T=null,u=f0,f0=null;var v=ya,A=Ic;if(Nn=0,Ac=ya=null,Ic=0,(ht&6)!==0)throw Error(s(331));var D=ht;if(ht|=4,nS(v.current),Jw(v,v.current,A,u),ht=D,Fh(0,!1),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(Hr,v)}catch{}return!0}finally{ae.p=p,Y.T=f,yS(a,l)}}function bS(a,l,u){l=Vs(u,l),l=Wy(a.stateNode,l,2),a=la(a,l,2),a!==null&&(Yt(a,2),Ri(a))}function bt(a,l,u){if(a.tag===3)bS(a,a,u);else for(;l!==null;){if(l.tag===3){bS(l,a,u);break}else if(l.tag===1){var f=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(_a===null||!_a.has(f))){a=Vs(u,a),u=ww(2),f=la(l,u,2),f!==null&&(Sw(u,f,l,a),Yt(f,2),Ri(f));break}}l=l.return}}function y0(a,l,u){var f=a.pingCache;if(f===null){f=a.pingCache=new qM;var p=new Set;f.set(l,p)}else p=f.get(l),p===void 0&&(p=new Set,f.set(l,p));p.has(u)||(l0=!0,p.add(u),a=KM.bind(null,a,l,u),l.then(a,a))}function KM(a,l,u){var f=a.pingCache;f!==null&&f.delete(l),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,Et===a&&(et&u)===u&&(zt===4||zt===3&&(et&62914560)===et&&300>as()-h0?(ht&2)===0&&Rc(a,0):c0|=u,Sc===et&&(Sc=0)),Ri(a)}function xS(a,l){l===0&&(l=Wr()),a=uc(a,l),a!==null&&(Yt(a,l),Ri(a))}function QM(a){var l=a.memoizedState,u=0;l!==null&&(u=l.retryLane),xS(a,u)}function XM(a,l){var u=0;switch(a.tag){case 13:var f=a.stateNode,p=a.memoizedState;p!==null&&(u=p.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(s(314))}f!==null&&f.delete(l),xS(a,u)}function ZM(a,l){return Qi(a,l)}var sg=null,Nc=null,v0=!1,ig=!1,b0=!1,Jo=0;function Ri(a){a!==Nc&&a.next===null&&(Nc===null?sg=Nc=a:Nc=Nc.next=a),ig=!0,v0||(v0=!0,eP())}function Fh(a,l){if(!b0&&ig){b0=!0;do for(var u=!1,f=sg;f!==null;){if(a!==0){var p=f.pendingLanes;if(p===0)var v=0;else{var A=f.suspendedLanes,D=f.pingedLanes;v=(1<<31-Qn(42|a)+1)-1,v&=p&~(A&~D),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(u=!0,SS(f,v))}else v=et,v=ks(f,f===Et?v:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(v&3)===0||Gr(f,v)||(u=!0,SS(f,v));f=f.next}while(u);b0=!1}}function JM(){ES()}function ES(){ig=v0=!1;var a=0;Jo!==0&&(lP()&&(a=Jo),Jo=0);for(var l=as(),u=null,f=sg;f!==null;){var p=f.next,v=TS(f,l);v===0?(f.next=null,u===null?sg=p:u.next=p,p===null&&(Nc=u)):(u=f,(a!==0||(v&3)!==0)&&(ig=!0)),f=p}Fh(a)}function TS(a,l){for(var u=a.suspendedLanes,f=a.pingedLanes,p=a.expirationTimes,v=a.pendingLanes&-62914561;0<v;){var A=31-Qn(v),D=1<<A,q=p[A];q===-1?((D&u)===0||(D&f)!==0)&&(p[A]=$l(D,l)):q<=l&&(a.expiredLanes|=D),v&=~D}if(l=Et,u=et,u=ks(a,a===l?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,u===0||a===l&&(dt===2||dt===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&zr(f),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||Gr(a,u)){if(l=u&-u,l===a.callbackPriority)return l;switch(f!==null&&zr(f),Xu(u)){case 2:case 8:u=vn;break;case 32:u=Xi;break;case 268435456:u=Yu;break;default:u=Xi}return f=wS.bind(null,a),u=Qi(u,f),a.callbackPriority=l,a.callbackNode=u,l}return f!==null&&f!==null&&zr(f),a.callbackPriority=2,a.callbackNode=null,2}function wS(a,l){if(Nn!==0&&Nn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(ng()&&a.callbackNode!==u)return null;var f=et;return f=ks(a,a===Et?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(aS(a,f,l),TS(a,as()),a.callbackNode!=null&&a.callbackNode===u?wS.bind(null,a):null)}function SS(a,l){if(ng())return null;aS(a,l,!0)}function eP(){uP(function(){(ht&6)!==0?Qi(un,JM):ES()})}function x0(){return Jo===0&&(Jo=Ku()),Jo}function AS(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Zs(""+a)}function IS(a,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,a.id&&u.setAttribute("form",a.id),l.parentNode.insertBefore(u,l),a=new FormData(a),u.parentNode.removeChild(u),a}function tP(a,l,u,f,p){if(l==="submit"&&u&&u.stateNode===p){var v=AS((p[Rn]||null).action),A=f.submitter;A&&(l=(l=A[Rn]||null)?AS(l.formAction):A.getAttribute("formAction"),l!==null&&(v=l,A=null));var D=new ko("action","action",null,f,p);a.push({event:D,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Jo!==0){var q=A?IS(p,A):new FormData(p);By(u,{pending:!0,data:q,method:p.method,action:v},null,q)}}else typeof v=="function"&&(D.preventDefault(),q=A?IS(p,A):new FormData(p),By(u,{pending:!0,data:q,method:p.method,action:v},v,q))},currentTarget:p}]})}}for(var E0=0;E0<ay.length;E0++){var T0=ay[E0],nP=T0.toLowerCase(),sP=T0[0].toUpperCase()+T0.slice(1);ni(nP,"on"+sP)}ni(aT,"onAnimationEnd"),ni(oT,"onAnimationIteration"),ni(lT,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(bM,"onTransitionRun"),ni(xM,"onTransitionStart"),ni(EM,"onTransitionCancel"),ni(cT,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iP=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bh));function RS(a,l){l=(l&4)!==0;for(var u=0;u<a.length;u++){var f=a[u],p=f.event;f=f.listeners;e:{var v=void 0;if(l)for(var A=f.length-1;0<=A;A--){var D=f[A],q=D.instance,X=D.currentTarget;if(D=D.listener,q!==v&&p.isPropagationStopped())break e;v=D,p.currentTarget=X;try{v(p)}catch(ie){Gm(ie)}p.currentTarget=null,v=q}else for(A=0;A<f.length;A++){if(D=f[A],q=D.instance,X=D.currentTarget,D=D.listener,q!==v&&p.isPropagationStopped())break e;v=D,p.currentTarget=X;try{v(p)}catch(ie){Gm(ie)}p.currentTarget=null,v=q}}}}function Ye(a,l){var u=l[vo];u===void 0&&(u=l[vo]=new Set);var f=a+"__bubble";u.has(f)||(CS(l,a,2,!1),u.add(f))}function w0(a,l,u){var f=0;l&&(f|=4),CS(u,a,f,l)}var rg="_reactListening"+Math.random().toString(36).slice(2);function S0(a){if(!a[rg]){a[rg]=!0,am.forEach(function(u){u!=="selectionchange"&&(iP.has(u)||w0(u,!1,a),w0(u,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[rg]||(l[rg]=!0,w0("selectionchange",!1,l))}}function CS(a,l,u,f){switch(JS(l)){case 2:var p=DP;break;case 8:p=kP;break;default:p=U0}u=p.bind(null,l,u,a),p=void 0,!sr||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(p=!0),f?p!==void 0?a.addEventListener(l,u,{capture:!0,passive:p}):a.addEventListener(l,u,!0):p!==void 0?a.addEventListener(l,u,{passive:p}):a.addEventListener(l,u,!1)}function A0(a,l,u,f,p){var v=f;if((l&1)===0&&(l&2)===0&&f!==null)e:for(;;){if(f===null)return;var A=f.tag;if(A===3||A===4){var D=f.stateNode.containerInfo;if(D===p)break;if(A===4)for(A=f.return;A!==null;){var q=A.tag;if((q===3||q===4)&&A.stateNode.containerInfo===p)return;A=A.return}for(;D!==null;){if(A=_i(D),A===null)return;if(q=A.tag,q===5||q===6||q===26||q===27){f=v=A;continue e}D=D.parentNode}}f=f.return}Co(function(){var X=v,ie=ih(u),oe=[];e:{var Z=uT.get(a);if(Z!==void 0){var J=ko,Pe=a;switch(a){case"keypress":if(No(u)===0)break e;case"keydown":case"keyup":J=ac;break;case"focusin":Pe="focus",J=sc;break;case"focusout":Pe="blur",J=sc;break;case"beforeblur":case"afterblur":J=sc;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Lo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=fm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=ia;break;case aT:case oT:case lT:J=ah;break;case cT:J=x;break;case"scroll":case"scrollend":J=Mo;break;case"wheel":J=P;break;case"copy":case"cut":case"paste":J=gm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=ch;break;case"toggle":case"beforetoggle":J=te}var Oe=(l&4)!==0,vt=!Oe&&(a==="scroll"||a==="scrollend"),W=Oe?Z!==null?Z+"Capture":null:Z;Oe=[];for(var G=X,K;G!==null;){var re=G;if(K=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||K===null||W===null||(re=na(G,W),re!=null&&Oe.push(zh(G,re,K))),vt)break;G=G.return}0<Oe.length&&(Z=new J(Z,Pe,null,u,ie),oe.push({event:Z,listeners:Oe}))}}if((l&7)===0){e:{if(Z=a==="mouseover"||a==="pointerover",J=a==="mouseout"||a==="pointerout",Z&&u!==sh&&(Pe=u.relatedTarget||u.fromElement)&&(_i(Pe)||Pe[Ji]))break e;if((J||Z)&&(Z=ie.window===ie?ie:(Z=ie.ownerDocument)?Z.defaultView||Z.parentWindow:window,J?(Pe=u.relatedTarget||u.toElement,J=X,Pe=Pe?_i(Pe):null,Pe!==null&&(vt=r(Pe),Oe=Pe.tag,Pe!==vt||Oe!==5&&Oe!==27&&Oe!==6)&&(Pe=null)):(J=null,Pe=X),J!==Pe)){if(Oe=Lo,re="onMouseLeave",W="onMouseEnter",G="mouse",(a==="pointerout"||a==="pointerover")&&(Oe=ch,re="onPointerLeave",W="onPointerEnter",G="pointer"),vt=J==null?Z:Qr(J),K=Pe==null?Z:Qr(Pe),Z=new Oe(re,G+"leave",J,u,ie),Z.target=vt,Z.relatedTarget=K,re=null,_i(ie)===X&&(Oe=new Oe(W,G+"enter",Pe,u,ie),Oe.target=K,Oe.relatedTarget=vt,re=Oe),vt=re,J&&Pe)t:{for(Oe=J,W=Pe,G=0,K=Oe;K;K=Dc(K))G++;for(K=0,re=W;re;re=Dc(re))K++;for(;0<G-K;)Oe=Dc(Oe),G--;for(;0<K-G;)W=Dc(W),K--;for(;G--;){if(Oe===W||W!==null&&Oe===W.alternate)break t;Oe=Dc(Oe),W=Dc(W)}Oe=null}else Oe=null;J!==null&&NS(oe,Z,J,Oe,!1),Pe!==null&&vt!==null&&NS(oe,vt,Pe,Oe,!0)}}e:{if(Z=X?Qr(X):window,J=Z.nodeName&&Z.nodeName.toLowerCase(),J==="select"||J==="input"&&Z.type==="file")var we=KE;else if($E(Z))if(QE)we=_M;else{we=gM;var Ge=mM}else J=Z.nodeName,!J||J.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&ec(X.elementType)&&(we=KE):we=pM;if(we&&(we=we(a,X))){YE(oe,we,u,ie);break e}Ge&&Ge(a,Z,X),a==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&eh(Z,"number",Z.value)}switch(Ge=X?Qr(X):window,a){case"focusin":($E(Ge)||Ge.contentEditable==="true")&&(oc=Ge,sy=X,mh=null);break;case"focusout":mh=sy=oc=null;break;case"mousedown":iy=!0;break;case"contextmenu":case"mouseup":case"dragend":iy=!1,iT(oe,u,ie);break;case"selectionchange":if(vM)break;case"keydown":case"keyup":iT(oe,u,ie)}var De;if(je)e:{switch(a){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else ti?Js(a,u)&&(Me="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Me="onCompositionStart");Me&&(Xt&&u.locale!=="ko"&&(ti||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&ti&&(De=dm()):(Ps=ie,xt="value"in Ps?Ps.value:Ps.textContent,ti=!0)),Ge=ag(X,Me),0<Ge.length&&(Me=new lh(Me,a,null,u,ie),oe.push({event:Me,listeners:Ge}),De?Me.data=De:(De=ei(u),De!==null&&(Me.data=De)))),(De=ut?uh(a,u):hM(a,u))&&(Me=ag(X,"onBeforeInput"),0<Me.length&&(Ge=new lh("onBeforeInput","beforeinput",null,u,ie),oe.push({event:Ge,listeners:Me}),Ge.data=De)),tP(oe,a,X,u,ie)}RS(oe,l)})}function zh(a,l,u){return{instance:a,listener:l,currentTarget:u}}function ag(a,l){for(var u=l+"Capture",f=[];a!==null;){var p=a,v=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||v===null||(p=na(a,u),p!=null&&f.unshift(zh(a,p,v)),p=na(a,l),p!=null&&f.push(zh(a,p,v))),a.tag===3)return f;a=a.return}return[]}function Dc(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function NS(a,l,u,f,p){for(var v=l._reactName,A=[];u!==null&&u!==f;){var D=u,q=D.alternate,X=D.stateNode;if(D=D.tag,q!==null&&q===f)break;D!==5&&D!==26&&D!==27||X===null||(q=X,p?(X=na(u,v),X!=null&&A.unshift(zh(u,X,q))):p||(X=na(u,v),X!=null&&A.push(zh(u,X,q)))),u=u.return}A.length!==0&&a.push({event:l,listeners:A})}var rP=/\r\n?/g,aP=/\u0000|\uFFFD/g;function DS(a){return(typeof a=="string"?a:""+a).replace(rP,`
`).replace(aP,"")}function kS(a,l){return l=DS(l),DS(a)===l}function og(){}function yt(a,l,u,f,p,v){switch(u){case"children":typeof f=="string"?l==="body"||l==="textarea"&&f===""||Ms(a,f):(typeof f=="number"||typeof f=="bigint")&&l!=="body"&&Ms(a,""+f);break;case"className":wo(a,"class",f);break;case"tabIndex":wo(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":wo(a,u,f);break;case"style":nh(a,f,v);break;case"data":if(l!=="object"){wo(a,"data",f);break}case"src":case"href":if(f===""&&(l!=="a"||u!=="href")){a.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(u);break}f=Zs(""+f),a.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(u==="formAction"?(l!=="input"&&yt(a,l,"name",p.name,p,null),yt(a,l,"formEncType",p.formEncType,p,null),yt(a,l,"formMethod",p.formMethod,p,null),yt(a,l,"formTarget",p.formTarget,p,null)):(yt(a,l,"encType",p.encType,p,null),yt(a,l,"method",p.method,p,null),yt(a,l,"target",p.target,p,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(u);break}f=Zs(""+f),a.setAttribute(u,f);break;case"onClick":f!=null&&(a.onclick=og);break;case"onScroll":f!=null&&Ye("scroll",a);break;case"onScrollEnd":f!=null&&Ye("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(u=f.__html,u!=null){if(p.children!=null)throw Error(s(60));a.innerHTML=u}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}u=Zs(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(u,""+f):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":f===!0?a.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(u,f):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(u,f):a.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(u):a.setAttribute(u,f);break;case"popover":Ye("beforetoggle",a),Ye("toggle",a),To(a,"popover",f);break;case"xlinkActuate":Os(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Os(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Os(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Os(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Os(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Os(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Os(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Os(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Os(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":To(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=cm.get(u)||u,To(a,u,f))}}function I0(a,l,u,f,p,v){switch(u){case"style":nh(a,f,v);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(s(61));if(u=f.__html,u!=null){if(p.children!=null)throw Error(s(60));a.innerHTML=u}}break;case"children":typeof f=="string"?Ms(a,f):(typeof f=="number"||typeof f=="bigint")&&Ms(a,""+f);break;case"onScroll":f!=null&&Ye("scroll",a);break;case"onScrollEnd":f!=null&&Ye("scrollend",a);break;case"onClick":f!=null&&(a.onclick=og);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xo.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(p=u.endsWith("Capture"),l=u.slice(2,p?u.length-7:void 0),v=a[Rn]||null,v=v!=null?v[u]:null,typeof v=="function"&&a.removeEventListener(l,v,p),typeof f=="function")){typeof v!="function"&&v!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(l,f,p);break e}u in a?a[u]=f:f===!0?a.setAttribute(u,""):To(a,u,f)}}}function Dn(a,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",a),Ye("load",a);var f=!1,p=!1,v;for(v in u)if(u.hasOwnProperty(v)){var A=u[v];if(A!=null)switch(v){case"src":f=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:yt(a,l,v,A,u,null)}}p&&yt(a,l,"srcSet",u.srcSet,u,null),f&&yt(a,l,"src",u.src,u,null);return;case"input":Ye("invalid",a);var D=v=A=p=null,q=null,X=null;for(f in u)if(u.hasOwnProperty(f)){var ie=u[f];if(ie!=null)switch(f){case"name":p=ie;break;case"type":A=ie;break;case"checked":q=ie;break;case"defaultChecked":X=ie;break;case"value":v=ie;break;case"defaultValue":D=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(s(137,l));break;default:yt(a,l,f,ie,u,null)}}Ju(a,v,D,q,X,A,p,!1),Jr(a);return;case"select":Ye("invalid",a),f=A=v=null;for(p in u)if(u.hasOwnProperty(p)&&(D=u[p],D!=null))switch(p){case"value":v=D;break;case"defaultValue":A=D;break;case"multiple":f=D;default:yt(a,l,p,D,u,null)}l=v,u=A,a.multiple=!!f,l!=null?ea(a,!!f,l,!1):u!=null&&ea(a,!!f,u,!0);return;case"textarea":Ye("invalid",a),v=p=f=null;for(A in u)if(u.hasOwnProperty(A)&&(D=u[A],D!=null))switch(A){case"value":f=D;break;case"defaultValue":p=D;break;case"children":v=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(s(91));break;default:yt(a,l,A,D,u,null)}lm(a,f,p,v),Jr(a);return;case"option":for(q in u)if(u.hasOwnProperty(q)&&(f=u[q],f!=null))switch(q){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:yt(a,l,q,f,u,null)}return;case"dialog":Ye("beforetoggle",a),Ye("toggle",a),Ye("cancel",a),Ye("close",a);break;case"iframe":case"object":Ye("load",a);break;case"video":case"audio":for(f=0;f<Bh.length;f++)Ye(Bh[f],a);break;case"image":Ye("error",a),Ye("load",a);break;case"details":Ye("toggle",a);break;case"embed":case"source":case"link":Ye("error",a),Ye("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in u)if(u.hasOwnProperty(X)&&(f=u[X],f!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:yt(a,l,X,f,u,null)}return;default:if(ec(l)){for(ie in u)u.hasOwnProperty(ie)&&(f=u[ie],f!==void 0&&I0(a,l,ie,f,u,void 0));return}}for(D in u)u.hasOwnProperty(D)&&(f=u[D],f!=null&&yt(a,l,D,f,u,null))}function oP(a,l,u,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,v=null,A=null,D=null,q=null,X=null,ie=null;for(J in u){var oe=u[J];if(u.hasOwnProperty(J)&&oe!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":q=oe;default:f.hasOwnProperty(J)||yt(a,l,J,null,f,oe)}}for(var Z in f){var J=f[Z];if(oe=u[Z],f.hasOwnProperty(Z)&&(J!=null||oe!=null))switch(Z){case"type":v=J;break;case"name":p=J;break;case"checked":X=J;break;case"defaultChecked":ie=J;break;case"value":A=J;break;case"defaultValue":D=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,l));break;default:J!==oe&&yt(a,l,Z,J,f,oe)}}Zu(a,A,D,q,X,ie,v,p);return;case"select":J=A=D=Z=null;for(v in u)if(q=u[v],u.hasOwnProperty(v)&&q!=null)switch(v){case"value":break;case"multiple":J=q;default:f.hasOwnProperty(v)||yt(a,l,v,null,f,q)}for(p in f)if(v=f[p],q=u[p],f.hasOwnProperty(p)&&(v!=null||q!=null))switch(p){case"value":Z=v;break;case"defaultValue":D=v;break;case"multiple":A=v;default:v!==q&&yt(a,l,p,v,f,q)}l=D,u=A,f=J,Z!=null?ea(a,!!u,Z,!1):!!f!=!!u&&(l!=null?ea(a,!!u,l,!0):ea(a,!!u,u?[]:"",!1));return;case"textarea":J=Z=null;for(D in u)if(p=u[D],u.hasOwnProperty(D)&&p!=null&&!f.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:yt(a,l,D,null,f,p)}for(A in f)if(p=f[A],v=u[A],f.hasOwnProperty(A)&&(p!=null||v!=null))switch(A){case"value":Z=p;break;case"defaultValue":J=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==v&&yt(a,l,A,p,f,v)}om(a,Z,J);return;case"option":for(var Pe in u)if(Z=u[Pe],u.hasOwnProperty(Pe)&&Z!=null&&!f.hasOwnProperty(Pe))switch(Pe){case"selected":a.selected=!1;break;default:yt(a,l,Pe,null,f,Z)}for(q in f)if(Z=f[q],J=u[q],f.hasOwnProperty(q)&&Z!==J&&(Z!=null||J!=null))switch(q){case"selected":a.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:yt(a,l,q,Z,f,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in u)Z=u[Oe],u.hasOwnProperty(Oe)&&Z!=null&&!f.hasOwnProperty(Oe)&&yt(a,l,Oe,null,f,Z);for(X in f)if(Z=f[X],J=u[X],f.hasOwnProperty(X)&&Z!==J&&(Z!=null||J!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,l));break;default:yt(a,l,X,Z,f,J)}return;default:if(ec(l)){for(var vt in u)Z=u[vt],u.hasOwnProperty(vt)&&Z!==void 0&&!f.hasOwnProperty(vt)&&I0(a,l,vt,void 0,f,Z);for(ie in f)Z=f[ie],J=u[ie],!f.hasOwnProperty(ie)||Z===J||Z===void 0&&J===void 0||I0(a,l,ie,Z,f,J);return}}for(var W in u)Z=u[W],u.hasOwnProperty(W)&&Z!=null&&!f.hasOwnProperty(W)&&yt(a,l,W,null,f,Z);for(oe in f)Z=f[oe],J=u[oe],!f.hasOwnProperty(oe)||Z===J||Z==null&&J==null||yt(a,l,oe,Z,f,J)}var R0=null,C0=null;function lg(a){return a.nodeType===9?a:a.ownerDocument}function OS(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function MS(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function N0(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var D0=null;function lP(){var a=window.event;return a&&a.type==="popstate"?a===D0?!1:(D0=a,!0):(D0=null,!1)}var PS=typeof setTimeout=="function"?setTimeout:void 0,cP=typeof clearTimeout=="function"?clearTimeout:void 0,VS=typeof Promise=="function"?Promise:void 0,uP=typeof queueMicrotask=="function"?queueMicrotask:typeof VS<"u"?function(a){return VS.resolve(null).then(a).catch(hP)}:PS;function hP(a){setTimeout(function(){throw a})}function ba(a){return a==="head"}function LS(a,l){var u=l,f=0,p=0;do{var v=u.nextSibling;if(a.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(0<f&&8>f){u=f;var A=a.ownerDocument;if(u&1&&Hh(A.documentElement),u&2&&Hh(A.body),u&4)for(u=A.head,Hh(u),A=u.firstChild;A;){var D=A.nextSibling,q=A.nodeName;A[Kr]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&A.rel.toLowerCase()==="stylesheet"||u.removeChild(A),A=D}}if(p===0){a.removeChild(v),Xh(l);return}p--}else u==="$"||u==="$?"||u==="$!"?p++:f=u.charCodeAt(0)-48;else f=0;u=v}while(u);Xh(l)}function k0(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":k0(u),Kl(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function dP(a,l,u,f){for(;a.nodeType===1;){var p=u;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[Kr])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(v=a.getAttribute("rel"),v==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(v!==p.rel||a.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||a.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||a.getAttribute("title")!==(p.title==null?null:p.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(v=a.getAttribute("src"),(v!==(p.src==null?null:p.src)||a.getAttribute("type")!==(p.type==null?null:p.type)||a.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&v&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var v=p.name==null?null:""+p.name;if(p.type==="hidden"&&a.getAttribute("name")===v)return a}else return a;if(a=ii(a.nextSibling),a===null)break}return null}function fP(a,l,u){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=ii(a.nextSibling),a===null))return null;return a}function O0(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function mP(a,l){var u=a.ownerDocument;if(a.data!=="$?"||u.readyState==="complete")l();else{var f=function(){l(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function ii(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return a}var M0=null;function jS(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"){if(l===0)return a;l--}else u==="/$"&&l++}a=a.previousSibling}return null}function US(a,l,u){switch(l=lg(u),a){case"html":if(a=l.documentElement,!a)throw Error(s(452));return a;case"head":if(a=l.head,!a)throw Error(s(453));return a;case"body":if(a=l.body,!a)throw Error(s(454));return a;default:throw Error(s(451))}}function Hh(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);Kl(a)}var zs=new Map,FS=new Set;function cg(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var _r=ae.d;ae.d={f:gP,r:pP,D:_P,C:yP,L:vP,m:bP,X:EP,S:xP,M:TP};function gP(){var a=_r.f(),l=eg();return a||l}function pP(a){var l=yi(a);l!==null&&l.tag===5&&l.type==="form"?aw(l):_r.r(a)}var kc=typeof document>"u"?null:document;function BS(a,l,u){var f=kc;if(f&&typeof l=="string"&&l){var p=bn(l);p='link[rel="'+a+'"][href="'+p+'"]',typeof u=="string"&&(p+='[crossorigin="'+u+'"]'),FS.has(p)||(FS.add(p),a={rel:a,crossOrigin:u,href:l},f.querySelector(p)===null&&(l=f.createElement("link"),Dn(l,"link",a),Qt(l),f.head.appendChild(l)))}}function _P(a){_r.D(a),BS("dns-prefetch",a,null)}function yP(a,l){_r.C(a,l),BS("preconnect",a,l)}function vP(a,l,u){_r.L(a,l,u);var f=kc;if(f&&a&&l){var p='link[rel="preload"][as="'+bn(l)+'"]';l==="image"&&u&&u.imageSrcSet?(p+='[imagesrcset="'+bn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(p+='[imagesizes="'+bn(u.imageSizes)+'"]')):p+='[href="'+bn(a)+'"]';var v=p;switch(l){case"style":v=Oc(a);break;case"script":v=Mc(a)}zs.has(v)||(a=m({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:a,as:l},u),zs.set(v,a),f.querySelector(p)!==null||l==="style"&&f.querySelector(qh(v))||l==="script"&&f.querySelector(Gh(v))||(l=f.createElement("link"),Dn(l,"link",a),Qt(l),f.head.appendChild(l)))}}function bP(a,l){_r.m(a,l);var u=kc;if(u&&a){var f=l&&typeof l.as=="string"?l.as:"script",p='link[rel="modulepreload"][as="'+bn(f)+'"][href="'+bn(a)+'"]',v=p;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Mc(a)}if(!zs.has(v)&&(a=m({rel:"modulepreload",href:a},l),zs.set(v,a),u.querySelector(p)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Gh(v)))return}f=u.createElement("link"),Dn(f,"link",a),Qt(f),u.head.appendChild(f)}}}function xP(a,l,u){_r.S(a,l,u);var f=kc;if(f&&a){var p=Xr(f).hoistableStyles,v=Oc(a);l=l||"default";var A=p.get(v);if(!A){var D={loading:0,preload:null};if(A=f.querySelector(qh(v)))D.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":l},u),(u=zs.get(v))&&P0(a,u);var q=A=f.createElement("link");Qt(q),Dn(q,"link",a),q._p=new Promise(function(X,ie){q.onload=X,q.onerror=ie}),q.addEventListener("load",function(){D.loading|=1}),q.addEventListener("error",function(){D.loading|=2}),D.loading|=4,ug(A,l,f)}A={type:"stylesheet",instance:A,count:1,state:D},p.set(v,A)}}}function EP(a,l){_r.X(a,l);var u=kc;if(u&&a){var f=Xr(u).hoistableScripts,p=Mc(a),v=f.get(p);v||(v=u.querySelector(Gh(p)),v||(a=m({src:a,async:!0},l),(l=zs.get(p))&&V0(a,l),v=u.createElement("script"),Qt(v),Dn(v,"link",a),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(p,v))}}function TP(a,l){_r.M(a,l);var u=kc;if(u&&a){var f=Xr(u).hoistableScripts,p=Mc(a),v=f.get(p);v||(v=u.querySelector(Gh(p)),v||(a=m({src:a,async:!0,type:"module"},l),(l=zs.get(p))&&V0(a,l),v=u.createElement("script"),Qt(v),Dn(v,"link",a),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},f.set(p,v))}}function zS(a,l,u,f){var p=(p=Ie.current)?cg(p):null;if(!p)throw Error(s(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=Oc(u.href),u=Xr(p).hoistableStyles,f=u.get(l),f||(f={type:"style",instance:null,count:0,state:null},u.set(l,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=Oc(u.href);var v=Xr(p).hoistableStyles,A=v.get(a);if(A||(p=p.ownerDocument||p,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(a,A),(v=p.querySelector(qh(a)))&&!v._p&&(A.instance=v,A.state.loading=5),zs.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},zs.set(a,u),v||wP(p,a,u,A.state))),l&&f===null)throw Error(s(528,""));return A}if(l&&f!==null)throw Error(s(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Mc(u),u=Xr(p).hoistableScripts,f=u.get(l),f||(f={type:"script",instance:null,count:0,state:null},u.set(l,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,a))}}function Oc(a){return'href="'+bn(a)+'"'}function qh(a){return'link[rel="stylesheet"]['+a+"]"}function HS(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function wP(a,l,u,f){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?f.loading=1:(l=a.createElement("link"),f.preload=l,l.addEventListener("load",function(){return f.loading|=1}),l.addEventListener("error",function(){return f.loading|=2}),Dn(l,"link",u),Qt(l),a.head.appendChild(l))}function Mc(a){return'[src="'+bn(a)+'"]'}function Gh(a){return"script[async]"+a}function qS(a,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var f=a.querySelector('style[data-href~="'+bn(u.href)+'"]');if(f)return l.instance=f,Qt(f),f;var p=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),Qt(f),Dn(f,"style",p),ug(f,u.precedence,a),l.instance=f;case"stylesheet":p=Oc(u.href);var v=a.querySelector(qh(p));if(v)return l.state.loading|=4,l.instance=v,Qt(v),v;f=HS(u),(p=zs.get(p))&&P0(f,p),v=(a.ownerDocument||a).createElement("link"),Qt(v);var A=v;return A._p=new Promise(function(D,q){A.onload=D,A.onerror=q}),Dn(v,"link",f),l.state.loading|=4,ug(v,u.precedence,a),l.instance=v;case"script":return v=Mc(u.src),(p=a.querySelector(Gh(v)))?(l.instance=p,Qt(p),p):(f=u,(p=zs.get(v))&&(f=m({},u),V0(f,p)),a=a.ownerDocument||a,p=a.createElement("script"),Qt(p),Dn(p,"link",f),a.head.appendChild(p),l.instance=p);case"void":return null;default:throw Error(s(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(f=l.instance,l.state.loading|=4,ug(f,u.precedence,a));return l.instance}function ug(a,l,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=f.length?f[f.length-1]:null,v=p,A=0;A<f.length;A++){var D=f[A];if(D.dataset.precedence===l)v=D;else if(v!==p)break}v?v.parentNode.insertBefore(a,v.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(a,l.firstChild))}function P0(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function V0(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var hg=null;function GS(a,l,u){if(hg===null){var f=new Map,p=hg=new Map;p.set(u,f)}else p=hg,f=p.get(u),f||(f=new Map,p.set(u,f));if(f.has(a))return f;for(f.set(a,null),u=u.getElementsByTagName(a),p=0;p<u.length;p++){var v=u[p];if(!(v[Kr]||v[Kt]||a==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(l)||"";A=a+A;var D=f.get(A);D?D.push(v):f.set(A,[v])}}return f}function WS(a,l,u){a=a.ownerDocument||a,a.head.insertBefore(u,l==="title"?a.querySelector("head > title"):null)}function SP(a,l,u){if(u===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function $S(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Wh=null;function AP(){}function IP(a,l,u){if(Wh===null)throw Error(s(475));var f=Wh;if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=Oc(u.href),v=a.querySelector(qh(p));if(v){a=v._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(f.count++,f=dg.bind(f),a.then(f,f)),l.state.loading|=4,l.instance=v,Qt(v);return}v=a.ownerDocument||a,u=HS(u),(p=zs.get(p))&&P0(u,p),v=v.createElement("link"),Qt(v);var A=v;A._p=new Promise(function(D,q){A.onload=D,A.onerror=q}),Dn(v,"link",u),l.instance=v}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(f.count++,l=dg.bind(f),a.addEventListener("load",l),a.addEventListener("error",l))}}function RP(){if(Wh===null)throw Error(s(475));var a=Wh;return a.stylesheets&&a.count===0&&L0(a,a.stylesheets),0<a.count?function(l){var u=setTimeout(function(){if(a.stylesheets&&L0(a,a.stylesheets),a.unsuspend){var f=a.unsuspend;a.unsuspend=null,f()}},6e4);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(u)}}:null}function dg(){if(this.count--,this.count===0){if(this.stylesheets)L0(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var fg=null;function L0(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,fg=new Map,l.forEach(CP,a),fg=null,dg.call(a))}function CP(a,l){if(!(l.state.loading&4)){var u=fg.get(a);if(u)var f=u.get(null);else{u=new Map,fg.set(a,u);for(var p=a.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<p.length;v++){var A=p[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(u.set(A.dataset.precedence,A),f=A)}f&&u.set(null,f)}p=l.instance,A=p.getAttribute("data-precedence"),v=u.get(A)||f,v===f&&u.set(null,p),u.set(A,p),this.count++,f=dg.bind(this),p.addEventListener("load",f),p.addEventListener("error",f),v?v.parentNode.insertBefore(p,v.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(p,a.firstChild)),l.state.loading|=4}}var $h={$$typeof:M,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function NP(a,l,u,f,p,v,A,D){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.hiddenUpdates=Yl(null),this.identifierPrefix=f,this.onUncaughtError=p,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function YS(a,l,u,f,p,v,A,D,q,X,ie,oe){return a=new NP(a,l,u,A,D,q,X,oe),l=1,v===!0&&(l|=24),v=ys(3,null,null,l),a.current=v,v.stateNode=a,l=yy(),l.refCount++,a.pooledCache=l,l.refCount++,v.memoizedState={element:f,isDehydrated:u,cache:l},Ey(v),a}function KS(a){return a?(a=hc,a):hc}function QS(a,l,u,f,p,v){p=KS(p),f.context===null?f.context=p:f.pendingContext=p,f=oa(l),f.payload={element:u},v=v===void 0?null:v,v!==null&&(f.callback=v),u=la(a,f,l),u!==null&&(Ts(u,a,l),Th(u,a,l))}function XS(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<l?u:l}}function j0(a,l){XS(a,l),(a=a.alternate)&&XS(a,l)}function ZS(a){if(a.tag===13){var l=uc(a,67108864);l!==null&&Ts(l,a,67108864),j0(a,67108864)}}var mg=!0;function DP(a,l,u,f){var p=Y.T;Y.T=null;var v=ae.p;try{ae.p=2,U0(a,l,u,f)}finally{ae.p=v,Y.T=p}}function kP(a,l,u,f){var p=Y.T;Y.T=null;var v=ae.p;try{ae.p=8,U0(a,l,u,f)}finally{ae.p=v,Y.T=p}}function U0(a,l,u,f){if(mg){var p=F0(f);if(p===null)A0(a,l,f,gg,u),eA(a,f);else if(MP(p,a,l,u,f))f.stopPropagation();else if(eA(a,f),l&4&&-1<OP.indexOf(a)){for(;p!==null;){var v=yi(p);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Ks(v.pendingLanes);if(A!==0){var D=v;for(D.pendingLanes|=2,D.entangledLanes|=2;A;){var q=1<<31-Qn(A);D.entanglements[1]|=q,A&=~q}Ri(v),(ht&6)===0&&(Zm=as()+500,Fh(0))}}break;case 13:D=uc(v,2),D!==null&&Ts(D,v,2),eg(),j0(v,2)}if(v=F0(f),v===null&&A0(a,l,f,gg,u),v===p)break;p=v}p!==null&&f.stopPropagation()}else A0(a,l,f,null,u)}}function F0(a){return a=ih(a),B0(a)}var gg=null;function B0(a){if(gg=null,a=_i(a),a!==null){var l=r(a);if(l===null)a=null;else{var u=l.tag;if(u===13){if(a=o(l),a!==null)return a;a=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return gg=a,null}function JS(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nm()){case un:return 2;case vn:return 8;case Xi:case W_:return 32;case Yu:return 268435456;default:return 32}default:return 32}}var z0=!1,xa=null,Ea=null,Ta=null,Yh=new Map,Kh=new Map,wa=[],OP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function eA(a,l){switch(a){case"focusin":case"focusout":xa=null;break;case"dragenter":case"dragleave":Ea=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":Yh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kh.delete(l.pointerId)}}function Qh(a,l,u,f,p,v){return a===null||a.nativeEvent!==v?(a={blockedOn:l,domEventName:u,eventSystemFlags:f,nativeEvent:v,targetContainers:[p]},l!==null&&(l=yi(l),l!==null&&ZS(l)),a):(a.eventSystemFlags|=f,l=a.targetContainers,p!==null&&l.indexOf(p)===-1&&l.push(p),a)}function MP(a,l,u,f,p){switch(l){case"focusin":return xa=Qh(xa,a,l,u,f,p),!0;case"dragenter":return Ea=Qh(Ea,a,l,u,f,p),!0;case"mouseover":return Ta=Qh(Ta,a,l,u,f,p),!0;case"pointerover":var v=p.pointerId;return Yh.set(v,Qh(Yh.get(v)||null,a,l,u,f,p)),!0;case"gotpointercapture":return v=p.pointerId,Kh.set(v,Qh(Kh.get(v)||null,a,l,u,f,p)),!0}return!1}function tA(a){var l=_i(a.target);if(l!==null){var u=r(l);if(u!==null){if(l=u.tag,l===13){if(l=o(u),l!==null){a.blockedOn=l,K_(a.priority,function(){if(u.tag===13){var f=Es();f=Qu(f);var p=uc(u,f);p!==null&&Ts(p,u,f),j0(u,f)}});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function pg(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var u=F0(a.nativeEvent);if(u===null){u=a.nativeEvent;var f=new u.constructor(u.type,u);sh=f,u.target.dispatchEvent(f),sh=null}else return l=yi(u),l!==null&&ZS(l),a.blockedOn=u,!1;l.shift()}return!0}function nA(a,l,u){pg(a)&&u.delete(l)}function PP(){z0=!1,xa!==null&&pg(xa)&&(xa=null),Ea!==null&&pg(Ea)&&(Ea=null),Ta!==null&&pg(Ta)&&(Ta=null),Yh.forEach(nA),Kh.forEach(nA)}function _g(a,l){a.blockedOn===l&&(a.blockedOn=null,z0||(z0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,PP)))}var yg=null;function sA(a){yg!==a&&(yg=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){yg===a&&(yg=null);for(var l=0;l<a.length;l+=3){var u=a[l],f=a[l+1],p=a[l+2];if(typeof f!="function"){if(B0(f||u)===null)continue;break}var v=yi(u);v!==null&&(a.splice(l,3),l-=3,By(v,{pending:!0,data:p,method:u.method,action:f},f,p))}}))}function Xh(a){function l(q){return _g(q,a)}xa!==null&&_g(xa,a),Ea!==null&&_g(Ea,a),Ta!==null&&_g(Ta,a),Yh.forEach(l),Kh.forEach(l);for(var u=0;u<wa.length;u++){var f=wa[u];f.blockedOn===a&&(f.blockedOn=null)}for(;0<wa.length&&(u=wa[0],u.blockedOn===null);)tA(u),u.blockedOn===null&&wa.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var p=u[f],v=u[f+1],A=p[Rn]||null;if(typeof v=="function")A||sA(u);else if(A){var D=null;if(v&&v.hasAttribute("formAction")){if(p=v,A=v[Rn]||null)D=A.formAction;else if(B0(p)!==null)continue}else D=A.action;typeof D=="function"?u[f+1]=D:(u.splice(f,3),f-=3),sA(u)}}}function H0(a){this._internalRoot=a}vg.prototype.render=H0.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(s(409));var u=l.current,f=Es();QS(u,f,a,l,null,null)},vg.prototype.unmount=H0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;QS(a.current,2,null,a,null,null),eg(),l[Ji]=null}};function vg(a){this._internalRoot=a}vg.prototype.unstable_scheduleHydration=function(a){if(a){var l=Zi();a={blockedOn:null,target:a,priority:l};for(var u=0;u<wa.length&&l!==0&&l<wa[u].priority;u++);wa.splice(u,0,a),u===0&&tA(a)}};var iA=e.version;if(iA!=="19.1.1")throw Error(s(527,iA,"19.1.1"));ae.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(s(188)):(a=Object.keys(a).join(","),Error(s(268,a)));return a=h(l),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var VP={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bg.isDisabled&&bg.supportsFiber)try{Hr=bg.inject(VP),Ln=bg}catch{}}return Jh.createRoot=function(a,l){if(!i(a))throw Error(s(299));var u=!1,f="",p=bw,v=xw,A=Ew,D=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(A=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(D=l.unstable_transitionCallbacks)),l=YS(a,1,!1,null,null,u,f,p,v,A,D,null),a[Ji]=l.current,S0(a),new H0(l)},Jh.hydrateRoot=function(a,l,u){if(!i(a))throw Error(s(299));var f=!1,p="",v=bw,A=xw,D=Ew,q=null,X=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(q=u.unstable_transitionCallbacks),u.formState!==void 0&&(X=u.formState)),l=YS(a,1,!0,l,u??null,f,p,v,A,D,q,X),l.context=KS(null),u=l.current,f=Es(),f=Qu(f),p=oa(f),p.callback=null,la(u,p,f),u=f,l.current.lanes=u,Yt(l,u),Ri(l),a[Ji]=l.current,S0(a),new vg(l)},Jh.version="19.1.1",Jh}var mA;function KP(){if(mA)return W0.exports;mA=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),W0.exports=YP(),W0.exports}var QP=KP();const XP=XC(QP),ZP=()=>{};var gA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},JP=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const i=n[t++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=n[t++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=n[t++],o=n[t++],c=n[t++],h=((i&7)<<18|(r&63)<<12|(o&63)<<6|c&63)-65536;e[s++]=String.fromCharCode(55296+(h>>10)),e[s++]=String.fromCharCode(56320+(h&1023))}else{const r=n[t++],o=n[t++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return e.join("")},JC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<n.length;i+=3){const r=n[i],o=i+1<n.length,c=o?n[i+1]:0,h=i+2<n.length,d=h?n[i+2]:0,m=r>>2,_=(r&3)<<4|c>>4;let b=(c&15)<<2|d>>6,E=d&63;h||(E=64,o||(b=64)),s.push(t[m],t[_],t[b],t[E])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ZC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):JP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<n.length;){const r=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const d=i<n.length?t[n.charAt(i)]:64;++i;const _=i<n.length?t[n.charAt(i)]:64;if(++i,r==null||c==null||d==null||_==null)throw new eV;const b=r<<2|c>>4;if(s.push(b),d!==64){const E=c<<4&240|d>>2;if(s.push(E),_!==64){const S=d<<6&192|_;s.push(S)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class eV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tV=function(n){const e=ZC(n);return JC.encodeByteArray(e,!0)},mp=function(n){return tV(n).replace(/\./g,"")},qb=function(n){try{return JC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function gp(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!nV(t)||(n[t]=gp(n[t],e[t]));return n}function nV(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV=()=>Gb().__FIREBASE_DEFAULTS__,iV=()=>{if(typeof process>"u"||typeof gA>"u")return;const n=gA.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rV=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&qb(n[1]);return e&&JSON.parse(e)},Wb=()=>{try{return ZP()||sV()||iV()||rV()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$b=()=>{var n;return(n=Wb())==null?void 0:n.config},aV=n=>{var e;return(e=Wb())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function e2(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",i=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...n};return[mp(JSON.stringify(t)),mp(JSON.stringify(o)),""].join(".")}const Cd={};function cV(){const n={prod:[],emulator:[]};for(const e of Object.keys(Cd))Cd[e]?n.emulator.push(e):n.prod.push(e);return n}function uV(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let pA=!1;function t2(n,e){if(typeof window>"u"||typeof document>"u"||!Mu(window.location.host)||Cd[n]===e||Cd[n]||pA)return;Cd[n]=e;function t(b){return`__firebase__banner__${b}`}const s="__firebase__banner",r=cV().prod.length>0;function o(){const b=document.getElementById(s);b&&b.remove()}function c(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function h(b,E){b.setAttribute("width","24"),b.setAttribute("id",E),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function d(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{pA=!0,o()},b}function m(b,E){b.setAttribute("id",E),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function _(){const b=uV(s),E=t("text"),S=document.getElementById(E)||document.createElement("span"),T=t("learnmore"),R=document.getElementById(T)||document.createElement("a"),k=t("preprendIcon"),L=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const M=b.element;c(M),m(R,T);const H=d();h(L,k),M.append(L,S,R,H),document.body.appendChild(M)}r?(S.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function e_(){var e;const n=(e=Wb())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dV(){return typeof window<"u"||n2()}function n2(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function fV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function s2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Yb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function i2(){const n=Ut();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function r2(){return!e_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function a2(){return!e_()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Kd(){try{return typeof indexedDB=="object"}catch{return!1}}function mV(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var r;e(((r=i.error)==null?void 0:r.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV="FirebaseError";class ss extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=gV,Object.setPrototypeOf(this,ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bl.prototype.create)}}class Bl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?pV(r,s):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new ss(i,c,s)}}function pV(n,e){return n.replace(_V,(t,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const _V=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function yV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $a(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const i of t){if(!s.includes(i))return!1;const r=n[i],o=e[i];if(yA(r)&&yA(o)){if(!$a(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!t.includes(i))return!1;return!0}function yA(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Qc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(r)}}),e}function gd(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function o2(n,e){const t=new vV(n,e);return t.subscribe.bind(t)}class vV{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let i;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");bV(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:s},i.next===void 0&&(i.next=Q0),i.error===void 0&&(i.error=Q0),i.complete===void 0&&(i.complete=Q0);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bV(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Q0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(n){return n&&n._delegate?n._delegate:n}class Gi{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new oV;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TV(e))try{this.getOrInitializeService({instanceIdentifier:rl})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=rl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rl){return this.instances.has(e)}getOptions(e=rl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[r,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(r);s===c&&o.resolve(i)}return i}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&e(r,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const i of s)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:EV(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=rl){return this.component?this.component.multipleInstances?e:rl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EV(n){return n===rl?void 0:n}function TV(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xV(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=[];var Ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ke||(Ke={}));const c2={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},wV=Ke.INFO,SV={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},AV=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),i=SV[e];if(i)console[i](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class t_{constructor(e){this.name=e,this._logLevel=wV,this._logHandler=AV,this._userLogHandler=null,Kb.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?c2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}function IV(n){Kb.forEach(e=>{e.setLogLevel(n)})}function RV(n,e){for(const t of Kb){let s=null;e&&e.level&&(s=c2[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,r,...o)=>{const c=o.map(h=>{if(h==null)return null;if(typeof h=="string")return h;if(typeof h=="number"||typeof h=="boolean")return h.toString();if(h instanceof Error)return h.message;try{return JSON.stringify(h)}catch{return null}}).filter(h=>h).join(" ");r>=(s??i.logLevel)&&n({level:Ke[r].toLowerCase(),message:c,args:o,type:i.name})}}}const CV=(n,e)=>e.some(t=>n instanceof t);let vA,bA;function NV(){return vA||(vA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DV(){return bA||(bA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u2=new WeakMap,Mv=new WeakMap,h2=new WeakMap,X0=new WeakMap,Qb=new WeakMap;function kV(n){const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{t(Fa(n.result)),i()},o=()=>{s(n.error),i()};n.addEventListener("success",r),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&u2.set(t,n)}).catch(()=>{}),Qb.set(e,n),e}function OV(n){if(Mv.has(n))return;const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{t(),i()},o=()=>{s(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});Mv.set(n,e)}let Pv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Mv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||h2.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function MV(n){Pv=n(Pv)}function PV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Z0(this),e,...t);return h2.set(s,e.sort?e.sort():[e]),Fa(s)}:DV().includes(n)?function(...e){return n.apply(Z0(this),e),Fa(u2.get(this))}:function(...e){return Fa(n.apply(Z0(this),e))}}function VV(n){return typeof n=="function"?PV(n):(n instanceof IDBTransaction&&OV(n),CV(n,NV())?new Proxy(n,Pv):n)}function Fa(n){if(n instanceof IDBRequest)return kV(n);if(X0.has(n))return X0.get(n);const e=VV(n);return e!==n&&(X0.set(n,e),Qb.set(e,n)),e}const Z0=n=>Qb.get(n);function LV(n,e,{blocked:t,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(n,e),c=Fa(o);return s&&o.addEventListener("upgradeneeded",h=>{s(Fa(o.result),h.oldVersion,h.newVersion,Fa(o.transaction),h)}),t&&o.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{r&&h.addEventListener("close",()=>r()),i&&h.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const jV=["get","getKey","getAll","getAllKeys","count"],UV=["put","add","delete","clear"],J0=new Map;function xA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(J0.get(e))return J0.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,i=UV.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(i||jV.includes(t)))return;const r=async function(o,...c){const h=this.transaction(o,i?"readwrite":"readonly");let d=h.store;return s&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),i&&h.done]))[0]};return J0.set(e,r),r}MV(n=>({...n,get:(e,t,s)=>xA(e,t)||n.get(e,t,s),has:(e,t)=>!!xA(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(BV(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function BV(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pp="@firebase/app",Vv="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new t_("@firebase/app"),zV="@firebase/app-compat",HV="@firebase/analytics-compat",qV="@firebase/analytics",GV="@firebase/app-check-compat",WV="@firebase/app-check",$V="@firebase/auth",YV="@firebase/auth-compat",KV="@firebase/database",QV="@firebase/data-connect",XV="@firebase/database-compat",ZV="@firebase/functions",JV="@firebase/functions-compat",eL="@firebase/installations",tL="@firebase/installations-compat",nL="@firebase/messaging",sL="@firebase/messaging-compat",iL="@firebase/performance",rL="@firebase/performance-compat",aL="@firebase/remote-config",oL="@firebase/remote-config-compat",lL="@firebase/storage",cL="@firebase/storage-compat",uL="@firebase/firestore",hL="@firebase/ai",dL="@firebase/firestore-compat",fL="firebase",mL="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya="[DEFAULT]",gL={[pp]:"fire-core",[zV]:"fire-core-compat",[qV]:"fire-analytics",[HV]:"fire-analytics-compat",[WV]:"fire-app-check",[GV]:"fire-app-check-compat",[$V]:"fire-auth",[YV]:"fire-auth-compat",[KV]:"fire-rtdb",[QV]:"fire-data-connect",[XV]:"fire-rtdb-compat",[ZV]:"fire-fn",[JV]:"fire-fn-compat",[eL]:"fire-iid",[tL]:"fire-iid-compat",[nL]:"fire-fcm",[sL]:"fire-fcm-compat",[iL]:"fire-perf",[rL]:"fire-perf-compat",[aL]:"fire-rc",[oL]:"fire-rc-compat",[lL]:"fire-gcs",[cL]:"fire-gcs-compat",[uL]:"fire-fst",[dL]:"fire-fst-compat",[hL]:"fire-vertex","fire-js":"fire-js",[fL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=new Map,iu=new Map,ru=new Map;function Qd(n,e){try{n.container.addComponent(e)}catch(t){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function d2(n,e){n.container.addOrOverwriteComponent(e)}function Qa(n){const e=n.name;if(ru.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;ru.set(e,n);for(const t of Ka.values())Qd(t,n);for(const t of iu.values())Qd(t,n);return!0}function f2(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function pL(n,e,t=Ya){f2(n,e).clearInstance(t)}function Xb(n){return n.options!==void 0}function m2(n){return Xb(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function kt(n){return n==null?!1:n.settings!==void 0}function _L(){ru.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rs=new Bl("app","Firebase",yL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g2=class{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Gi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(n,e){const t=qb(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const i=JSON.parse(t).exp*1e3,r=new Date().getTime();i-r<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class vL extends g2{constructor(e,t,s,i){const r=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,o={name:s,automaticDataCollectionEnabled:r};if(e.apiKey!==void 0)super(e,o,i);else{const c=e;super(c.options,o,i)}this._serverConfig={automaticDataCollectionEnabled:r,...t},this._serverConfig.authIdToken&&EA(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&EA(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,li(pp,Vv,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Jb(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Rs.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=mL;function Zb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Ya,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw Rs.create("bad-app-name",{appName:String(i)});if(t||(t=$b()),!t)throw Rs.create("no-options");const r=Ka.get(i);if(r){if($a(t,r.options)&&$a(s,r.config))return r;throw Rs.create("duplicate-app",{appName:i})}const o=new l2(i);for(const h of ru.values())o.addComponent(h);const c=new g2(t,s,o);return Ka.set(i,c),c}function bL(n,e={}){if(dV()&&!n2())throw Rs.create("invalid-server-app-environment");let t,s=e||{};if(n&&(Xb(n)?t=n.options:m2(n)?s=n:t=n),s.automaticDataCollectionEnabled===void 0&&(s.automaticDataCollectionEnabled=!0),t||(t=$b()),!t)throw Rs.create("no-options");const i={...s,...t};i.releaseOnDeref!==void 0&&delete i.releaseOnDeref;const r=m=>[...m].reduce((_,b)=>Math.imul(31,_)+b.charCodeAt(0)|0,0);if(s.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Rs.create("finalization-registry-not-supported",{});const o=""+r(JSON.stringify(i)),c=iu.get(o);if(c)return c.incRefCount(s.releaseOnDeref),c;const h=new l2(o);for(const m of ru.values())h.addComponent(m);const d=new vL(t,s,o,h);return iu.set(o,d),d}function xL(n=Ya){const e=Ka.get(n);if(!e&&n===Ya&&$b())return Zb();if(!e)throw Rs.create("no-app",{appName:n});return e}function EL(){return Array.from(Ka.values())}async function Jb(n){let e=!1;const t=n.name;Ka.has(t)?(e=!0,Ka.delete(t)):iu.has(t)&&n.decRefCount()<=0&&(iu.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(s=>s.delete())),n.isDeleted=!0)}function li(n,e,t){let s=gL[n]??n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),r=e.match(/\s|\//);if(i||r){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&o.push("and"),r&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(o.join(" "));return}Qa(new Gi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function p2(n,e){if(n!==null&&typeof n!="function")throw Rs.create("invalid-log-argument");RV(n,e)}function _2(n){IV(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL="firebase-heartbeat-database",wL=1,Xd="firebase-heartbeat-store";let ev=null;function y2(){return ev||(ev=LV(TL,wL,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Xd)}catch(t){console.warn(t)}}}}).catch(n=>{throw Rs.create("idb-open",{originalErrorMessage:n.message})})),ev}async function SL(n){try{const t=(await y2()).transaction(Xd),s=await t.objectStore(Xd).get(v2(n));return await t.done,s}catch(e){if(e instanceof ss)Cr.warn(e.message);else{const t=Rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cr.warn(t.message)}}}async function TA(n,e){try{const s=(await y2()).transaction(Xd,"readwrite");await s.objectStore(Xd).put(e,v2(n)),await s.done}catch(t){if(t instanceof ss)Cr.warn(t.message);else{const s=Rs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Cr.warn(s.message)}}}function v2(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=1024,IL=30;class RL{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new NL(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=wA();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>IL){const o=DL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Cr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=wA(),{heartbeatsToSend:s,unsentEntries:i}=CL(this._heartbeatsCache.heartbeats),r=mp(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return Cr.warn(t),""}}}function wA(){return new Date().toISOString().substring(0,10)}function CL(n,e=AL){const t=[];let s=n.slice();for(const i of n){const r=t.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),SA(t)>e){r.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),SA(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class NL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kd()?mV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await SL(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return TA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return TA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function SA(n){return mp(JSON.stringify({version:2,heartbeats:n})).length}function DL(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(n){Qa(new Gi("platform-logger",e=>new FV(e),"PRIVATE")),Qa(new Gi("heartbeat",e=>new RL(e),"PRIVATE")),li(pp,Vv,n),li(pp,Vv,"esm2020"),li("fire-js","")}kL("");const OL=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:ss,SDK_VERSION:co,_DEFAULT_ENTRY_NAME:Ya,_addComponent:Qd,_addOrOverwriteComponent:d2,_apps:Ka,_clearComponents:_L,_components:ru,_getProvider:f2,_isFirebaseApp:Xb,_isFirebaseServerApp:kt,_isFirebaseServerAppSettings:m2,_registerComponent:Qa,_removeServiceInstance:pL,_serverApps:iu,deleteApp:Jb,getApp:xL,getApps:EL,initializeApp:Zb,initializeServerApp:bL,onLog:p2,registerVersion:li,setLogLevel:_2},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,t){this._delegate=e,this.firebase=t,Qd(e,new Gi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Jb(this._delegate)))}_getService(e,t=Ya){var i;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((i=s.getComponent())==null?void 0:i.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:t})}_removeServiceInstance(e,t=Ya){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Qd(this._delegate,e)}_addOrOverwriteComponent(e){d2(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},AA=new Bl("app-compat","Firebase",PL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(n){const e={},t={__esModule:!0,initializeApp:r,app:i,registerVersion:li,setLogLevel:_2,onLog:p2,apps:null,SDK_VERSION:co,INTERNAL:{registerComponent:c,removeApp:s,useAsService:h,modularAPIs:OL}};t.default=t,Object.defineProperty(t,"apps",{get:o});function s(d){delete e[d]}function i(d){if(d=d||Ya,!_A(e,d))throw AA.create("no-app",{appName:d});return e[d]}i.App=n;function r(d,m={}){const _=Zb(d,m);if(_A(e,_.name))return e[_.name];const b=new n(_,t);return e[_.name]=b,b}function o(){return Object.keys(e).map(d=>e[d])}function c(d){const m=d.name,_=m.replace("-compat","");if(Qa(d)&&d.type==="PUBLIC"){const b=(E=i())=>{if(typeof E[_]!="function")throw AA.create("invalid-app-argument",{appName:m});return E[_]()};d.serviceProps!==void 0&&gp(b,d.serviceProps),t[_]=b,n.prototype[_]=function(...E){return this._getService.bind(this,m).apply(this,d.multipleInstances?E:[])}}return d.type==="PUBLIC"?t[_]:null}function h(d,m){return m==="serverAuth"?null:m}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(){const n=VL(ML);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:b2,extendNamespace:e,createSubscribe:o2,ErrorFactory:Bl,deepExtend:gp};function e(t){gp(n,t)}return n}const LL=b2();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=new t_("@firebase/app-compat"),jL="@firebase/app-compat",UL="0.5.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(n){li(jL,UL,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=Gb();if(n.firebase!==void 0){IA.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&IA.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const qs=LL;FL();var BL="firebase",zL="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qs.registerVersion(BL,zL,"app-compat");var RA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ba,x2;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,I){function N(){}N.prototype=I.prototype,C.F=I.prototype,C.prototype=new N,C.prototype.constructor=C,C.D=function(V,j,F){for(var O=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)O[ne-2]=arguments[ne];return I.prototype[j].apply(V,O)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,I,N){N||(N=0);const V=Array(16);if(typeof I=="string")for(var j=0;j<16;++j)V[j]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(j=0;j<16;++j)V[j]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=C.g[0],N=C.g[1],j=C.g[2];let F=C.g[3],O;O=I+(F^N&(j^F))+V[0]+3614090360&4294967295,I=N+(O<<7&4294967295|O>>>25),O=F+(j^I&(N^j))+V[1]+3905402710&4294967295,F=I+(O<<12&4294967295|O>>>20),O=j+(N^F&(I^N))+V[2]+606105819&4294967295,j=F+(O<<17&4294967295|O>>>15),O=N+(I^j&(F^I))+V[3]+3250441966&4294967295,N=j+(O<<22&4294967295|O>>>10),O=I+(F^N&(j^F))+V[4]+4118548399&4294967295,I=N+(O<<7&4294967295|O>>>25),O=F+(j^I&(N^j))+V[5]+1200080426&4294967295,F=I+(O<<12&4294967295|O>>>20),O=j+(N^F&(I^N))+V[6]+2821735955&4294967295,j=F+(O<<17&4294967295|O>>>15),O=N+(I^j&(F^I))+V[7]+4249261313&4294967295,N=j+(O<<22&4294967295|O>>>10),O=I+(F^N&(j^F))+V[8]+1770035416&4294967295,I=N+(O<<7&4294967295|O>>>25),O=F+(j^I&(N^j))+V[9]+2336552879&4294967295,F=I+(O<<12&4294967295|O>>>20),O=j+(N^F&(I^N))+V[10]+4294925233&4294967295,j=F+(O<<17&4294967295|O>>>15),O=N+(I^j&(F^I))+V[11]+2304563134&4294967295,N=j+(O<<22&4294967295|O>>>10),O=I+(F^N&(j^F))+V[12]+1804603682&4294967295,I=N+(O<<7&4294967295|O>>>25),O=F+(j^I&(N^j))+V[13]+4254626195&4294967295,F=I+(O<<12&4294967295|O>>>20),O=j+(N^F&(I^N))+V[14]+2792965006&4294967295,j=F+(O<<17&4294967295|O>>>15),O=N+(I^j&(F^I))+V[15]+1236535329&4294967295,N=j+(O<<22&4294967295|O>>>10),O=I+(j^F&(N^j))+V[1]+4129170786&4294967295,I=N+(O<<5&4294967295|O>>>27),O=F+(N^j&(I^N))+V[6]+3225465664&4294967295,F=I+(O<<9&4294967295|O>>>23),O=j+(I^N&(F^I))+V[11]+643717713&4294967295,j=F+(O<<14&4294967295|O>>>18),O=N+(F^I&(j^F))+V[0]+3921069994&4294967295,N=j+(O<<20&4294967295|O>>>12),O=I+(j^F&(N^j))+V[5]+3593408605&4294967295,I=N+(O<<5&4294967295|O>>>27),O=F+(N^j&(I^N))+V[10]+38016083&4294967295,F=I+(O<<9&4294967295|O>>>23),O=j+(I^N&(F^I))+V[15]+3634488961&4294967295,j=F+(O<<14&4294967295|O>>>18),O=N+(F^I&(j^F))+V[4]+3889429448&4294967295,N=j+(O<<20&4294967295|O>>>12),O=I+(j^F&(N^j))+V[9]+568446438&4294967295,I=N+(O<<5&4294967295|O>>>27),O=F+(N^j&(I^N))+V[14]+3275163606&4294967295,F=I+(O<<9&4294967295|O>>>23),O=j+(I^N&(F^I))+V[3]+4107603335&4294967295,j=F+(O<<14&4294967295|O>>>18),O=N+(F^I&(j^F))+V[8]+1163531501&4294967295,N=j+(O<<20&4294967295|O>>>12),O=I+(j^F&(N^j))+V[13]+2850285829&4294967295,I=N+(O<<5&4294967295|O>>>27),O=F+(N^j&(I^N))+V[2]+4243563512&4294967295,F=I+(O<<9&4294967295|O>>>23),O=j+(I^N&(F^I))+V[7]+1735328473&4294967295,j=F+(O<<14&4294967295|O>>>18),O=N+(F^I&(j^F))+V[12]+2368359562&4294967295,N=j+(O<<20&4294967295|O>>>12),O=I+(N^j^F)+V[5]+4294588738&4294967295,I=N+(O<<4&4294967295|O>>>28),O=F+(I^N^j)+V[8]+2272392833&4294967295,F=I+(O<<11&4294967295|O>>>21),O=j+(F^I^N)+V[11]+1839030562&4294967295,j=F+(O<<16&4294967295|O>>>16),O=N+(j^F^I)+V[14]+4259657740&4294967295,N=j+(O<<23&4294967295|O>>>9),O=I+(N^j^F)+V[1]+2763975236&4294967295,I=N+(O<<4&4294967295|O>>>28),O=F+(I^N^j)+V[4]+1272893353&4294967295,F=I+(O<<11&4294967295|O>>>21),O=j+(F^I^N)+V[7]+4139469664&4294967295,j=F+(O<<16&4294967295|O>>>16),O=N+(j^F^I)+V[10]+3200236656&4294967295,N=j+(O<<23&4294967295|O>>>9),O=I+(N^j^F)+V[13]+681279174&4294967295,I=N+(O<<4&4294967295|O>>>28),O=F+(I^N^j)+V[0]+3936430074&4294967295,F=I+(O<<11&4294967295|O>>>21),O=j+(F^I^N)+V[3]+3572445317&4294967295,j=F+(O<<16&4294967295|O>>>16),O=N+(j^F^I)+V[6]+76029189&4294967295,N=j+(O<<23&4294967295|O>>>9),O=I+(N^j^F)+V[9]+3654602809&4294967295,I=N+(O<<4&4294967295|O>>>28),O=F+(I^N^j)+V[12]+3873151461&4294967295,F=I+(O<<11&4294967295|O>>>21),O=j+(F^I^N)+V[15]+530742520&4294967295,j=F+(O<<16&4294967295|O>>>16),O=N+(j^F^I)+V[2]+3299628645&4294967295,N=j+(O<<23&4294967295|O>>>9),O=I+(j^(N|~F))+V[0]+4096336452&4294967295,I=N+(O<<6&4294967295|O>>>26),O=F+(N^(I|~j))+V[7]+1126891415&4294967295,F=I+(O<<10&4294967295|O>>>22),O=j+(I^(F|~N))+V[14]+2878612391&4294967295,j=F+(O<<15&4294967295|O>>>17),O=N+(F^(j|~I))+V[5]+4237533241&4294967295,N=j+(O<<21&4294967295|O>>>11),O=I+(j^(N|~F))+V[12]+1700485571&4294967295,I=N+(O<<6&4294967295|O>>>26),O=F+(N^(I|~j))+V[3]+2399980690&4294967295,F=I+(O<<10&4294967295|O>>>22),O=j+(I^(F|~N))+V[10]+4293915773&4294967295,j=F+(O<<15&4294967295|O>>>17),O=N+(F^(j|~I))+V[1]+2240044497&4294967295,N=j+(O<<21&4294967295|O>>>11),O=I+(j^(N|~F))+V[8]+1873313359&4294967295,I=N+(O<<6&4294967295|O>>>26),O=F+(N^(I|~j))+V[15]+4264355552&4294967295,F=I+(O<<10&4294967295|O>>>22),O=j+(I^(F|~N))+V[6]+2734768916&4294967295,j=F+(O<<15&4294967295|O>>>17),O=N+(F^(j|~I))+V[13]+1309151649&4294967295,N=j+(O<<21&4294967295|O>>>11),O=I+(j^(N|~F))+V[4]+4149444226&4294967295,I=N+(O<<6&4294967295|O>>>26),O=F+(N^(I|~j))+V[11]+3174756917&4294967295,F=I+(O<<10&4294967295|O>>>22),O=j+(I^(F|~N))+V[2]+718787259&4294967295,j=F+(O<<15&4294967295|O>>>17),O=N+(F^(j|~I))+V[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(j+(O<<21&4294967295|O>>>11))&4294967295,C.g[2]=C.g[2]+j&4294967295,C.g[3]=C.g[3]+F&4294967295}s.prototype.v=function(C,I){I===void 0&&(I=C.length);const N=I-this.blockSize,V=this.C;let j=this.h,F=0;for(;F<I;){if(j==0)for(;F<=N;)i(this,C,F),F+=this.blockSize;if(typeof C=="string"){for(;F<I;)if(V[j++]=C.charCodeAt(F++),j==this.blockSize){i(this,V),j=0;break}}else for(;F<I;)if(V[j++]=C[F++],j==this.blockSize){i(this,V),j=0;break}}this.h=j,this.o+=I},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;I=this.o*8;for(var N=C.length-8;N<C.length;++N)C[N]=I&255,I/=256;for(this.v(C),C=Array(16),I=0,N=0;N<4;++N)for(let V=0;V<32;V+=8)C[I++]=this.g[N]>>>V&255;return C};function r(C,I){var N=c;return Object.prototype.hasOwnProperty.call(N,C)?N[C]:N[C]=I(C)}function o(C,I){this.h=I;const N=[];let V=!0;for(let j=C.length-1;j>=0;j--){const F=C[j]|0;V&&F==I||(N[j]=F,V=!1)}this.g=N}var c={};function h(C){return-128<=C&&C<128?r(C,function(I){return new o([I|0],I<0?-1:0)}):new o([C|0],C<0?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return _;if(C<0)return R(d(-C));const I=[];let N=1;for(let V=0;C>=N;V++)I[V]=C/N|0,N*=4294967296;return new o(I,0)}function m(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return R(m(C.substring(1),I));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=d(Math.pow(I,8));let V=_;for(let F=0;F<C.length;F+=8){var j=Math.min(8,C.length-F);const O=parseInt(C.substring(F,F+j),I);j<8?(j=d(Math.pow(I,j)),V=V.j(j).add(d(O))):(V=V.j(N),V=V.add(d(O)))}return V}var _=h(0),b=h(1),E=h(16777216);n=o.prototype,n.m=function(){if(T(this))return-R(this).m();let C=0,I=1;for(let N=0;N<this.g.length;N++){const V=this.i(N);C+=(V>=0?V:4294967296+V)*I,I*=4294967296}return C},n.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(S(this))return"0";if(T(this))return"-"+R(this).toString(C);const I=d(Math.pow(C,6));var N=this;let V="";for(;;){const j=H(N,I).g;N=k(N,j.j(I));let F=((N.g.length>0?N.g[0]:N.h)>>>0).toString(C);if(N=j,S(N))return F+V;for(;F.length<6;)F="0"+F;V=F+V}},n.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function S(C){if(C.h!=0)return!1;for(let I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function T(C){return C.h==-1}n.l=function(C){return C=k(this,C),T(C)?-1:S(C)?0:1};function R(C){const I=C.g.length,N=[];for(let V=0;V<I;V++)N[V]=~C.g[V];return new o(N,~C.h).add(b)}n.abs=function(){return T(this)?R(this):this},n.add=function(C){const I=Math.max(this.g.length,C.g.length),N=[];let V=0;for(let j=0;j<=I;j++){let F=V+(this.i(j)&65535)+(C.i(j)&65535),O=(F>>>16)+(this.i(j)>>>16)+(C.i(j)>>>16);V=O>>>16,F&=65535,O&=65535,N[j]=O<<16|F}return new o(N,N[N.length-1]&-2147483648?-1:0)};function k(C,I){return C.add(R(I))}n.j=function(C){if(S(this)||S(C))return _;if(T(this))return T(C)?R(this).j(R(C)):R(R(this).j(C));if(T(C))return R(this.j(R(C)));if(this.l(E)<0&&C.l(E)<0)return d(this.m()*C.m());const I=this.g.length+C.g.length,N=[];for(var V=0;V<2*I;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(let j=0;j<C.g.length;j++){const F=this.i(V)>>>16,O=this.i(V)&65535,ne=C.i(j)>>>16,be=C.i(j)&65535;N[2*V+2*j]+=O*be,L(N,2*V+2*j),N[2*V+2*j+1]+=F*be,L(N,2*V+2*j+1),N[2*V+2*j+1]+=O*ne,L(N,2*V+2*j+1),N[2*V+2*j+2]+=F*ne,L(N,2*V+2*j+2)}for(C=0;C<I;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=I;C<2*I;C++)N[C]=0;return new o(N,0)};function L(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function M(C,I){this.g=C,this.h=I}function H(C,I){if(S(I))throw Error("division by zero");if(S(C))return new M(_,_);if(T(C))return I=H(R(C),I),new M(R(I.g),R(I.h));if(T(I))return I=H(C,R(I)),new M(R(I.g),I.h);if(C.g.length>30){if(T(C)||T(I))throw Error("slowDivide_ only works with positive integers.");for(var N=b,V=I;V.l(C)<=0;)N=U(N),V=U(V);var j=z(N,1),F=z(V,1);for(V=z(V,2),N=z(N,2);!S(V);){var O=F.add(V);O.l(C)<=0&&(j=j.add(N),F=O),V=z(V,1),N=z(N,1)}return I=k(C,j.j(I)),new M(j,I)}for(j=_;C.l(I)>=0;){for(N=Math.max(1,Math.floor(C.m()/I.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),F=d(N),O=F.j(I);T(O)||O.l(C)>0;)N-=V,F=d(N),O=F.j(I);S(F)&&(F=b),j=j.add(F),C=k(C,O)}return new M(j,C)}n.B=function(C){return H(this,C).h},n.and=function(C){const I=Math.max(this.g.length,C.g.length),N=[];for(let V=0;V<I;V++)N[V]=this.i(V)&C.i(V);return new o(N,this.h&C.h)},n.or=function(C){const I=Math.max(this.g.length,C.g.length),N=[];for(let V=0;V<I;V++)N[V]=this.i(V)|C.i(V);return new o(N,this.h|C.h)},n.xor=function(C){const I=Math.max(this.g.length,C.g.length),N=[];for(let V=0;V<I;V++)N[V]=this.i(V)^C.i(V);return new o(N,this.h^C.h)};function U(C){const I=C.g.length+1,N=[];for(let V=0;V<I;V++)N[V]=C.i(V)<<1|C.i(V-1)>>>31;return new o(N,C.h)}function z(C,I){const N=I>>5;I%=32;const V=C.g.length-N,j=[];for(let F=0;F<V;F++)j[F]=I>0?C.i(F+N)>>>I|C.i(F+N+1)<<32-I:C.i(F+N);return new o(j,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,x2=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,Ba=o}).apply(typeof RA<"u"?RA:typeof self<"u"?self:typeof window<"u"?window:{});var xg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var E2,pd,T2,qg,Lv,w2,S2,A2;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof xg=="object"&&xg];for(var x=0;x<g.length;++x){var w=g[x];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function i(g,x){if(x)e:{var w=s;g=g.split(".");for(var P=0;P<g.length-1;P++){var Q=g[P];if(!(Q in w))break e;w=w[Q]}g=g[g.length-1],P=w[g],x=x(P),x!=P&&x!=null&&e(w,g,{configurable:!0,writable:!0,value:x})}}i("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(g){return g||function(x){var w=[],P;for(P in x)Object.prototype.hasOwnProperty.call(x,P)&&w.push([P,x[P]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},o=this||self;function c(g){var x=typeof g;return x=="object"&&g!=null||x=="function"}function h(g,x,w){return g.call.apply(g.bind,arguments)}function d(g,x,w){return d=h,d.apply(null,arguments)}function m(g,x){var w=Array.prototype.slice.call(arguments,1);return function(){var P=w.slice();return P.push.apply(P,arguments),g.apply(this,P)}}function _(g,x){function w(){}w.prototype=x.prototype,g.Z=x.prototype,g.prototype=new w,g.prototype.constructor=g,g.Ob=function(P,Q,te){for(var pe=Array(arguments.length-2),je=2;je<arguments.length;je++)pe[je-2]=arguments[je];return x.prototype[Q].apply(P,pe)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function E(g){const x=g.length;if(x>0){const w=Array(x);for(let P=0;P<x;P++)w[P]=g[P];return w}return[]}function S(g,x){for(let P=1;P<arguments.length;P++){const Q=arguments[P];var w=typeof Q;if(w=w!="object"?w:Q?Array.isArray(Q)?"array":w:"null",w=="array"||w=="object"&&typeof Q.length=="number"){w=g.length||0;const te=Q.length||0;g.length=w+te;for(let pe=0;pe<te;pe++)g[w+pe]=Q[pe]}else g.push(Q)}}class T{constructor(x,w){this.i=x,this.j=w,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function R(g){o.setTimeout(()=>{throw g},0)}function k(){var g=C;let x=null;return g.g&&(x=g.g,g.g=g.g.next,g.g||(g.h=null),x.next=null),x}class L{constructor(){this.h=this.g=null}add(x,w){const P=M.get();P.set(x,w),this.h?this.h.next=P:this.g=P,this.h=P}}var M=new T(()=>new H,g=>g.reset());class H{constructor(){this.next=this.g=this.h=null}set(x,w){this.h=x,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let U,z=!1,C=new L,I=()=>{const g=Promise.resolve(void 0);U=()=>{g.then(N)}};function N(){for(var g;g=k();){try{g.h.call(g.g)}catch(w){R(w)}var x=M;x.j(g),x.h<100&&(x.h++,g.next=x.g,x.g=g)}z=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(g,x){this.type=g,this.g=this.target=x,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var g=!1,x=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const w=()=>{};o.addEventListener("test",w,x),o.removeEventListener("test",w,x)}catch{}return g})();function O(g){return/^[\s\xa0]*$/.test(g)}function ne(g,x){j.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,x)}_(ne,j),ne.prototype.init=function(g,x){const w=this.type=g.type,P=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=x,x=g.relatedTarget,x||(w=="mouseover"?x=g.fromElement:w=="mouseout"&&(x=g.toElement)),this.relatedTarget=x,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&ne.Z.h.call(this)},ne.prototype.h=function(){ne.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ae(g,x,w,P,Q){this.listener=g,this.proxy=null,this.src=x,this.type=w,this.capture=!!P,this.ha=Q,this.key=++Y,this.da=this.fa=!1}function ge(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ne(g,x,w){for(const P in g)x.call(w,g[P],P,g)}function B(g,x){for(const w in g)x.call(void 0,g[w],w,g)}function se(g){const x={};for(const w in g)x[w]=g[w];return x}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(g,x){let w,P;for(let Q=1;Q<arguments.length;Q++){P=arguments[Q];for(w in P)g[w]=P[w];for(let te=0;te<de.length;te++)w=de[te],Object.prototype.hasOwnProperty.call(P,w)&&(g[w]=P[w])}}function ve(g){this.src=g,this.g={},this.h=0}ve.prototype.add=function(g,x,w,P,Q){const te=g.toString();g=this.g[te],g||(g=this.g[te]=[],this.h++);const pe=Ie(g,x,P,Q);return pe>-1?(x=g[pe],w||(x.fa=!1)):(x=new ae(x,this.src,te,!!P,Q),x.fa=w,g.push(x)),x};function Ve(g,x){const w=x.type;if(w in g.g){var P=g.g[w],Q=Array.prototype.indexOf.call(P,x,void 0),te;(te=Q>=0)&&Array.prototype.splice.call(P,Q,1),te&&(ge(x),g.g[w].length==0&&(delete g.g[w],g.h--))}}function Ie(g,x,w,P){for(let Q=0;Q<g.length;++Q){const te=g[Q];if(!te.da&&te.listener==x&&te.capture==!!w&&te.ha==P)return Q}return-1}var Ct="closure_lm_"+(Math.random()*1e6|0),nt={};function $t(g,x,w,P,Q){if(Array.isArray(x)){for(let te=0;te<x.length;te++)$t(g,x[te],w,P,Q);return null}return w=nm(w),g&&g[be]?g.J(x,w,c(P)?!!P.capture:!1,Q):Br(g,x,w,!1,P,Q)}function Br(g,x,w,P,Q,te){if(!x)throw Error("Invalid event type");const pe=c(Q)?!!Q.capture:!!Q;let je=$u(g);if(je||(g[Ct]=je=new ve(g)),w=je.add(x,w,P,pe,te),w.proxy)return w;if(P=mi(),w.proxy=P,P.src=g,P.listener=w,g.addEventListener)F||(Q=pe),Q===void 0&&(Q=!1),g.addEventListener(x.toString(),P,Q);else if(g.attachEvent)g.attachEvent(zr(x.toString()),P);else if(g.addListener&&g.removeListener)g.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return w}function mi(){function g(w){return x.call(g.src,g.listener,w)}const x=G_;return g}function Ki(g,x,w,P,Q){if(Array.isArray(x))for(var te=0;te<x.length;te++)Ki(g,x[te],w,P,Q);else P=c(P)?!!P.capture:!!P,w=nm(w),g&&g[be]?(g=g.i,te=String(x).toString(),te in g.g&&(x=g.g[te],w=Ie(x,w,P,Q),w>-1&&(ge(x[w]),Array.prototype.splice.call(x,w,1),x.length==0&&(delete g.g[te],g.h--)))):g&&(g=$u(g))&&(x=g.g[x.toString()],g=-1,x&&(g=Ie(x,w,P,Q)),(w=g>-1?x[g]:null)&&Qi(w))}function Qi(g){if(typeof g!="number"&&g&&!g.da){var x=g.src;if(x&&x[be])Ve(x.i,g);else{var w=g.type,P=g.proxy;x.removeEventListener?x.removeEventListener(w,P,g.capture):x.detachEvent?x.detachEvent(zr(w),P):x.addListener&&x.removeListener&&x.removeListener(P),(w=$u(x))?(Ve(w,g),w.h==0&&(w.src=null,x[Ct]=null)):ge(g)}}}function zr(g){return g in nt?nt[g]:nt[g]="on"+g}function G_(g,x){if(g.da)g=!0;else{x=new ne(x,this);const w=g.listener,P=g.ha||g.src;g.fa&&Qi(g),g=w.call(P,x)}return g}function $u(g){return g=g[Ct],g instanceof ve?g:null}var as="__closure_events_fn_"+(Math.random()*1e9>>>0);function nm(g){return typeof g=="function"?g:(g[as]||(g[as]=function(x){return g.handleEvent(x)}),g[as])}function un(){V.call(this),this.i=new ve(this),this.M=this,this.G=null}_(un,V),un.prototype[be]=!0,un.prototype.removeEventListener=function(g,x,w,P){Ki(this,g,x,w,P)};function vn(g,x){var w,P=g.G;if(P)for(w=[];P;P=P.G)w.push(P);if(g=g.M,P=x.type||x,typeof x=="string")x=new j(x,g);else if(x instanceof j)x.target=x.target||g;else{var Q=x;x=new j(P,g),fe(x,Q)}Q=!0;let te,pe;if(w)for(pe=w.length-1;pe>=0;pe--)te=x.g=w[pe],Q=Xi(te,P,!0,x)&&Q;if(te=x.g=g,Q=Xi(te,P,!0,x)&&Q,Q=Xi(te,P,!1,x)&&Q,w)for(pe=0;pe<w.length;pe++)te=x.g=w[pe],Q=Xi(te,P,!1,x)&&Q}un.prototype.N=function(){if(un.Z.N.call(this),this.i){var g=this.i;for(const x in g.g){const w=g.g[x];for(let P=0;P<w.length;P++)ge(w[P]);delete g.g[x],g.h--}}this.G=null},un.prototype.J=function(g,x,w,P){return this.i.add(String(g),x,!1,w,P)},un.prototype.K=function(g,x,w,P){return this.i.add(String(g),x,!0,w,P)};function Xi(g,x,w,P){if(x=g.i.g[String(x)],!x)return!0;x=x.concat();let Q=!0;for(let te=0;te<x.length;++te){const pe=x[te];if(pe&&!pe.da&&pe.capture==w){const je=pe.listener,At=pe.ha||pe.src;pe.fa&&Ve(g.i,pe),Q=je.call(At,P)!==!1&&Q}}return Q&&!P.defaultPrevented}function W_(g,x){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=d(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:o.setTimeout(g,x||0)}function Yu(g){g.g=W_(()=>{g.g=null,g.i&&(g.i=!1,Yu(g))},g.l);const x=g.h;g.h=null,g.m.apply(null,x)}class $_ extends V{constructor(x,w){super(),this.m=x,this.l=w,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Yu(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yo(g){V.call(this),this.h=g,this.g={}}_(yo,V);var Hr=[];function Ln(g){Ne(g.g,function(x,w){this.g.hasOwnProperty(w)&&Qi(x)},g),g.g={}}yo.prototype.N=function(){yo.Z.N.call(this),Ln(this)},yo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ds=o.JSON.stringify,Qn=o.JSON.parse,Y_=class{stringify(g){return o.JSON.stringify(g,void 0)}parse(g){return o.JSON.parse(g,void 0)}};function sm(){}function im(){}var gi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function qr(){j.call(this,"d")}_(qr,j);function Ks(){j.call(this,"c")}_(Ks,j);var ks={},Gr=null;function $l(){return Gr=Gr||new un}ks.Ia="serverreachability";function Ku(g){j.call(this,ks.Ia,g)}_(Ku,j);function Wr(g){const x=$l();vn(x,new Ku(x))}ks.STAT_EVENT="statevent";function Yl(g,x){j.call(this,ks.STAT_EVENT,g),this.stat=x}_(Yl,j);function Yt(g){const x=$l();vn(x,new Yl(x,g))}ks.Ja="timingevent";function rm(g,x){j.call(this,ks.Ja,g),this.size=x}_(rm,j);function $r(g,x){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){g()},x)}function Yr(){this.g=!0}Yr.prototype.ua=function(){this.g=!1};function Qu(g,x,w,P,Q,te){g.info(function(){if(g.g)if(te){var pe="",je=te.split("&");for(let ut=0;ut<je.length;ut++){var At=je[ut].split("=");if(At.length>1){const Xt=At[0];At=At[1];const ps=Xt.split("_");pe=ps.length>=2&&ps[1]=="type"?pe+(Xt+"="+At+"&"):pe+(Xt+"=redacted&")}}}else pe=null;else pe=te;return"XMLHTTP REQ ("+P+") [attempt "+Q+"]: "+x+`
`+w+`
`+pe})}function Xu(g,x,w,P,Q,te,pe){g.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+Q+"]: "+x+`
`+w+`
`+te+" "+pe})}function Zi(g,x,w,P){g.info(function(){return"XMLHTTP TEXT ("+x+"): "+pi(g,w)+(P?" "+P:"")})}function K_(g,x){g.info(function(){return"TIMEOUT: "+x})}Yr.prototype.info=function(){};function pi(g,x){if(!g.g)return x;if(!x)return null;try{const te=JSON.parse(x);if(te){for(g=0;g<te.length;g++)if(Array.isArray(te[g])){var w=te[g];if(!(w.length<2)){var P=w[1];if(Array.isArray(P)&&!(P.length<1)){var Q=P[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let pe=1;pe<P.length;pe++)P[pe]=""}}}}return Ds(te)}catch{return x}}var Kt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ji;function vo(){}_(vo,sm),vo.prototype.g=function(){return new XMLHttpRequest},Ji=new vo;function bo(g){return encodeURIComponent(String(g))}function Q_(g){var x=1;g=g.split(":");const w=[];for(;x>0&&g.length;)w.push(g.shift()),x--;return g.length&&w.push(g.join(":")),w}function Qs(g,x,w,P){this.j=g,this.i=x,this.l=w,this.S=P||1,this.V=new yo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Kr}function Kr(){this.i=null,this.g="",this.h=!1}var Kl={},_i={};function yi(g,x,w){g.M=1,g.A=tr(Lt(x)),g.u=w,g.R=!0,Qr(g,null)}function Qr(g,x){g.F=Date.now(),xo(g),g.B=Lt(g.A);var w=g.B,P=g.S;Array.isArray(P)||(P=[String(P)]),cm(w.i,"t",P),g.C=0,w=g.j.L,g.h=new Kr,g.g=rc(g.j,w?x:null,!g.u),g.P>0&&(g.O=new $_(d(g.Y,g,g.g),g.P)),x=g.V,w=g.g,P=g.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Hr[0]=Q.toString()),Q=Hr);for(let te=0;te<Q.length;te++){const pe=$t(w,Q[te],P||x.handleEvent,!1,x.h||x);if(!pe)break;x.g[pe.key]=pe}x=g.J?se(g.J):{},g.u?(g.v||(g.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,x)):(g.v="GET",g.g.ea(g.B,g.v,null,x)),Wr(),Qu(g.i,g.v,g.B,g.l,g.S,g.u)}Qs.prototype.ba=function(g){g=g.target;const x=this.O;x&&jn(g)==3?x.j():this.Y(g)},Qs.prototype.Y=function(g){try{if(g==this.g)e:{const je=jn(this.g),At=this.g.ya(),ut=this.g.ca();if(!(je<3)&&(je!=3||this.g&&(this.h.h||this.g.la()||ko(this.g)))){this.K||je!=4||At==7||(At==8||ut<=0?Wr(3):Wr(2)),bi(this);var x=this.g.ca();this.X=x;var w=Xr(this);if(this.o=x==200,Xu(this.i,this.v,this.B,this.l,this.S,je,x),this.o){if(this.U&&!this.L){t:{if(this.g){var P,Q=this.g;if((P=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(P)){var te=P;break t}}te=null}if(g=te)Zi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ql(this,g);else{this.o=!1,this.m=3,Yt(12),xi(this),Eo(this);break e}}if(this.R){g=!0;let Xt;for(;!this.K&&this.C<w.length;)if(Xt=am(this,w),Xt==_i){je==4&&(this.m=4,Yt(14),g=!1),Zi(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==Kl){this.m=4,Yt(15),Zi(this.i,this.l,w,"[Invalid Chunk]"),g=!1;break}else Zi(this.i,this.l,Xt,null),Ql(this,Xt);if(Qt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),je!=4||w.length!=0||this.h.h||(this.m=1,Yt(16),g=!1),this.o=this.o&&g,!g)Zi(this.i,this.l,w,"[Invalid Chunked Response]"),xi(this),Eo(this);else if(w.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),oh(pe),pe.P=!0,Yt(11))}}else Zi(this.i,this.l,w,null),Ql(this,w);je==4&&xi(this),this.o&&!this.K&&(je==4?lh(this.j,this):(this.o=!1,xo(this)))}else Oo(this.g),x==400&&w.indexOf("Unknown SID")>0?(this.m=3,Yt(12)):(this.m=0,Yt(13)),xi(this),Eo(this)}}}catch{}finally{}};function Xr(g){if(!Qt(g))return g.g.la();const x=ko(g.g);if(x==="")return"";let w="";const P=x.length,Q=jn(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return xi(g),Eo(g),"";g.h.i=new o.TextDecoder}for(let te=0;te<P;te++)g.h.h=!0,w+=g.h.i.decode(x[te],{stream:!(Q&&te==P-1)});return x.length=0,g.h.g+=w,g.C=0,g.h.g}function Qt(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function am(g,x){var w=g.C,P=x.indexOf(`
`,w);return P==-1?_i:(w=Number(x.substring(w,P)),isNaN(w)?Kl:(P+=1,P+w>x.length?_i:(x=x.slice(P,P+w),g.C=P+w,x)))}Qs.prototype.cancel=function(){this.K=!0,xi(this)};function xo(g){g.T=Date.now()+g.H,vi(g,g.H)}function vi(g,x){if(g.D!=null)throw Error("WatchDog timer not null");g.D=$r(d(g.aa,g),x)}function bi(g){g.D&&(o.clearTimeout(g.D),g.D=null)}Qs.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(K_(this.i,this.B),this.M!=2&&(Wr(),Yt(17)),xi(this),this.m=2,Eo(this)):vi(this,this.T-g)};function Eo(g){g.j.I==0||g.K||lh(g.j,g)}function xi(g){bi(g);var x=g.O;x&&typeof x.dispose=="function"&&x.dispose(),g.O=null,Ln(g.V),g.g&&(x=g.g,g.g=null,x.abort(),x.dispose())}function Ql(g,x){try{var w=g.j;if(w.I!=0&&(w.g==g||So(w.h,g))){if(!g.L&&So(w.h,g)&&w.I==3){try{var P=w.Ba.g.parse(x)}catch{P=null}if(Array.isArray(P)&&P.length==3){var Q=P;if(Q[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<g.F)ic(w),Ei(w);else break e;ah(w),Yt(18)}}else w.xa=Q[1],0<w.xa-w.K&&Q[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=$r(d(w.Va,w),6e3));Os(w.h)<=1&&w.ta&&(w.ta=void 0)}else ir(w,11)}else if((g.L||w.g==g)&&ic(w),!O(x))for(Q=w.Ba.g.parse(x),x=0;x<Q.length;x++){let ut=Q[x];const Xt=ut[0];if(!(Xt<=w.K))if(w.K=Xt,ut=ut[1],w.I==2)if(ut[0]=="c"){w.M=ut[1],w.ba=ut[2];const ps=ut[3];ps!=null&&(w.ka=ps,w.j.info("VER="+w.ka));const Ti=ut[4];Ti!=null&&(w.za=Ti,w.j.info("SVER="+w.za));const Js=ut[5];Js!=null&&typeof Js=="number"&&Js>0&&(P=1.5*Js,w.O=P,w.j.info("backChannelRequestTimeoutMs_="+P)),P=w;const ei=g.g;if(ei){const ti=ei.g?ei.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ti){var te=P.h;te.g||ti.indexOf("spdy")==-1&&ti.indexOf("quic")==-1&&ti.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Xl(te,te.h),te.h=null))}if(P.G){const uh=ei.g?ei.g.getResponseHeader("X-HTTP-Session-Id"):null;uh&&(P.wa=uh,pt(P.J,P.G,uh))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-g.F,w.j.info("Handshake RTT: "+w.T+"ms")),P=w;var pe=g;if(P.na=ym(P,P.L?P.ba:null,P.W),pe.L){er(P.h,pe);var je=pe,At=P.O;At&&(je.H=At),je.D&&(bi(je),xo(je)),P.g=pe}else mm(P);w.i.length>0&&Lo(w)}else ut[0]!="stop"&&ut[0]!="close"||ir(w,7);else w.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?ir(w,7):Po(w):ut[0]!="noop"&&w.l&&w.l.qa(ut),w.A=0)}}Wr(4)}catch{}}var X_=class{constructor(g,x){this.g=g,this.map=x}};function To(g){this.l=g||10,o.PerformanceNavigationTiming?(g=o.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wo(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Os(g){return g.h?1:g.g?g.g.size:0}function So(g,x){return g.h?g.h==x:g.g?g.g.has(x):!1}function Xl(g,x){g.g?g.g.add(x):g.h=x}function er(g,x){g.h&&g.h==x?g.h=null:g.g&&g.g.has(x)&&g.g.delete(x)}To.prototype.cancel=function(){if(this.i=Zl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Zl(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let x=g.i;for(const w of g.g.values())x=x.concat(w.G);return x}return E(g.i)}var Jl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Z_(g,x){if(g){g=g.split("&");for(let w=0;w<g.length;w++){const P=g[w].indexOf("=");let Q,te=null;P>=0?(Q=g[w].substring(0,P),te=g[w].substring(P+1)):Q=g[w],x(Q,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function Xs(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;g instanceof Xs?(this.l=g.l,Zr(this,g.j),this.o=g.o,this.g=g.g,Ao(this,g.u),this.h=g.h,Jr(this,um(g.i)),this.m=g.m):g&&(x=String(g).match(Jl))?(this.l=!1,Zr(this,x[1]||"",!0),this.o=Io(x[2]||""),this.g=Io(x[3]||"",!0),Ao(this,x[4]),this.h=Io(x[5]||"",!0),Jr(this,x[6]||"",!0),this.m=Io(x[7]||"")):(this.l=!1,this.i=new Ms(null,this.l))}Xs.prototype.toString=function(){const g=[];var x=this.j;x&&g.push(bn(x,Ju,!0),":");var w=this.g;return(w||x=="file")&&(g.push("//"),(x=this.o)&&g.push(bn(x,Ju,!0),"@"),g.push(bo(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&g.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&g.push("/"),g.push(bn(w,w.charAt(0)=="/"?ea:eh,!0))),(w=this.i.toString())&&g.push("?",w),(w=this.m)&&g.push("#",bn(w,lm)),g.join("")},Xs.prototype.resolve=function(g){const x=Lt(this);let w=!!g.j;w?Zr(x,g.j):w=!!g.o,w?x.o=g.o:w=!!g.g,w?x.g=g.g:w=g.u!=null;var P=g.h;if(w)Ao(x,g.u);else if(w=!!g.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var Q=x.h.lastIndexOf("/");Q!=-1&&(P=x.h.slice(0,Q+1)+P)}if(Q=P,Q==".."||Q==".")P="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){P=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const te=[];for(let pe=0;pe<Q.length;){const je=Q[pe++];je=="."?P&&pe==Q.length&&te.push(""):je==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),P&&pe==Q.length&&te.push("")):(te.push(je),P=!0)}P=te.join("/")}else P=Q}return w?x.h=P:w=g.i.toString()!=="",w?Jr(x,um(g.i)):w=!!g.m,w&&(x.m=g.m),x};function Lt(g){return new Xs(g)}function Zr(g,x,w){g.j=w?Io(x,!0):x,g.j&&(g.j=g.j.replace(/:$/,""))}function Ao(g,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);g.u=x}else g.u=null}function Jr(g,x,w){x instanceof Ms?(g.i=x,sh(g.i,g.l)):(w||(x=bn(x,om)),g.i=new Ms(x,g.l))}function pt(g,x,w){g.i.set(x,w)}function tr(g){return pt(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Io(g,x){return g?x?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function bn(g,x,w){return typeof g=="string"?(g=encodeURI(g).replace(x,Zu),w&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Zu(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Ju=/[#\/\?@]/g,eh=/[#\?:]/g,ea=/[#\?]/g,om=/[#\?@]/g,lm=/#/g;function Ms(g,x){this.h=this.g=null,this.i=g||null,this.j=!!x}function nr(g){g.g||(g.g=new Map,g.h=0,g.i&&Z_(g.i,function(x,w){g.add(decodeURIComponent(x.replace(/\+/g," ")),w)}))}n=Ms.prototype,n.add=function(g,x){nr(this),this.i=null,g=Zs(this,g);let w=this.g.get(g);return w||this.g.set(g,w=[]),w.push(x),this.h+=1,this};function th(g,x){nr(g),x=Zs(g,x),g.g.has(x)&&(g.i=null,g.h-=g.g.get(x).length,g.g.delete(x))}function nh(g,x){return nr(g),x=Zs(g,x),g.g.has(x)}n.forEach=function(g,x){nr(this),this.g.forEach(function(w,P){w.forEach(function(Q){g.call(x,Q,P,this)},this)},this)};function ec(g,x){nr(g);let w=[];if(typeof x=="string")nh(g,x)&&(w=w.concat(g.g.get(Zs(g,x))));else for(g=Array.from(g.g.values()),x=0;x<g.length;x++)w=w.concat(g[x]);return w}n.set=function(g,x){return nr(this),this.i=null,g=Zs(this,g),nh(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[x]),this.h+=1,this},n.get=function(g,x){return g?(g=ec(this,g),g.length>0?String(g[0]):x):x};function cm(g,x,w){th(g,x),w.length>0&&(g.i=null,g.g.set(Zs(g,x),E(w)),g.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],x=Array.from(this.g.keys());for(let P=0;P<x.length;P++){var w=x[P];const Q=bo(w);w=ec(this,w);for(let te=0;te<w.length;te++){let pe=Q;w[te]!==""&&(pe+="="+bo(w[te])),g.push(pe)}}return this.i=g.join("&")};function um(g){const x=new Ms;return x.i=g.i,g.g&&(x.g=new Map(g.g),x.h=g.h),x}function Zs(g,x){return x=String(x),g.j&&(x=x.toLowerCase()),x}function sh(g,x){x&&!g.j&&(nr(g),g.i=null,g.g.forEach(function(w,P){const Q=P.toLowerCase();P!=Q&&(th(this,P),cm(this,Q,w))},g)),g.j=x}function ih(g,x){const w=new Yr;if(o.Image){const P=new Image;P.onload=m(Xn,w,"TestLoadImage: loaded",!0,x,P),P.onerror=m(Xn,w,"TestLoadImage: error",!1,x,P),P.onabort=m(Xn,w,"TestLoadImage: abort",!1,x,P),P.ontimeout=m(Xn,w,"TestLoadImage: timeout",!1,x,P),o.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=g}else x(!1)}function ta(g,x){const w=new Yr,P=new AbortController,Q=setTimeout(()=>{P.abort(),Xn(w,"TestPingServer: timeout",!1,x)},1e4);fetch(g,{signal:P.signal}).then(te=>{clearTimeout(Q),te.ok?Xn(w,"TestPingServer: ok",!0,x):Xn(w,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(Q),Xn(w,"TestPingServer: error",!1,x)})}function Xn(g,x,w,P,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),P(w)}catch{}}function hm(){this.g=new Y_}function Ro(g){this.i=g.Sb||null,this.h=g.ab||!1}_(Ro,sm),Ro.prototype.g=function(){return new Co(this.i,this.h)};function Co(g,x){un.call(this),this.H=g,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Co,un),n=Co.prototype,n.open=function(g,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=x,this.readyState=1,sr(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(x.body=g),(this.H||o).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Zn(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,sr(this)),this.g&&(this.readyState=3,sr(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;na(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function na(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var x=g.value?g.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!g.done}))&&(this.response=this.responseText+=x)}g.done?Zn(this):sr(this),this.readyState==3&&na(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,Zn(this))},n.Na=function(g){this.g&&(this.response=g,Zn(this))},n.ga=function(){this.g&&Zn(this)};function Zn(g){g.readyState=4,g.l=null,g.j=null,g.B=null,sr(g)}n.setRequestHeader=function(g,x){this.A.append(g,x)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],x=this.h.entries();for(var w=x.next();!w.done;)w=w.value,g.push(w[0]+": "+w[1]),w=x.next();return g.join(`\r
`)};function sr(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Co.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function sa(g){let x="";return Ne(g,function(w,P){x+=P,x+=":",x+=w,x+=`\r
`}),x}function Ps(g,x,w){e:{for(P in w){var P=!1;break e}P=!0}P||(w=sa(w),typeof g=="string"?w!=null&&bo(w):pt(g,x,w))}function xt(g){un.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(xt,un);var tc=/^https?$/i,dm=["POST","PUT"];n=xt.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,x,w,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);x=x?x.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ji.g(),this.g.onreadystatechange=b(d(this.Ca,this));try{this.B=!0,this.g.open(x,String(g),!0),this.B=!1}catch(te){No(this,te);return}if(g=w||"",w=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var Q in P)w.set(Q,P[Q]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const te of P.keys())w.set(te,P.get(te));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(w.keys()).find(te=>te.toLowerCase()=="content-type"),Q=o.FormData&&g instanceof o.FormData,!(Array.prototype.indexOf.call(dm,x,void 0)>=0)||P||Q||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,pe]of w)this.g.setRequestHeader(te,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(te){No(this,te)}};function No(g,x){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=x,g.o=5,Do(g),hn(g)}function Do(g){g.A||(g.A=!0,vn(g,"complete"),vn(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,vn(this,"complete"),vn(this,"abort"),hn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hn(this,!0)),xt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?rh(this):this.Xa())},n.Xa=function(){rh(this)};function rh(g){if(g.h&&typeof r<"u"){if(g.v&&jn(g)==4)setTimeout(g.Ca.bind(g),0);else if(vn(g,"readystatechange"),jn(g)==4){g.h=!1;try{const te=g.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var w;if(!(w=x)){var P;if(P=te===0){let pe=String(g.D).match(Jl)[1]||null;!pe&&o.self&&o.self.location&&(pe=o.self.location.protocol.slice(0,-1)),P=!tc.test(pe?pe.toLowerCase():"")}w=P}if(w)vn(g,"complete"),vn(g,"success");else{g.o=6;try{var Q=jn(g)>2?g.g.statusText:""}catch{Q=""}g.l=Q+" ["+g.ca()+"]",Do(g)}}finally{hn(g)}}}}function hn(g,x){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const w=g.g;g.g=null,x||vn(g,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function jn(g){return g.g?g.g.readyState:0}n.ca=function(){try{return jn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var x=this.g.responseText;return g&&x.indexOf(g)==0&&(x=x.substring(g.length)),Qn(x)}};function ko(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Oo(g){const x={};g=(g.g&&jn(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<g.length;P++){if(O(g[P]))continue;var w=Q_(g[P]);const Q=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const te=x[Q]||[];x[Q]=te,te.push(w)}B(x,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mo(g,x,w){return w&&w.internalChannelParams&&w.internalChannelParams[g]||x}function nc(g){this.za=0,this.i=[],this.j=new Yr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mo("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mo("baseRetryDelayMs",5e3,g),this.Za=Mo("retryDelaySeedMs",1e4,g),this.Ta=Mo("forwardChannelMaxRetries",2,g),this.va=Mo("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new To(g&&g.concurrentRequestLimit),this.Ba=new hm,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=nc.prototype,n.ka=8,n.I=1,n.connect=function(g,x,w,P){Yt(0),this.W=g,this.H=x||{},w&&P!==void 0&&(this.H.OSID=w,this.H.OAID=P),this.F=this.X,this.J=ym(this,null,this.W),Lo(this)};function Po(g){if(Vo(g),g.I==3){var x=g.V++,w=Lt(g.J);if(pt(w,"SID",g.M),pt(w,"RID",x),pt(w,"TYPE","terminate"),jo(g,w),x=new Qs(g,g.j,x),x.M=2,x.A=tr(Lt(w)),w=!1,o.navigator&&o.navigator.sendBeacon)try{w=o.navigator.sendBeacon(x.A.toString(),"")}catch{}!w&&o.Image&&(new Image().src=x.A,w=!0),w||(x.g=rc(x.j,null),x.g.ea(x.A)),x.F=Date.now(),xo(x)}_m(g)}function Ei(g){g.g&&(oh(g),g.g.cancel(),g.g=null)}function Vo(g){Ei(g),g.v&&(o.clearTimeout(g.v),g.v=null),ic(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&o.clearTimeout(g.m),g.m=null)}function Lo(g){if(!wo(g.h)&&!g.m){g.m=!0;var x=g.Ea;U||I(),z||(U(),z=!0),C.add(x,g),g.D=0}}function J_(g,x){return Os(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=x.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=$r(d(g.Ea,g,x),pm(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const Q=new Qs(this,this.j,g);let te=this.o;if(this.U&&(te?(te=se(te),fe(te,this.U)):te=this.U),this.u!==null||this.R||(Q.J=te,te=null),this.S)e:{for(var x=0,w=0;w<this.i.length;w++){t:{var P=this.i[w];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(x+=P,x>4096){x=w;break e}if(x===4096||w===this.i.length-1){x=w+1;break e}}x=1e3}else x=1e3;x=sc(this,Q,x),w=Lt(this.J),pt(w,"RID",g),pt(w,"CVER",22),this.G&&pt(w,"X-HTTP-Session-Id",this.G),jo(this,w),te&&(this.R?x="headers="+bo(sa(te))+"&"+x:this.u&&Ps(w,this.u,te)),Xl(this.h,Q),this.Ra&&pt(w,"TYPE","init"),this.S?(pt(w,"$req",x),pt(w,"SID","null"),Q.U=!0,yi(Q,w,null)):yi(Q,w,x),this.I=2}}else this.I==3&&(g?fm(this,g):this.i.length==0||wo(this.h)||fm(this))};function fm(g,x){var w;x?w=x.l:w=g.V++;const P=Lt(g.J);pt(P,"SID",g.M),pt(P,"RID",w),pt(P,"AID",g.K),jo(g,P),g.u&&g.o&&Ps(P,g.u,g.o),w=new Qs(g,g.j,w,g.D+1),g.u===null&&(w.J=g.o),x&&(g.i=x.G.concat(g.i)),x=sc(g,w,1e3),w.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Xl(g.h,w),yi(w,P,x)}function jo(g,x){g.H&&Ne(g.H,function(w,P){pt(x,P,w)}),g.l&&Ne({},function(w,P){pt(x,P,w)})}function sc(g,x,w){w=Math.min(g.i.length,w);const P=g.l?d(g.l.Ka,g.l,g):null;e:{var Q=g.i;let je=-1;for(;;){const At=["count="+w];je==-1?w>0?(je=Q[0].g,At.push("ofs="+je)):je=0:At.push("ofs="+je);let ut=!0;for(let Xt=0;Xt<w;Xt++){var te=Q[Xt].g;const ps=Q[Xt].map;if(te-=je,te<0)je=Math.max(0,Q[Xt].g-100),ut=!1;else try{te="req"+te+"_"||"";try{var pe=ps instanceof Map?ps:Object.entries(ps);for(const[Ti,Js]of pe){let ei=Js;c(Js)&&(ei=Ds(Js)),At.push(te+Ti+"="+encodeURIComponent(ei))}}catch(Ti){throw At.push(te+"type="+encodeURIComponent("_badmap")),Ti}}catch{P&&P(ps)}}if(ut){pe=At.join("&");break e}}pe=void 0}return g=g.i.splice(0,w),x.G=g,pe}function mm(g){if(!g.g&&!g.v){g.Y=1;var x=g.Da;U||I(),z||(U(),z=!0),C.add(x,g),g.A=0}}function ah(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=$r(d(g.Da,g),pm(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,gm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=$r(d(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yt(10),Ei(this),gm(this))};function oh(g){g.B!=null&&(o.clearTimeout(g.B),g.B=null)}function gm(g){g.g=new Qs(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var x=Lt(g.na);pt(x,"RID","rpc"),pt(x,"SID",g.M),pt(x,"AID",g.K),pt(x,"CI",g.F?"0":"1"),!g.F&&g.ia&&pt(x,"TO",g.ia),pt(x,"TYPE","xmlhttp"),jo(g,x),g.u&&g.o&&Ps(x,g.u,g.o),g.O&&(g.g.H=g.O);var w=g.g;g=g.ba,w.M=1,w.A=tr(Lt(x)),w.u=null,w.R=!0,Qr(w,g)}n.Va=function(){this.C!=null&&(this.C=null,Ei(this),ah(this),Yt(19))};function ic(g){g.C!=null&&(o.clearTimeout(g.C),g.C=null)}function lh(g,x){var w=null;if(g.g==x){ic(g),oh(g),g.g=null;var P=2}else if(So(g.h,x))w=x.G,er(g.h,x),P=1;else return;if(g.I!=0){if(x.o)if(P==1){w=x.u?x.u.length:0,x=Date.now()-x.F;var Q=g.D;P=$l(),vn(P,new rm(P,w)),Lo(g)}else mm(g);else if(Q=x.m,Q==3||Q==0&&x.X>0||!(P==1&&J_(g,x)||P==2&&ah(g)))switch(w&&w.length>0&&(x=g.h,x.i=x.i.concat(w)),Q){case 1:ir(g,5);break;case 4:ir(g,10);break;case 3:ir(g,6);break;default:ir(g,2)}}}function pm(g,x){let w=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(w*=2),w*x}function ir(g,x){if(g.j.info("Error code "+x),x==2){var w=d(g.bb,g),P=g.Ua;const Q=!P;P=new Xs(P||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Zr(P,"https"),tr(P),Q?ih(P.toString(),w):ta(P.toString(),w)}else Yt(2);g.I=0,g.l&&g.l.pa(x),_m(g),Vo(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function _m(g){if(g.I=0,g.ja=[],g.l){const x=Zl(g.h);(x.length!=0||g.i.length!=0)&&(S(g.ja,x),S(g.ja,g.i),g.h.i.length=0,E(g.i),g.i.length=0),g.l.oa()}}function ym(g,x,w){var P=w instanceof Xs?Lt(w):new Xs(w);if(P.g!="")x&&(P.g=x+"."+P.g),Ao(P,P.u);else{var Q=o.location;P=Q.protocol,x=x?x+"."+Q.hostname:Q.hostname,Q=+Q.port;const te=new Xs(null);P&&Zr(te,P),x&&(te.g=x),Q&&Ao(te,Q),w&&(te.h=w),P=te}return w=g.G,x=g.wa,w&&x&&pt(P,w,x),pt(P,"VER",g.ka),jo(g,P),P}function rc(g,x,w){if(x&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=g.Aa&&!g.ma?new xt(new Ro({ab:w})):new xt(g.ma),x.Fa(g.L),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function vm(){}n=vm.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ac(){}ac.prototype.g=function(g,x){return new Jn(g,x)};function Jn(g,x){un.call(this),this.g=new nc(x),this.l=g,this.h=x&&x.messageUrlParams||null,g=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(g?g["X-WebChannel-Content-Type"]=x.messageContentType:g={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(g?g["X-WebChannel-Client-Profile"]=x.sa:g={"X-WebChannel-Client-Profile":x.sa}),this.g.U=g,(g=x&&x.Qb)&&!O(g)&&(this.g.u=g),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!O(x)&&(this.g.G=x,g=this.h,g!==null&&x in g&&(g=this.h,x in g&&delete g[x])),this.j=new ia(this)}_(Jn,un),Jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){Po(this.g)},Jn.prototype.o=function(g){var x=this.g;if(typeof g=="string"){var w={};w.__data__=g,g=w}else this.v&&(w={},w.__data__=Ds(g),g=w);x.i.push(new X_(x.Ya++,g)),x.I==3&&Lo(x)},Jn.prototype.N=function(){this.g.l=null,delete this.j,Po(this.g),delete this.g,Jn.Z.N.call(this)};function ch(g){qr.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var x=g.__sm__;if(x){e:{for(const w in x){g=w;break e}g=void 0}(this.i=g)&&(g=this.i,x=x!==null&&g in x?x[g]:void 0),this.data=x}else this.data=g}_(ch,qr);function bm(){Ks.call(this),this.status=1}_(bm,Ks);function ia(g){this.g=g}_(ia,vm),ia.prototype.ra=function(){vn(this.g,"a")},ia.prototype.qa=function(g){vn(this.g,new ch(g))},ia.prototype.pa=function(g){vn(this.g,new bm)},ia.prototype.oa=function(){vn(this.g,"b")},ac.prototype.createWebChannel=ac.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,A2=function(){return new ac},S2=function(){return $l()},w2=ks,Lv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Kt.NO_ERROR=0,Kt.TIMEOUT=8,Kt.HTTP_ERROR=6,qg=Kt,Rn.COMPLETE="complete",T2=Rn,im.EventType=gi,gi.OPEN="a",gi.CLOSE="b",gi.ERROR="c",gi.MESSAGE="d",un.prototype.listen=un.prototype.J,pd=im,xt.prototype.listenOnce=xt.prototype.K,xt.prototype.getLastError=xt.prototype.Ha,xt.prototype.getLastErrorCode=xt.prototype.ya,xt.prototype.getStatus=xt.prototype.ca,xt.prototype.getResponseJson=xt.prototype.La,xt.prototype.getResponseText=xt.prototype.la,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Fa,E2=xt}).apply(typeof xg<"u"?xg:typeof self<"u"?self:typeof window<"u"?window:{});const CA="@firebase/firestore",NA="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=new t_("@firebase/firestore");function qc(){return Xa.logLevel}function HL(n){Xa.setLogLevel(n)}function ue(n,...e){if(Xa.logLevel<=Ke.DEBUG){const t=e.map(ex);Xa.debug(`Firestore (${Vu}): ${n}`,...t)}}function en(n,...e){if(Xa.logLevel<=Ke.ERROR){const t=e.map(ex);Xa.error(`Firestore (${Vu}): ${n}`,...t)}}function Wi(n,...e){if(Xa.logLevel<=Ke.WARN){const t=e.map(ex);Xa.warn(`Firestore (${Vu}): ${n}`,...t)}}function ex(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,I2(n,s,t)}function I2(n,e,t){let s=`FIRESTORE (${Vu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw en(s),new Error(s)}function Se(n,e,t,s){let i="Unexpected state";typeof t=="string"?i=t:s=t,n||I2(e,i,s)}function qL(n,e){n||Ee(57014,e)}function xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends ss{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Sn.UNAUTHENTICATED)))}shutdown(){}}class WL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $L{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Se(this.o===void 0,42304);let s=this.i;const i=h=>this.i!==s?(s=this.i,t(h)):Promise.resolve();let r=new Pn;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Pn,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const h=r;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},c=h=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Pn)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Se(typeof s.accessToken=="string",31837,{l:s}),new R2(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new Sn(e)}}class YL{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KL{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new YL(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class DA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QL{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Se(this.o===void 0,3512);const s=r=>{r.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable((()=>s(r)))};const i=r=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>i(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?i(r):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new DA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Se(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new DA(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=XL(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<t&&(s+=e.charAt(i[r]%62))}return s}}function Le(n,e){return n<e?-1:n>e?1:0}function jv(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const i=n.charAt(s),r=e.charAt(s);if(i!==r)return tv(i)===tv(r)?Le(i,r):tv(i)?1:-1}return Le(n.length,e.length)}const ZL=55296,JL=57343;function tv(n){const e=n.charCodeAt(0);return e>=ZL&&e<=JL}function au(n,e,t){return n.length===e.length&&n.every(((s,i)=>t(s,e[i])))}function C2(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="__name__";class Di{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ee(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Di.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Di?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let i=0;i<s;i++){const r=Di.compareSegments(e.get(i),t.get(i));if(r!==0)return r}return Le(e.length,t.length)}static compareSegments(e,t){const s=Di.isNumericId(e),i=Di.isNumericId(t);return s&&!i?-1:!s&&i?1:s&&i?Di.extractNumericId(e).compare(Di.extractNumericId(t)):jv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ba.fromString(e.substring(4,e.length-2))}}class Qe extends Di{construct(e,t,s){return new Qe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new le(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((i=>i.length>0)))}return new Qe(t)}static emptyPath(){return new Qe([])}}const e4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends Di{construct(e,t,s){return new Ot(e,t,s)}static isValidIdentifier(e){return e4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kA}static keyField(){return new Ot([kA])}static fromServerFormat(e){const t=[];let s="",i=0;const r=()=>{if(s.length===0)throw new le(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new le(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new le(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=h,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(s+=c,i++):(r(),i++)}if(r(),o)throw new le(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(t)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Qe.fromString(e))}static fromName(e){return new _e(Qe.fromString(e).popFirst(5))}static empty(){return new _e(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(n,e,t){if(!t)throw new le(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function N2(n,e,t,s){if(e===!0&&s===!0)throw new le(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function OA(n){if(!_e.isDocumentKey(n))throw new le(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function MA(n){if(_e.isDocumentKey(n))throw new le(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function D2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function n_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function ot(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=n_(n);throw new le(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function k2(n,e){if(e<=0)throw new le(ee.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Nf(n,e){if(!D2(n))throw new le(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const i=e[s].typeString,r="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const o=n[s];if(i&&typeof o!==i){t=`JSON field '${s}' must be a ${i}.`;break}if(r!==void 0&&o!==r.value){t=`Expected '${s}' field to equal '${r.value}'`;break}}if(t)throw new le(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=-62135596800,VA=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*VA);return new ct(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<PA)throw new le(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/VA}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nf(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-PA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:cn("string",ct._jsonSchemaVersion),seconds:cn("number"),nanoseconds:cn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new ct(0,0))}static max(){return new Ce(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=-1;class _p{constructor(e,t,s,i){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=i}}function Uv(n){return n.fields.find((e=>e.kind===2))}function al(n){return n.fields.filter((e=>e.kind!==2))}_p.UNKNOWN_ID=-1;class Gg{constructor(e,t){this.fieldPath=e,this.kind=t}}class Zd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Zd(0,Cs.min())}}function O2(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(s===1e9?new ct(t+1,0):new ct(t,s));return new Cs(i,_e.empty(),e)}function M2(n){return new Cs(n.readTime,n.key,ou)}class Cs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Cs(Ce.min(),_e.empty(),ou)}static max(){return new Cs(Ce.max(),_e.empty(),ou)}}function sx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==P2)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $(((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(t,r).next(s,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):$.reject(t)}static resolve(e){return new $(((t,s)=>{t(e)}))}static reject(e){return new $(((t,s)=>{s(e)}))}static waitFor(e){return new $(((t,s)=>{let i=0,r=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++r,o&&r===i&&t()}),(h=>s(h)))})),o=!0,r===i&&t()}))}static or(e){let t=$.resolve(!1);for(const s of e)t=t.next((i=>i?$.resolve(i):s()));return t}static forEach(e,t){const s=[];return e.forEach(((i,r)=>{s.push(t.call(this,i,r))})),this.waitFor(s)}static mapArray(e,t){return new $(((s,i)=>{const r=e.length,o=new Array(r);let c=0;for(let h=0;h<r;h++){const d=h;t(e[d]).next((m=>{o[d]=m,++c,c===r&&s(o)}),(m=>i(m)))}}))}static doWhile(e,t){return new $(((s,i)=>{const r=()=>{e()===!0?t().next((()=>{r()}),i):s()};r()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="SimpleDb";class s_{static open(e,t,s,i){try{return new s_(t,e.transaction(i,s))}catch(r){throw new Nd(t,r)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Pn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Nd(e,t.error)):this.S.resolve()},this.transaction.onerror=s=>{const i=ix(s.target.error);this.S.reject(new Nd(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ue(Ss,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new n4(t)}}class Fi{static delete(e){return ue(Ss,"Removing database:",e),ul(Gb().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Kd())return!1;if(Fi.F())return!0;const e=Ut(),t=Fi.M(e),s=0<t&&t<10,i=L2(e),r=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||r)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}constructor(e,t,s){this.name=e,this.version=t,this.N=s,this.B=null,Fi.M(Ut())===12.2&&en("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ue(Ss,"Opening database:",this.name),this.db=await new Promise(((t,s)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=r=>{const o=r.target.result;t(o)},i.onblocked=()=>{s(new Nd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=r=>{const o=r.target.error;o.name==="VersionError"?s(new le(ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?s(new le(ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):s(new Nd(e,o))},i.onupgradeneeded=r=>{ue(Ss,'Database "'+this.name+'" requires upgrade from version:',r.oldVersion);const o=r.target.result;this.N.k(o,i.transaction,r.oldVersion,this.version).next((()=>{ue(Ss,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,s,i){const r=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const c=s_.open(this.db,e,r?"readonly":"readwrite",s),h=i(c).next((d=>(c.C(),d))).catch((d=>(c.abort(d),$.reject(d)))).toPromise();return h.catch((()=>{})),await c.D,h}catch(c){const h=c,d=h.name!=="FirebaseError"&&o<3;if(ue(Ss,"Transaction failed with error:",h.message,"Retrying:",d),this.close(),!d)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function L2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class t4{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ul(this.U.delete())}}class Nd extends le{constructor(e,t){super(ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ho(n){return n.name==="IndexedDbTransactionError"}class n4{constructor(e){this.store=e}put(e,t){let s;return t!==void 0?(ue(Ss,"PUT",this.store.name,e,t),s=this.store.put(t,e)):(ue(Ss,"PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ul(s)}add(e){return ue(Ss,"ADD",this.store.name,e,e),ul(this.store.add(e))}get(e){return ul(this.store.get(e)).next((t=>(t===void 0&&(t=null),ue(Ss,"GET",this.store.name,e,t),t)))}delete(e){return ue(Ss,"DELETE",this.store.name,e),ul(this.store.delete(e))}count(){return ue(Ss,"COUNT",this.store.name),ul(this.store.count())}J(e,t){const s=this.options(e,t),i=s.index?this.store.index(s.index):this.store;if(typeof i.getAll=="function"){const r=i.getAll(s.range);return new $(((o,c)=>{r.onerror=h=>{c(h.target.error)},r.onsuccess=h=>{o(h.target.result)}}))}{const r=this.cursor(s),o=[];return this.H(r,((c,h)=>{o.push(h)})).next((()=>o))}}Y(e,t){const s=this.store.getAll(e,t===null?void 0:t);return new $(((i,r)=>{s.onerror=o=>{r(o.target.error)},s.onsuccess=o=>{i(o.target.result)}}))}Z(e,t){ue(Ss,"DELETE ALL",this.store.name);const s=this.options(e,t);s.X=!1;const i=this.cursor(s);return this.H(i,((r,o,c)=>c.delete()))}ee(e,t){let s;t?s=e:(s={},t=e);const i=this.cursor(s);return this.H(i,t)}te(e){const t=this.cursor({});return new $(((s,i)=>{t.onerror=r=>{const o=ix(r.target.error);i(o)},t.onsuccess=r=>{const o=r.target.result;o?e(o.primaryKey,o.value).next((c=>{c?o.continue():s()})):s()}}))}H(e,t){const s=[];return new $(((i,r)=>{e.onerror=o=>{r(o.target.error)},e.onsuccess=o=>{const c=o.target.result;if(!c)return void i();const h=new t4(c),d=t(c.primaryKey,c.value,h);if(d instanceof $){const m=d.catch((_=>(h.done(),$.reject(_))));s.push(m)}h.isDone?i():h.G===null?c.continue():c.continue(h.G)}})).next((()=>$.waitFor(s)))}options(e,t){let s;return e!==void 0&&(typeof e=="string"?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.X?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ul(n){return new $(((e,t)=>{n.onsuccess=s=>{const i=s.target.result;e(i)},n.onerror=s=>{const i=ix(s.target.error);t(i)}}))}let LA=!1;function ix(n){const e=Fi.M(Ut());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return LA||(LA=!0,setTimeout((()=>{throw s}),0)),s}}return n}const Dd="IndexBackfiller";class s4{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ue(Dd,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ue(Dd,`Documents written: ${t}`)}catch(t){ho(t)?ue(Dd,"Ignoring IndexedDB error during index backfill: ",t):await uo(t)}await this.re(6e4)}))}}class i4{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const s=new Set;let i=t,r=!0;return $.doWhile((()=>r===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!s.has(o))return ue(Dd,`Processing collection: ${o}`),this.oe(e,o,i).next((c=>{i-=c,s.add(o)}));r=!1})))).next((()=>t-i))}oe(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,s).next((r=>{const o=r.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(i,r))).next((c=>(ue(Dd,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c)))).next((()=>o.size))}))))}_e(e,t){let s=e;return t.changes.forEach(((i,r)=>{const o=M2(r);sx(o,s)>0&&(s=o)})),new Cs(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fs.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=-1;function Df(n){return n==null}function Jd(n){return n===0&&1/n==-1/0}function j2(n){return typeof n=="number"&&Number.isInteger(n)&&!Jd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="";function $n(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jA(e)),e=r4(n.get(t),e);return jA(e)}function r4(n,e){let t=e;const s=n.length;for(let i=0;i<s;i++){const r=n.charAt(i);switch(r){case"\0":t+="";break;case yp:t+="";break;default:t+=r}}return t}function jA(n){return n+yp+""}function Li(n){const e=n.length;if(Se(e>=2,64408,{path:n}),e===2)return Se(n.charAt(0)===yp&&n.charAt(1)==="",56145,{path:n}),Qe.emptyPath();const t=e-2,s=[];let i="";for(let r=0;r<e;){const o=n.indexOf(yp,r);switch((o<0||o>t)&&Ee(50515,{path:n}),n.charAt(o+1)){case"":const c=n.substring(r,o);let h;i.length===0?h=c:(i+=c,h=i,i=""),s.push(h);break;case"":i+=n.substring(r,o),i+="\0";break;case"":i+=n.substring(r,o+1);break;default:Ee(61167,{path:n})}r=o+2}return new Qe(s)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="remoteDocuments",kf="owner",Pc="owner",ef="mutationQueues",a4="userId",ri="mutations",UA="batchId",gl="userMutationsIndex",FA=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(n,e){return[n,$n(e)]}function U2(n,e,t){return[n,$n(e),t]}const o4={},lu="documentMutations",vp="remoteDocumentsV14",l4=["prefixPath","collectionGroup","readTime","documentId"],$g="documentKeyIndex",c4=["prefixPath","collectionGroup","documentId"],F2="collectionGroupIndex",u4=["collectionGroup","readTime","prefixPath","documentId"],tf="remoteDocumentGlobal",Fv="remoteDocumentGlobalKey",cu="targets",B2="queryTargetsIndex",h4=["canonicalId","targetId"],uu="targetDocuments",d4=["targetId","path"],rx="documentTargetsIndex",f4=["path","targetId"],bp="targetGlobalKey",xl="targetGlobal",nf="collectionParents",m4=["collectionId","parent"],hu="clientMetadata",g4="clientId",i_="bundles",p4="bundleId",r_="namedQueries",_4="name",ax="indexConfiguration",y4="indexId",Bv="collectionGroupIndex",v4="collectionGroup",kd="indexState",b4=["indexId","uid"],z2="sequenceNumberIndex",x4=["uid","sequenceNumber"],Od="indexEntries",E4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],H2="documentKeyIndex",T4=["indexId","uid","orderedDocumentKey"],a_="documentOverlays",w4=["userId","collectionPath","documentId"],zv="collectionPathOverlayIndex",S4=["userId","collectionPath","largestBatchId"],q2="collectionGroupOverlayIndex",A4=["userId","collectionGroup","largestBatchId"],ox="globals",I4="name",G2=[ef,ri,lu,ol,cu,kf,xl,uu,hu,tf,nf,i_,r_],R4=[...G2,a_],W2=[ef,ri,lu,vp,cu,kf,xl,uu,hu,tf,nf,i_,r_,a_],$2=W2,lx=[...$2,ax,kd,Od],C4=lx,Y2=[...lx,ox],N4=Y2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv extends V2{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function yn(n,e){const t=xe(n);return Fi.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function K2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,t){this.comparator=e,this.root=t||kn.EMPTY}insert(e,t){return new St(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(e){return new St(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return t+s.left.size;i<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eg(this.root,e,this.comparator,!0)}}class Eg{constructor(e,t,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?s(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kn{constructor(e,t,s,i,r){this.key=e,this.value=t,this.color=s??kn.RED,this.left=i??kn.EMPTY,this.right=r??kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,i,r){return new kn(e??this.key,t??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let i=this;const r=s(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,s),null):r===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return kn.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1;kn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,s,i,r){return this}insert(e,t,s){return new kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zA(this.data.getIterator())}getIteratorFrom(e){return new zA(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gt(this.comparator);return t.data=e,t}}class zA{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vc(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new ms([])}unionWith(e){let t=new gt(Ot.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ms(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return au(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Q2("Invalid base64 string: "+r):r}})(e);return new qt(t)}static fromUint8Array(e){const t=(function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r})(e);return new qt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let i=0;i<t.length;i++)s[i]=t.charCodeAt(i);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const k4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(n){if(Se(!!n,39018),typeof n=="string"){let e=0;const t=k4.exec(n);if(Se(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Dt(n.seconds),nanos:Dt(n.nanos)}}function Dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Dr(n){return typeof n=="string"?qt.fromBase64String(n):qt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="server_timestamp",Z2="__type__",J2="__previous_value__",eN="__local_write_time__";function o_(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Z2])==null?void 0:s.stringValue)===X2}function l_(n){const e=n.mapValue.fields[J2];return o_(e)?l_(e):e}function sf(n){const e=Nr(n.mapValue.fields[eN].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,t,s,i,r,o,c,h,d,m){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=d,this.isUsingEmulator=m}}const qv="(default)";class Za{constructor(e,t){this.projectId=e,this.database=t||qv}static empty(){return new Za("","")}get isDefaultDatabase(){return this.database===qv}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="__type__",tN="__max__",Oa={mapValue:{fields:{__type__:{stringValue:tN}}}},ux="__vector__",du="value",Yg={nullValue:"NULL_VALUE"};function Ja(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?o_(n)?4:nN(n)?9007199254740991:c_(n)?10:11:Ee(28295,{value:n})}function $i(n,e){if(n===e)return!0;const t=Ja(n);if(t!==Ja(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sf(n).isEqual(sf(e));case 3:return(function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=Nr(i.timestampValue),c=Nr(r.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,r){return Dr(i.bytesValue).isEqual(Dr(r.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,r){return Dt(i.geoPointValue.latitude)===Dt(r.geoPointValue.latitude)&&Dt(i.geoPointValue.longitude)===Dt(r.geoPointValue.longitude)})(n,e);case 2:return(function(i,r){if("integerValue"in i&&"integerValue"in r)return Dt(i.integerValue)===Dt(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Dt(i.doubleValue),c=Dt(r.doubleValue);return o===c?Jd(o)===Jd(c):isNaN(o)&&isNaN(c)}return!1})(n,e);case 9:return au(n.arrayValue.values||[],e.arrayValue.values||[],$i);case 10:case 11:return(function(i,r){const o=i.mapValue.fields||{},c=r.mapValue.fields||{};if(BA(o)!==BA(c))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(c[h]===void 0||!$i(o[h],c[h])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function rf(n,e){return(n.values||[]).find((t=>$i(t,e)))!==void 0}function eo(n,e){if(n===e)return 0;const t=Ja(n),s=Ja(e);if(t!==s)return Le(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return(function(r,o){const c=Dt(r.integerValue||r.doubleValue),h=Dt(o.integerValue||o.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(n,e);case 3:return HA(n.timestampValue,e.timestampValue);case 4:return HA(sf(n),sf(e));case 5:return jv(n.stringValue,e.stringValue);case 6:return(function(r,o){const c=Dr(r),h=Dr(o);return c.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(r,o){const c=r.split("/"),h=o.split("/");for(let d=0;d<c.length&&d<h.length;d++){const m=Le(c[d],h[d]);if(m!==0)return m}return Le(c.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(r,o){const c=Le(Dt(r.latitude),Dt(o.latitude));return c!==0?c:Le(Dt(r.longitude),Dt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return qA(n.arrayValue,e.arrayValue);case 10:return(function(r,o){var b,E,S,T;const c=r.fields||{},h=o.fields||{},d=(b=c[du])==null?void 0:b.arrayValue,m=(E=h[du])==null?void 0:E.arrayValue,_=Le(((S=d==null?void 0:d.values)==null?void 0:S.length)||0,((T=m==null?void 0:m.values)==null?void 0:T.length)||0);return _!==0?_:qA(d,m)})(n.mapValue,e.mapValue);case 11:return(function(r,o){if(r===Oa.mapValue&&o===Oa.mapValue)return 0;if(r===Oa.mapValue)return 1;if(o===Oa.mapValue)return-1;const c=r.fields||{},h=Object.keys(c),d=o.fields||{},m=Object.keys(d);h.sort(),m.sort();for(let _=0;_<h.length&&_<m.length;++_){const b=jv(h[_],m[_]);if(b!==0)return b;const E=eo(c[h[_]],d[m[_]]);if(E!==0)return E}return Le(h.length,m.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function HA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=Nr(n),s=Nr(e),i=Le(t.seconds,s.seconds);return i!==0?i:Le(t.nanos,s.nanos)}function qA(n,e){const t=n.values||[],s=e.values||[];for(let i=0;i<t.length&&i<s.length;++i){const r=eo(t[i],s[i]);if(r)return r}return Le(t.length,s.length)}function fu(n){return Gv(n)}function Gv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Nr(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Dr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",i=!0;for(const r of t.values||[])i?i=!1:s+=",",s+=Gv(r);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${Gv(t.fields[o])}`;return i+"}"})(n.mapValue):Ee(61005,{value:n})}function Kg(n){switch(Ja(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=l_(n);return e?16+Kg(e):16;case 5:return 2*n.stringValue.length;case 6:return Dr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((i,r)=>i+Kg(r)),0)})(n.arrayValue);case 10:case 11:return(function(s){let i=0;return fo(s.fields,((r,o)=>{i+=r.length+Kg(o)})),i})(n.mapValue);default:throw Ee(13486,{value:n})}}function Al(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Wv(n){return!!n&&"integerValue"in n}function af(n){return!!n&&"arrayValue"in n}function GA(n){return!!n&&"nullValue"in n}function WA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qg(n){return!!n&&"mapValue"in n}function c_(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[cx])==null?void 0:s.stringValue)===ux}function Md(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return fo(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Md(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Md(n.arrayValue.values[t]);return e}return{...n}}function nN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tN}const sN={mapValue:{fields:{[cx]:{stringValue:ux},[du]:{arrayValue:{}}}}};function M4(n){return"nullValue"in n?Yg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Al(Za.empty(),_e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?c_(n)?sN:{mapValue:{}}:Ee(35942,{value:n})}function P4(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Al(Za.empty(),_e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?sN:"mapValue"in n?c_(n)?{mapValue:{}}:Oa:Ee(61959,{value:n})}function $A(n,e){const t=eo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function YA(n,e){const t=eo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Qg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Md(t)}setAll(e){let t=Ot.emptyPath(),s={},i=[];e.forEach(((o,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,s,i),s={},i=[],t=c.popLast()}o?s[c.lastSegment()]=Md(o):i.push(c.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,s,i)}delete(e){const t=this.field(e.popLast());Qg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $i(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=t.mapValue.fields[e.get(s)];Qg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,s){fo(t,((i,r)=>e[i]=r));for(const i of s)delete e[i]}clone(){return new Mn(Md(this.value))}}function iN(n){const e=[];return fo(n.fields,((t,s)=>{const i=new Ot([t]);if(Qg(s)){const r=iN(s.mapValue).fields;if(r.length===0)e.push(i);else for(const o of r)e.push(i.child(o))}else e.push(i)})),new ms(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,t,s,i,r,o,c){this.key=e,this.documentType=t,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=c}static newInvalidDocument(e){return new It(e,0,Ce.min(),Ce.min(),Ce.min(),Mn.empty(),0)}static newFoundDocument(e,t,s,i){return new It(e,1,t,Ce.min(),s,i,0)}static newNoDocument(e,t){return new It(e,2,t,Ce.min(),Ce.min(),Mn.empty(),0)}static newUnknownDocument(e,t){return new It(e,3,t,Ce.min(),Ce.min(),Mn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,t){this.position=e,this.inclusive=t}}function KA(n,e,t){let s=0;for(let i=0;i<n.position.length;i++){const r=e[i],o=n.position[i];if(r.field.isKeyField()?s=_e.comparator(_e.fromName(o.referenceValue),t.key):s=eo(o,t.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function QA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$i(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,t="asc"){this.field=e,this.dir=t}}function V4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{}class Ze extends rN{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new L4(e,t,s):t==="array-contains"?new F4(e,s):t==="in"?new hN(e,s):t==="not-in"?new B4(e,s):t==="array-contains-any"?new z4(e,s):new Ze(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new j4(e,s):new U4(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(eo(t,this.value)):t!==null&&Ja(this.value)===Ja(t)&&this.matchesComparison(eo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mt extends rN{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new mt(e,t)}matches(e){return mu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mu(n){return n.op==="and"}function $v(n){return n.op==="or"}function hx(n){return aN(n)&&mu(n)}function aN(n){for(const e of n.filters)if(e instanceof mt)return!1;return!0}function Yv(n){if(n instanceof Ze)return n.field.canonicalString()+n.op.toString()+fu(n.value);if(hx(n))return n.filters.map((e=>Yv(e))).join(",");{const e=n.filters.map((t=>Yv(t))).join(",");return`${n.op}(${e})`}}function oN(n,e){return n instanceof Ze?(function(s,i){return i instanceof Ze&&s.op===i.op&&s.field.isEqual(i.field)&&$i(s.value,i.value)})(n,e):n instanceof mt?(function(s,i){return i instanceof mt&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce(((r,o,c)=>r&&oN(o,i.filters[c])),!0):!1})(n,e):void Ee(19439)}function lN(n,e){const t=n.filters.concat(e);return mt.create(t,n.op)}function cN(n){return n instanceof Ze?(function(t){return`${t.field.canonicalString()} ${t.op} ${fu(t.value)}`})(n):n instanceof mt?(function(t){return t.op.toString()+" {"+t.getFilters().map(cN).join(" ,")+"}"})(n):"Filter"}class L4 extends Ze{constructor(e,t,s){super(e,t,s),this.key=_e.fromName(s.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class j4 extends Ze{constructor(e,t){super(e,"in",t),this.keys=uN("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class U4 extends Ze{constructor(e,t){super(e,"not-in",t),this.keys=uN("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function uN(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>_e.fromName(s.referenceValue)))}class F4 extends Ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return af(t)&&rf(t.arrayValue,this.value)}}class hN extends Ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&rf(this.value.arrayValue,t)}}class B4 extends Ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(rf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!rf(this.value.arrayValue,t)}}class z4 extends Ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!af(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>rf(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e,t=null,s=[],i=[],r=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=c,this.Te=null}}function Kv(n,e=null,t=[],s=[],i=null,r=null,o=null){return new H4(n,e,t,s,i,r,o)}function Il(n){const e=xe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Yv(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(r){return r.field.canonicalString()+r.dir})(s))).join(","),Df(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>fu(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>fu(s))).join(",")),e.Te=t}return e.Te}function Of(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!V4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!oN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!QA(n.startAt,e.startAt)&&QA(n.endAt,e.endAt)}function xp(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ep(n,e){return n.filters.filter((t=>t instanceof Ze&&t.field.isEqual(e)))}function XA(n,e,t){let s=Yg,i=!0;for(const r of Ep(n,e)){let o=Yg,c=!0;switch(r.op){case"<":case"<=":o=M4(r.value);break;case"==":case"in":case">=":o=r.value;break;case">":o=r.value,c=!1;break;case"!=":case"not-in":o=Yg}$A({value:s,inclusive:i},{value:o,inclusive:c})<0&&(s=o,i=c)}if(t!==null){for(let r=0;r<n.orderBy.length;++r)if(n.orderBy[r].field.isEqual(e)){const o=t.position[r];$A({value:s,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(s=o,i=t.inclusive);break}}return{value:s,inclusive:i}}function ZA(n,e,t){let s=Oa,i=!0;for(const r of Ep(n,e)){let o=Oa,c=!0;switch(r.op){case">=":case">":o=P4(r.value),c=!1;break;case"==":case"in":case"<=":o=r.value;break;case"<":o=r.value,c=!1;break;case"!=":case"not-in":o=Oa}YA({value:s,inclusive:i},{value:o,inclusive:c})>0&&(s=o,i=c)}if(t!==null){for(let r=0;r<n.orderBy.length;++r)if(n.orderBy[r].field.isEqual(e)){const o=t.position[r];YA({value:s,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(s=o,i=t.inclusive);break}}return{value:s,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,t=null,s=[],i=[],r=null,o="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function dN(n,e,t,s,i,r,o,c){return new Mr(n,e,t,s,i,r,o,c)}function Lu(n){return new Mr(n)}function JA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dx(n){return n.collectionGroup!==null}function Xc(n){const e=xe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),t.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new gt(Ot.comparator);return o.filters.forEach((h=>{h.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((r=>{t.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new of(r,s))})),t.has(Ot.keyField().canonicalString())||e.Ie.push(new of(Ot.keyField(),s))}return e.Ie}function is(n){const e=xe(n);return e.Ee||(e.Ee=q4(e,Xc(n))),e.Ee}function q4(n,e){if(n.limitType==="F")return Kv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const r=i.dir==="desc"?"asc":"desc";return new of(i.field,r)}));const t=n.endAt?new to(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new to(n.startAt.position,n.startAt.inclusive):null;return Kv(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Qv(n,e){const t=n.filters.concat([e]);return new Mr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Tp(n,e,t){return new Mr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Mf(n,e){return Of(is(n),is(e))&&n.limitType===e.limitType}function fN(n){return`${Il(is(n))}|lt:${n.limitType}`}function Gc(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((i=>cN(i))).join(", ")}]`),Df(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((i=>fu(i))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((i=>fu(i))).join(",")),`Target(${s})`})(is(n))}; limitType=${n.limitType})`}function Pf(n,e){return e.isFoundDocument()&&(function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):_e.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)})(n,e)&&(function(s,i){for(const r of Xc(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0})(n,e)&&(function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0})(n,e)&&(function(s,i){return!(s.startAt&&!(function(o,c,h){const d=KA(o,c,h);return o.inclusive?d<=0:d<0})(s.startAt,Xc(s),i)||s.endAt&&!(function(o,c,h){const d=KA(o,c,h);return o.inclusive?d>=0:d>0})(s.endAt,Xc(s),i))})(n,e)}function mN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gN(n){return(e,t)=>{let s=!1;for(const i of Xc(n)){const r=G4(i,e,t);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function G4(n,e,t){const s=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(r,o,c){const h=o.data.field(r),d=c.data.field(r);return h!==null&&d!==null?eo(h,d):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ee(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[t]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fo(this.inner,((t,s)=>{for(const[i,r]of s)e(i,r)}))}isEmpty(){return K2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=new St(_e.comparator);function gs(){return W4}const pN=new St(_e.comparator);function _d(...n){let e=pN;for(const t of n)e=e.insert(t.key,t);return e}function _N(n){let e=pN;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function ji(){return Pd()}function yN(){return Pd()}function Pd(){return new Pr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const $4=new St(_e.comparator),Y4=new gt(_e.comparator);function ze(...n){let e=Y4;for(const t of n)e=e.add(t);return e}const K4=new gt(Le);function fx(){return K4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jd(e)?"-0":e}}function vN(n){return{integerValue:""+n}}function bN(n,e){return j2(e)?vN(e):mx(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(){this._=void 0}}function Q4(n,e,t){return n instanceof gu?(function(i,r){const o={fields:{[Z2]:{stringValue:X2},[eN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&o_(r)&&(r=l_(r)),r&&(o.fields[J2]=r),{mapValue:o}})(t,e):n instanceof Rl?EN(n,e):n instanceof Cl?TN(n,e):(function(i,r){const o=xN(i,r),c=eI(o)+eI(i.Ae);return Wv(o)&&Wv(i.Ae)?vN(c):mx(i.serializer,c)})(n,e)}function X4(n,e,t){return n instanceof Rl?EN(n,e):n instanceof Cl?TN(n,e):t}function xN(n,e){return n instanceof pu?(function(s){return Wv(s)||(function(r){return!!r&&"doubleValue"in r})(s)})(e)?e:{integerValue:0}:null}class gu extends u_{}class Rl extends u_{constructor(e){super(),this.elements=e}}function EN(n,e){const t=wN(e);for(const s of n.elements)t.some((i=>$i(i,s)))||t.push(s);return{arrayValue:{values:t}}}class Cl extends u_{constructor(e){super(),this.elements=e}}function TN(n,e){let t=wN(e);for(const s of n.elements)t=t.filter((i=>!$i(i,s)));return{arrayValue:{values:t}}}class pu extends u_{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function eI(n){return Dt(n.integerValue||n.doubleValue)}function wN(n){return af(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t){this.field=e,this.transform=t}}function Z4(n,e){return n.field.isEqual(e.field)&&(function(s,i){return s instanceof Rl&&i instanceof Rl||s instanceof Cl&&i instanceof Cl?au(s.elements,i.elements,$i):s instanceof pu&&i instanceof pu?$i(s.Ae,i.Ae):s instanceof gu&&i instanceof gu})(n.transform,e.transform)}class J4{constructor(e,t){this.version=e,this.transformResults=t}}class Mt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mt}static exists(e){return new Mt(void 0,e)}static updateTime(e){return new Mt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class h_{}function SN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Uu(n.key,Mt.none()):new ju(n.key,n.data,Mt.none());{const t=n.data,s=Mn.empty();let i=new gt(Ot.comparator);for(let r of e.fields)if(!i.has(r)){let o=t.field(r);o===null&&r.length>1&&(r=r.popLast(),o=t.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new Vr(n.key,s,new ms(i.toArray()),Mt.none())}}function ej(n,e,t){n instanceof ju?(function(i,r,o){const c=i.value.clone(),h=nI(i.fieldTransforms,r,o.transformResults);c.setAll(h),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Vr?(function(i,r,o){if(!Xg(i.precondition,r))return void r.convertToUnknownDocument(o.version);const c=nI(i.fieldTransforms,r,o.transformResults),h=r.data;h.setAll(AN(i)),h.setAll(c),r.convertToFoundDocument(o.version,h).setHasCommittedMutations()})(n,e,t):(function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Vd(n,e,t,s){return n instanceof ju?(function(r,o,c,h){if(!Xg(r.precondition,o))return c;const d=r.value.clone(),m=sI(r.fieldTransforms,h,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(n,e,t,s):n instanceof Vr?(function(r,o,c,h){if(!Xg(r.precondition,o))return c;const d=sI(r.fieldTransforms,h,o),m=o.data;return m.setAll(AN(r)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((_=>_.field)))})(n,e,t,s):(function(r,o,c){return Xg(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(n,e,t)}function tj(n,e){let t=null;for(const s of n.fieldTransforms){const i=e.data.field(s.field),r=xN(s.transform,i||null);r!=null&&(t===null&&(t=Mn.empty()),t.set(s.field,r))}return t||null}function tI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&au(s,i,((r,o)=>Z4(r,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ju extends h_{constructor(e,t,s,i=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Vr extends h_{constructor(e,t,s,i,r=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function AN(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function nI(n,e,t){const s=new Map;Se(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const r=n[i],o=r.transform,c=e.data.field(r.field);s.set(r.field,X4(o,c,t[i]))}return s}function sI(n,e,t){const s=new Map;for(const i of n){const r=i.transform,o=t.data.field(i.field);s.set(i.field,Q4(r,o,e))}return s}class Uu extends h_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gx extends h_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,t,s,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(e.key)&&ej(r,e,s[i])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Vd(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Vd(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=yN();return this.mutations.forEach((i=>{const r=e.get(i.key),o=r.overlayedDocument;let c=this.applyToLocalView(o,r.mutatedFields);c=t.has(i.key)?null:c;const h=SN(o,c);h!==null&&s.set(i.key,h),o.isValidDocument()||o.convertToNoDocument(Ce.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&au(this.mutations,e.mutations,((t,s)=>tI(t,s)))&&au(this.baseMutations,e.baseMutations,((t,s)=>tI(t,s)))}}class _x{constructor(e,t,s,i){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=i}static from(e,t,s){Se(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=(function(){return $4})();const r=e.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new _x(e,t,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var on,tt;function IN(n){switch(n){case ee.OK:return Ee(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function RN(n){if(n===void 0)return en("GRPC error has no .code"),ee.UNKNOWN;switch(n){case on.OK:return ee.OK;case on.CANCELLED:return ee.CANCELLED;case on.UNKNOWN:return ee.UNKNOWN;case on.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case on.INTERNAL:return ee.INTERNAL;case on.UNAVAILABLE:return ee.UNAVAILABLE;case on.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case on.NOT_FOUND:return ee.NOT_FOUND;case on.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case on.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case on.ABORTED:return ee.ABORTED;case on.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case on.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case on.DATA_LOSS:return ee.DATA_LOSS;default:return Ee(39323,{code:n})}}(tt=on||(on={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=new Ba([4294967295,4294967295],0);function iI(n){const e=CN().encode(n),t=new x2;return t.update(e),new Uint8Array(t.digest())}function rI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Ba([t,s],0),new Ba([i,r],0)]}class vx{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new yd(`Invalid padding: ${t}`);if(s<0)throw new yd(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new yd(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new yd(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ba.fromNumber(this.ge)}ye(e,t,s){let i=e.add(t.multiply(Ba.fromNumber(s)));return i.compare(sj)===1&&(i=new Ba([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=iI(e),[s,i]=rI(t);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);if(!this.we(o))return!1}return!0}static create(e,t,s){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new vx(r,i,t);return s.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const t=iI(e),[s,i]=rI(t);for(let r=0;r<this.hashCount;r++){const o=this.ye(s,i,r);this.Se(o)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class yd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,t,s,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const i=new Map;return i.set(e,jf.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Lf(Ce.min(),i,new St(Le),gs(),ze())}}class jf{constructor(e,t,s,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new jf(s,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,t,s,i){this.be=e,this.removedTargetIds=t,this.key=s,this.De=i}}class NN{constructor(e,t){this.targetId=e,this.Ce=t}}class DN{constructor(e,t,s=qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=i}}class aI{constructor(){this.ve=0,this.Fe=oI(),this.Me=qt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),s=ze();return this.Fe.forEach(((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:s=s.add(i);break;default:Ee(38017,{changeType:r})}})),new jf(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=oI()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ij{constructor(e){this.Ge=e,this.ze=new Map,this.je=gs(),this.Je=Tg(),this.He=Tg(),this.Ye=new St(Le)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,s=e.Ce.count,i=this.ot(t);if(i){const r=i.target;if(xp(r))if(s===0){const o=new _e(r.path);this.et(t,o,It.newNoDocument(o,Ce.min()))}else Se(s===1,20013,{expectedCount:s});else{const o=this._t(t);if(o!==s){const c=this.ut(e),h=c?this.ct(c,e,o):1;if(h!==0){this.it(t);const d=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=t;let o,c;try{o=Dr(s).toUint8Array()}catch(h){if(h instanceof Q2)return Wi("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new vx(o,i,r)}catch(h){return Wi(h instanceof yd?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let i=0;return s.forEach((r=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(c)||(this.et(t,r,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((r,o)=>{const c=this.ot(o);if(c){if(r.current&&xp(c.target)){const h=new _e(c.target.path);this.It(h).has(o)||this.Et(o,h)||this.et(o,h,It.newNoDocument(h,e))}r.Be&&(t.set(o,r.ke()),r.qe())}}));let s=ze();this.He.forEach(((r,o)=>{let c=!0;o.forEachWhile((h=>{const d=this.ot(h);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(s=s.add(r))})),this.je.forEach(((r,o)=>o.setReadTime(e)));const i=new Lf(e,t,this.Ye,this.je,s);return this.je=gs(),this.Je=Tg(),this.He=Tg(),this.Ye=new St(Le),i}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new aI,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new gt(Le),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new gt(Le),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new aI),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Tg(){return new St(_e.comparator)}function oI(){return new St(_e.comparator)}const rj={asc:"ASCENDING",desc:"DESCENDING"},aj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oj={and:"AND",or:"OR"};class lj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Xv(n,e){return n.useProto3Json||Df(e)?e:{value:e}}function _u(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function cj(n,e){return _u(n,e.toTimestamp())}function nn(n){return Se(!!n,49232),Ce.fromTimestamp((function(t){const s=Nr(t);return new ct(s.seconds,s.nanos)})(n))}function bx(n,e){return Zv(n,e).canonicalString()}function Zv(n,e){const t=(function(i){return new Qe(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function ON(n){const e=Qe.fromString(n);return Se(HN(e),10190,{key:e.toString()}),e}function lf(n,e){return bx(n.databaseId,e.path)}function Bi(n,e){const t=ON(e);if(t.get(1)!==n.databaseId.projectId)throw new le(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(VN(t))}function MN(n,e){return bx(n.databaseId,e)}function PN(n){const e=ON(n);return e.length===4?Qe.emptyPath():VN(e)}function Jv(n){return new Qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VN(n){return Se(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function lI(n,e,t){return{name:lf(n,e),fields:t.value.mapValue.fields}}function LN(n,e,t){const s=Bi(n,e.name),i=nn(e.updateTime),r=e.createTime?nn(e.createTime):Ce.min(),o=new Mn({mapValue:{fields:e.fields}}),c=It.newFoundDocument(s,i,r,o);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function uj(n,e){return"found"in e?(function(s,i){Se(!!i.found,43571),i.found.name,i.found.updateTime;const r=Bi(s,i.found.name),o=nn(i.found.updateTime),c=i.found.createTime?nn(i.found.createTime):Ce.min(),h=new Mn({mapValue:{fields:i.found.fields}});return It.newFoundDocument(r,o,c,h)})(n,e):"missing"in e?(function(s,i){Se(!!i.missing,3894),Se(!!i.readTime,22933);const r=Bi(s,i.missing),o=nn(i.readTime);return It.newNoDocument(r,o)})(n,e):Ee(7234,{result:e})}function hj(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ee(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=(function(d,m){return d.useProto3Json?(Se(m===void 0||typeof m=="string",58123),qt.fromBase64String(m||"")):(Se(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),qt.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(d){const m=d.code===void 0?ee.UNKNOWN:RN(d.code);return new le(m,d.message||"")})(o);t=new DN(s,i,r,c||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=Bi(n,s.document.name),r=nn(s.document.updateTime),o=s.document.createTime?nn(s.document.createTime):Ce.min(),c=new Mn({mapValue:{fields:s.document.fields}}),h=It.newFoundDocument(i,r,o,c),d=s.targetIds||[],m=s.removedTargetIds||[];t=new Zg(d,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=Bi(n,s.document),r=s.readTime?nn(s.readTime):Ce.min(),o=It.newNoDocument(i,r),c=s.removedTargetIds||[];t=new Zg([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=Bi(n,s.document),r=s.removedTargetIds||[];t=new Zg([],r,i,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new nj(i,r),c=s.targetId;t=new NN(c,o)}}return t}function cf(n,e){let t;if(e instanceof ju)t={update:lI(n,e.key,e.value)};else if(e instanceof Uu)t={delete:lf(n,e.key)};else if(e instanceof Vr)t={update:lI(n,e.key,e.data),updateMask:_j(e.fieldMask)};else{if(!(e instanceof gx))return Ee(16599,{Vt:e.type});t={verify:lf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(r,o){const c=o.transform;if(c instanceof gu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Rl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Cl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof pu)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw Ee(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(i,r){return r.updateTime!==void 0?{updateTime:cj(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Ee(27497)})(n,e.precondition)),t}function eb(n,e){const t=e.currentDocument?(function(r){return r.updateTime!==void 0?Mt.updateTime(nn(r.updateTime)):r.exists!==void 0?Mt.exists(r.exists):Mt.none()})(e.currentDocument):Mt.none(),s=e.updateTransforms?e.updateTransforms.map((i=>(function(o,c){let h=null;if("setToServerValue"in c)Se(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),h=new gu;else if("appendMissingElements"in c){const m=c.appendMissingElements.values||[];h=new Rl(m)}else if("removeAllFromArray"in c){const m=c.removeAllFromArray.values||[];h=new Cl(m)}else"increment"in c?h=new pu(o,c.increment):Ee(16584,{proto:c});const d=Ot.fromServerFormat(c.fieldPath);return new Vf(d,h)})(n,i))):[];if(e.update){e.update.name;const i=Bi(n,e.update.name),r=new Mn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(h){const d=h.fieldPaths||[];return new ms(d.map((m=>Ot.fromServerFormat(m))))})(e.updateMask);return new Vr(i,r,o,t,s)}return new ju(i,r,t,s)}if(e.delete){const i=Bi(n,e.delete);return new Uu(i,t)}if(e.verify){const i=Bi(n,e.verify);return new gx(i,t)}return Ee(1463,{proto:e})}function dj(n,e){return n&&n.length>0?(Se(e!==void 0,14353),n.map((t=>(function(i,r){let o=i.updateTime?nn(i.updateTime):nn(r);return o.isEqual(Ce.min())&&(o=nn(r)),new J4(o,i.transformResults||[])})(t,e)))):[]}function jN(n,e){return{documents:[MN(n,e.path)]}}function UN(n,e){const t={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=MN(n,i);const r=(function(d){if(d.length!==0)return zN(mt.create(d,"and"))})(e.filters);r&&(t.structuredQuery.where=r);const o=(function(d){if(d.length!==0)return d.map((m=>(function(b){return{field:Wc(b.field),direction:mj(b.dir)}})(m)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=Xv(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function FN(n){let e=PN(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let i=null;if(s>0){Se(s===1,65062);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let r=[];t.where&&(r=(function(_){const b=BN(_);return b instanceof mt&&hx(b)?b.getFilters():[b]})(t.where));let o=[];t.orderBy&&(o=(function(_){return _.map((b=>(function(S){return new of($c(S.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(b)))})(t.orderBy));let c=null;t.limit&&(c=(function(_){let b;return b=typeof _=="object"?_.value:_,Df(b)?null:b})(t.limit));let h=null;t.startAt&&(h=(function(_){const b=!!_.before,E=_.values||[];return new to(E,b)})(t.startAt));let d=null;return t.endAt&&(d=(function(_){const b=!_.before,E=_.values||[];return new to(E,b)})(t.endAt)),dN(e,i,o,r,c,"F",h,d)}function fj(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function BN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=$c(t.unaryFilter.field);return Ze.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=$c(t.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=$c(t.unaryFilter.field);return Ze.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$c(t.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ze.create($c(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return mt.create(t.compositeFilter.filters.map((s=>BN(s))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function mj(n){return rj[n]}function gj(n){return aj[n]}function pj(n){return oj[n]}function Wc(n){return{fieldPath:n.canonicalString()}}function $c(n){return Ot.fromServerFormat(n.fieldPath)}function zN(n){return n instanceof Ze?(function(t){if(t.op==="=="){if(WA(t.value))return{unaryFilter:{field:Wc(t.field),op:"IS_NAN"}};if(GA(t.value))return{unaryFilter:{field:Wc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(WA(t.value))return{unaryFilter:{field:Wc(t.field),op:"IS_NOT_NAN"}};if(GA(t.value))return{unaryFilter:{field:Wc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wc(t.field),op:gj(t.op),value:t.value}}})(n):n instanceof mt?(function(t){const s=t.getFilters().map((i=>zN(i)));return s.length===1?s[0]:{compositeFilter:{op:pj(t.op),filters:s}}})(n):Ee(54877,{filter:n})}function _j(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function HN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t,s,i,r=Ce.min(),o=Ce.min(),c=qt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.yt=e}}function yj(n,e){let t;if(e.document)t=LN(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=_e.fromSegments(e.noDocument.path),i=Dl(e.noDocument.readTime);t=It.newNoDocument(s,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ee(56709);{const s=_e.fromSegments(e.unknownDocument.path),i=Dl(e.unknownDocument.version);t=It.newUnknownDocument(s,i)}}return e.readTime&&t.setReadTime((function(i){const r=new ct(i[0],i[1]);return Ce.fromTimestamp(r)})(e.readTime)),t}function cI(n,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:wp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document=(function(r,o){return{name:lf(r,o.key),fields:o.data.value.mapValue.fields,updateTime:_u(r,o.version.toTimestamp()),createTime:_u(r,o.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Nl(e.version)};else{if(!e.isUnknownDocument())return Ee(57904,{document:e});s.unknownDocument={path:t.path.toArray(),version:Nl(e.version)}}return s}function wp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Nl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Dl(n){const e=new ct(n.seconds,n.nanoseconds);return Ce.fromTimestamp(e)}function hl(n,e){const t=(e.baseMutations||[]).map((r=>eb(n.yt,r)));for(let r=0;r<e.mutations.length-1;++r){const o=e.mutations[r];if(r+1<e.mutations.length&&e.mutations[r+1].transform!==void 0){const c=e.mutations[r+1];o.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}const s=e.mutations.map((r=>eb(n.yt,r))),i=ct.fromMillis(e.localWriteTimeMs);return new px(e.batchId,i,t,s)}function vd(n){const e=Dl(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Dl(n.lastLimboFreeSnapshotVersion):Ce.min();let s;return s=(function(r){return r.documents!==void 0})(n.query)?(function(r){const o=r.documents.length;return Se(o===1,1966,{count:o}),is(Lu(PN(r.documents[0])))})(n.query):(function(r){return is(FN(r))})(n.query),new Er(s,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,qt.fromBase64String(n.resumeToken))}function GN(n,e){const t=Nl(e.snapshotVersion),s=Nl(e.lastLimboFreeSnapshotVersion);let i;i=xp(e.target)?jN(n.yt,e.target):UN(n.yt,e.target).ft;const r=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Il(e.target),readTime:t,resumeToken:r,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:i}}function xx(n){const e=FN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Tp(e,e.limit,"L"):e}function nv(n,e){return new yx(e.largestBatchId,eb(n.yt,e.overlayMutation))}function uI(n,e){const t=e.path.lastSegment();return[n,$n(e.path.popLast()),t]}function hI(n,e,t,s){return{indexId:n,uid:e,sequenceNumber:t,readTime:Nl(s.readTime),documentKey:$n(s.documentKey.path),largestBatchId:s.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{getBundleMetadata(e,t){return dI(e).get(t).next((s=>{if(s)return(function(r){return{id:r.bundleId,createTime:Dl(r.createTime),version:r.version}})(s)}))}saveBundleMetadata(e,t){return dI(e).put((function(i){return{bundleId:i.id,createTime:Nl(nn(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return fI(e).get(t).next((s=>{if(s)return(function(r){return{name:r.name,query:xx(r.bundledQuery),readTime:Dl(r.readTime)}})(s)}))}saveNamedQuery(e,t){return fI(e).put((function(i){return{name:i.name,readTime:Nl(nn(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function dI(n){return yn(n,i_)}function fI(n){return yn(n,r_)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const s=t.uid||"";return new d_(e,s)}getOverlay(e,t){return ed(e).get(uI(this.userId,t)).next((s=>s?nv(this.serializer,s):null))}getOverlays(e,t){const s=ji();return $.forEach(t,(i=>this.getOverlay(e,i).next((r=>{r!==null&&s.set(i,r)})))).next((()=>s))}saveOverlays(e,t,s){const i=[];return s.forEach(((r,o)=>{const c=new yx(t,o);i.push(this.St(e,c))})),$.waitFor(i)}removeOverlaysForBatchId(e,t,s){const i=new Set;t.forEach((o=>i.add($n(o.getCollectionPath()))));const r=[];return i.forEach((o=>{const c=IDBKeyRange.bound([this.userId,o,s],[this.userId,o,s+1],!1,!0);r.push(ed(e).Z(zv,c))})),$.waitFor(r)}getOverlaysForCollection(e,t,s){const i=ji(),r=$n(t),o=IDBKeyRange.bound([this.userId,r,s],[this.userId,r,Number.POSITIVE_INFINITY],!0);return ed(e).J(zv,o).next((c=>{for(const h of c){const d=nv(this.serializer,h);i.set(d.getKey(),d)}return i}))}getOverlaysForCollectionGroup(e,t,s,i){const r=ji();let o;const c=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ed(e).ee({index:q2,range:c},((h,d,m)=>{const _=nv(this.serializer,d);r.size()<i||_.largestBatchId===o?(r.set(_.getKey(),_),o=_.largestBatchId):m.done()})).next((()=>r))}St(e,t){return ed(e).put((function(i,r,o){const[c,h,d]=uI(r,o.mutation.key);return{userId:r,collectionPath:h,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:cf(i.yt,o.mutation)}})(this.serializer,this.userId,t))}}function ed(n){return yn(n,a_)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{bt(e){return yn(e,ox)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const s=t==null?void 0:t.value;return s?qt.fromUint8Array(s):qt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Dt(e.integerValue));else if("doubleValue"in e){const s=Dt(e.doubleValue);isNaN(s)?this.Ft(t,13):(this.Ft(t,15),Jd(s)?t.Mt(0):t.Mt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Ft(t,20),typeof s=="string"&&(s=Nr(s)),t.xt(`${s.seconds||""}`),t.Mt(s.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Dr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.Ft(t,45),t.Mt(s.latitude||0),t.Mt(s.longitude||0)}else"mapValue"in e?nN(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):c_(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ee(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const s=e.fields||{};this.Ft(t,55);for(const i of Object.keys(s))this.Ot(i,t),this.Ct(s[i],t)}kt(e,t){var o,c;const s=e.fields||{};this.Ft(t,53);const i=du,r=((c=(o=s[i].arrayValue)==null?void 0:o.values)==null?void 0:c.length)||0;this.Ft(t,15),t.Mt(Dt(r)),this.Ot(i,t),this.Ct(s[i],t)}Qt(e,t){const s=e.values||[];this.Ft(t,50);for(const i of s)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),_e.fromName(e).path.forEach((s=>{this.Ft(t,60),this.Ut(s,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}dl.Kt=new dl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=255;function xj(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function mI(n){const e=64-(function(s){let i=0;for(let r=0;r<8;++r){const o=xj(255&s[r]);if(i+=o,o!==8)break}return i})(n);return Math.ceil(e/8)}class Ej{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Gt(s.value),s=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Jt(s.value),s=t.next();this.Ht()}Yt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Gt(s);else if(s<2048)this.Gt(960|s>>>6),this.Gt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Jt(s);else if(s<2048)this.Jt(960|s>>>6),this.Jt(128|63&s);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),s=mI(t);this.tn(1+s),this.buffer[this.position++]=255&s;for(let i=t.length-s;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),s=mI(t);this.tn(1+s),this.buffer[this.position++]=~(255&s);for(let i=t.length-s;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Lc),this.sn(255)}_n(){this.an(Lc),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(r){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,r,!1),new Uint8Array(o.buffer)})(e),s=!!(128&t[0]);t[0]^=s?255:128;for(let i=1;i<t.length;++i)t[i]^=s?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Lc?(this.sn(Lc),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Lc?(this.an(Lc),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const i=new Uint8Array(s);i.set(this.buffer),this.buffer=i}}class Tj{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class wj{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class td{constructor(){this.cn=new Ej,this.ln=new Tj(this.cn),this.hn=new wj(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t,s,i){this.Tn=e,this.In=t,this.En=s,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,s=new Uint8Array(t);return s.set(this.dn,0),t!==e?s.set([0],this.dn.length):++s[s.length-1],new fl(this.Tn,this.In,this.En,s)}Rn(e,t,s){return{indexId:this.Tn,uid:e,arrayValue:Jg(this.En),directionalValue:Jg(this.dn),orderedDocumentKey:Jg(t),documentKey:s.path.toArray()}}Vn(e,t,s){const i=this.Rn(e,t,s);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Aa(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=gI(n.En,e.En),t!==0?t:(t=gI(n.dn,e.dn),t!==0?t:_e.comparator(n.In,e.In)))}function gI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const s=n[t]-e[t];if(s!==0)return s}return n.length-e.length}function Jg(n){return a2()?(function(t){let s="";for(let i=0;i<t.length;i++)s+=String.fromCharCode(t[i]);return s})(n):n}function pI(n){return typeof n!="string"?n:(function(t){const s=new Uint8Array(t.length);for(let i=0;i<t.length;i++)s[i]=t.charCodeAt(i);return s})(n)}class _I{constructor(e){this.mn=new gt(((t,s)=>Ot.comparator(t.field,s.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const s=t;s.isInequality()?this.mn=this.mn.add(s):this.gn.push(s)}}get pn(){return this.mn.size>1}yn(e){if(Se(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Uv(e);if(t!==void 0&&!this.wn(t))return!1;const s=al(e);let i=new Set,r=0,o=0;for(;r<s.length&&this.wn(s[r]);++r)i=i.add(s[r].fieldPath.canonicalString());if(r===s.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const h=s[r];if(!this.Sn(c,h)||!this.bn(this.fn[o++],h))return!1}++r}for(;r<s.length;++r){const c=s[r];if(o>=this.fn.length||!this.bn(this.fn[o++],c))return!1}return!0}Dn(){if(this.pn)return null;let e=new gt(Ot.comparator);const t=[];for(const s of this.gn)if(!s.field.isKeyField())if(s.op==="array-contains"||s.op==="array-contains-any")t.push(new Gg(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),t.push(new Gg(s.field,0))}for(const s of this.fn)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),t.push(new Gg(s.field,s.dir==="asc"?0:1)));return new _p(_p.UNKNOWN_ID,this.collectionId,t,Zd.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const s=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===s}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(n){var t,s;if(Se(n instanceof Ze||n instanceof mt,20012),n instanceof Ze){if(n instanceof hN){const i=((s=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:s.map((r=>Ze.create(n.field,"==",r))))||[];return mt.create(i,"or")}return n}const e=n.filters.map((i=>WN(i)));return mt.create(e,n.op)}function Sj(n){if(n.getFilters().length===0)return[];const e=sb(WN(n));return Se($N(e),7391),tb(e)||nb(e)?[e]:e.getFilters()}function tb(n){return n instanceof Ze}function nb(n){return n instanceof mt&&hx(n)}function $N(n){return tb(n)||nb(n)||(function(t){if(t instanceof mt&&$v(t)){for(const s of t.getFilters())if(!tb(s)&&!nb(s))return!1;return!0}return!1})(n)}function sb(n){if(Se(n instanceof Ze||n instanceof mt,34018),n instanceof Ze)return n;if(n.filters.length===1)return sb(n.filters[0]);const e=n.filters.map((s=>sb(s)));let t=mt.create(e,n.op);return t=Sp(t),$N(t)?t:(Se(t instanceof mt,64498),Se(mu(t),40251),Se(t.filters.length>1,57927),t.filters.reduce(((s,i)=>Ex(s,i))))}function Ex(n,e){let t;return Se(n instanceof Ze||n instanceof mt,38388),Se(e instanceof Ze||e instanceof mt,25473),t=n instanceof Ze?e instanceof Ze?(function(i,r){return mt.create([i,r],"and")})(n,e):yI(n,e):e instanceof Ze?yI(e,n):(function(i,r){if(Se(i.filters.length>0&&r.filters.length>0,48005),mu(i)&&mu(r))return lN(i,r.getFilters());const o=$v(i)?i:r,c=$v(i)?r:i,h=o.filters.map((d=>Ex(d,c)));return mt.create(h,"or")})(n,e),Sp(t)}function yI(n,e){if(mu(e))return lN(e,n.getFilters());{const t=e.filters.map((s=>Ex(n,s)));return mt.create(t,"or")}}function Sp(n){if(Se(n instanceof Ze||n instanceof mt,11850),n instanceof Ze)return n;const e=n.getFilters();if(e.length===1)return Sp(e[0]);if(aN(n))return n;const t=e.map((i=>Sp(i))),s=[];return t.forEach((i=>{i instanceof Ze?s.push(i):i instanceof mt&&(i.op===n.op?s.push(...i.filters):s.push(i))})),s.length===1?s[0]:mt.create(s,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(){this.Cn=new Tx}addToCollectionParentIndex(e,t){return this.Cn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(Cs.min())}updateCollectionGroup(e,t,s){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class Tx{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t]||new gt(Qe.comparator),r=!i.has(s);return this.index[t]=i.add(s),r}has(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t];return i&&i.has(s)}getEntries(e){return(this.index[e]||new gt(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="IndexedDbIndexManager",wg=new Uint8Array(0);class Ij{constructor(e,t){this.databaseId=t,this.vn=new Tx,this.Fn=new Pr((s=>Il(s)),((s,i)=>Of(s,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const s=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const r={collectionId:s,parent:$n(i)};return bI(e).put(r)}return $.resolve()}getCollectionParents(e,t){const s=[],i=IDBKeyRange.bound([t,""],[C2(t),""],!1,!0);return bI(e).J(i).next((r=>{for(const o of r){if(o.collectionId!==t)break;s.push(Li(o.parent))}return s}))}addFieldIndex(e,t){const s=nd(e),i=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete i.indexId;const r=s.add(i);if(t.indexState){const o=Uc(e);return r.next((c=>{o.put(hI(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return r.next()}deleteFieldIndex(e,t){const s=nd(e),i=Uc(e),r=jc(e);return s.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=nd(e),s=jc(e),i=Uc(e);return t.Z().next((()=>s.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return $.forEach(this.Mn(t),(s=>this.getIndexType(e,s).next((i=>{if(i===0||i===1){const r=new _I(s).Dn();if(r!=null)return this.addFieldIndex(e,r)}}))))}getDocumentsMatchingTarget(e,t){const s=jc(e);let i=!0;const r=new Map;return $.forEach(this.Mn(t),(o=>this.xn(e,o).next((c=>{i&&(i=!!c),r.set(o,c)})))).next((()=>{if(i){let o=ze();const c=[];return $.forEach(r,((h,d)=>{ue(vI,`Using index ${(function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map((H=>`${H.fieldPath}:${H.kind}`)).join(",")}`})(h)} to execute ${Il(t)}`);const m=(function(M,H){const U=Uv(H);if(U===void 0)return null;for(const z of Ep(M,U.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null})(d,h),_=(function(M,H){const U=new Map;for(const z of al(H))for(const C of Ep(M,z.fieldPath))switch(C.op){case"==":case"in":U.set(z.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return U.set(z.fieldPath.canonicalString(),C.value),Array.from(U.values())}return null})(d,h),b=(function(M,H){const U=[];let z=!0;for(const C of al(H)){const I=C.kind===0?XA(M,C.fieldPath,M.startAt):ZA(M,C.fieldPath,M.startAt);U.push(I.value),z&&(z=I.inclusive)}return new to(U,z)})(d,h),E=(function(M,H){const U=[];let z=!0;for(const C of al(H)){const I=C.kind===0?ZA(M,C.fieldPath,M.endAt):XA(M,C.fieldPath,M.endAt);U.push(I.value),z&&(z=I.inclusive)}return new to(U,z)})(d,h),S=this.On(h,d,b),T=this.On(h,d,E),R=this.Nn(h,d,_),k=this.Bn(h.indexId,m,S,b.inclusive,T,E.inclusive,R);return $.forEach(k,(L=>s.Y(L,t.limit).next((M=>{M.forEach((H=>{const U=_e.fromSegments(H.documentKey);o.has(U)||(o=o.add(U),c.push(U))}))}))))})).next((()=>c))}return $.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=Sj(mt.create(e.filters,"and")).map((s=>Kv(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,s,i,r,o,c){const h=(t!=null?t.length:1)*Math.max(s.length,r.length),d=h/(t!=null?t.length:1),m=[];for(let _=0;_<h;++_){const b=t?this.Ln(t[_/d]):wg,E=this.kn(e,b,s[_%d],i),S=this.qn(e,b,r[_%d],o),T=c.map((R=>this.kn(e,b,R,!0)));m.push(...this.createRange(E,S,T))}return m}kn(e,t,s,i){const r=new fl(e,_e.empty(),t,s);return i?r:r.An()}qn(e,t,s,i){const r=new fl(e,_e.empty(),t,s);return i?r.An():r}xn(e,t){const s=new _I(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((r=>{let o=null;for(const c of r)s.yn(c)&&(!o||c.fields.length>o.fields.length)&&(o=c);return o}))}getIndexType(e,t){let s=2;const i=this.Mn(t);return $.forEach(i,(r=>this.xn(e,r).next((o=>{o?s!==0&&o.fields.length<(function(h){let d=new gt(Ot.comparator),m=!1;for(const _ of h.filters)for(const b of _.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?m=!0:d=d.add(b.field));for(const _ of h.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(m?1:0)})(r)&&(s=1):s=0})))).next((()=>(function(o){return o.limit!==null})(t)&&i.length>1&&s===2?1:s))}Qn(e,t){const s=new td;for(const i of al(e)){const r=t.data.field(i.fieldPath);if(r==null)return null;const o=s.Pn(i.kind);dl.Kt.Dt(r,o)}return s.un()}Ln(e){const t=new td;return dl.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const s=new td;return dl.Kt.Dt(Al(this.databaseId,t),s.Pn((function(r){const o=al(r);return o.length===0?0:o[o.length-1].kind})(e))),s.un()}Nn(e,t,s){if(s===null)return[];let i=[];i.push(new td);let r=0;for(const o of al(e)){const c=s[r++];for(const h of i)if(this.Un(t,o.fieldPath)&&af(c))i=this.Kn(i,o,c);else{const d=h.Pn(o.kind);dl.Kt.Dt(c,d)}}return this.Wn(i)}On(e,t,s){return this.Nn(e,t,s.position)}Wn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].un();return t}Kn(e,t,s){const i=[...e],r=[];for(const o of s.arrayValue.values||[])for(const c of i){const h=new td;h.seed(c.un()),dl.Kt.Dt(o,h.Pn(t.kind)),r.push(h)}return r}Un(e,t){return!!e.filters.find((s=>s instanceof Ze&&s.field.isEqual(t)&&(s.op==="in"||s.op==="not-in")))}getFieldIndexes(e,t){const s=nd(e),i=Uc(e);return(t?s.J(Bv,IDBKeyRange.bound(t,t)):s.J()).next((r=>{const o=[];return $.forEach(r,(c=>i.get([c.indexId,this.uid]).next((h=>{o.push((function(m,_){const b=_?new Zd(_.sequenceNumber,new Cs(Dl(_.readTime),new _e(Li(_.documentKey)),_.largestBatchId)):Zd.empty(),E=m.fields.map((([S,T])=>new Gg(Ot.fromServerFormat(S),T)));return new _p(m.indexId,m.collectionGroup,E,b)})(c,h))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((s,i)=>{const r=s.indexState.sequenceNumber-i.indexState.sequenceNumber;return r!==0?r:Le(s.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,s){const i=nd(e),r=Uc(e);return this.Gn(e).next((o=>i.J(Bv,IDBKeyRange.bound(t,t)).next((c=>$.forEach(c,(h=>r.put(hI(h.indexId,this.uid,o,s))))))))}updateIndexEntries(e,t){const s=new Map;return $.forEach(t,((i,r)=>{const o=s.get(i.collectionGroup);return(o?$.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next((c=>(s.set(i.collectionGroup,c),$.forEach(c,(h=>this.zn(e,i,h).next((d=>{const m=this.jn(r,h);return d.isEqual(m)?$.resolve():this.Jn(e,r,h,d,m)})))))))}))}Hn(e,t,s,i){return jc(e).put(i.Rn(this.uid,this.$n(s,t.key),t.key))}Yn(e,t,s,i){return jc(e).delete(i.Vn(this.uid,this.$n(s,t.key),t.key))}zn(e,t,s){const i=jc(e);let r=new gt(Aa);return i.ee({index:H2,range:IDBKeyRange.only([s.indexId,this.uid,Jg(this.$n(s,t))])},((o,c)=>{r=r.add(new fl(s.indexId,t,pI(c.arrayValue),pI(c.directionalValue)))})).next((()=>r))}jn(e,t){let s=new gt(Aa);const i=this.Qn(t,e);if(i==null)return s;const r=Uv(t);if(r!=null){const o=e.data.field(r.fieldPath);if(af(o))for(const c of o.arrayValue.values||[])s=s.add(new fl(t.indexId,e.key,this.Ln(c),i))}else s=s.add(new fl(t.indexId,e.key,wg,i));return s}Jn(e,t,s,i,r){ue(vI,"Updating index entries for document '%s'",t.key);const o=[];return(function(h,d,m,_,b){const E=h.getIterator(),S=d.getIterator();let T=Vc(E),R=Vc(S);for(;T||R;){let k=!1,L=!1;if(T&&R){const M=m(T,R);M<0?L=!0:M>0&&(k=!0)}else T!=null?L=!0:k=!0;k?(_(R),R=Vc(S)):L?(b(T),T=Vc(E)):(T=Vc(E),R=Vc(S))}})(i,r,Aa,(c=>{o.push(this.Hn(e,t,s,c))}),(c=>{o.push(this.Yn(e,t,s,c))})),$.waitFor(o)}Gn(e){let t=1;return Uc(e).ee({index:z2,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((s,i,r)=>{r.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,s){s=s.sort(((o,c)=>Aa(o,c))).filter(((o,c,h)=>!c||Aa(o,h[c-1])!==0));const i=[];i.push(e);for(const o of s){const c=Aa(o,e),h=Aa(o,t);if(c===0)i[0]=e.An();else if(c>0&&h<0)i.push(o),i.push(o.An());else if(h>0)break}i.push(t);const r=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const c=i[o].Vn(this.uid,wg,_e.empty()),h=i[o+1].Vn(this.uid,wg,_e.empty());r.push(IDBKeyRange.bound(c,h))}return r}Zn(e,t){return Aa(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xI)}getMinOffset(e,t){return $.mapArray(this.Mn(t),(s=>this.xn(e,s).next((i=>i||Ee(44426))))).next(xI)}}function bI(n){return yn(n,nf)}function jc(n){return yn(n,Od)}function nd(n){return yn(n,ax)}function Uc(n){return yn(n,kd)}function xI(n){Se(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<n.length;s++){const i=n[s].indexState.offset;sx(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Cs(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YN=41943040;class Hn{static withCacheSize(e){return new Hn(e,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(n,e,t){const s=n.store(ri),i=n.store(lu),r=[],o=IDBKeyRange.only(t.batchId);let c=0;const h=s.ee({range:o},((m,_,b)=>(c++,b.delete())));r.push(h.next((()=>{Se(c===1,47070,{batchId:t.batchId})})));const d=[];for(const m of t.mutations){const _=U2(e,m.key.path,t.batchId);r.push(i.delete(_)),d.push(m.key)}return $.waitFor(r).next((()=>d))}function Ap(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ee(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hn.DEFAULT_COLLECTION_PERCENTILE=10,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hn.DEFAULT=new Hn(YN,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hn.DISABLED=new Hn(-1,0,0);class f_{constructor(e,t,s,i){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=i,this.Xn={}}static wt(e,t,s,i){Se(e.uid!=="",64387);const r=e.isAuthenticated()?e.uid:"";return new f_(r,t,s,i)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ia(e).ee({index:gl,range:s},((i,r,o)=>{t=!1,o.done()})).next((()=>t))}addMutationBatch(e,t,s,i){const r=Yc(e),o=Ia(e);return o.add({}).next((c=>{Se(typeof c=="number",49019);const h=new px(c,t,s,i),d=(function(E,S,T){const R=T.baseMutations.map((L=>cf(E.yt,L))),k=T.mutations.map((L=>cf(E.yt,L)));return{userId:S,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:R,mutations:k}})(this.serializer,this.userId,h),m=[];let _=new gt(((b,E)=>Le(b.canonicalString(),E.canonicalString())));for(const b of i){const E=U2(this.userId,b.key.path,c);_=_.add(b.key.path.popLast()),m.push(o.put(d)),m.push(r.put(E,o4))}return _.forEach((b=>{m.push(this.indexManager.addToCollectionParentIndex(e,b))})),e.addOnCommittedListener((()=>{this.Xn[c]=h.keys()})),$.waitFor(m).next((()=>h))}))}lookupMutationBatch(e,t){return Ia(e).get(t).next((s=>s?(Se(s.userId===this.userId,48,"Unexpected user for mutation batch",{userId:s.userId,batchId:t}),hl(this.serializer,s)):null))}er(e,t){return this.Xn[t]?$.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((s=>{if(s){const i=s.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,i=IDBKeyRange.lowerBound([this.userId,s]);let r=null;return Ia(e).ee({index:gl,range:i},((o,c,h)=>{c.userId===this.userId&&(Se(c.batchId>=s,47524,{tr:s}),r=hl(this.serializer,c)),h.done()})).next((()=>r))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=za;return Ia(e).ee({index:gl,range:t,reverse:!0},((i,r,o)=>{s=r.batchId,o.done()})).next((()=>s))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,za],[this.userId,Number.POSITIVE_INFINITY]);return Ia(e).J(gl,t).next((s=>s.map((i=>hl(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Wg(this.userId,t.path),i=IDBKeyRange.lowerBound(s),r=[];return Yc(e).ee({range:i},((o,c,h)=>{const[d,m,_]=o,b=Li(m);if(d===this.userId&&t.path.isEqual(b))return Ia(e).get(_).next((E=>{if(!E)throw Ee(61480,{nr:o,batchId:_});Se(E.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:E.userId,batchId:_}),r.push(hl(this.serializer,E))}));h.done()})).next((()=>r))}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new gt(Le);const i=[];return t.forEach((r=>{const o=Wg(this.userId,r.path),c=IDBKeyRange.lowerBound(o),h=Yc(e).ee({range:c},((d,m,_)=>{const[b,E,S]=d,T=Li(E);b===this.userId&&r.path.isEqual(T)?s=s.add(S):_.done()}));i.push(h)})),$.waitFor(i).next((()=>this.rr(e,s)))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,i=s.length+1,r=Wg(this.userId,s),o=IDBKeyRange.lowerBound(r);let c=new gt(Le);return Yc(e).ee({range:o},((h,d,m)=>{const[_,b,E]=h,S=Li(b);_===this.userId&&s.isPrefixOf(S)?S.length===i&&(c=c.add(E)):m.done()})).next((()=>this.rr(e,c)))}rr(e,t){const s=[],i=[];return t.forEach((r=>{i.push(Ia(e).get(r).next((o=>{if(o===null)throw Ee(35274,{batchId:r});Se(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:r}),s.push(hl(this.serializer,o))})))})),$.waitFor(i).next((()=>s))}removeMutationBatch(e,t){return KN(e.le,this.userId,t).next((s=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),$.forEach(s,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return $.resolve();const s=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),i=[];return Yc(e).ee({range:s},((r,o,c)=>{if(r[0]===this.userId){const h=Li(r[1]);i.push(h)}else c.done()})).next((()=>{Se(i.length===0,56720,{sr:i.map((r=>r.canonicalString()))})}))}))}containsKey(e,t){return QN(e,this.userId,t)}_r(e){return XN(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:za,lastStreamToken:""}))}}function QN(n,e,t){const s=Wg(e,t.path),i=s[1],r=IDBKeyRange.lowerBound(s);let o=!1;return Yc(n).ee({range:r,X:!0},((c,h,d)=>{const[m,_,b]=c;m===e&&_===i&&(o=!0),d.done()})).next((()=>o))}function Ia(n){return yn(n,ri)}function Yc(n){return yn(n,lu)}function XN(n){return yn(n,ef)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new kl(0)}static cr(){return new kl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const s=new kl(t.highestTargetId);return t.highestTargetId=s.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ce.fromTimestamp(new ct(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,s){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,s&&(i.lastRemoteSnapshotVersion=s.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((s=>(s.targetCount+=1,this.Tr(t,s),this.hr(e,s))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Fc(e).delete(t.targetId))).next((()=>this.lr(e))).next((s=>(Se(s.targetCount>0,8065),s.targetCount-=1,this.hr(e,s))))}removeTargets(e,t,s){let i=0;const r=[];return Fc(e).ee(((o,c)=>{const h=vd(c);h.sequenceNumber<=t&&s.get(h.targetId)===null&&(i++,r.push(this.removeTargetData(e,h)))})).next((()=>$.waitFor(r))).next((()=>i))}forEachTarget(e,t){return Fc(e).ee(((s,i)=>{const r=vd(i);t(r)}))}lr(e){return TI(e).get(bp).next((t=>(Se(t!==null,2888),t)))}hr(e,t){return TI(e).put(bp,t)}Pr(e,t){return Fc(e).put(GN(this.serializer,t))}Tr(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const s=Il(t),i=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let r=null;return Fc(e).ee({range:i,index:B2},((o,c,h)=>{const d=vd(c);Of(t,d.target)&&(r=d,h.done())})).next((()=>r))}addMatchingKeys(e,t,s){const i=[],r=ka(e);return t.forEach((o=>{const c=$n(o.path);i.push(r.put({targetId:s,path:c})),i.push(this.referenceDelegate.addReference(e,s,o))})),$.waitFor(i)}removeMatchingKeys(e,t,s){const i=ka(e);return $.forEach(t,(r=>{const o=$n(r.path);return $.waitFor([i.delete([s,o]),this.referenceDelegate.removeReference(e,s,r)])}))}removeMatchingKeysForTargetId(e,t){const s=ka(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(i)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),i=ka(e);let r=ze();return i.ee({range:s,X:!0},((o,c,h)=>{const d=Li(o[1]),m=new _e(d);r=r.add(m)})).next((()=>r))}containsKey(e,t){const s=$n(t.path),i=IDBKeyRange.bound([s],[C2(s)],!1,!0);let r=0;return ka(e).ee({index:rx,X:!0,range:i},(([o,c],h,d)=>{o!==0&&(r++,d.done())})).next((()=>r>0))}At(e,t){return Fc(e).get(t).next((s=>s?vd(s):null))}}function Fc(n){return yn(n,cu)}function TI(n){return yn(n,xl)}function ka(n){return yn(n,uu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="LruGarbageCollector",Cj=1048576;function SI([n,e],[t,s]){const i=Le(n,t);return i===0?Le(e,s):i}class Nj{constructor(e){this.Ir=e,this.buffer=new gt(SI),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();SI(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ZN{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(wI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ho(t)?ue(wI,"Ignoring IndexedDB error during garbage collection: ",t):await uo(t)}await this.Vr(3e5)}))}}class Dj{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return $.resolve(fs.ce);const s=new Nj(t);return this.mr.forEachTarget(e,(i=>s.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>s.Ar(i))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(EI)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),EI):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,i,r,o,c,h,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),i=this.params.maximumSequenceNumbersToCollect):i=_,o=Date.now(),this.nthSequenceNumber(e,i)))).next((_=>(s=_,c=Date.now(),this.removeTargets(e,s,t)))).next((_=>(r=_,h=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(d=Date.now(),qc()<=Ke.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${r} targets in `+(h-c)+`ms
	Removed ${_} documents in `+(d-h)+`ms
Total Duration: ${d-m}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:_}))))}}function JN(n,e){return new Dj(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,t){this.db=e,this.garbageCollector=JN(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((s=>t.next((i=>s+i))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((s,i)=>t(i)))}addReference(e,t,s){return Sg(e,s)}removeReference(e,t,s){return Sg(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Sg(e,t)}br(e,t){return(function(i,r){let o=!1;return XN(i).te((c=>QN(i,c,r).next((h=>(h&&(o=!0),$.resolve(!h)))))).next((()=>o))})(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let r=0;return this.Sr(e,((o,c)=>{if(c<=t){const h=this.br(e,o).next((d=>{if(!d)return r++,s.getEntry(e,o).next((()=>(s.removeEntry(o,Ce.min()),ka(e).delete((function(_){return[0,$n(_.path)]})(o)))))}));i.push(h)}})).next((()=>$.waitFor(i))).next((()=>s.apply(e))).next((()=>r))}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Sg(e,t)}Sr(e,t){const s=ka(e);let i,r=fs.ce;return s.ee({index:rx},(([o,c],{path:h,sequenceNumber:d})=>{o===0?(r!==fs.ce&&t(new _e(Li(i)),r),r=d,i=h):r=fs.ce})).next((()=>{r!==fs.ce&&t(new _e(Li(i)),r)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sg(n,e){return ka(n).put((function(s,i){return{targetId:0,path:$n(s.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(){this.changes=new Pr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?$.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return el(e).put(s)}removeEntry(e,t,s){return el(e).delete((function(r,o){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],wp(o),c[c.length-1]]})(t,s))}updateMetadata(e,t){return this.getMetadata(e).next((s=>(s.byteSize+=t,this.Dr(e,s))))}getEntry(e,t){let s=It.newInvalidDocument(t);return el(e).ee({index:$g,range:IDBKeyRange.only(sd(t))},((i,r)=>{s=this.Cr(t,r)})).next((()=>s))}vr(e,t){let s={size:0,document:It.newInvalidDocument(t)};return el(e).ee({index:$g,range:IDBKeyRange.only(sd(t))},((i,r)=>{s={document:this.Cr(t,r),size:Ap(r)}})).next((()=>s))}getEntries(e,t){let s=gs();return this.Fr(e,t,((i,r)=>{const o=this.Cr(i,r);s=s.insert(i,o)})).next((()=>s))}Mr(e,t){let s=gs(),i=new St(_e.comparator);return this.Fr(e,t,((r,o)=>{const c=this.Cr(r,o);s=s.insert(r,c),i=i.insert(r,Ap(o))})).next((()=>({documents:s,Or:i})))}Fr(e,t,s){if(t.isEmpty())return $.resolve();let i=new gt(RI);t.forEach((h=>i=i.add(h)));const r=IDBKeyRange.bound(sd(i.first()),sd(i.last())),o=i.getIterator();let c=o.getNext();return el(e).ee({index:$g,range:r},((h,d,m)=>{const _=_e.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;c&&RI(c,_)<0;)s(c,null),c=o.getNext();c&&c.isEqual(_)&&(s(c,d),c=o.hasNext()?o.getNext():null),c?m.j(sd(c)):m.done()})).next((()=>{for(;c;)s(c,null),c=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,s,i,r){const o=t.path,c=[o.popLast().toArray(),o.lastSegment(),wp(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],h=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return el(e).J(IDBKeyRange.bound(c,h,!0)).next((d=>{r==null||r.incrementDocumentReadCount(d.length);let m=gs();for(const _ of d){const b=this.Cr(_e.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);b.isFoundDocument()&&(Pf(t,b)||i.has(b.key))&&(m=m.insert(b.key,b))}return m}))}getAllFromCollectionGroup(e,t,s,i){let r=gs();const o=II(t,s),c=II(t,Cs.max());return el(e).ee({index:F2,range:IDBKeyRange.bound(o,c,!0)},((h,d,m)=>{const _=this.Cr(_e.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);r=r.insert(_.key,_),r.size===i&&m.done()})).next((()=>r))}newChangeBuffer(e){return new Mj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return AI(e).get(Fv).next((t=>(Se(!!t,20021),t)))}Dr(e,t){return AI(e).put(Fv,t)}Cr(e,t){if(t){const s=yj(this.serializer,t);if(!(s.isNoDocument()&&s.version.isEqual(Ce.min())))return s}return It.newInvalidDocument(e)}}function tD(n){return new Oj(n)}class Mj extends eD{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Pr((s=>s.toString()),((s,i)=>s.isEqual(i)))}applyChanges(e){const t=[];let s=0,i=new gt(((r,o)=>Le(r.canonicalString(),o.canonicalString())));return this.changes.forEach(((r,o)=>{const c=this.Br.get(r);if(t.push(this.Nr.removeEntry(e,r,c.readTime)),o.isValidDocument()){const h=cI(this.Nr.serializer,o);i=i.add(r.path.popLast());const d=Ap(h);s+=d-c.size,t.push(this.Nr.addEntry(e,r,h))}else if(s-=c.size,this.trackRemovals){const h=cI(this.Nr.serializer,o.convertToNoDocument(Ce.min()));t.push(this.Nr.addEntry(e,r,h))}})),i.forEach((r=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,r))})),t.push(this.Nr.updateMetadata(e,s)),$.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((s=>(this.Br.set(t,{size:s.size,readTime:s.document.readTime}),s.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:s,Or:i})=>(i.forEach(((r,o)=>{this.Br.set(r,{size:o,readTime:s.get(r).readTime})})),s)))}}function AI(n){return yn(n,tf)}function el(n){return yn(n,vp)}function sd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function II(n,e){const t=e.documentKey.path.toArray();return[n,wp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function RI(n,e){const t=n.path.toArray(),s=e.path.toArray();let i=0;for(let r=0;r<t.length-2&&r<s.length-2;++r)if(i=Le(t[r],s[r]),i)return i;return i=Le(t.length,s.length),i||(i=Le(t[t.length-2],s[s.length-2]),i||Le(t[t.length-1],s[s.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,t,s,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(s=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(s!==null&&Vd(s.mutation,i,ms.empty(),ct.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,ze()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=ze()){const i=ji();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,s).next((r=>{let o=_d();return r.forEach(((c,h)=>{o=o.insert(c,h.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const s=ji();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,ze())))}populateOverlays(e,t,s){const i=[];return s.forEach((r=>{t.has(r)||i.push(r)})),this.documentOverlayCache.getOverlays(e,i).next((r=>{r.forEach(((o,c)=>{t.set(o,c)}))}))}computeViews(e,t,s,i){let r=gs();const o=Pd(),c=(function(){return Pd()})();return t.forEach(((h,d)=>{const m=s.get(d.key);i.has(d.key)&&(m===void 0||m.mutation instanceof Vr)?r=r.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),Vd(m.mutation,d,m.mutation.getFieldMask(),ct.now())):o.set(d.key,ms.empty())})),this.recalculateAndSaveOverlays(e,r).next((h=>(h.forEach(((d,m)=>o.set(d,m))),t.forEach(((d,m)=>c.set(d,new Pj(m,o.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,t){const s=Pd();let i=new St(((o,c)=>o-c)),r=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const c of o)c.keys().forEach((h=>{const d=t.get(h);if(d===null)return;let m=s.get(h)||ms.empty();m=c.applyToLocalView(d,m),s.set(h,m);const _=(i.get(c.batchId)||ze()).add(h);i=i.insert(c.batchId,_)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),d=h.key,m=h.value,_=yN();m.forEach((b=>{if(!r.has(b)){const E=SN(t.get(b),s.get(b));E!==null&&_.set(b,E),r=r.add(b)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,_))}return $.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,i){return(function(o){return _e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,i):this.getDocumentsMatchingCollectionQuery(e,t,s,i)}getNextDocuments(e,t,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,i).next((r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,i-r.size):$.resolve(ji());let c=ou,h=r;return o.next((d=>$.forEach(d,((m,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),r.get(m)?$.resolve():this.remoteDocumentCache.getEntry(e,m).next((b=>{h=h.insert(m,b)}))))).next((()=>this.populateOverlays(e,d,r))).next((()=>this.computeViews(e,h,d,ze()))).next((m=>({batchId:c,changes:_N(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((s=>{let i=_d();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,i){const r=t.collectionGroup;let o=_d();return this.indexManager.getCollectionParents(e,r).next((c=>$.forEach(c,(h=>{const d=(function(_,b){return new Mr(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,h.child(r));return this.getDocumentsMatchingCollectionQuery(e,d,s,i).next((m=>{m.forEach(((_,b)=>{o=o.insert(_,b)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,r,i)))).next((o=>{r.forEach(((h,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,It.newInvalidDocument(m)))}));let c=_d();return o.forEach(((h,d)=>{const m=r.get(h);m!==void 0&&Vd(m.mutation,d,ms.empty(),ct.now()),Pf(t,d)&&(c=c.insert(h,d))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return $.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:nn(i.createTime)}})(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:xx(i.bundledQuery),readTime:nn(i.readTime)}})(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(){this.overlays=new St(_e.comparator),this.qr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ji();return $.forEach(t,(i=>this.getOverlay(e,i).next((r=>{r!==null&&s.set(i,r)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((i,r)=>{this.St(e,t,r)})),$.resolve()}removeOverlaysForBatchId(e,t,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach((r=>this.overlays=this.overlays.remove(r))),this.qr.delete(s)),$.resolve()}getOverlaysForCollection(e,t,s){const i=ji(),r=t.length+1,o=new _e(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const h=c.getNext().value,d=h.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===r&&h.largestBatchId>s&&i.set(h.getKey(),h)}return $.resolve(i)}getOverlaysForCollectionGroup(e,t,s,i){let r=new St(((d,m)=>d-m));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>s){let m=r.get(d.largestBatchId);m===null&&(m=ji(),r=r.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=ji(),h=r.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((d,m)=>c.set(d,m))),!(c.size()>=i)););return $.resolve(c)}St(e,t,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new yx(t,s));let r=this.qr.get(t);r===void 0&&(r=ze(),this.qr.set(t,r)),this.qr.set(t,r.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(){this.Qr=new gt(wn.$r),this.Ur=new gt(wn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new wn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new wn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new _e(new Qe([])),s=new wn(t,e),i=new wn(t,e+1),r=[];return this.Ur.forEachInRange([s,i],(o=>{this.Gr(o),r.push(o.key)})),r}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new _e(new Qe([])),s=new wn(t,e),i=new wn(t,e+1);let r=ze();return this.Ur.forEachInRange([s,i],(o=>{r=r.add(o.key)})),r}containsKey(e){const t=new wn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class wn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return _e.comparator(e.key,t.key)||Le(e.Yr,t.Yr)}static Kr(e,t){return Le(e.Yr,t.Yr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new gt(wn.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,i){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new px(r,t,s,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new wn(c.key,r)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,t){return $.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,i=this.ei(s),r=i<0?0:i;return $.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?za:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new wn(t,0),i=new wn(t,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([s,i],(o=>{const c=this.Xr(o.Yr);r.push(c)})),$.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new gt(Le);return t.forEach((i=>{const r=new wn(i,0),o=new wn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,o],(c=>{s=s.add(c.Yr)}))})),$.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,i=s.length+1;let r=s;_e.isDocumentKey(r)||(r=r.child(""));const o=new wn(new _e(r),0);let c=new gt(Le);return this.Zr.forEachWhile((h=>{const d=h.key.path;return!!s.isPrefixOf(d)&&(d.length===i&&(c=c.add(h.Yr)),!0)}),o),$.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((s=>{const i=this.Xr(s);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Se(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return $.forEach(t.mutations,(i=>{const r=new wn(i.key,t.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new wn(t,0),i=this.Zr.firstAfterOrEqual(s);return $.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.ri=e,this.docs=(function(){return new St(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,i=this.docs.get(s),r=i?i.size:0,o=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return $.resolve(s?s.document.mutableCopy():It.newInvalidDocument(t))}getEntries(e,t){let s=gs();return t.forEach((i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():It.newInvalidDocument(i))})),$.resolve(s)}getDocumentsMatchingQuery(e,t,s,i){let r=gs();const o=t.path,c=new _e(o.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:d,value:{document:m}}=h.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||sx(M2(m),s)<=0||(i.has(m.key)||Pf(t,m))&&(r=r.insert(m.key,m.mutableCopy()))}return $.resolve(r)}getAllFromCollectionGroup(e,t,s,i){Ee(9500)}ii(e,t){return $.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new Bj(this)}getSize(e){return $.resolve(this.size)}}class Bj extends eD{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(s)})),$.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.persistence=e,this.si=new Pr((t=>Il(t)),Of),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new wx,this.targetCount=0,this.ai=kl.ur()}forEachTarget(e,t){return this.si.forEach(((s,i)=>t(i))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),$.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new kl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Pr(t),$.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,s){let i=0;const r=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=t&&s.get(c.targetId)===null&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),$.waitFor(r).next((()=>i))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return $.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),$.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach((o=>{r.push(i.markPotentiallyOrphaned(e,o))})),$.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return $.resolve(s)}containsKey(e,t){return $.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,t){this.ui={},this.overlays={},this.ci=new fs(0),this.li=!1,this.li=!0,this.hi=new jj,this.referenceDelegate=e(this),this.Pi=new zj(this),this.indexManager=new Aj,this.remoteDocumentCache=(function(i){return new Fj(i)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new qN(t),this.Ii=new Vj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new Uj(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ue("MemoryPersistence","Starting transaction:",e);const i=new Hj(this.ci.next());return this.referenceDelegate.Ei(),s(i).next((r=>this.referenceDelegate.di(i).next((()=>r)))).toPromise().then((r=>(i.raiseOnCommittedEvent(),r)))}Ai(e,t){return $.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class Hj extends V2{constructor(e){super(),this.currentSequenceNumber=e}}class m_{constructor(e){this.persistence=e,this.Ri=new wx,this.Vi=null}static mi(e){return new m_(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),$.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),$.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((r=>this.fi.add(r.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(s=>{const i=_e.fromPath(s);return this.gi(e,i).next((r=>{r||t.removeEntry(i,Ce.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return $.or([()=>$.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ip{constructor(e,t){this.persistence=e,this.pi=new Pr((s=>$n(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=JN(this,t)}static mi(e,t){return new Ip(e,t)}Ei(){}di(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((i=>s+i))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return $.forEach(this.pi,((s,i)=>this.br(e,s,i).next((r=>r?$.resolve():t(i)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,t).next((c=>{c||(s++,r.removeEntry(o,Ce.min()))})))).next((()=>r.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kg(e.data.value)),t}br(e,t,s){return $.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return $.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e){this.serializer=e}k(e,t,s,i){const r=new s_("createOrUpgrade",t);s<1&&i>=1&&((function(h){h.createObjectStore(kf)})(e),(function(h){h.createObjectStore(ef,{keyPath:a4}),h.createObjectStore(ri,{keyPath:UA,autoIncrement:!0}).createIndex(gl,FA,{unique:!0}),h.createObjectStore(lu)})(e),CI(e),(function(h){h.createObjectStore(ol)})(e));let o=$.resolve();return s<3&&i>=3&&(s!==0&&((function(h){h.deleteObjectStore(uu),h.deleteObjectStore(cu),h.deleteObjectStore(xl)})(e),CI(e)),o=o.next((()=>(function(h){const d=h.store(xl),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ce.min().toTimestamp(),targetCount:0};return d.put(bp,m)})(r)))),s<4&&i>=4&&(s!==0&&(o=o.next((()=>(function(h,d){return d.store(ri).J().next((_=>{h.deleteObjectStore(ri),h.createObjectStore(ri,{keyPath:UA,autoIncrement:!0}).createIndex(gl,FA,{unique:!0});const b=d.store(ri),E=_.map((S=>b.put(S)));return $.waitFor(E)}))})(e,r)))),o=o.next((()=>{(function(h){h.createObjectStore(hu,{keyPath:g4})})(e)}))),s<5&&i>=5&&(o=o.next((()=>this.yi(r)))),s<6&&i>=6&&(o=o.next((()=>((function(h){h.createObjectStore(tf)})(e),this.wi(r))))),s<7&&i>=7&&(o=o.next((()=>this.Si(r)))),s<8&&i>=8&&(o=o.next((()=>this.bi(e,r)))),s<9&&i>=9&&(o=o.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),s<10&&i>=10&&(o=o.next((()=>this.Di(r)))),s<11&&i>=11&&(o=o.next((()=>{(function(h){h.createObjectStore(i_,{keyPath:p4})})(e),(function(h){h.createObjectStore(r_,{keyPath:_4})})(e)}))),s<12&&i>=12&&(o=o.next((()=>{(function(h){const d=h.createObjectStore(a_,{keyPath:w4});d.createIndex(zv,S4,{unique:!1}),d.createIndex(q2,A4,{unique:!1})})(e)}))),s<13&&i>=13&&(o=o.next((()=>(function(h){const d=h.createObjectStore(vp,{keyPath:l4});d.createIndex($g,c4),d.createIndex(F2,u4)})(e))).next((()=>this.Ci(e,r))).next((()=>e.deleteObjectStore(ol)))),s<14&&i>=14&&(o=o.next((()=>this.Fi(e,r)))),s<15&&i>=15&&(o=o.next((()=>(function(h){h.createObjectStore(ax,{keyPath:y4,autoIncrement:!0}).createIndex(Bv,v4,{unique:!1}),h.createObjectStore(kd,{keyPath:b4}).createIndex(z2,x4,{unique:!1}),h.createObjectStore(Od,{keyPath:E4}).createIndex(H2,T4,{unique:!1})})(e)))),s<16&&i>=16&&(o=o.next((()=>{t.objectStore(kd).clear()})).next((()=>{t.objectStore(Od).clear()}))),s<17&&i>=17&&(o=o.next((()=>{(function(h){h.createObjectStore(ox,{keyPath:I4})})(e)}))),s<18&&i>=18&&a2()&&(o=o.next((()=>{t.objectStore(kd).clear()})).next((()=>{t.objectStore(Od).clear()}))),o}wi(e){let t=0;return e.store(ol).ee(((s,i)=>{t+=Ap(i)})).next((()=>{const s={byteSize:t};return e.store(tf).put(Fv,s)}))}yi(e){const t=e.store(ef),s=e.store(ri);return t.J().next((i=>$.forEach(i,(r=>{const o=IDBKeyRange.bound([r.userId,za],[r.userId,r.lastAcknowledgedBatchId]);return s.J(gl,o).next((c=>$.forEach(c,(h=>{Se(h.userId===r.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const d=hl(this.serializer,h);return KN(e,r.userId,d).next((()=>{}))}))))}))))}Si(e){const t=e.store(uu),s=e.store(ol);return e.store(xl).get(bp).next((i=>{const r=[];return s.ee(((o,c)=>{const h=new Qe(o),d=(function(_){return[0,$n(_)]})(h);r.push(t.get(d).next((m=>m?$.resolve():(_=>t.put({targetId:0,path:$n(_),sequenceNumber:i.highestListenSequenceNumber}))(h))))})).next((()=>$.waitFor(r)))}))}bi(e,t){e.createObjectStore(nf,{keyPath:m4});const s=t.store(nf),i=new Tx,r=o=>{if(i.add(o)){const c=o.lastSegment(),h=o.popLast();return s.put({collectionId:c,parent:$n(h)})}};return t.store(ol).ee({X:!0},((o,c)=>{const h=new Qe(o);return r(h.popLast())})).next((()=>t.store(lu).ee({X:!0},(([o,c,h],d)=>{const m=Li(c);return r(m.popLast())}))))}Di(e){const t=e.store(cu);return t.ee(((s,i)=>{const r=vd(i),o=GN(this.serializer,r);return t.put(o)}))}Ci(e,t){const s=t.store(ol),i=[];return s.ee(((r,o)=>{const c=t.store(vp),h=(function(_){return _.document?new _e(Qe.fromString(_.document.name).popFirst(5)):_.noDocument?_e.fromSegments(_.noDocument.path):_.unknownDocument?_e.fromSegments(_.unknownDocument.path):Ee(36783)})(o).path.toArray(),d={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(c.put(d))})).next((()=>$.waitFor(i)))}Fi(e,t){const s=t.store(ri),i=tD(this.serializer),r=new Sx(m_.mi,this.serializer.yt);return s.J().next((o=>{const c=new Map;return o.forEach((h=>{let d=c.get(h.userId)??ze();hl(this.serializer,h).keys().forEach((m=>d=d.add(m))),c.set(h.userId,d)})),$.forEach(c,((h,d)=>{const m=new Sn(d),_=d_.wt(this.serializer,m),b=r.getIndexManager(m),E=f_.wt(m,this.serializer,b,r.referenceDelegate);return new nD(i,E,_,b).recalculateAndSaveOverlaysForDocumentKeys(new Hv(t,fs.ce),h).next()}))}))}}function CI(n){n.createObjectStore(uu,{keyPath:d4}).createIndex(rx,f4,{unique:!0}),n.createObjectStore(cu,{keyPath:"targetId"}).createIndex(B2,h4,{unique:!0}),n.createObjectStore(xl)}const Ra="IndexedDbPersistence",sv=18e5,iv=5e3,rv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sD="main";class Ax{constructor(e,t,s,i,r,o,c,h,d,m,_=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Mi=r,this.window=o,this.document=c,this.xi=d,this.Oi=m,this.Ni=_,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=b=>Promise.resolve(),!Ax.v())throw new le(ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kj(this,i),this.$i=t+sD,this.serializer=new qN(h),this.Ui=new Fi(this.$i,this.Ni,new qj(this.serializer)),this.hi=new bj,this.Pi=new Rj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tD(this.serializer),this.Ii=new vj,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,m===!1&&en(Ra,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new le(ee.FAILED_PRECONDITION,rv);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new fs(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ag(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ho(e))return ue(Ra,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue(Ra,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return id(e).get(Pc).next((t=>$.resolve(this.es(t))))}ts(e){return Ag(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,sv)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const s=yn(t,hu);return s.J().next((i=>{const r=this.ss(i,sv),o=i.filter((c=>r.indexOf(c)===-1));return $.forEach(o,(c=>s.delete(c.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?$.resolve(!0):id(e).get(Pc).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,iv)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new le(ee.FAILED_PRECONDITION,rv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ag(e).J().next((s=>this.ss(s,iv).find((i=>{if(this.clientId!==i.clientId){const r=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(r||o&&c)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ue(Ra,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[kf,hu],(e=>{const t=new Hv(e,fs.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((s=>this.rs(s.updateTimeMs,t)&&!this.us(s.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Ag(e).J().next((t=>this.ss(t,sv).map((s=>s.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return f_.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ij(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return d_.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,s){ue(Ra,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",r=(function(h){return h===18?N4:h===17?Y2:h===16?C4:h===15?lx:h===14?$2:h===13?W2:h===12?R4:h===11?G2:void Ee(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,i,r,(c=>(o=new Hv(c,this.ci?this.ci.next():fs.ce),t==="readwrite-primary"?this.Hi(o).next((h=>!!h||this.Yi(o))).next((h=>{if(!h)throw en(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new le(ee.FAILED_PRECONDITION,P2);return s(o)})).next((h=>this.Xi(o).next((()=>h)))):this.Is(o).next((()=>s(o)))))).then((c=>(o.raiseOnCommittedEvent(),c)))}Is(e){return id(e).get(Pc).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,iv)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new le(ee.FAILED_PRECONDITION,rv)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return id(e).put(Pc,t)}static v(){return Fi.v()}Zi(e){const t=id(e);return t.get(Pc).next((s=>this.es(s)?(ue(Ra,"Releasing primary lease."),t.delete(Pc)):$.resolve()))}rs(e,t){const s=Date.now();return!(e<s-t)&&(!(e>s)||(en(`Detected an update time that is in the future: ${e} > ${s}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;r2()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const s=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return ue(Ra,`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return en(Ra,"Failed to get zombied client id.",s),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){en("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function id(n){return yn(n,kf)}function Ag(n){return yn(n,hu)}function Ix(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,t,s,i){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=i}static As(e,t){let s=ze(),i=ze();for(const r of t.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Rx(e,t.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return r2()?8:L2(Ut())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,i){const r={result:null};return this.ys(e,t).next((o=>{r.result=o})).next((()=>{if(!r.result)return this.ws(e,t,i,s).next((o=>{r.result=o}))})).next((()=>{if(r.result)return;const o=new Gj;return this.Ss(e,t,o).next((c=>{if(r.result=c,this.Vs)return this.bs(e,t,o,c.size)}))})).next((()=>r.result))}bs(e,t,s,i){return s.documentReadCount<this.fs?(qc()<=Ke.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Gc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(qc()<=Ke.DEBUG&&ue("QueryEngine","Query:",Gc(t),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(qc()<=Ke.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Gc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,is(t))):$.resolve())}ys(e,t){if(JA(t))return $.resolve(null);let s=is(t);return this.indexManager.getIndexType(e,s).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Tp(t,null,"F"),s=is(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((r=>{const o=ze(...r);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,s).next((h=>{const d=this.Ds(t,c);return this.Cs(t,d,o,h.readTime)?this.ys(e,Tp(t,null,"F")):this.vs(e,d,t,h)}))))})))))}ws(e,t,s,i){return JA(t)||i.isEqual(Ce.min())?$.resolve(null):this.ps.getDocuments(e,s).next((r=>{const o=this.Ds(t,r);return this.Cs(t,o,s,i)?$.resolve(null):(qc()<=Ke.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gc(t)),this.vs(e,o,t,O2(i,ou)).next((c=>c)))}))}Ds(e,t){let s=new gt(gN(e));return t.forEach(((i,r)=>{Pf(e,r)&&(s=s.add(r))})),s}Cs(e,t,s,i){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const r=e.limitType==="F"?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(e,t,s){return qc()<=Ke.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Gc(t)),this.ps.getDocumentsMatchingQuery(e,t,Cs.min(),s)}vs(e,t,s,i){return this.ps.getDocumentsMatchingQuery(e,s,i).next((r=>(t.forEach((o=>{r=r.insert(o.key,o)})),r)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="LocalStore",Wj=3e8;class $j{constructor(e,t,s,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new St(Le),this.xs=new Pr((r=>Il(r)),Of),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function rD(n,e,t,s){return new $j(n,e,t,s)}async function aD(n,e){const t=xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return t.mutationQueue.getAllMutationBatches(s).next((r=>(i=r,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((r=>{const o=[],c=[];let h=ze();for(const d of i){o.push(d.batchId);for(const m of d.mutations)h=h.add(m.key)}for(const d of r){c.push(d.batchId);for(const m of d.mutations)h=h.add(m.key)}return t.localDocuments.getDocuments(s,h).next((d=>({Ls:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function Yj(n,e){const t=xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=e.batch.keys(),r=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,h,d,m){const _=d.batch,b=_.keys();let E=$.resolve();return b.forEach((S=>{E=E.next((()=>m.getEntry(h,S))).next((T=>{const R=d.docVersions.get(S);Se(R!==null,48541),T.version.compareTo(R)<0&&(_.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),m.addEntry(T)))}))})),E.next((()=>c.mutationQueue.removeMutationBatch(h,_)))})(t,s,e,r).next((()=>r.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(c){let h=ze();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(h=h.add(c.batch.mutations[d].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(s,i)))}))}function oD(n){const e=xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Kj(n,e){const t=xe(n),s=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const c=[];e.targetChanges.forEach(((m,_)=>{const b=i.get(_);if(!b)return;c.push(t.Pi.removeMatchingKeys(r,m.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(r,m.addedDocuments,_))));let E=b.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(_)!==null?E=E.withResumeToken(qt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,s)),i=i.insert(_,E),(function(T,R,k){return T.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=Wj?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(b,E,m)&&c.push(t.Pi.updateTargetData(r,E))}));let h=gs(),d=ze();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(r,m))})),c.push(lD(r,o,e.documentUpdates).next((m=>{h=m.ks,d=m.qs}))),!s.isEqual(Ce.min())){const m=t.Pi.getLastRemoteSnapshotVersion(r).next((_=>t.Pi.setTargetsMetadata(r,r.currentSequenceNumber,s)));c.push(m)}return $.waitFor(c).next((()=>o.apply(r))).next((()=>t.localDocuments.getLocalViewOfDocuments(r,h,d))).next((()=>h))})).then((r=>(t.Ms=i,r)))}function lD(n,e,t){let s=ze(),i=ze();return t.forEach((r=>s=s.add(r))),e.getEntries(n,s).next((r=>{let o=gs();return t.forEach(((c,h)=>{const d=r.get(c);h.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(Ce.min())?(e.removeEntry(c,h.readTime),o=o.insert(c,h)):!d.isValidDocument()||h.version.compareTo(d.version)>0||h.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(h),o=o.insert(c,h)):ue(Cx,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",h.version)})),{ks:o,qs:i}}))}function Qj(n,e){const t=xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=za),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function yu(n,e){const t=xe(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return t.Pi.getTargetData(s,e).next((r=>r?(i=r,$.resolve(i)):t.Pi.allocateTargetId(s).next((o=>(i=new Er(e,o,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=t.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function vu(n,e,t){const s=xe(n),i=s.Ms.get(e),r=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",r,(o=>s.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ho(o))throw o;ue(Cx,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(i.target)}function Rp(n,e,t){const s=xe(n);let i=Ce.min(),r=ze();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(h,d,m){const _=xe(h),b=_.xs.get(m);return b!==void 0?$.resolve(_.Ms.get(b)):_.Pi.getTargetData(d,m)})(s,o,is(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,c.targetId).next((h=>{r=h}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,t?i:Ce.min(),t?r:ze()))).next((c=>(hD(s,mN(e),c),{documents:c,Qs:r})))))}function cD(n,e){const t=xe(n),s=xe(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(r=>s.At(r,e).next((o=>o?o.target:null))))}function uD(n,e){const t=xe(n),s=t.Os.get(e)||Ce.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.Ns.getAllFromCollectionGroup(i,e,O2(s,ou),Number.MAX_SAFE_INTEGER))).then((i=>(hD(t,e,i),i)))}function hD(n,e,t){let s=n.Os.get(e)||Ce.min();t.forEach(((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)})),n.Os.set(e,s)}async function Xj(n,e,t,s){const i=xe(n);let r=ze(),o=gs();for(const d of t){const m=e.$s(d.metadata.name);d.document&&(r=r.add(m));const _=e.Us(d);_.setReadTime(e.Ks(d.metadata.readTime)),o=o.insert(m,_)}const c=i.Ns.newChangeBuffer({trackRemovals:!0}),h=await yu(i,(function(m){return is(Lu(Qe.fromString(`__bundle__/docs/${m}`)))})(s));return i.persistence.runTransaction("Apply bundle documents","readwrite",(d=>lD(d,c,o).next((m=>(c.apply(d),m))).next((m=>i.Pi.removeMatchingKeysForTargetId(d,h.targetId).next((()=>i.Pi.addMatchingKeys(d,r,h.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(d,m.ks,m.qs))).next((()=>m.ks))))))}async function Zj(n,e,t=ze()){const s=await yu(n,is(xx(e.bundledQuery))),i=xe(n);return i.persistence.runTransaction("Save named query","readwrite",(r=>{const o=nn(e.readTime);if(s.snapshotVersion.compareTo(o)>=0)return i.Ii.saveNamedQuery(r,e);const c=s.withResumeToken(qt.EMPTY_BYTE_STRING,o);return i.Ms=i.Ms.insert(c.targetId,c),i.Pi.updateTargetData(r,c).next((()=>i.Pi.removeMatchingKeysForTargetId(r,s.targetId))).next((()=>i.Pi.addMatchingKeys(r,t,s.targetId))).next((()=>i.Ii.saveNamedQuery(r,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD="firestore_clients";function NI(n,e){return`${dD}_${n}_${e}`}const fD="firestore_mutations";function DI(n,e,t){let s=`${fD}_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}const mD="firestore_targets";function av(n,e){return`${mD}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="SharedClientState";class Cp{constructor(e,t,s,i){this.user=e,this.batchId=t,this.state=s,this.error=i}static Ws(e,t,s){const i=JSON.parse(s);let r,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new le(i.error.code,i.error.message))),o?new Cp(e,t,i.state,r):(en(ki,`Failed to parse mutation state for ID '${t}': ${s}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ld{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ws(e,t){const s=JSON.parse(t);let i,r=typeof s=="object"&&["not-current","current","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return r&&s.error&&(r=typeof s.error.message=="string"&&typeof s.error.code=="string",r&&(i=new le(s.error.code,s.error.message))),r?new Ld(e,s.state,i):(en(ki,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Np{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const s=JSON.parse(t);let i=typeof s=="object"&&s.activeTargetIds instanceof Array,r=fx();for(let o=0;i&&o<s.activeTargetIds.length;++o)i=j2(s.activeTargetIds[o]),r=r.add(s.activeTargetIds[o]);return i?new Np(e,r):(en(ki,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Nx{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Nx(t.clientId,t.onlineState):(en(ki,`Failed to parse online state: ${e}`),null)}}class ib{constructor(){this.activeTargetIds=fx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ov{constructor(e,t,s,i,r){this.window=e,this.Mi=t,this.persistenceKey=s,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new St(Le),this.started=!1,this.Xs=[];const o=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.eo=NI(this.persistenceKey,this.Js),this.no=(function(h){return`firestore_sequence_number_${h}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new ib),this.ro=new RegExp(`^${dD}_${o}_([^_]*)$`),this.io=new RegExp(`^${fD}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${mD}_${o}_(\\d+)$`),this.oo=(function(h){return`firestore_online_state_${h}`})(this.persistenceKey),this._o=(function(h){return`firestore_bundle_loaded_v2_${h}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const s of e){if(s===this.Js)continue;const i=this.getItem(NI(this.persistenceKey,s));if(i){const r=Np.Ws(s,i);r&&(this.Zs=this.Zs.insert(r.clientId,r))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const s=this.uo(t);s&&this.co(s)}for(const s of this.Xs)this.Ys(s);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((s,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,s){this.ho(e,t,s),this.Po(e)}addLocalQueryTarget(e,t=!0){let s="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(av(this.persistenceKey,e));if(i){const r=Ld.Ws(e,i);r&&(s=r.state)}}return t&&this.To.zs(e),this.ao(),s}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(av(this.persistenceKey,e))}updateQueryState(e,t,s){this.Io(e,t,s)}handleUserChange(e,t,s){t.forEach((i=>{this.Po(i)})),this.currentUser=e,s.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ue(ki,"READ",e,t),t}setItem(e,t){ue(ki,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ue(ki,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(ue(ki,"EVENT",t.key,t.newValue),t.key===this.eo)return void en("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const s=this.Ro(t.key);return this.Vo(s,null)}{const s=this.mo(t.key,t.newValue);if(s)return this.Vo(s.clientId,s)}}else if(this.io.test(t.key)){if(t.newValue!==null){const s=this.fo(t.key,t.newValue);if(s)return this.po(s)}}else if(this.so.test(t.key)){if(t.newValue!==null){const s=this.yo(t.key,t.newValue);if(s)return this.wo(s)}}else if(t.key===this.oo){if(t.newValue!==null){const s=this.uo(t.newValue);if(s)return this.co(s)}}else if(t.key===this.no){const s=(function(r){let o=fs.ce;if(r!=null)try{const c=JSON.parse(r);Se(typeof c=="number",30636,{So:r}),o=c}catch(c){en(ki,"Failed to read sequence number from WebStorage",c)}return o})(t.newValue);s!==fs.ce&&this.sequenceNumberHandler(s)}else if(t.key===this._o){const s=this.bo(t.newValue);await Promise.all(s.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,s){const i=new Cp(this.currentUser,e,t,s),r=DI(this.persistenceKey,this.currentUser,e);this.setItem(r,i.Gs())}Po(e){const t=DI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,s){const i=av(this.persistenceKey,e),r=new Ld(e,t,s);this.setItem(i,r.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const s=this.Ro(e);return Np.Ws(s,t)}fo(e,t){const s=this.io.exec(e),i=Number(s[1]),r=s[2]!==void 0?s[2]:null;return Cp.Ws(new Sn(r),i,t)}yo(e,t){const s=this.so.exec(e),i=Number(s[1]);return Ld.Ws(i,t)}uo(e){return Nx.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ue(ki,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const s=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),r=this.lo(s),o=[],c=[];return r.forEach((h=>{i.has(h)||o.push(h)})),i.forEach((h=>{r.has(h)||c.push(h)})),this.syncEngine.Fo(o,c).then((()=>{this.Zs=s}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=fx();return e.forEach(((s,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class gD{constructor(){this.Mo=new ib,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ib,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="ConnectivityMonitor";class OI{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(kI,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(kI,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ig=null;function rb(){return Ig===null?Ig=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ig++,"0x"+Ig.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="RestConnection",e6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class t6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===qv?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(e,t,s,i,r){const o=rb(),c=this.zo(e,t.toUriEncodedString());ue(lv,`Sending RPC '${e}' ${o}:`,c,s);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,r);const{host:d}=new URL(c),m=Mu(d);return this.Jo(e,c,h,s,m).then((_=>(ue(lv,`Received RPC '${e}' ${o}: `,_),_)),(_=>{throw Wi(lv,`RPC '${e}' ${o} failed with error: `,_,"url: ",c,"request:",s),_}))}Ho(e,t,s,i,r,o){return this.Go(e,t,s,i,r)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,r)=>e[r]=i)),s&&s.headers.forEach(((i,r)=>e[r]=i))}zo(e,t){const s=e6[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="WebChannelConnection";class s6 extends t6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,i,r){const o=rb();return new Promise(((c,h)=>{const d=new E2;d.setWithCredentials(!0),d.listenOnce(T2.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case qg.NO_ERROR:const _=d.getResponseJson();ue(Bn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(_)),c(_);break;case qg.TIMEOUT:ue(Bn,`RPC '${e}' ${o} timed out`),h(new le(ee.DEADLINE_EXCEEDED,"Request time out"));break;case qg.HTTP_ERROR:const b=d.getStatus();if(ue(Bn,`RPC '${e}' ${o} failed with status:`,b,"response text:",d.getResponseText()),b>0){let E=d.getResponseJson();Array.isArray(E)&&(E=E[0]);const S=E==null?void 0:E.error;if(S&&S.status&&S.message){const T=(function(k){const L=k.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(L)>=0?L:ee.UNKNOWN})(S.status);h(new le(T,S.message))}else h(new le(ee.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new le(ee.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ue(Bn,`RPC '${e}' ${o} completed.`)}}));const m=JSON.stringify(i);ue(Bn,`RPC '${e}' ${o} sending request:`,i),d.send(t,"POST",m,s,15)}))}T_(e,t,s){const i=rb(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=A2(),c=S2(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(h.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,s),h.encodeInitMessageHeaders=!0;const m=r.join("");ue(Bn,`Creating RPC '${e}' stream ${i}: ${m}`,h);const _=o.createWebChannel(m,h);this.I_(_);let b=!1,E=!1;const S=new n6({Yo:R=>{E?ue(Bn,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(b||(ue(Bn,`Opening RPC '${e}' stream ${i} transport.`),_.open(),b=!0),ue(Bn,`RPC '${e}' stream ${i} sending:`,R),_.send(R))},Zo:()=>_.close()}),T=(R,k,L)=>{R.listen(k,(M=>{try{L(M)}catch(H){setTimeout((()=>{throw H}),0)}}))};return T(_,pd.EventType.OPEN,(()=>{E||(ue(Bn,`RPC '${e}' stream ${i} transport opened.`),S.o_())})),T(_,pd.EventType.CLOSE,(()=>{E||(E=!0,ue(Bn,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(_))})),T(_,pd.EventType.ERROR,(R=>{E||(E=!0,Wi(Bn,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),S.a_(new le(ee.UNAVAILABLE,"The operation could not be completed")))})),T(_,pd.EventType.MESSAGE,(R=>{var k;if(!E){const L=R.data[0];Se(!!L,16349);const M=L,H=(M==null?void 0:M.error)||((k=M[0])==null?void 0:k.error);if(H){ue(Bn,`RPC '${e}' stream ${i} received error:`,H);const U=H.status;let z=(function(N){const V=on[N];if(V!==void 0)return RN(V)})(U),C=H.message;z===void 0&&(z=ee.INTERNAL,C="Unknown error status: "+U+" with message "+H.message),E=!0,S.a_(new le(z,C)),_.close()}else ue(Bn,`RPC '${e}' stream ${i} received:`,L),S.u_(L)}})),T(c,w2.STAT_EVENT,(R=>{R.stat===Lv.PROXY?ue(Bn,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Lv.NOPROXY&&ue(Bn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(){return typeof window<"u"?window:null}function ep(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(n){return new lj(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,t,s=1e3,i=1.5,r=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=i,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-s);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="PersistentStream";class _D{constructor(e,t,s,i,r,o,c,h){this.Mi=e,this.S_=s,this.b_=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Dx(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(en(t.toString()),en("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.D_===t&&this.G_(s,i)}),(s=>{e((()=>{const i=new le(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{s((()=>this.z_(i)))})),this.stream.onMessage((i=>{s((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(MI,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ue(MI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class i6 extends _D{constructor(e,t,s,i,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,i,o),this.serializer=r}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=hj(this.serializer,e),s=(function(r){if(!("targetChange"in r))return Ce.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?Ce.min():o.readTime?nn(o.readTime):Ce.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Jv(this.serializer),t.addTarget=(function(r,o){let c;const h=o.target;if(c=xp(h)?{documents:jN(r,h)}:{query:UN(r,h).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=kN(r,o.resumeToken);const d=Xv(r,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Ce.min())>0){c.readTime=_u(r,o.snapshotVersion.toTimestamp());const d=Xv(r,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const s=fj(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Jv(this.serializer),t.removeTarget=e,this.q_(t)}}class r6 extends _D{constructor(e,t,s,i,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,i,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=dj(e.writeResults,e.commitTime),s=nn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Jv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>cf(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{}class o6 extends a6{constructor(e,t,s,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new le(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,o])=>this.connection.Go(e,Zv(t,s),i,r,o))).catch((r=>{throw r.name==="FirebaseError"?(r.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new le(ee.UNKNOWN,r.toString())}))}Ho(e,t,s,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,Zv(t,s),i,o,c,r))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(ee.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class l6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(en(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol="RemoteStore";class c6{constructor(e,t,s,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{mo(this)&&(ue(Ol,"Restarting streams for network reachability change."),await(async function(h){const d=xe(h);d.Ea.add(4),await Fu(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Ff(d)})(this))}))})),this.Ra=new l6(s,i)}}async function Ff(n){if(mo(n))for(const e of n.da)await e(!0)}async function Fu(n){for(const e of n.da)await e(!1)}function g_(n,e){const t=xe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Mx(t)?Ox(t):zu(t).O_()&&kx(t,e))}function bu(n,e){const t=xe(n),s=zu(t);t.Ia.delete(e),s.O_()&&yD(t,e),t.Ia.size===0&&(s.O_()?s.L_():mo(t)&&t.Ra.set("Unknown"))}function kx(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zu(n).Y_(e)}function yD(n,e){n.Va.Ue(e),zu(n).Z_(e)}function Ox(n){n.Va=new ij({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),zu(n).start(),n.Ra.ua()}function Mx(n){return mo(n)&&!zu(n).x_()&&n.Ia.size>0}function mo(n){return xe(n).Ea.size===0}function vD(n){n.Va=void 0}async function u6(n){n.Ra.set("Online")}async function h6(n){n.Ia.forEach(((e,t)=>{kx(n,e)}))}async function d6(n,e){vD(n),Mx(n)?(n.Ra.ha(e),Ox(n)):n.Ra.set("Unknown")}async function f6(n,e,t){if(n.Ra.set("Online"),e instanceof DN&&e.state===2&&e.cause)try{await(async function(i,r){const o=r.cause;for(const c of r.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(s){ue(Ol,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Dp(n,s)}else if(e instanceof Zg?n.Va.Ze(e):e instanceof NN?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ce.min()))try{const s=await oD(n.localStore);t.compareTo(s)>=0&&await(function(r,o){const c=r.Va.Tt(o);return c.targetChanges.forEach(((h,d)=>{if(h.resumeToken.approximateByteSize()>0){const m=r.Ia.get(d);m&&r.Ia.set(d,m.withResumeToken(h.resumeToken,o))}})),c.targetMismatches.forEach(((h,d)=>{const m=r.Ia.get(h);if(!m)return;r.Ia.set(h,m.withResumeToken(qt.EMPTY_BYTE_STRING,m.snapshotVersion)),yD(r,h);const _=new Er(m.target,h,d,m.sequenceNumber);kx(r,_)})),r.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(s){ue(Ol,"Failed to raise snapshot:",s),await Dp(n,s)}}async function Dp(n,e,t){if(!ho(e))throw e;n.Ea.add(1),await Fu(n),n.Ra.set("Offline"),t||(t=()=>oD(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(Ol,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ff(n)}))}function bD(n,e){return e().catch((t=>Dp(n,t,e)))}async function Bu(n){const e=xe(n),t=no(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:za;for(;m6(e);)try{const i=await Qj(e.localStore,s);if(i===null){e.Ta.length===0&&t.L_();break}s=i.batchId,g6(e,i)}catch(i){await Dp(e,i)}xD(e)&&ED(e)}function m6(n){return mo(n)&&n.Ta.length<10}function g6(n,e){n.Ta.push(e);const t=no(n);t.O_()&&t.X_&&t.ea(e.mutations)}function xD(n){return mo(n)&&!no(n).x_()&&n.Ta.length>0}function ED(n){no(n).start()}async function p6(n){no(n).ra()}async function _6(n){const e=no(n);for(const t of n.Ta)e.ea(t.mutations)}async function y6(n,e,t){const s=n.Ta.shift(),i=_x.from(s,e,t);await bD(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Bu(n)}async function v6(n,e){e&&no(n).X_&&await(async function(s,i){if((function(o){return IN(o)&&o!==ee.ABORTED})(i.code)){const r=s.Ta.shift();no(s).B_(),await bD(s,(()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i))),await Bu(s)}})(n,e),xD(n)&&ED(n)}async function PI(n,e){const t=xe(n);t.asyncQueue.verifyOperationInProgress(),ue(Ol,"RemoteStore received new credentials");const s=mo(t);t.Ea.add(3),await Fu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ff(t)}async function ab(n,e){const t=xe(n);e?(t.Ea.delete(2),await Ff(t)):e||(t.Ea.add(2),await Fu(t),t.Ra.set("Unknown"))}function zu(n){return n.ma||(n.ma=(function(t,s,i){const r=xe(t);return r.sa(),new i6(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(n.datastore,n.asyncQueue,{Xo:u6.bind(null,n),t_:h6.bind(null,n),r_:d6.bind(null,n),H_:f6.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Mx(n)?Ox(n):n.Ra.set("Unknown")):(await n.ma.stop(),vD(n))}))),n.ma}function no(n){return n.fa||(n.fa=(function(t,s,i){const r=xe(t);return r.sa(),new r6(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:p6.bind(null,n),r_:v6.bind(null,n),ta:_6.bind(null,n),na:y6.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Bu(n)):(await n.fa.stop(),n.Ta.length>0&&(ue(Ol,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,t,s,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new Pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,i,r){const o=Date.now()+s,c=new Px(e,t,o,i,r);return c.start(s),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hu(n,e){if(en("AsyncQueue",`${e}: ${n}`),ho(n))return new le(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{static emptySet(e){return new Zc(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||_e.comparator(t.key,s.key):(t,s)=>_e.comparator(t.key,s.key),this.keyedMap=_d(),this.sortedSet=new St(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Zc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.ga=new St(_e.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class xu{constructor(e,t,s,i,r,o,c,h,d){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=d}static fromInitialDocuments(e,t,s,i,r){const o=[];return t.forEach((c=>{o.push({type:0,doc:c})})),new xu(e,t,Zc.emptySet(t),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==s[i].type||!t[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class x6{constructor(){this.queries=LI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const i=xe(t),r=i.queries;i.queries=LI(),r.forEach(((o,c)=>{for(const h of c.Sa)h.onError(s)}))})(this,new le(ee.ABORTED,"Firestore shutting down"))}}function LI(){return new Pr((n=>fN(n)),Mf)}async function Vx(n,e){const t=xe(n);let s=3;const i=e.query;let r=t.queries.get(i);r?!r.ba()&&e.Da()&&(s=2):(r=new b6,s=e.Da()?0:1);try{switch(s){case 0:r.wa=await t.onListen(i,!0);break;case 1:r.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const c=Hu(o,`Initialization of query '${Gc(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,r),r.Sa.push(e),e.va(t.onlineState),r.wa&&e.Fa(r.wa)&&jx(t)}async function Lx(n,e){const t=xe(n),s=e.query;let i=3;const r=t.queries.get(s);if(r){const o=r.Sa.indexOf(e);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?i=e.Da()?0:1:!r.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function E6(n,e){const t=xe(n);let s=!1;for(const i of e){const r=i.query,o=t.queries.get(r);if(o){for(const c of o.Sa)c.Fa(i)&&(s=!0);o.wa=i}}s&&jx(t)}function T6(n,e,t){const s=xe(n),i=s.queries.get(e);if(i)for(const r of i.Sa)r.onError(t);s.queries.delete(e)}function jx(n){n.Ca.forEach((e=>{e.next()}))}var ob,jI;(jI=ob||(ob={})).Ma="default",jI.Cache="cache";class Ux{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new xu(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=xu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ob.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.serializer=e}$s(e){return Bi(this.serializer,e)}Us(e){return e.metadata.exists?LN(this.serializer,e.document,!1):It.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return nn(e)}}class S6{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=TD(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const s=Qe.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,s=new UI(this.serializer);for(const i of e)if(i.metadata.queries){const r=s.$s(i.metadata.name);for(const o of i.metadata.queries){const c=(t.get(o)||ze()).add(r);t.set(o,c)}}return t}async ja(e){const t=await Xj(e,new UI(this.serializer),this.Wa,this.Ua.id),s=this.za(this.documents);for(const i of this.Ka)await Zj(e,i,s.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function TD(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e){this.key=e}}class SD{constructor(e){this.key=e}}class AD{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=gN(e),this.tu=new Zc(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new VI,i=t?t.tu:this.tu;let r=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,_)=>{const b=i.get(m),E=Pf(this.query,_)?_:null,S=!!b&&this.mutatedKeys.has(b.key),T=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let R=!1;b&&E?b.data.isEqual(E.data)?S!==T&&(s.track({type:3,doc:E}),R=!0):this.su(b,E)||(s.track({type:2,doc:E}),R=!0,(h&&this.eu(E,h)>0||d&&this.eu(E,d)<0)&&(c=!0)):!b&&E?(s.track({type:0,doc:E}),R=!0):b&&!E&&(s.track({type:1,doc:b}),R=!0,(h||d)&&(c=!0)),R&&(E?(o=o.add(E),r=T?r.add(m):r.delete(m)):(o=o.delete(m),r=r.delete(m)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),r=r.delete(m.key),s.track({type:1,doc:m})}return{tu:o,iu:s,Cs:c,mutatedKeys:r}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,i){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((m,_)=>(function(E,S){const T=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:R})}};return T(E)-T(S)})(m.type,_.type)||this.eu(m.doc,_.doc))),this.ou(s),i=i??!1;const c=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,d=h!==this.Za;return this.Za=h,o.length!==0||d?{snapshot:new xu(this.query,e.tu,r,o,e.mutatedKeys,h===0,d,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new VI,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new SD(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new wD(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return xu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const go="SyncEngine";class A6{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class I6{constructor(e){this.key=e,this.hu=!1}}class R6{constructor(e,t,s,i,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Pr((c=>fN(c)),Mf),this.Iu=new Map,this.Eu=new Set,this.du=new St(_e.comparator),this.Au=new Map,this.Ru=new wx,this.Vu={},this.mu=new Map,this.fu=kl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function C6(n,e,t=!0){const s=p_(n);let i;const r=s.Tu.get(e);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.lu()):i=await ID(s,e,t,!0),i}async function N6(n,e){const t=p_(n);await ID(t,e,!0,!1)}async function ID(n,e,t,s){const i=await yu(n.localStore,is(e)),r=i.targetId,o=n.sharedClientState.addLocalQueryTarget(r,t);let c;return s&&(c=await Fx(n,e,r,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&g_(n.remoteStore,i),c}async function Fx(n,e,t,s,i){n.pu=(_,b,E)=>(async function(T,R,k,L){let M=R.view.ru(k);M.Cs&&(M=await Rp(T.localStore,R.query,!1).then((({documents:C})=>R.view.ru(C,M))));const H=L&&L.targetChanges.get(R.targetId),U=L&&L.targetMismatches.get(R.targetId)!=null,z=R.view.applyChanges(M,T.isPrimaryClient,H,U);return lb(T,R.targetId,z.au),z.snapshot})(n,_,b,E);const r=await Rp(n.localStore,e,!0),o=new AD(e,r.Qs),c=o.ru(r.documents),h=jf.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",i),d=o.applyChanges(c,n.isPrimaryClient,h);lb(n,t,d.au);const m=new A6(e,t,o);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function D6(n,e,t){const s=xe(n),i=s.Tu.get(e),r=s.Iu.get(i.targetId);if(r.length>1)return s.Iu.set(i.targetId,r.filter((o=>!Mf(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await vu(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),t&&bu(s.remoteStore,i.targetId),Eu(s,i.targetId)})).catch(uo)):(Eu(s,i.targetId),await vu(s.localStore,i.targetId,!0))}async function k6(n,e){const t=xe(n),s=t.Tu.get(e),i=t.Iu.get(s.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),bu(t.remoteStore,s.targetId))}async function O6(n,e,t){const s=qx(n);try{const i=await(function(o,c){const h=xe(o),d=ct.now(),m=c.reduce(((E,S)=>E.add(S.key)),ze());let _,b;return h.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let S=gs(),T=ze();return h.Ns.getEntries(E,m).next((R=>{S=R,S.forEach(((k,L)=>{L.isValidDocument()||(T=T.add(k))}))})).next((()=>h.localDocuments.getOverlayedDocuments(E,S))).next((R=>{_=R;const k=[];for(const L of c){const M=tj(L,_.get(L.key).overlayedDocument);M!=null&&k.push(new Vr(L.key,M,iN(M.value.mapValue),Mt.exists(!0)))}return h.mutationQueue.addMutationBatch(E,d,k,c)})).next((R=>{b=R;const k=R.applyToLocalDocumentSet(_,T);return h.documentOverlayCache.saveOverlays(E,R.batchId,k)}))})).then((()=>({batchId:b.batchId,changes:_N(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),(function(o,c,h){let d=o.Vu[o.currentUser.toKey()];d||(d=new St(Le)),d=d.insert(c,h),o.Vu[o.currentUser.toKey()]=d})(s,i.batchId,t),await Lr(s,i.changes),await Bu(s.remoteStore)}catch(i){const r=Hu(i,"Failed to persist write");t.reject(r)}}async function RD(n,e){const t=xe(n);try{const s=await Kj(t.localStore,e);e.targetChanges.forEach(((i,r)=>{const o=t.Au.get(r);o&&(Se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Se(o.hu,14607):i.removedDocuments.size>0&&(Se(o.hu,42227),o.hu=!1))})),await Lr(t,s,e)}catch(s){await uo(s)}}function FI(n,e,t){const s=xe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const i=[];s.Tu.forEach(((r,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const h=xe(o);h.onlineState=c;let d=!1;h.queries.forEach(((m,_)=>{for(const b of _.Sa)b.va(c)&&(d=!0)})),d&&jx(h)})(s.eventManager,e),i.length&&s.Pu.H_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function M6(n,e,t){const s=xe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const i=s.Au.get(e),r=i&&i.key;if(r){let o=new St(_e.comparator);o=o.insert(r,It.newNoDocument(r,Ce.min()));const c=ze().add(r),h=new Lf(Ce.min(),new Map,new St(Le),o,c);await RD(s,h),s.du=s.du.remove(r),s.Au.delete(e),Hx(s)}else await vu(s.localStore,e,!1).then((()=>Eu(s,e,t))).catch(uo)}async function P6(n,e){const t=xe(n),s=e.batch.batchId;try{const i=await Yj(t.localStore,e);zx(t,s,null),Bx(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Lr(t,i)}catch(i){await uo(i)}}async function V6(n,e,t){const s=xe(n);try{const i=await(function(o,c){const h=xe(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let m;return h.mutationQueue.lookupMutationBatch(d,c).next((_=>(Se(_!==null,37113),m=_.keys(),h.mutationQueue.removeMutationBatch(d,_)))).next((()=>h.mutationQueue.performConsistencyCheck(d))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(d,m,c))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m))).next((()=>h.localDocuments.getDocuments(d,m)))}))})(s.localStore,e);zx(s,e,t),Bx(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Lr(s,i)}catch(i){await uo(i)}}async function L6(n,e){const t=xe(n);mo(t.remoteStore)||ue(go,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=await(function(o){const c=xe(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h)))})(t.localStore);if(s===za)return void e.resolve();const i=t.mu.get(s)||[];i.push(e),t.mu.set(s,i)}catch(s){const i=Hu(s,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Bx(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function zx(n,e,t){const s=xe(n);let i=s.Vu[s.currentUser.toKey()];if(i){const r=i.get(e);r&&(t?r.reject(t):r.resolve(),i=i.remove(e)),s.Vu[s.currentUser.toKey()]=i}}function Eu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||CD(n,s)}))}function CD(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(bu(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Hx(n))}function lb(n,e,t){for(const s of t)s instanceof wD?(n.Ru.addReference(s.key,e),j6(n,s)):s instanceof SD?(ue(go,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||CD(n,s.key)):Ee(19791,{wu:s})}function j6(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(ue(go,"New document in limbo: "+t),n.Eu.add(s),Hx(n))}function Hx(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new _e(Qe.fromString(e)),s=n.fu.next();n.Au.set(s,new I6(t)),n.du=n.du.insert(t,s),g_(n.remoteStore,new Er(is(Lu(t.path)),s,"TargetPurposeLimboResolution",fs.ce))}}async function Lr(n,e,t){const s=xe(n),i=[],r=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((c,h)=>{o.push(s.pu(h,e,t).then((d=>{var m;if((d||t)&&s.isPrimaryClient){const _=d?!d.fromCache:(m=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:m.current;s.sharedClientState.updateQueryState(h.targetId,_?"current":"not-current")}if(d){i.push(d);const _=Rx.As(h.targetId,d);r.push(_)}})))})),await Promise.all(o),s.Pu.H_(i),await(async function(h,d){const m=xe(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>$.forEach(d,(b=>$.forEach(b.Es,(E=>m.persistence.referenceDelegate.addReference(_,b.targetId,E))).next((()=>$.forEach(b.ds,(E=>m.persistence.referenceDelegate.removeReference(_,b.targetId,E)))))))))}catch(_){if(!ho(_))throw _;ue(Cx,"Failed to update sequence numbers: "+_)}for(const _ of d){const b=_.targetId;if(!_.fromCache){const E=m.Ms.get(b),S=E.snapshotVersion,T=E.withLastLimboFreeSnapshotVersion(S);m.Ms=m.Ms.insert(b,T)}}})(s.localStore,r))}async function U6(n,e){const t=xe(n);if(!t.currentUser.isEqual(e)){ue(go,"User change. New user:",e.toKey());const s=await aD(t.localStore,e);t.currentUser=e,(function(r,o){r.mu.forEach((c=>{c.forEach((h=>{h.reject(new le(ee.CANCELLED,o))}))})),r.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Lr(t,s.Ls)}}function F6(n,e){const t=xe(n),s=t.Au.get(e);if(s&&s.hu)return ze().add(s.key);{let i=ze();const r=t.Iu.get(e);if(!r)return i;for(const o of r){const c=t.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}async function B6(n,e){const t=xe(n),s=await Rp(t.localStore,e.query,!0),i=e.view.cu(s);return t.isPrimaryClient&&lb(t,e.targetId,i.au),i}async function z6(n,e){const t=xe(n);return uD(t.localStore,e).then((s=>Lr(t,s)))}async function H6(n,e,t,s){const i=xe(n),r=await(function(c,h){const d=xe(c),m=xe(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",(_=>m.er(_,h).next((b=>b?d.localDocuments.getDocuments(_,b):$.resolve(null)))))})(i.localStore,e);r!==null?(t==="pending"?await Bu(i.remoteStore):t==="acknowledged"||t==="rejected"?(zx(i,e,s||null),Bx(i,e),(function(c,h){xe(xe(c).mutationQueue).ir(h)})(i.localStore,e)):Ee(6720,"Unknown batchState",{Su:t}),await Lr(i,r)):ue(go,"Cannot apply mutation batch with id: "+e)}async function q6(n,e){const t=xe(n);if(p_(t),qx(t),e===!0&&t.gu!==!0){const s=t.sharedClientState.getAllActiveQueryTargets(),i=await BI(t,s.toArray());t.gu=!0,await ab(t.remoteStore,!0);for(const r of i)g_(t.remoteStore,r)}else if(e===!1&&t.gu!==!1){const s=[];let i=Promise.resolve();t.Iu.forEach(((r,o)=>{t.sharedClientState.isLocalQueryTarget(o)?s.push(o):i=i.then((()=>(Eu(t,o),vu(t.localStore,o,!0)))),bu(t.remoteStore,o)})),await i,await BI(t,s),(function(o){const c=xe(o);c.Au.forEach(((h,d)=>{bu(c.remoteStore,d)})),c.Ru.Jr(),c.Au=new Map,c.du=new St(_e.comparator)})(t),t.gu=!1,await ab(t.remoteStore,!1)}}async function BI(n,e,t){const s=xe(n),i=[],r=[];for(const o of e){let c;const h=s.Iu.get(o);if(h&&h.length!==0){c=await yu(s.localStore,is(h[0]));for(const d of h){const m=s.Tu.get(d),_=await B6(s,m);_.snapshot&&r.push(_.snapshot)}}else{const d=await cD(s.localStore,o);c=await yu(s.localStore,d),await Fx(s,ND(d),o,!1,c.resumeToken)}i.push(c)}return s.Pu.H_(r),i}function ND(n){return dN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function G6(n){return(function(t){return xe(xe(t).persistence).Ts()})(xe(n).localStore)}async function W6(n,e,t,s){const i=xe(n);if(i.gu)return void ue(go,"Ignoring unexpected query state notification.");const r=i.Iu.get(e);if(r&&r.length>0)switch(t){case"current":case"not-current":{const o=await uD(i.localStore,mN(r[0])),c=Lf.createSynthesizedRemoteEventForCurrentChange(e,t==="current",qt.EMPTY_BYTE_STRING);await Lr(i,o,c);break}case"rejected":await vu(i.localStore,e,!0),Eu(i,e,s);break;default:Ee(64155,t)}}async function $6(n,e,t){const s=p_(n);if(s.gu){for(const i of e){if(s.Iu.has(i)&&s.sharedClientState.isActiveQueryTarget(i)){ue(go,"Adding an already active target "+i);continue}const r=await cD(s.localStore,i),o=await yu(s.localStore,r);await Fx(s,ND(r),o.targetId,!1,o.resumeToken),g_(s.remoteStore,o)}for(const i of t)s.Iu.has(i)&&await vu(s.localStore,i,!1).then((()=>{bu(s.remoteStore,i),Eu(s,i)})).catch(uo)}}function p_(n){const e=xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=M6.bind(null,e),e.Pu.H_=E6.bind(null,e.eventManager),e.Pu.yu=T6.bind(null,e.eventManager),e}function qx(n){const e=xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=P6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V6.bind(null,e),e}function Y6(n,e,t){const s=xe(n);(async function(r,o,c){try{const h=await o.getMetadata();if(await(function(E,S){const T=xe(E),R=nn(S.createTime);return T.persistence.runTransaction("hasNewerBundle","readonly",(k=>T.Ii.getBundleMetadata(k,S.id))).then((k=>!!k&&k.createTime.compareTo(R)>=0))})(r.localStore,h))return await o.close(),c._completeWith((function(E){return{taskState:"Success",documentsLoaded:E.totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}})(h)),Promise.resolve(new Set);c._updateProgress(TD(h));const d=new S6(h,o.serializer);let m=await o.bu();for(;m;){const b=await d.Ga(m);b&&c._updateProgress(b),m=await o.bu()}const _=await d.ja(r.localStore);return await Lr(r,_.Ha,void 0),await(function(E,S){const T=xe(E);return T.persistence.runTransaction("Save bundle","readwrite",(R=>T.Ii.saveBundleMetadata(R,S)))})(r.localStore,h),c._completeWith(_.progress),Promise.resolve(_.Ja)}catch(h){return Wi(go,`Loading bundle failed with ${h}`),c._failWith(h),Promise.resolve(new Set)}})(s,e,t).then((i=>{s.sharedClientState.notifyBundleLoaded(i)}))}class uf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return rD(this.persistence,new iD,e.initialUser,this.serializer)}Cu(e){return new Sx(m_.mi,this.serializer)}Du(e){return new gD}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uf.provider={build:()=>new uf};class K6 extends uf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Se(this.persistence.referenceDelegate instanceof Ip,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new ZN(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new Sx((s=>Ip.mi(s,t)),this.serializer)}}class DD extends uf{constructor(e,t,s){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await qx(this.xu.syncEngine),await Bu(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return rD(this.persistence,new iD,e.initialUser,this.serializer)}Fu(e,t){const s=this.persistence.referenceDelegate.garbageCollector;return new ZN(s,e.asyncQueue,t)}Mu(e,t){const s=new i4(t,this.persistence);return new s4(e.asyncQueue,s)}Cu(e){const t=Ix(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new Ax(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,pD(),ep(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new gD}}class Q6 extends DD{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof ov&&(this.sharedClientState.syncEngine={Co:H6.bind(null,t),vo:W6.bind(null,t),Fo:$6.bind(null,t),Ts:G6.bind(null,t),Do:z6.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async s=>{await q6(this.xu.syncEngine,s),this.gcScheduler&&(s&&!this.gcScheduler.started?this.gcScheduler.start():s||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(s&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():s||this.indexBackfillerScheduler.stop())}))}Du(e){const t=pD();if(!ov.v(t))throw new le(ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Ix(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ov(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class hf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>FI(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=U6.bind(null,this.syncEngine),await ab(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new x6})()}createDatastore(e){const t=Uf(e.databaseInfo.databaseId),s=(function(r){return new s6(r)})(e.databaseInfo);return(function(r,o,c,h){return new o6(r,o,c,h)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,i,r,o,c){return new c6(s,i,r,o,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>FI(this.syncEngine,t,0)),(function(){return OI.v()?new OI:new Jj})())}createSyncEngine(e,t){return(function(i,r,o,c,h,d,m){const _=new R6(i,r,o,c,h,d);return m&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const r=xe(i);ue(Ol,"RemoteStore shutting down."),r.Ea.add(5),await Fu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}hf.provider={build:()=>new hf};function zI(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):en("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new Pn,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((s=>{s&&s.$a()?this.metadata.resolve(s.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(s==null?void 0:s.Qa)}`))}),(s=>this.metadata.reject(s)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),s=Number(t);isNaN(s)&&this.Qu(`length string (${t}) is not valid number`);const i=await this.$u(s);return new w6(JSON.parse(i),e.length+s)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new le(ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,r){const o=xe(i),c={documents:r.map((_=>lf(o.serializer,_)))},h=await o.Ho("BatchGetDocuments",o.serializer.databaseId,Qe.emptyPath(),c,r.length),d=new Map;h.forEach((_=>{const b=uj(o.serializer,_);d.set(b.key.toString(),b)}));const m=[];return r.forEach((_=>{const b=d.get(_.toString());Se(!!b,55234,{key:_}),m.push(b)})),m})(this.datastore,e);return t.forEach((s=>this.recordVersion(s))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Uu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,s)=>{const i=_e.fromPath(s);this.mutations.push(new gx(i,this.precondition(i)))})),await(async function(s,i){const r=xe(s),o={writes:i.map((c=>cf(r.serializer,c)))};await r.Go("Commit",r.serializer.databaseId,Qe.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ee(50498,{Gu:e.constructor.name});t=Ce.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new le(ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ce.min())?Mt.exists(!1):Mt.updateTime(t):Mt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ce.min()))throw new le(ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Mt.updateTime(t)}return Mt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,t,s,i,r){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=i,this.deferred=r,this.zu=s.maxAttempts,this.M_=new Dx(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new Z6(this.datastore),t=this.Hu(e);t&&t.then((s=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(s)})).catch((i=>{this.Yu(i)}))))})).catch((s=>{this.Yu(s)}))}))}Hu(e){try{const t=this.updateFunction(e);return!Df(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!IN(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="FirestoreClient";class e3{constructor(e,t,s,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=i,this.user=Sn.UNAUTHENTICATED,this.clientId=tx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(s,(async o=>{ue(so,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(ue(so,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Hu(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function cv(n,e){n.asyncQueue.verifyOperationInProgress(),ue(so,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async i=>{s.isEqual(i)||(await aD(e.localStore,i),s=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function HI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Gx(n);ue(so,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>PI(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,i)=>PI(e.remoteStore,i))),n._onlineComponents=e}async function Gx(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(so,"Using user provided OfflineComponentProvider");try{await cv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ee.FAILED_PRECONDITION||i.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Wi("Error using user provided cache. Falling back to memory cache: "+t),await cv(n,new uf)}}else ue(so,"Using default OfflineComponentProvider"),await cv(n,new K6(void 0));return n._offlineComponents}async function y_(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(so,"Using user provided OnlineComponentProvider"),await HI(n,n._uninitializedComponentsProvider._online)):(ue(so,"Using default OnlineComponentProvider"),await HI(n,new hf))),n._onlineComponents}function kD(n){return Gx(n).then((e=>e.persistence))}function Wx(n){return Gx(n).then((e=>e.localStore))}function OD(n){return y_(n).then((e=>e.remoteStore))}function $x(n){return y_(n).then((e=>e.syncEngine))}function t3(n){return y_(n).then((e=>e.datastore))}async function Tu(n){const e=await y_(n),t=e.eventManager;return t.onListen=C6.bind(null,e.syncEngine),t.onUnlisten=D6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=N6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=k6.bind(null,e.syncEngine),t}function n3(n){return n.asyncQueue.enqueue((async()=>{const e=await kD(n),t=await OD(n);return e.setNetworkEnabled(!0),(function(i){const r=xe(i);return r.Ea.delete(0),Ff(r)})(t)}))}function s3(n){return n.asyncQueue.enqueue((async()=>{const e=await kD(n),t=await OD(n);return e.setNetworkEnabled(!1),(async function(i){const r=xe(i);r.Ea.add(0),await Fu(r),r.Ra.set("Offline")})(t)}))}function i3(n,e){const t=new Pn;return n.asyncQueue.enqueueAndForget((async()=>(async function(i,r,o){try{const c=await(function(d,m){const _=xe(d);return _.persistence.runTransaction("read document","readonly",(b=>_.localDocuments.getDocument(b,m)))})(i,r);c.isFoundDocument()?o.resolve(c):c.isNoDocument()?o.resolve(null):o.reject(new le(ee.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const h=Hu(c,`Failed to get document '${r} from cache`);o.reject(h)}})(await Wx(n),e,t))),t.promise}function MD(n,e,t={}){const s=new Pn;return n.asyncQueue.enqueueAndForget((async()=>(function(r,o,c,h,d){const m=new __({next:b=>{m.Nu(),o.enqueueAndForget((()=>Lx(r,_)));const E=b.docs.has(c);!E&&b.fromCache?d.reject(new le(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&b.fromCache&&h&&h.source==="server"?d.reject(new le(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(b)},error:b=>d.reject(b)}),_=new Ux(Lu(c.path),m,{includeMetadataChanges:!0,qa:!0});return Vx(r,_)})(await Tu(n),n.asyncQueue,e,t,s))),s.promise}function r3(n,e){const t=new Pn;return n.asyncQueue.enqueueAndForget((async()=>(async function(i,r,o){try{const c=await Rp(i,r,!0),h=new AD(r,c.Qs),d=h.ru(c.documents),m=h.applyChanges(d,!1);o.resolve(m.snapshot)}catch(c){const h=Hu(c,`Failed to execute query '${r} against cache`);o.reject(h)}})(await Wx(n),e,t))),t.promise}function PD(n,e,t={}){const s=new Pn;return n.asyncQueue.enqueueAndForget((async()=>(function(r,o,c,h,d){const m=new __({next:b=>{m.Nu(),o.enqueueAndForget((()=>Lx(r,_))),b.fromCache&&h.source==="server"?d.reject(new le(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(b)},error:b=>d.reject(b)}),_=new Ux(c,m,{includeMetadataChanges:!0,qa:!0});return Vx(r,_)})(await Tu(n),n.asyncQueue,e,t,s))),s.promise}function a3(n,e){const t=new __(e);return n.asyncQueue.enqueueAndForget((async()=>(function(i,r){xe(i).Ca.add(r),r.next()})(await Tu(n),t))),()=>{t.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(i,r){xe(i).Ca.delete(r)})(await Tu(n),t)))}}function o3(n,e,t,s){const i=(function(o,c){let h;return h=typeof o=="string"?CN().encode(o):o,(function(m,_){return new X6(m,_)})((function(m,_){if(m instanceof Uint8Array)return zI(m,_);if(m instanceof ArrayBuffer)return zI(new Uint8Array(m),_);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(h),c)})(t,Uf(e));n.asyncQueue.enqueueAndForget((async()=>{Y6(await $x(n),i,s)}))}function l3(n,e){return n.asyncQueue.enqueue((async()=>(function(s,i){const r=xe(s);return r.persistence.runTransaction("Get named query","readonly",(o=>r.Ii.getNamedQuery(o,i)))})(await Wx(n),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="firestore.googleapis.com",GI=!0;class WI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LD,this.ssl=GI}else this.host=e.host,this.ssl=e.ssl??GI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Cj)throw new le(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VD(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new le(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new le(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new le(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,i){return s.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bf{constructor(e,t,s,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new WI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new WI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new GL;switch(s.type){case"firstParty":return new KL(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new le(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=qI.get(t);s&&(ue("ComponentProvider","Removing Datastore"),qI.delete(t),s.terminate())})(this),Promise.resolve()}}function c3(n,e,t,s={}){var d;n=ot(n,Bf);const i=Mu(e),r=n._getSettings(),o={...r,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;i&&(e2(`https://${c}`),t2("Firestore",!0)),r.host!==LD&&r.host!==c&&Wi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...r,host:c,ssl:i,emulatorOptions:s};if(!$a(h,o)&&(n._setSettings(h),s.mockUserToken)){let m,_;if(typeof s.mockUserToken=="string")m=s.mockUserToken,_=Sn.MOCK_USER;else{m=lV(s.mockUserToken,(d=n._app)==null?void 0:d.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new le(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Sn(b)}n._authCredentials=new WL(new R2(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rs=class jD{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new jD(this.firestore,e,this._query)}},wt=class bd{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bd(this.firestore,e,this._key)}toJSON(){return{type:bd._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Nf(t,bd._jsonSchema))return new bd(e,s||null,new _e(Qe.fromString(t.referencePath)))}};wt._jsonSchemaVersion="firestore/documentReference/1.0",wt._jsonSchema={type:cn("string",wt._jsonSchemaVersion),referencePath:cn("string")};let Ha=class UD extends rs{constructor(e,t,s){super(e,t,Lu(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new _e(e))}withConverter(e){return new UD(this.firestore,e,this._path)}};function FD(n,e,...t){if(n=ke(n),nx("collection","path",e),n instanceof Bf){const s=Qe.fromString(e,...t);return MA(s),new Ha(n,null,s)}{if(!(n instanceof wt||n instanceof Ha))throw new le(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Qe.fromString(e,...t));return MA(s),new Ha(n.firestore,null,s)}}function u3(n,e){if(n=ot(n,Bf),nx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new le(ee.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new rs(n,null,(function(s){return new Mr(Qe.emptyPath(),s)})(e))}function kp(n,e,...t){if(n=ke(n),arguments.length===1&&(e=tx.newId()),nx("doc","path",e),n instanceof Bf){const s=Qe.fromString(e,...t);return OA(s),new wt(n,null,new _e(s))}{if(!(n instanceof wt||n instanceof Ha))throw new le(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Qe.fromString(e,...t));return OA(s),new wt(n.firestore,n instanceof Ha?n.converter:null,new _e(s))}}function BD(n,e){return n=ke(n),e=ke(e),(n instanceof wt||n instanceof Ha)&&(e instanceof wt||e instanceof Ha)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function zD(n,e){return n=ke(n),e=ke(e),n instanceof rs&&e instanceof rs&&n.firestore===e.firestore&&Mf(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="AsyncQueue";class YI{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Dx(this,"async_queue_retry"),this._c=()=>{const s=ep();s&&ue($I,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=ep();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ep();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Pn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ho(e))throw e;ue($I,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,en("INTERNAL UNHANDLED ERROR: ",KI(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Px.createAndSchedule(this,e,t,s,(r=>this.hc(r)));return this.tc.push(i),i}uc(){this.nc&&Ee(47125,{Pc:KI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function KI(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const i=t;for(const r of s)if(r in i&&typeof i[r]=="function")return!0;return!1})(n,["next","error","complete"])}class h3{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=-1;let sn=class extends Bf{constructor(e,t,s,i){super(e,t,s,i),this.type="firestore",this._queue=new YI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YI(e),this._firestoreClient=void 0,await e}}};function Kn(n){if(n._terminated)throw new le(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||HD(n),n._firestoreClient}function HD(n){var s,i,r;const e=n._freezeSettings(),t=(function(c,h,d,m){return new O4(c,h,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,VD(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((r=e.localCache)!=null&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new e3(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(c){const h=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(h),_online:h}})(n._componentsProvider))}function f3(n,e){Wi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return qD(n,hf.provider,{build:s=>new DD(s,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function m3(n){Wi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();qD(n,hf.provider,{build:t=>new Q6(t,e.cacheSizeBytes)})}function qD(n,e,t){if((n=ot(n,sn))._firestoreClient||n._terminated)throw new le(ee.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new le(ee.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},HD(n)}function g3(n){if(n._initialized&&!n._terminated)throw new le(ee.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Pn;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(s){if(!Fi.v())return Promise.resolve();const i=s+sD;await Fi.delete(i)})(Ix(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function p3(n){return(function(t){const s=new Pn;return t.asyncQueue.enqueueAndForget((async()=>L6(await $x(t),s))),s.promise})(Kn(n=ot(n,sn)))}function _3(n){return n3(Kn(n=ot(n,sn)))}function y3(n){return s3(Kn(n=ot(n,sn)))}function v3(n,e){const t=Kn(n=ot(n,sn)),s=new h3;return o3(t,n._databaseId,e,s),s}function b3(n,e){return l3(Kn(n=ot(n,sn)),e).then((t=>t?new rs(n,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gn(qt.fromBase64String(e))}catch(t){throw new le(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gn(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Gn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nf(e,Gn._jsonSchema))return Gn.fromBase64String(e.bytes)}}Gn._jsonSchemaVersion="firestore/bytes/1.0",Gn._jsonSchema={type:cn("string",Gn._jsonSchemaVersion),bytes:cn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let io=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ci._jsonSchemaVersion}}static fromJSON(e){if(Nf(e,ci._jsonSchema))return new ci(e.latitude,e.longitude)}}ci._jsonSchemaVersion="firestore/geoPoint/1.0",ci._jsonSchema={type:cn("string",ci._jsonSchemaVersion),latitude:cn("number"),longitude:cn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,i){if(s.length!==i.length)return!1;for(let r=0;r<s.length;++r)if(s[r]!==i[r])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nf(e,zi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new zi(e.vectorValues);throw new le(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zi._jsonSchemaVersion="firestore/vectorValue/1.0",zi._jsonSchema={type:cn("string",zi._jsonSchemaVersion),vectorValues:cn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=/^__.*__$/;class E3{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Vr(e,this.data,this.fieldMask,t,this.fieldTransforms):new ju(e,this.data,t,this.fieldTransforms)}}class GD{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Vr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function WD(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:n})}}class v_{constructor(e,t,s,i,r,o){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new v_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Op(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(WD(this.Ac)&&x3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class T3{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Uf(e)}Cc(e,t,s,i=!1){return new v_({Ac:e,methodName:t,Dc:s,path:Ot.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hl(n){const e=n._freezeSettings(),t=Uf(n._databaseId);return new T3(n._databaseId,!!e.ignoreUndefinedProperties,t)}function b_(n,e,t,s,i,r={}){const o=n.Cc(r.merge||r.mergeFields?2:0,e,t,i);eE("Data must be an object, but it was:",o,s);const c=KD(s,o);let h,d;if(r.merge)h=new ms(o.fieldMask),d=o.fieldTransforms;else if(r.mergeFields){const m=[];for(const _ of r.mergeFields){const b=ub(e,_,t);if(!o.contains(b))throw new le(ee.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);XD(m,b)||m.push(b)}h=new ms(m),d=o.fieldTransforms.filter((_=>h.covers(_.field)))}else h=null,d=o.fieldTransforms;return new E3(new Mn(c),h,d)}class zf extends zl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zf}}function $D(n,e,t){return new v_({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Yx extends zl{_toFieldTransform(e){return new Vf(e.path,new gu)}isEqual(e){return e instanceof Yx}}class Kx extends zl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=$D(this,e,!0),s=this.vc.map((r=>ql(r,t))),i=new Rl(s);return new Vf(e.path,i)}isEqual(e){return e instanceof Kx&&$a(this.vc,e.vc)}}class Qx extends zl{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=$D(this,e,!0),s=this.vc.map((r=>ql(r,t))),i=new Cl(s);return new Vf(e.path,i)}isEqual(e){return e instanceof Qx&&$a(this.vc,e.vc)}}class Xx extends zl{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new pu(e.serializer,bN(e.serializer,this.Fc));return new Vf(e.path,t)}isEqual(e){return e instanceof Xx&&this.Fc===e.Fc}}function Zx(n,e,t,s){const i=n.Cc(1,e,t);eE("Data must be an object, but it was:",i,s);const r=[],o=Mn.empty();fo(s,((h,d)=>{const m=tE(e,h,t);d=ke(d);const _=i.yc(m);if(d instanceof zf)r.push(m);else{const b=ql(d,_);b!=null&&(r.push(m),o.set(m,b))}}));const c=new ms(r);return new GD(o,c,i.fieldTransforms)}function Jx(n,e,t,s,i,r){const o=n.Cc(1,e,t),c=[ub(e,s,t)],h=[i];if(r.length%2!=0)throw new le(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<r.length;b+=2)c.push(ub(e,r[b])),h.push(r[b+1]);const d=[],m=Mn.empty();for(let b=c.length-1;b>=0;--b)if(!XD(d,c[b])){const E=c[b];let S=h[b];S=ke(S);const T=o.yc(E);if(S instanceof zf)d.push(E);else{const R=ql(S,T);R!=null&&(d.push(E),m.set(E,R))}}const _=new ms(d);return new GD(m,_,o.fieldTransforms)}function YD(n,e,t,s=!1){return ql(t,n.Cc(s?4:3,e))}function ql(n,e){if(QD(n=ke(n)))return eE("Unsupported field value:",e,n),KD(n,e);if(n instanceof zl)return(function(s,i){if(!WD(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,i){const r=[];let o=0;for(const c of s){let h=ql(c,i.wc(o));h==null&&(h={nullValue:"NULL_VALUE"}),r.push(h),o++}return{arrayValue:{values:r}}})(n,e)}return(function(s,i){if((s=ke(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return bN(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=ct.fromDate(s);return{timestampValue:_u(i.serializer,r)}}if(s instanceof ct){const r=new ct(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:_u(i.serializer,r)}}if(s instanceof ci)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Gn)return{bytesValue:kN(i.serializer,s._byteString)};if(s instanceof wt){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:bx(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof zi)return(function(o,c){return{mapValue:{fields:{[cx]:{stringValue:ux},[du]:{arrayValue:{values:o.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return mx(c.serializer,d)}))}}}}}})(s,i);throw i.Sc(`Unsupported field value: ${n_(s)}`)})(n,e)}function KD(n,e){const t={};return K2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fo(n,((s,i)=>{const r=ql(i,e.mc(s));r!=null&&(t[s]=r)})),{mapValue:{fields:t}}}function QD(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof ci||n instanceof Gn||n instanceof wt||n instanceof zl||n instanceof zi)}function eE(n,e,t){if(!QD(t)||!D2(t)){const s=n_(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function ub(n,e,t){if((e=ke(e))instanceof io)return e._internalPath;if(typeof e=="string")return tE(n,e);throw Op("Field path arguments must be of type string or ",n,!1,void 0,t)}const w3=new RegExp("[~\\*/\\[\\]]");function tE(n,e,t){if(e.search(w3)>=0)throw Op(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new io(...e.split("."))._internalPath}catch{throw Op(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Op(n,e,t,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(r||o)&&(h+=" (found",r&&(h+=` in field ${s}`),o&&(h+=` in document ${i}`),h+=")"),new le(ee.INVALID_ARGUMENT,c+n+h)}function XD(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t,s,i,r){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new S3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(x_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class S3 extends df{data(){return super.data()}}function x_(n,e){return typeof e=="string"?tE(n,e):e instanceof io?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new le(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nE{}class Hf extends nE{}function Ca(n,e,...t){let s=[];e instanceof nE&&s.push(e),s=s.concat(t),(function(r){const o=r.filter((h=>h instanceof sE)).length,c=r.filter((h=>h instanceof E_)).length;if(o>1||o>0&&c>0)throw new le(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const i of s)n=i._apply(n);return n}class E_ extends Hf{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new E_(e,t,s)}_apply(e){const t=this._parse(e);return ek(e._query,t),new rs(e.firestore,e.converter,Qv(e._query,t))}_parse(e){const t=Hl(e.firestore);return(function(r,o,c,h,d,m,_){let b;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new le(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){XI(_,m);const S=[];for(const T of _)S.push(QI(h,r,T));b={arrayValue:{values:S}}}else b=QI(h,r,_)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||XI(_,m),b=YD(c,o,_,m==="in"||m==="not-in");return Ze.create(d,m,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function A3(n,e,t){const s=e,i=x_("where",n);return E_._create(i,s,t)}class sE extends nE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sE(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:mt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,r){let o=i;const c=r.getFlattenedFilters();for(const h of c)ek(o,h),o=Qv(o,h)})(e._query,t),new rs(e.firestore,e.converter,Qv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class iE extends Hf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new iE(e,t)}_apply(e){const t=(function(i,r,o){if(i.startAt!==null)throw new le(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new le(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new of(r,o)})(e._query,this._field,this._direction);return new rs(e.firestore,e.converter,(function(i,r){const o=i.explicitOrderBy.concat([r]);return new Mr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function I3(n,e="asc"){const t=e,s=x_("orderBy",n);return iE._create(s,t)}class T_ extends Hf{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new T_(e,t,s)}_apply(e){return new rs(e.firestore,e.converter,Tp(e._query,this._limit,this._limitType))}}function R3(n){return k2("limit",n),T_._create("limit",n,"F")}function C3(n){return k2("limitToLast",n),T_._create("limitToLast",n,"L")}class w_ extends Hf{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new w_(e,t,s)}_apply(e){const t=JD(e,this.type,this._docOrFields,this._inclusive);return new rs(e.firestore,e.converter,(function(i,r){return new Mr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)})(e._query,t))}}function N3(...n){return w_._create("startAt",n,!0)}function D3(...n){return w_._create("startAfter",n,!1)}class S_ extends Hf{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new S_(e,t,s)}_apply(e){const t=JD(e,this.type,this._docOrFields,this._inclusive);return new rs(e.firestore,e.converter,(function(i,r){return new Mr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)})(e._query,t))}}function k3(...n){return S_._create("endBefore",n,!1)}function O3(...n){return S_._create("endAt",n,!0)}function JD(n,e,t,s){if(t[0]=ke(t[0]),t[0]instanceof df)return(function(r,o,c,h,d){if(!h)throw new le(ee.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const m=[];for(const _ of Xc(r))if(_.field.isKeyField())m.push(Al(o,h.key));else{const b=h.data.field(_.field);if(o_(b))throw new le(ee.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){const E=_.field.canonicalString();throw new le(ee.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}m.push(b)}return new to(m,d)})(n._query,n.firestore._databaseId,e,t[0]._document,s);{const i=Hl(n.firestore);return(function(o,c,h,d,m,_){const b=o.explicitOrderBy;if(m.length>b.length)throw new le(ee.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let S=0;S<m.length;S++){const T=m[S];if(b[S].field.isKeyField()){if(typeof T!="string")throw new le(ee.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof T}`);if(!dx(o)&&T.indexOf("/")!==-1)throw new le(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${T}' contains a slash.`);const R=o.path.child(Qe.fromString(T));if(!_e.isDocumentKey(R))throw new le(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);const k=new _e(R);E.push(Al(c,k))}else{const R=YD(h,d,T);E.push(R)}}return new to(E,_)})(n._query,n.firestore._databaseId,i,e,t,s)}}function QI(n,e,t){if(typeof(t=ke(t))=="string"){if(t==="")throw new le(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dx(e)&&t.indexOf("/")!==-1)throw new le(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Qe.fromString(t));if(!_e.isDocumentKey(s))throw new le(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Al(n,new _e(s))}if(t instanceof wt)return Al(n,t._key);throw new le(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${n_(t)}.`)}function XI(n,e){if(!Array.isArray(n)||n.length===0)throw new le(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ek(n,e){const t=(function(i,r){for(const o of i)for(const c of o.getFlattenedFilters())if(r.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new le(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class rE{convertValue(e,t="none"){switch(Ja(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return fo(e,((i,r)=>{s[i]=this.convertValue(r,t)})),s}convertVectorValue(e){var s,i,r;const t=(r=(i=(s=e.fields)==null?void 0:s[du].arrayValue)==null?void 0:i.values)==null?void 0:r.map((o=>Dt(o.doubleValue)));return new zi(t)}convertGeoPoint(e){return new ci(Dt(e.latitude),Dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=l_(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(sf(e));default:return null}}convertTimestamp(e){const t=Nr(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Qe.fromString(e);Se(HN(s),9688,{name:e});const i=new Za(s.get(1),s.get(3)),r=new _e(s.popFirst(5));return i.isEqual(t)||en(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class M3 extends rE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,t)}}class pl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Ws=class tk extends df{constructor(e,t,s,i,r,o){super(e,t,s,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(x_("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=tk._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Ws._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ws._jsonSchema={type:cn("string",Ws._jsonSchemaVersion),bundleSource:cn("string","DocumentSnapshot"),bundleName:cn("string"),bundle:cn("string")};let jd=class extends Ws{data(e={}){return super.data(e)}},ui=class nk{constructor(e,t,s,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pl(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new jd(this._firestore,this._userDataWriter,s.key,s,new pl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const h=new jd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new pl(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>r||c.type!==3)).map((c=>{const h=new jd(i._firestore,i._userDataWriter,c.doc.key,c.doc,new pl(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,m=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:P3(c.type),doc:h,oldIndex:d,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=nk._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],i=[];return this.docs.forEach((r=>{r._document!==null&&(t.push(r._document),s.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),i.push(r.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function P3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}function sk(n,e){return n instanceof Ws&&e instanceof Ws?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ui&&e instanceof ui&&n._firestore===e._firestore&&zD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(n){n=ot(n,wt);const e=ot(n.firestore,sn);return MD(Kn(e),n._key).then((t=>aE(e,n,t)))}ui._jsonSchemaVersion="firestore/querySnapshot/1.0",ui._jsonSchema={type:cn("string",ui._jsonSchemaVersion),bundleSource:cn("string","QuerySnapshot"),bundleName:cn("string"),bundle:cn("string")};class Gl extends rE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,t)}}function L3(n){n=ot(n,wt);const e=ot(n.firestore,sn),t=Kn(e),s=new Gl(e);return i3(t,n._key).then((i=>new Ws(e,s,n._key,i,new pl(i!==null&&i.hasLocalMutations,!0),n.converter)))}function j3(n){n=ot(n,wt);const e=ot(n.firestore,sn);return MD(Kn(e),n._key,{source:"server"}).then((t=>aE(e,n,t)))}function U3(n){n=ot(n,rs);const e=ot(n.firestore,sn),t=Kn(e),s=new Gl(e);return ZD(n._query),PD(t,n._query).then((i=>new ui(e,s,n,i)))}function F3(n){n=ot(n,rs);const e=ot(n.firestore,sn),t=Kn(e),s=new Gl(e);return r3(t,n._query).then((i=>new ui(e,s,n,i)))}function B3(n){n=ot(n,rs);const e=ot(n.firestore,sn),t=Kn(e),s=new Gl(e);return PD(t,n._query,{source:"server"}).then((i=>new ui(e,s,n,i)))}function ZI(n,e,t){n=ot(n,wt);const s=ot(n.firestore,sn),i=A_(n.converter,e,t);return qf(s,[b_(Hl(s),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Mt.none())])}function JI(n,e,t,...s){n=ot(n,wt);const i=ot(n.firestore,sn),r=Hl(i);let o;return o=typeof(e=ke(e))=="string"||e instanceof io?Jx(r,"updateDoc",n._key,e,t,s):Zx(r,"updateDoc",n._key,e),qf(i,[o.toMutation(n._key,Mt.exists(!0))])}function z3(n){return qf(ot(n.firestore,sn),[new Uu(n._key,Mt.none())])}function H3(n,e){const t=ot(n.firestore,sn),s=kp(n),i=A_(n.converter,e);return qf(t,[b_(Hl(n.firestore),"addDoc",s._key,i,n.converter!==null,{}).toMutation(s._key,Mt.exists(!1))]).then((()=>s))}function ik(n,...e){var h,d,m;n=ke(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||cb(e[s])||(t=e[s++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(cb(e[s])){const _=e[s];e[s]=(h=_.next)==null?void 0:h.bind(_),e[s+1]=(d=_.error)==null?void 0:d.bind(_),e[s+2]=(m=_.complete)==null?void 0:m.bind(_)}let r,o,c;if(n instanceof wt)o=ot(n.firestore,sn),c=Lu(n._key.path),r={next:_=>{e[s]&&e[s](aE(o,n,_))},error:e[s+1],complete:e[s+2]};else{const _=ot(n,rs);o=ot(_.firestore,sn),c=_._query;const b=new Gl(o);r={next:E=>{e[s]&&e[s](new ui(o,b,_,E))},error:e[s+1],complete:e[s+2]},ZD(n._query)}return(function(b,E,S,T){const R=new __(T),k=new Ux(E,R,S);return b.asyncQueue.enqueueAndForget((async()=>Vx(await Tu(b),k))),()=>{R.Nu(),b.asyncQueue.enqueueAndForget((async()=>Lx(await Tu(b),k)))}})(Kn(o),c,i,r)}function q3(n,e){return a3(Kn(n=ot(n,sn)),cb(e)?e:{next:e})}function qf(n,e){return(function(s,i){const r=new Pn;return s.asyncQueue.enqueueAndForget((async()=>O6(await $x(s),i,r))),r.promise})(Kn(n),e)}function aE(n,e,t){const s=t.docs.get(e._key),i=new Gl(n);return new Ws(n,i,e._key,s,new pl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W3=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hl(e)}set(e,t,s){this._verifyNotCommitted();const i=Ma(e,this._firestore),r=A_(i.converter,t,s),o=b_(this._dataReader,"WriteBatch.set",i._key,r,i.converter!==null,s);return this._mutations.push(o.toMutation(i._key,Mt.none())),this}update(e,t,s,...i){this._verifyNotCommitted();const r=Ma(e,this._firestore);let o;return o=typeof(t=ke(t))=="string"||t instanceof io?Jx(this._dataReader,"WriteBatch.update",r._key,t,s,i):Zx(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(o.toMutation(r._key,Mt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ma(e,this._firestore);return this._mutations=this._mutations.concat(new Uu(t._key,Mt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ma(n,e){if((n=ke(n)).firestore!==e)throw new le(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hl(e)}get(e){const t=Ma(e,this._firestore),s=new M3(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return Ee(24041);const r=i[0];if(r.isFoundDocument())return new df(this._firestore,s,r.key,r,t.converter);if(r.isNoDocument())return new df(this._firestore,s,t._key,null,t.converter);throw Ee(18433,{doc:r})}))}set(e,t,s){const i=Ma(e,this._firestore),r=A_(i.converter,t,s),o=b_(this._dataReader,"Transaction.set",i._key,r,i.converter!==null,s);return this._transaction.set(i._key,o),this}update(e,t,s,...i){const r=Ma(e,this._firestore);let o;return o=typeof(t=ke(t))=="string"||t instanceof io?Jx(this._dataReader,"Transaction.update",r._key,t,s,i):Zx(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,o),this}delete(e){const t=Ma(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y3=class extends $3{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ma(e,this._firestore),s=new Gl(this._firestore);return super.get(e).then((i=>new Ws(this._firestore,s,t._key,i._document,new pl(!1,!1),t.converter)))}};function K3(n,e,t){n=ot(n,sn);const s={...G3,...t};return(function(r){if(r.maxAttempts<1)throw new le(ee.INVALID_ARGUMENT,"Max attempts must be at least 1")})(s),(function(r,o,c){const h=new Pn;return r.asyncQueue.enqueueAndForget((async()=>{const d=await t3(r);new J6(r.asyncQueue,d,c,o,h).ju()})),h.promise})(Kn(n),(i=>e(new Y3(n,i))),s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(){return new zf("deleteField")}function X3(){return new Yx("serverTimestamp")}function Z3(...n){return new Kx("arrayUnion",n)}function J3(...n){return new Qx("arrayRemove",n)}function e5(n){return new Xx("increment",n)}(function(e,t=!0){(function(i){Vu=i})(co),Qa(new Gi("firestore",((s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),c=new sn(new $L(s.getProvider("auth-internal")),new QL(o,s.getProvider("app-check-internal")),(function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new le(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(d.options.projectId,m)})(o,i),o);return r={useFetchStreams:t,...r},c._setSettings(r),c}),"PUBLIC").setMultipleInstances(!0)),li(CA,NA,e),li(CA,NA,"esm2020")})();const t5="@firebase/firestore-compat",n5="0.4.2";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(){if(typeof Uint8Array>"u")throw new le("unimplemented","Uint8Arrays are not available in this environment.")}function t1(){if(!D4())throw new le("unimplemented","Blobs are unavailable in Firestore in this environment.")}let rk=class hb{constructor(e){this._delegate=e}static fromBase64String(e){return t1(),new hb(Gn.fromBase64String(e))}static fromUint8Array(e){return e1(),new hb(Gn.fromUint8Array(e))}toBase64(){return t1(),this._delegate.toBase64()}toUint8Array(){return e1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(n){return s5(n,["next","error","complete"])}function s5(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{enableIndexedDbPersistence(e,t){return f3(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return m3(e._delegate)}clearIndexedDbPersistence(e){return g3(e._delegate)}}class ak{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Za||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Wi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,s={}){c3(this._delegate,e,t,s)}enableNetwork(){return _3(this._delegate)}disableNetwork(){return y3(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,N2("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return p3(this._delegate)}onSnapshotsInSync(e){return q3(this._delegate,e)}get app(){if(!this._appCompat)throw new le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new wu(this,FD(this._delegate,e))}catch(t){throw ns(t,"collection()","Firestore.collection()")}}doc(e){try{return new Gs(this,kp(this._delegate,e))}catch(t){throw ns(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ts(this,u3(this._delegate,e))}catch(t){throw ns(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return K3(this._delegate,t=>e(new ok(this,t)))}batch(){return Kn(this._delegate),new lk(new W3(this._delegate,e=>qf(this._delegate,e)))}loadBundle(e){return v3(this._delegate,e)}namedQuery(e){return b3(this._delegate,e).then(t=>t?new ts(this,t):null)}}class I_ extends rE{constructor(e){super(),this.firestore=e}convertBytes(e){return new rk(new Gn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Gs.forKey(t,this.firestore,null)}}function r5(n){HL(n)}class ok{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new I_(e)}get(e){const t=_l(e);return this._delegate.get(t).then(s=>new ff(this._firestore,new Ws(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const i=_l(e);return s?(oE("Transaction.set",s),this._delegate.set(i,t,s)):this._delegate.set(i,t),this}update(e,t,s,...i){const r=_l(e);return arguments.length===2?this._delegate.update(r,t):this._delegate.update(r,t,s,...i),this}delete(e){const t=_l(e);return this._delegate.delete(t),this}}class lk{constructor(e){this._delegate=e}set(e,t,s){const i=_l(e);return s?(oE("WriteBatch.set",s),this._delegate.set(i,t,s)):this._delegate.set(i,t),this}update(e,t,s,...i){const r=_l(e);return arguments.length===2?this._delegate.update(r,t):this._delegate.update(r,t,s,...i),this}delete(e){const t=_l(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ml{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new jd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mf(this._firestore,s),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Ml.INSTANCES;let i=s.get(e);i||(i=new WeakMap,s.set(e,i));let r=i.get(t);return r||(r=new Ml(e,new I_(e),t),i.set(t,r)),r}}Ml.INSTANCES=new WeakMap;class Gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new I_(e)}static forPath(e,t,s){if(e.length%2!==0)throw new le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Gs(t,new wt(t._delegate,s,new _e(e)))}static forKey(e,t,s){return new Gs(t,new wt(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new wu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new wu(this.firestore,FD(this._delegate,e))}catch(t){throw ns(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ke(e),e instanceof wt?BD(this._delegate,e):!1}set(e,t){t=oE("DocumentReference.set",t);try{return t?ZI(this._delegate,e,t):ZI(this._delegate,e)}catch(s){throw ns(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return arguments.length===1?JI(this._delegate,e):JI(this._delegate,e,t,...s)}catch(i){throw ns(i,"updateDoc()","DocumentReference.update()")}}delete(){return z3(this._delegate)}onSnapshot(...e){const t=ck(e),s=uk(e,i=>new ff(this.firestore,new Ws(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ik(this._delegate,t,s)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=L3(this._delegate):(e==null?void 0:e.source)==="server"?t=j3(this._delegate):t=V3(this._delegate),t.then(s=>new ff(this.firestore,new Ws(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Gs(this.firestore,e?this._delegate.withConverter(Ml.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ns(n,e,t){return n.message=n.message.replace(e,t),n}function ck(n){for(const e of n)if(typeof e=="object"&&!db(e))return e;return{}}function uk(n,e){var s,i;let t;return db(n[0])?t=n[0]:db(n[1])?t=n[1]:typeof n[0]=="function"?t={next:n[0],error:n[1],complete:n[2]}:t={next:n[1],error:n[2],complete:n[3]},{next:r=>{t.next&&t.next(e(r))},error:(s=t.error)==null?void 0:s.bind(t),complete:(i=t.complete)==null?void 0:i.bind(t)}}class ff{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Gs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return sk(this._delegate,e._delegate)}}class mf extends ff{data(e){const t=this._delegate.data(e);return this._delegate._converter||qL(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class ts{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new I_(e)}where(e,t,s){try{return new ts(this.firestore,Ca(this._delegate,A3(e,t,s)))}catch(i){throw ns(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ts(this.firestore,Ca(this._delegate,I3(e,t)))}catch(s){throw ns(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ts(this.firestore,Ca(this._delegate,R3(e)))}catch(t){throw ns(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ts(this.firestore,Ca(this._delegate,C3(e)))}catch(t){throw ns(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ts(this.firestore,Ca(this._delegate,N3(...e)))}catch(t){throw ns(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ts(this.firestore,Ca(this._delegate,D3(...e)))}catch(t){throw ns(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ts(this.firestore,Ca(this._delegate,k3(...e)))}catch(t){throw ns(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ts(this.firestore,Ca(this._delegate,O3(...e)))}catch(t){throw ns(t,"endAt()","Query.endAt()")}}isEqual(e){return zD(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=F3(this._delegate):(e==null?void 0:e.source)==="server"?t=B3(this._delegate):t=U3(this._delegate),t.then(s=>new fb(this.firestore,new ui(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=ck(e),s=uk(e,i=>new fb(this.firestore,new ui(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ik(this._delegate,t,s)}withConverter(e){return new ts(this.firestore,e?this._delegate.withConverter(Ml.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class a5{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new mf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class fb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ts(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new mf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new a5(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new mf(this._firestore,s))})}isEqual(e){return sk(this._delegate,e._delegate)}}class wu extends ts{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Gs(this.firestore,e):null}doc(e){try{return e===void 0?new Gs(this.firestore,kp(this._delegate)):new Gs(this.firestore,kp(this._delegate,e))}catch(t){throw ns(t,"doc()","CollectionReference.doc()")}}add(e){return H3(this._delegate,e).then(t=>new Gs(this.firestore,t))}isEqual(e){return BD(this._delegate,e._delegate)}withConverter(e){return new wu(this.firestore,e?this._delegate.withConverter(Ml.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function _l(n){return ot(n,wt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(...e){this._delegate=new io(...e)}static documentId(){return new lE(Ot.keyField().canonicalString())}isEqual(e){return e=ke(e),e instanceof io?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{static serverTimestamp(){const e=X3();return e._methodName="FieldValue.serverTimestamp",new ml(e)}static delete(){const e=Q3();return e._methodName="FieldValue.delete",new ml(e)}static arrayUnion(...e){const t=Z3(...e);return t._methodName="FieldValue.arrayUnion",new ml(t)}static arrayRemove(...e){const t=J3(...e);return t._methodName="FieldValue.arrayRemove",new ml(t)}static increment(e){const t=e5(e);return t._methodName="FieldValue.increment",new ml(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5={Firestore:ak,GeoPoint:ci,Timestamp:ct,Blob:rk,Transaction:ok,WriteBatch:lk,DocumentReference:Gs,DocumentSnapshot:ff,Query:ts,QueryDocumentSnapshot:mf,QuerySnapshot:fb,CollectionReference:wu,FieldPath:lE,FieldValue:ml,setLogLevel:r5,CACHE_SIZE_UNLIMITED:d3};function l5(n,e){n.INTERNAL.registerComponent(new Gi("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(s,i)},"PUBLIC").setServiceProps({...o5}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c5(n){l5(n,(e,t)=>new ak(e,t,new i5)),n.registerVersion(t5,n5)}c5(qs);const rd={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Bc={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function hk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h5=u5,d5=hk,dk=new Bl("auth","Firebase",hk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=new t_("@firebase/auth");function f5(n,...e){Mp.logLevel<=Ke.WARN&&Mp.warn(`Auth (${co}): ${n}`,...e)}function tp(n,...e){Mp.logLevel<=Ke.ERROR&&Mp.error(`Auth (${co}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(n,...e){throw uE(n,...e)}function _n(n,...e){return uE(n,...e)}function cE(n,e,t){const s={...d5(),[e]:t};return new Bl("auth","Firebase",s).create(e,{appName:n.name})}function In(n){return cE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qu(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Vn(n,"argument-error"),cE(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function uE(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return dk.create(n,...e)}function he(n,e,...t){if(!n)throw uE(e,...t)}function Ui(n){const e="INTERNAL ASSERTION FAILED: "+n;throw tp(e),new Error(e)}function di(n,e){n||Ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function hE(){return n1()==="http:"||n1()==="https:"}function n1(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hE()||s2()||"connection"in navigator)?navigator.onLine:!0}function g5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t){this.shortDelay=e,this.longDelay=t,di(t>e,"Short delay should be less than long delay!"),this.isMobile=hV()||Yb()}get(){return m5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(n,e){di(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],y5=new Gf(3e4,6e4);function Gt(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Wt(n,e,t,s,i={}){return mk(n,i,async()=>{let r={},o={};s&&(e==="GET"?o=s:r={body:JSON.stringify(s)});const c=Pu({key:n.config.apiKey,...o}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const d={method:e,headers:h,...r};return fV()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Mu(n.emulatorConfig.host)&&(d.credentials="include"),fk.fetch()(await gk(n,n.config.apiHost,t,c),d)})}async function mk(n,e,t){n._canInitEmulator=!1;const s={...p5,...e};try{const i=new b5(n),r=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw xd(n,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const c=r.ok?o.errorMessage:o.error.message,[h,d]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw xd(n,"credential-already-in-use",o);if(h==="EMAIL_EXISTS")throw xd(n,"email-already-in-use",o);if(h==="USER_DISABLED")throw xd(n,"user-disabled",o);const m=s[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw cE(n,m,d);Vn(n,m)}}catch(i){if(i instanceof ss)throw i;Vn(n,"network-request-failed",{message:String(i)})}}async function jr(n,e,t,s,i={}){const r=await Wt(n,e,t,s,i);return"mfaPendingCredential"in r&&Vn(n,"multi-factor-auth-required",{_serverResponse:r}),r}async function gk(n,e,t,s){const i=`${e}${t}?${s}`,r=n,o=r.config.emulator?dE(n.config,i):`${n.config.apiScheme}://${i}`;return _5.includes(t)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function v5(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class b5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(_n(this.auth,"network-request-failed")),y5.get())})}}function xd(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const i=_n(n,e,s);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(n){return n!==void 0&&n.getResponse!==void 0}function i1(n){return n!==void 0&&n.enterprise!==void 0}class pk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return v5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x5(n){return(await Wt(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function _k(n,e){return Wt(n,"GET","/v2/recaptchaConfig",Gt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E5(n,e){return Wt(n,"POST","/v1/accounts:delete",e)}async function T5(n,e){return Wt(n,"POST","/v1/accounts:update",e)}async function Pp(n,e){return Wt(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function w5(n,e=!1){const t=ke(n),s=await t.getIdToken(e),i=R_(s);he(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:Ud(uv(i.auth_time)),issuedAtTime:Ud(uv(i.iat)),expirationTime:Ud(uv(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function uv(n){return Number(n)*1e3}function R_(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return tp("JWT malformed, contained fewer than 3 sections"),null;try{const i=qb(t);return i?JSON.parse(i):(tp("Failed to decode base64 JWT payload"),null)}catch(i){return tp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function r1(n){const e=R_(n);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kr(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ss&&S5(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function S5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ud(this.lastLoginAt),this.creationTime=Ud(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pf(n){var _;const e=n.auth,t=await n.getIdToken(),s=await kr(n,Pp(e,{idToken:t}));he(s==null?void 0:s.users.length,e,"internal-error");const i=s.users[0];n._notifyReloadListener(i);const r=(_=i.providerUserInfo)!=null&&_.length?yk(i.providerUserInfo):[],o=R5(n.providerData,r),c=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!(o!=null&&o.length),d=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new mb(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,m)}async function I5(n){const e=ke(n);await pf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function R5(n,e){return[...n.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function yk(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(n,e){const t=await mk(n,{},async()=>{const s=Pu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=n.config,o=await gk(n,i,"/v1/token",`key=${r}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:s};return n.emulatorConfig&&Mu(n.emulatorConfig.host)&&(h.credentials="include"),fk.fetch()(o,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function N5(n,e){return Wt(n,"POST","/v2/accounts:revokeToken",Gt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):r1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");const t=r1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:i,expiresIn:r}=await C5(e,t);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:i,expirationTime:r}=t,o=new Jc;return s&&(he(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(he(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),r&&(he(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jc,this.toJSON())}_performRefresh(){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(n,e){he(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ai{constructor({uid:e,auth:t,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new A5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new mb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await kr(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return w5(this,e)}reload(){return I5(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ai({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await pf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kt(this.auth.app))return Promise.reject(In(this.auth));const e=await this.getIdToken();return await kr(this,E5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,i=t.email??void 0,r=t.phoneNumber??void 0,o=t.photoURL??void 0,c=t.tenantId??void 0,h=t._redirectEventId??void 0,d=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:_,emailVerified:b,isAnonymous:E,providerData:S,stsTokenManager:T}=t;he(_&&T,e,"internal-error");const R=Jc.fromJSON(this.name,T);he(typeof _=="string",e,"internal-error"),Na(s,e.name),Na(i,e.name),he(typeof b=="boolean",e,"internal-error"),he(typeof E=="boolean",e,"internal-error"),Na(r,e.name),Na(o,e.name),Na(c,e.name),Na(h,e.name),Na(d,e.name),Na(m,e.name);const k=new ai({uid:_,auth:e,email:i,emailVerified:b,displayName:s,isAnonymous:E,photoURL:o,phoneNumber:r,tenantId:c,stsTokenManager:R,createdAt:d,lastLoginAt:m});return S&&Array.isArray(S)&&(k.providerData=S.map(L=>({...L}))),h&&(k._redirectEventId=h),k}static async _fromIdTokenResponse(e,t,s=!1){const i=new Jc;i.updateFromServerResponse(t);const r=new ai({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await pf(r),r}static async _fromGetAccountInfoResponse(e,t,s){const i=t.users[0];he(i.localId!==void 0,"internal-error");const r=i.providerUserInfo!==void 0?yk(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(r!=null&&r.length),c=new Jc;c.updateFromIdToken(s);const h=new ai({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new mb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(r!=null&&r.length)};return Object.assign(h,d),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=new Map;function Is(n){di(n instanceof Function,"Expected a class definition");let e=a1.get(n);return e?(di(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,a1.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vk.type="NONE";const Su=vk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(n,e,t){return`firebase:${n}:${e}:${t}`}class eu{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=El(this.userKey,i.apiKey,r),this.fullPersistenceKey=El("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Pp(this.auth,{idToken:e}).catch(()=>{});return t?ai._fromGetAccountInfoResponse(this.auth,t,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new eu(Is(Su),e,s);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let r=i[0]||Is(Su);const o=El(s,e.config.apiKey,e.name);let c=null;for(const d of t)try{const m=await d._get(o);if(m){let _;if(typeof m=="string"){const b=await Pp(e,{idToken:m}).catch(()=>{});if(!b)break;_=await ai._fromGetAccountInfoResponse(e,b,m)}else _=ai._fromJSON(e,m);d!==r&&(c=_),r=d;break}}catch{}const h=i.filter(d=>d._shouldAllowMigration);return!r._shouldAllowMigration||!h.length?new eu(r,e,s):(r=h[0],c&&await r._set(o,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==r)try{await d._remove(o)}catch{}})),new eu(r,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Tk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wk(e))return"Blackberry";if(Sk(e))return"Webos";if(xk(e))return"Safari";if((e.includes("chrome/")||Ek(e))&&!e.includes("edge/"))return"Chrome";if(Wf(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function bk(n=Ut()){return/firefox\//i.test(n)}function xk(n=Ut()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ek(n=Ut()){return/crios\//i.test(n)}function Tk(n=Ut()){return/iemobile/i.test(n)}function Wf(n=Ut()){return/android/i.test(n)}function wk(n=Ut()){return/blackberry/i.test(n)}function Sk(n=Ut()){return/webos/i.test(n)}function $f(n=Ut()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function D5(n=Ut()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function k5(n=Ut()){var e;return $f(n)&&!!((e=window.navigator)!=null&&e.standalone)}function O5(){return i2()&&document.documentMode===10}function Ak(n=Ut()){return $f(n)||Wf(n)||Sk(n)||wk(n)||/windows phone/i.test(n)||Tk(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(n,e=[]){let t;switch(n){case"Browser":t=o1(Ut());break;case"Worker":t=`${o1(Ut())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${co}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=r=>new Promise((o,c)=>{try{const h=e(r);o(h)}catch(h){c(h)}});s.onAbort=t,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(n,e={}){return Wt(n,"GET","/v2/passwordPolicy",Gt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=6;class L5{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??V5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,t,s,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l1(this),this.idTokenSubscription=new l1(this),this.beforeStateQueue=new M5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Is(t)),this._initializationPromise=this.queue(async()=>{var s,i,r;if(!this._deleted&&(this.persistenceManager=await eu.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Pp(this,{idToken:e}),s=await ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(kt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)==null?void 0:r._redirectEventId,c=s==null?void 0:s._redirectEventId,h=await this.tryRedirectSignIn(e);(!o||o===c)&&(h!=null&&h.user)&&(s=h.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=g5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kt(this.app))return Promise.reject(In(this));const t=e?ke(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kt(this.app)?Promise.reject(In(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kt(this.app)?Promise.reject(In(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await P5(this),t=new L5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await N5(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Is(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=await eu.create(this,[Is(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,i){if(this._deleted)return()=>{};const r=typeof t=="function"?t:t.next.bind(t);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(c,this,"internal-error"),c.then(()=>{o||r(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,s,i);return()=>{o=!0,h()}}else{const h=e.addObserver(t);return()=>{o=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ik(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&f5(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ft(n){return ke(n)}class l1{constructor(e){this.auth=e,this.observer=null,this.addObserver=o2(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function U5(n){Yf=n}function fE(n){return Yf.loadJS(n)}function F5(){return Yf.recaptchaV2Script}function B5(){return Yf.recaptchaEnterpriseScript}function z5(){return Yf.gapiScript}function Rk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=500,q5=6e4,Rg=1e12;class G5{constructor(e){this.auth=e,this.counter=Rg,this._widgets=new Map}render(e,t){const s=this.counter;return this._widgets.set(s,new Y5(e,this.auth.name,t||{})),this.counter++,s}reset(e){var s;const t=e||Rg;(s=this._widgets.get(t))==null||s.delete(),this._widgets.delete(t)}getResponse(e){var s;const t=e||Rg;return((s=this._widgets.get(t))==null?void 0:s.getResponse())||""}async execute(e){var s;const t=e||Rg;return(s=this._widgets.get(t))==null||s.execute(),""}}class W5{constructor(){this.enterprise=new $5}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class $5{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Y5{constructor(e,t,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;he(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=K5(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},q5)},H5))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function K5(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<n;s++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const Q5="recaptcha-enterprise",Fd="NO_RECAPTCHA";class Ck{constructor(e){this.type=Q5,this.auth=Ft(e)}async verify(e="verify",t=!1){async function s(r){if(!t){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,c)=>{_k(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new pk(h);return r.tenantId==null?r._agentRecaptchaConfig=d:r._tenantRecaptchaConfigs[r.tenantId]=d,o(d.siteKey)}}).catch(h=>{c(h)})})}function i(r,o,c){const h=window.grecaptcha;i1(h)?h.enterprise.ready(()=>{h.enterprise.execute(r,{action:e}).then(d=>{o(d)}).catch(()=>{o(Fd)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new W5().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{s(this.auth).then(c=>{if(!t&&i1(window.grecaptcha))i(c,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let h=B5();h.length!==0&&(h+=c),fE(h).then(()=>{i(c,r,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function ad(n,e,t,s=!1,i=!1){const r=new Ck(n);let o;if(i)o=Fd;else try{o=await r.verify(t)}catch{o=await r.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return s?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function qa(n,e,t,s,i){var r,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((r=n._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await ad(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await ad(n,e,t,t==="getOobCode");return s(n,h)}else return Promise.reject(c)});else if(i==="PHONE_PROVIDER")if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const c=await ad(n,e,t);return s(n,c).catch(async h=>{var d;if(((d=n._getRecaptchaConfig())==null?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(h.code==="auth/missing-recaptcha-token"||h.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const m=await ad(n,e,t,!1,!0);return s(n,m)}return Promise.reject(h)})}else{const c=await ad(n,e,t,!1,!0);return s(n,c)}else return Promise.reject(i+" provider is not supported.")}async function X5(n){const e=Ft(n),t=await _k(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new pk(t);e.tenantId==null?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,s.isAnyProviderEnabled()&&new Ck(e).verify()}function Z5(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Is);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function J5(n,e,t){const s=Ft(n);he(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),r=Nk(e),{host:o,port:c}=eU(e),h=c===null?"":`:${c}`,d={url:`${r}//${o}${h}/`},m=Object.freeze({host:o,port:c,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){he(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),he($a(d,s.config.emulator)&&$a(m,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=d,s.emulatorConfig=m,s.settings.appVerificationDisabledForTesting=!0,Mu(o)?(e2(`${r}//${o}${h}`),t2("Auth",!0)):i||tU()}function Nk(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function eU(n){const e=Nk(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:c1(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:c1(o)}}}function c1(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function tU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,t){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(n,e){return Wt(n,"POST","/v1/accounts:resetPassword",Gt(n,e))}async function nU(n,e){return Wt(n,"POST","/v1/accounts:update",e)}async function sU(n,e){return Wt(n,"POST","/v1/accounts:signUp",e)}async function iU(n,e){return Wt(n,"POST","/v1/accounts:update",Gt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rU(n,e){return jr(n,"POST","/v1/accounts:signInWithPassword",Gt(n,e))}async function C_(n,e){return Wt(n,"POST","/v1/accounts:sendOobCode",Gt(n,e))}async function aU(n,e){return C_(n,e)}async function oU(n,e){return C_(n,e)}async function lU(n,e){return C_(n,e)}async function cU(n,e){return C_(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uU(n,e){return jr(n,"POST","/v1/accounts:signInWithEmailLink",Gt(n,e))}async function hU(n,e){return jr(n,"POST","/v1/accounts:signInWithEmailLink",Gt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f extends Gu{constructor(e,t,s,i=null){super("password",s),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new _f(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new _f(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qa(e,t,"signInWithPassword",rU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return uU(e,{email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qa(e,s,"signUpPassword",sU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return hU(e,{idToken:t,email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rr(n,e){return jr(n,"POST","/v1/accounts:signInWithIdp",Gt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU="http://localhost";class Yi extends Gu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...r}=t;if(!s||!i)return null;const o=new Yi(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Rr(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Rr(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Rr(e,t)}buildRequest(){const e={requestUri:dU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Pu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(n,e){return Wt(n,"POST","/v1/accounts:sendVerificationCode",Gt(n,e))}async function fU(n,e){return jr(n,"POST","/v1/accounts:signInWithPhoneNumber",Gt(n,e))}async function mU(n,e){const t=await jr(n,"POST","/v1/accounts:signInWithPhoneNumber",Gt(n,e));if(t.temporaryProof)throw xd(n,"account-exists-with-different-credential",t);return t}const gU={USER_NOT_FOUND:"user-not-found"};async function pU(n,e){const t={...e,operation:"REAUTH"};return jr(n,"POST","/v1/accounts:signInWithPhoneNumber",Gt(n,t),gU)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends Gu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Tl({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Tl({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return fU(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return mU(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return pU(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:s,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:s,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:s,phoneNumber:i,temporaryProof:r}=e;return!s&&!t&&!i&&!r?null:new Tl({verificationId:t,verificationCode:s,phoneNumber:i,temporaryProof:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _U(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yU(n){const e=Qc(gd(n)).link,t=e?Qc(gd(e)).deep_link_id:null,s=Qc(gd(n)).deep_link_id;return(s?Qc(gd(s)).link:null)||s||t||e||n}class N_{constructor(e){const t=Qc(gd(e)),s=t.apiKey??null,i=t.oobCode??null,r=_U(t.mode??null);he(s&&i&&r,"argument-error"),this.apiKey=s,this.operation=r,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=yU(e);try{return new N_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.providerId=po.PROVIDER_ID}static credential(e,t){return _f._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=N_.parseLink(t);return he(s,"argument-error"),_f._fromEmailAndCode(e,s.code,s.tenantId)}}po.PROVIDER_ID="password";po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends Ur{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class tu extends Wu{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return he("providerId"in t&&"signInMethod"in t,"argument-error"),Yi._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return he(e.idToken||e.accessToken,"argument-error"),Yi._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return tu.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return tu.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s,oauthTokenSecret:i,pendingToken:r,nonce:o,providerId:c}=e;if(!s&&!i&&!t&&!r||!c)return null;try{return new tu(c)._credential({idToken:t,accessToken:s,nonce:o,pendingToken:r})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends Wu{constructor(){super("facebook.com")}static credential(e){return Yi._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oi.credential(e.oauthAccessToken)}catch{return null}}}Oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Yi._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Mi.credential(t,s)}catch{return null}}}Mi.GOOGLE_SIGN_IN_METHOD="google.com";Mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Wu{constructor(){super("github.com")}static credential(e){return Yi._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pi.credential(e.oauthAccessToken)}catch{return null}}}Pi.GITHUB_SIGN_IN_METHOD="github.com";Pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU="http://localhost";class Au extends Gu{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Rr(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Rr(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Rr(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,pendingToken:r}=t;return!s||!i||!r||s!==i?null:new Au(s,r)}static _create(e,t){return new Au(e,t)}buildRequest(){return{requestUri:vU,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU="saml.";class Vp extends Ur{constructor(e){he(e.startsWith(bU),"argument-error"),super(e)}static credentialFromResult(e){return Vp.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Vp.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Au.fromJSON(e);return he(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:s}=e;if(!t||!s)return null;try{return Au._create(s,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Wu{constructor(){super("twitter.com")}static credential(e,t){return Yi._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Vi.credential(t,s)}catch{return null}}}Vi.TWITTER_SIGN_IN_METHOD="twitter.com";Vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kk(n,e){return jr(n,"POST","/v1/accounts:signUp",Gt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,i=!1){const r=await ai._fromIdTokenResponse(e,s,i),o=h1(s);return new $s({user:r,providerId:o,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const i=h1(s);return new $s({user:e,providerId:i,_tokenResponse:s,operationType:t})}}function h1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xU(n){var i;if(kt(n.app))return Promise.reject(In(n));const e=Ft(n);if(await e._initializationPromise,(i=e.currentUser)!=null&&i.isAnonymous)return new $s({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await kk(e,{returnSecureToken:!0}),s=await $s._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp extends ss{constructor(e,t,s,i){super(t.code,t.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Lp.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,i){return new Lp(e,t,s,i)}}function Ok(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Lp._fromErrorAndOperation(n,r,e,s):r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EU(n,e){const t=ke(n);await D_(!0,t,e);const{providerUserInfo:s}=await T5(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=Mk(s||[]);return t.providerData=t.providerData.filter(r=>i.has(r.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function mE(n,e,t=!1){const s=await kr(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return $s._forOperation(n,"link",s)}async function D_(n,e,t){await pf(e);const s=Mk(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";he(s.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(n,e,t=!1){const{auth:s}=n;if(kt(s.app))return Promise.reject(In(s));const i="reauthenticate";try{const r=await kr(n,Ok(s,i,e,n),t);he(r.idToken,s,"internal-error");const o=R_(r.idToken);he(o,s,"internal-error");const{sub:c}=o;return he(n.uid===c,s,"user-mismatch"),$s._forOperation(n,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Vn(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(n,e,t=!1){if(kt(n.app))return Promise.reject(In(n));const s="signIn",i=await Ok(n,s,e),r=await $s._fromIdTokenResponse(n,s,i);return t||await n._updateCurrentUser(r.user),r}async function k_(n,e){return Vk(Ft(n),e)}async function Lk(n,e){const t=ke(n);return await D_(!1,t,e.providerId),mE(t,e)}async function jk(n,e){return Pk(ke(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TU(n,e){return jr(n,"POST","/v1/accounts:signInWithCustomToken",Gt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wU(n,e){if(kt(n.app))return Promise.reject(In(n));const t=Ft(n),s=await TU(t,{token:e,returnSecureToken:!0}),i=await $s._fromIdTokenResponse(t,"signIn",s);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?gE._fromServerResponse(e,t):"totpInfo"in t?pE._fromServerResponse(e,t):Vn(e,"internal-error")}}class gE extends Kf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new gE(t)}}class pE extends Kf{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new pE(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(n,e,t){var s;he(((s=t.url)==null?void 0:s.length)>0,n,"invalid-continue-uri"),he(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),he(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(he(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(he(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _E(n){const e=Ft(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function SU(n,e,t){const s=Ft(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&O_(s,i,t),await qa(s,i,"getOobCode",oU,"EMAIL_PASSWORD_PROVIDER")}async function AU(n,e,t){await Dk(ke(n),{oobCode:e,newPassword:t}).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&_E(n),s})}async function IU(n,e){await iU(ke(n),{oobCode:e})}async function Uk(n,e){const t=ke(n),s=await Dk(t,{oobCode:e}),i=s.requestType;switch(he(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(s.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(s.mfaInfo,t,"internal-error");default:he(s.email,t,"internal-error")}let r=null;return s.mfaInfo&&(r=Kf._fromServerResponse(Ft(t),s.mfaInfo)),{data:{email:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.newEmail:s.email)||null,previousEmail:(s.requestType==="VERIFY_AND_CHANGE_EMAIL"?s.email:s.newEmail)||null,multiFactorInfo:r},operation:i}}async function RU(n,e){const{data:t}=await Uk(ke(n),e);return t.email}async function CU(n,e,t){if(kt(n.app))return Promise.reject(In(n));const s=Ft(n),o=await qa(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kk,"EMAIL_PASSWORD_PROVIDER").catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&_E(n),h}),c=await $s._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(c.user),c}function NU(n,e,t){return kt(n.app)?Promise.reject(In(n)):k_(ke(n),po.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&_E(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(n,e,t){const s=Ft(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function r(o,c){he(c.handleCodeInApp,s,"argument-error"),c&&O_(s,o,c)}r(i,t),await qa(s,i,"getOobCode",lU,"EMAIL_PASSWORD_PROVIDER")}function kU(n,e){const t=N_.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function OU(n,e,t){if(kt(n.app))return Promise.reject(In(n));const s=ke(n),i=po.credentialWithLink(e,t||gf());return he(i._tenantId===(s.tenantId||null),s,"tenant-id-mismatch"),k_(s,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MU(n,e){return Wt(n,"POST","/v1/accounts:createAuthUri",Gt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PU(n,e){const t=hE()?gf():"http://localhost",s={identifier:e,continueUri:t},{signinMethods:i}=await MU(ke(n),s);return i||[]}async function VU(n,e){const t=ke(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&O_(t.auth,i,e);const{email:r}=await aU(t.auth,i);r!==n.email&&await n.reload()}async function LU(n,e,t){const s=ke(n),r={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&O_(s.auth,r,t);const{email:o}=await cU(s.auth,r);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jU(n,e){return Wt(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=ke(n),r={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await kr(s,jU(s.auth,r));s.displayName=o.displayName||null,s.photoURL=o.photoUrl||null;const c=s.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=s.displayName,c.photoURL=s.photoURL),await s._updateTokensIfNecessary(o)}function FU(n,e){const t=ke(n);return kt(t.auth.app)?Promise.reject(In(t.auth)):Fk(t,e,null)}function BU(n,e){return Fk(ke(n),null,e)}async function Fk(n,e,t){const{auth:s}=n,r={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(r.email=e),t&&(r.password=t);const o=await kr(n,nU(s,r));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(n){var i,r;if(!n)return null;const{providerId:e}=n,t=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},s=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(n!=null&&n.idToken)){const o=(r=(i=R_(n.idToken))==null?void 0:i.firebase)==null?void 0:r.sign_in_provider;if(o){const c=o!=="anonymous"&&o!=="custom"?o:null;return new nu(s,c)}}if(!e)return null;switch(e){case"facebook.com":return new HU(s,t);case"github.com":return new qU(s,t);case"google.com":return new GU(s,t);case"twitter.com":return new WU(s,t,n.screenName||null);case"custom":case"anonymous":return new nu(s,null);default:return new nu(s,e,t)}}class nu{constructor(e,t,s={}){this.isNewUser=e,this.providerId=t,this.profile=s}}class Bk extends nu{constructor(e,t,s,i){super(e,t,s),this.username=i}}class HU extends nu{constructor(e,t){super(e,"facebook.com",t)}}class qU extends Bk{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class GU extends nu{constructor(e,t){super(e,"google.com",t)}}class WU extends Bk{constructor(e,t,s){super(e,"twitter.com",t,s)}}function $U(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:zU(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,t,s){this.type=e,this.credential=t,this.user=s}static _fromIdtoken(e,t){return new yl("enroll",e,t)}static _fromMfaPendingCredential(e){return new yl("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,s;if(e!=null&&e.multiFactorSession){if((t=e.multiFactorSession)!=null&&t.pendingCredential)return yl._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((s=e.multiFactorSession)!=null&&s.idToken)return yl._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,t,s){this.session=e,this.hints=t,this.signInResolver=s}static _fromError(e,t){const s=Ft(e),i=t.customData._serverResponse,r=(i.mfaInfo||[]).map(c=>Kf._fromServerResponse(s,c));he(i.mfaPendingCredential,s,"internal-error");const o=yl._fromMfaPendingCredential(i.mfaPendingCredential);return new yE(o,r,async c=>{const h=await c._process(s,o);delete i.mfaInfo,delete i.mfaPendingCredential;const d={...i,idToken:h.idToken,refreshToken:h.refreshToken};switch(t.operationType){case"signIn":const m=await $s._fromIdTokenResponse(s,t.operationType,d);return await s._updateCurrentUser(m.user),m;case"reauthenticate":return he(t.user,s,"internal-error"),$s._forOperation(t.user,t.operationType,d);default:Vn(s,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function YU(n,e){var i;const t=ke(n),s=e;return he(e.customData.operationType,t,"argument-error"),he((i=s.customData._serverResponse)==null?void 0:i.mfaPendingCredential,t,"argument-error"),yE._fromError(t,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(n,e){return Wt(n,"POST","/v2/accounts/mfaEnrollment:start",Gt(n,e))}function KU(n,e){return Wt(n,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(n,e))}function QU(n,e){return Wt(n,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(n,e))}class vE{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(s=>Kf._fromServerResponse(e.auth,s)))})}static _fromUser(e){return new vE(e)}async getSession(){return yl._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const s=e,i=await this.getSession(),r=await kr(this.user,s._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,s=await this.user.getIdToken();try{const i=await kr(this.user,QU(this.user.auth,{idToken:s,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:r})=>r!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const hv=new WeakMap;function XU(n){const e=ke(n);return hv.has(e)||hv.set(e,vE._fromUser(e)),hv.get(e)}const jp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jp,"1"),this.storage.removeItem(jp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=1e3,JU=10;class Hk extends zk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ak(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),i=this.localCache[t];s!==i&&e(t,i,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,c,h)=>{this.notifyListeners(o,h)});return}const s=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(s);!t&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);O5()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,JU):i()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},ZU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hk.type="LOCAL";const bE=Hk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk extends zk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qk.type="SESSION";const Pl=qk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const s=new M_(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:i,data:r}=t.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const c=Array.from(o).map(async d=>d(t.origin,r)),h=await eF(c);t.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}M_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((c,h)=>{const d=Qf("",20);i.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(_){const b=_;if(b.data.eventId===d)switch(b.data.status){case"ack":clearTimeout(m),r=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),c(b.data.response);break;default:clearTimeout(m),clearTimeout(r),h(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return window}function nF(n){ln().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(){return typeof ln().WorkerGlobalScope<"u"&&typeof ln().importScripts=="function"}async function sF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iF(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function rF(){return xE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="firebaseLocalStorageDb",aF=1,Up="firebaseLocalStorage",Wk="fbase_key";class Xf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function P_(n,e){return n.transaction([Up],e?"readwrite":"readonly").objectStore(Up)}function oF(){const n=indexedDB.deleteDatabase(Gk);return new Xf(n).toPromise()}function gb(){const n=indexedDB.open(Gk,aF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Up,{keyPath:Wk})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Up)?e(s):(s.close(),await oF(),e(await gb()))})})}async function f1(n,e,t){const s=P_(n,!0).put({[Wk]:e,value:t});return new Xf(s).toPromise()}async function lF(n,e){const t=P_(n,!1).get(e),s=await new Xf(t).toPromise();return s===void 0?null:s.value}function m1(n,e){const t=P_(n,!0).delete(e);return new Xf(t).toPromise()}const cF=800,uF=3;class $k{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gb(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>uF)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=M_._getInstance(rF()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await sF(),!this.activeServiceWorker)return;this.sender=new tF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gb();return await f1(e,jp,"1"),await m1(e,jp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>f1(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>lF(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>m1(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const r=P_(i,!1).getAll();return new Xf(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:r}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$k.type="LOCAL";const yf=$k;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(n,e){return Wt(n,"POST","/v2/accounts/mfaSignIn:start",Gt(n,e))}function hF(n,e){return Wt(n,"POST","/v2/accounts/mfaSignIn:finalize",Gt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=Rk("rcb"),dF=new Gf(3e4,6e4);class fF{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=ln().grecaptcha)!=null&&e.render)}load(e,t=""){return he(mF(t),e,"argument-error"),this.shouldResolveImmediately(t)&&s1(ln().grecaptcha)?Promise.resolve(ln().grecaptcha):new Promise((s,i)=>{const r=ln().setTimeout(()=>{i(_n(e,"network-request-failed"))},dF.get());ln()[dv]=()=>{ln().clearTimeout(r),delete ln()[dv];const c=ln().grecaptcha;if(!c||!s1(c)){i(_n(e,"internal-error"));return}const h=c.render;c.render=(d,m)=>{const _=h(d,m);return this.counter++,_},this.hostLanguage=t,s(c)};const o=`${F5()}?${Pu({onload:dv,render:"explicit",hl:t})}`;fE(o).catch(()=>{clearTimeout(r),i(_n(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=ln().grecaptcha)!=null&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function mF(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class gF{async load(e){return new G5(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="recaptcha",pF={theme:"light",type:"image"};let _F=class{constructor(e,t,s={...pF}){this.parameters=s,this.type=Bd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ft(e),this.isInvisible=this.parameters.size==="invisible",he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;he(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gF:new fF,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),s=t.getResponse(e);return s||new Promise(i=>{const r=o=>{o&&(this.tokenChangeListeners.delete(r),i(o))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(s=>s(t)),typeof e=="function")e(t);else if(typeof e=="string"){const s=ln()[e];typeof s=="function"&&s(t)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){he(hE()&&!xE(),this.auth,"internal-error"),await yF(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await x5(this.auth);he(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function yF(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Tl._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function vF(n,e,t){if(kt(n.app))return Promise.reject(In(n));const s=Ft(n),i=await V_(s,e,ke(t));return new EE(i,r=>k_(s,r))}async function bF(n,e,t){const s=ke(n);await D_(!1,s,"phone");const i=await V_(s.auth,e,ke(t));return new EE(i,r=>Lk(s,r))}async function xF(n,e,t){const s=ke(n);if(kt(s.auth.app))return Promise.reject(In(s.auth));const i=await V_(s.auth,e,ke(t));return new EE(i,r=>jk(s,r))}async function V_(n,e,t){var s;if(!n._getRecaptchaConfig())try{await X5(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const r=i.session;if("phoneNumber"in i){he(r.type==="enroll",n,"internal-error");const o={idToken:r.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await qa(n,o,"mfaSmsEnrollment",async(m,_)=>{if(_.phoneEnrollmentInfo.captchaResponse===Fd){he((t==null?void 0:t.type)===Bd,m,"argument-error");const b=await fv(m,_,t);return d1(m,b)}return d1(m,_)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).phoneSessionInfo.sessionInfo}else{he(r.type==="signin",n,"internal-error");const o=((s=i.multiFactorHint)==null?void 0:s.uid)||i.multiFactorUid;he(o,n,"missing-multi-factor-info");const c={mfaPendingCredential:r.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await qa(n,c,"mfaSmsSignIn",async(_,b)=>{if(b.phoneSignInInfo.captchaResponse===Fd){he((t==null?void 0:t.type)===Bd,_,"argument-error");const E=await fv(_,b,t);return g1(_,E)}return g1(_,b)},"PHONE_PROVIDER").catch(_=>Promise.reject(_))).phoneResponseInfo.sessionInfo}}else{const r={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await qa(n,r,"sendVerificationCode",async(d,m)=>{if(m.captchaResponse===Fd){he((t==null?void 0:t.type)===Bd,d,"argument-error");const _=await fv(d,m,t);return u1(d,_)}return u1(d,m)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).sessionInfo}}finally{t==null||t._reset()}}async function EF(n,e){const t=ke(n);if(kt(t.auth.app))return Promise.reject(In(t.auth));await mE(t,e)}async function fv(n,e,t){he(t.type===Bd,n,"argument-error");const s=await t.verify();he(typeof s=="string",n,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const r=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,c=i.phoneEnrollmentInfo.clientType,h=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:r,recaptchaToken:s,captchaResponse:o,clientType:c,recaptchaVersion:h}}),i}else if("phoneSignInInfo"in i){const r=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,c=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:r,clientType:o,recaptchaVersion:c}}),i}else return Object.assign(i,{recaptchaToken:s}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl=class np{constructor(e){this.providerId=np.PROVIDER_ID,this.auth=Ft(e)}verifyPhoneNumber(e,t){return V_(this.auth,e,ke(t))}static credential(e,t){return Tl._fromVerification(e,t)}static credentialFromResult(e){const t=e;return np.credentialFromTaggedObject(t)}static credentialFromError(e){return np.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:s}=e;return t&&s?Tl._fromTokenResponse(t,s):null}};Vl.PROVIDER_ID="phone";Vl.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wl(n,e){return e?Is(e):(he(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE extends Gu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Rr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Rr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function TF(n){return Vk(n.auth,new TE(n),n.bypassAuthState)}function wF(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),Pk(t,new TE(n),n.bypassAuthState)}async function SF(n){const{auth:e,user:t}=n;return he(t,e,"internal-error"),mE(t,new TE(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,t,s,i,r=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:i,tenantId:r,error:o,type:c}=e;if(o){this.reject(o);return}const h={auth:this.auth,requestUri:t,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TF;case"linkViaPopup":case"linkViaRedirect":return SF;case"reauthViaPopup":case"reauthViaRedirect":return wF;default:Vn(this.auth,"internal-error")}}resolve(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF=new Gf(2e3,1e4);async function IF(n,e,t){if(kt(n.app))return Promise.reject(_n(n,"operation-not-supported-in-this-environment"));const s=Ft(n);qu(n,e,Ur);const i=Wl(s,t);return new Tr(s,"signInViaPopup",e,i).executeNotNull()}async function RF(n,e,t){const s=ke(n);if(kt(s.auth.app))return Promise.reject(_n(s.auth,"operation-not-supported-in-this-environment"));qu(s.auth,e,Ur);const i=Wl(s.auth,t);return new Tr(s.auth,"reauthViaPopup",e,i,s).executeNotNull()}async function CF(n,e,t){const s=ke(n);qu(s.auth,e,Ur);const i=Wl(s.auth,t);return new Tr(s.auth,"linkViaPopup",e,i,s).executeNotNull()}class Tr extends Yk{constructor(e,t,s,i,r){super(e,t,i,r),this.provider=s,this.authWindow=null,this.pollId=null,Tr.currentPopupAction&&Tr.currentPopupAction.cancel(),Tr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){di(this.filter.length===1,"Popup operations only handle one event");const e=Qf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(_n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AF.get())};e()}}Tr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF="pendingRedirect",zd=new Map;class DF extends Yk{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=zd.get(this.auth._key());if(!e){try{const s=await kF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}zd.set(this.auth._key(),e)}return this.bypassAuthState||zd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kF(n,e){const t=Qk(e),s=Kk(n);if(!await s._isAvailable())return!1;const i=await s._get(t)==="true";return await s._remove(t),i}async function wE(n,e){return Kk(n)._set(Qk(e),"true")}function OF(){zd.clear()}function SE(n,e){zd.set(n._key(),e)}function Kk(n){return Is(n._redirectPersistence)}function Qk(n){return El(NF,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(n,e,t){return PF(n,e,t)}async function PF(n,e,t){if(kt(n.app))return Promise.reject(In(n));const s=Ft(n);qu(n,e,Ur),await s._initializationPromise;const i=Wl(s,t);return await wE(i,s),i._openRedirect(s,e,"signInViaRedirect")}function VF(n,e,t){return LF(n,e,t)}async function LF(n,e,t){const s=ke(n);if(qu(s.auth,e,Ur),kt(s.auth.app))return Promise.reject(In(s.auth));await s.auth._initializationPromise;const i=Wl(s.auth,t);await wE(i,s.auth);const r=await Xk(s);return i._openRedirect(s.auth,e,"reauthViaRedirect",r)}function jF(n,e,t){return UF(n,e,t)}async function UF(n,e,t){const s=ke(n);qu(s.auth,e,Ur),await s.auth._initializationPromise;const i=Wl(s.auth,t);await D_(!1,s,e.providerId),await wE(i,s.auth);const r=await Xk(s);return i._openRedirect(s.auth,e,"linkViaRedirect",r)}async function FF(n,e){return await Ft(n)._initializationPromise,L_(n,e,!1)}async function L_(n,e,t=!1){if(kt(n.app))return Promise.reject(In(n));const s=Ft(n),i=Wl(s,e),o=await new DF(s,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}async function Xk(n){const e=Qf(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=600*1e3;class Zk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Jk(e)){const i=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(_n(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BF&&this.cachedEventUids.clear(),this.cachedEventUids.has(p1(e))}saveEventToCache(e){this.cachedEventUids.add(p1(e)),this.lastProcessedEventTime=Date.now()}}function p1(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Jk({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zF(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jk(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eO(n,e={}){return Wt(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qF=/^https?/;async function GF(n){if(n.config.emulator)return;const{authorizedDomains:e}=await eO(n);for(const t of e)try{if(WF(t))return}catch{}Vn(n,"unauthorized-domain")}function WF(n){const e=gf(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===s}if(!qF.test(t))return!1;if(HF.test(n))return s===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $F=new Gf(3e4,6e4);function _1(){const n=ln().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function YF(n){return new Promise((e,t)=>{var i,r,o;function s(){_1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_1(),t(_n(n,"network-request-failed"))},timeout:$F.get()})}if((r=(i=ln().gapi)==null?void 0:i.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((o=ln().gapi)!=null&&o.load)s();else{const c=Rk("iframefcb");return ln()[c]=()=>{gapi.load?s():t(_n(n,"network-request-failed"))},fE(`${z5()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw sp=null,e})}let sp=null;function KF(n){return sp=sp||YF(n),sp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF=new Gf(5e3,15e3),XF="__/auth/iframe",ZF="emulator/auth/iframe",JF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tB(n){const e=n.config;he(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?dE(e,ZF):`https://${n.config.authDomain}/${XF}`,s={apiKey:e.apiKey,appName:n.name,v:co},i=eB.get(n.config.apiHost);i&&(s.eid=i);const r=n._getFrameworks();return r.length&&(s.fw=r.join(",")),`${t}?${Pu(s).slice(1)}`}async function nB(n){const e=await KF(n),t=ln().gapi;return he(t,n,"internal-error"),e.open({where:document.body,url:tB(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JF,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=_n(n,"network-request-failed"),c=ln().setTimeout(()=>{r(o)},QF.get());function h(){ln().clearTimeout(c),i(s)}s.ping(h).then(h,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iB=500,rB=600,aB="_blank",oB="http://localhost";class y1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lB(n,e,t,s=iB,i=rB){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const h={...sB,width:s.toString(),height:i.toString(),top:r,left:o},d=Ut().toLowerCase();t&&(c=Ek(d)?aB:t),bk(d)&&(e=e||oB,h.scrollbars="yes");const m=Object.entries(h).reduce((b,[E,S])=>`${b}${E}=${S},`,"");if(k5(d)&&c!=="_self")return cB(e||"",c),new y1(null);const _=window.open(e||"",c,m);he(_,n,"popup-blocked");try{_.focus()}catch{}return new y1(_)}function cB(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB="__/auth/handler",hB="emulator/auth/handler",dB=encodeURIComponent("fac");async function pb(n,e,t,s,i,r){he(n.config.authDomain,n,"auth-domain-config-required"),he(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:co,eventId:i};if(e instanceof Ur){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",yV(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,_]of Object.entries(r||{}))o[m]=_}if(e instanceof Wu){const m=e.getScopes().filter(_=>_!=="");m.length>0&&(o.scopes=m.join(","))}n.tenantId&&(o.tid=n.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await n._getAppCheckToken(),d=h?`#${dB}=${encodeURIComponent(h)}`:"";return`${fB(n)}?${Pu(c).slice(1)}${d}`}function fB({config:n}){return n.emulator?dE(n,hB):`https://${n.authDomain}/${uB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="webStorageSupport";class mB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pl,this._completeRedirectFn=L_,this._overrideRedirectResult=SE}async _openPopup(e,t,s,i){var o;di((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const r=await pb(e,t,s,gf(),i);return lB(e,r,Qf())}async _openRedirect(e,t,s,i){await this._originValidation(e);const r=await pb(e,t,s,gf(),i);return nF(r),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:r}=this.eventManagers[t];return i?Promise.resolve(i):(di(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await nB(e),s=new Zk(e);return t.register("authEvent",i=>(he(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mv,{type:mv},i=>{var o;const r=(o=i==null?void 0:i[0])==null?void 0:o[mv];r!==void 0&&t(!!r),Vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ak()||xk()||$f()}}const gB=mB;class pB{constructor(e){this.factorId=e}_process(e,t,s){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,s);case"signin":return this._finalizeSignIn(e,t.credential);default:return Ui("unexpected MultiFactorSessionType")}}}class AE extends pB{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new AE(e)}_finalizeEnroll(e,t,s){return KU(e,{idToken:t,displayName:s,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return hF(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class tO{constructor(){}static assertion(e){return AE._fromCredential(e)}}tO.FACTOR_ID="phone";var v1="@firebase/auth",b1="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _B{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yB(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vB(n){Qa(new Gi("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=s.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const h={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ik(n)},d=new j5(s,i,r,h);return Z5(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Qa(new Gi("auth-internal",e=>{const t=Ft(e.getProvider("auth").getImmediate());return(s=>new _B(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(v1,b1,yB(n)),li(v1,b1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=300;aV("authIdTokenMaxAge");function xB(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}U5({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=i=>{const r=_n("internal-error");r.customData=i,t(r)},s.type="text/javascript",s.charset="UTF-8",xB().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vB("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EB=2e3;async function TB(n,e,t){const{BuildInfo:s}=Ll();di(e.sessionId,"AuthEvent did not contain a session ID");const i=await RB(e.sessionId),r={};return $f()?r.ibi=s.packageName:Wf()?r.apn=s.packageName:Vn(n,"operation-not-supported-in-this-environment"),s.displayName&&(r.appDisplayName=s.displayName),r.sessionId=i,pb(n,t,e.type,void 0,e.eventId??void 0,r)}async function wB(n){const{BuildInfo:e}=Ll(),t={};$f()?t.iosBundleId=e.packageName:Wf()?t.androidPackageName=e.packageName:Vn(n,"operation-not-supported-in-this-environment"),await eO(n,t)}function SB(n){const{cordova:e}=Ll();return new Promise(t=>{e.plugins.browsertab.isAvailable(s=>{let i=null;s?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,D5()?"_blank":"_system","location=yes"),t(i)})})}async function AB(n,e,t){const{cordova:s}=Ll();let i=()=>{};try{await new Promise((r,o)=>{let c=null;function h(){var b;r();const _=(b=s.plugins.browsertab)==null?void 0:b.close;typeof _=="function"&&_(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function d(){c||(c=window.setTimeout(()=>{o(_n(n,"redirect-cancelled-by-user"))},EB))}function m(){(document==null?void 0:document.visibilityState)==="visible"&&d()}e.addPassiveListener(h),document.addEventListener("resume",d,!1),Wf()&&document.addEventListener("visibilitychange",m,!1),i=()=>{e.removePassiveListener(h),document.removeEventListener("resume",d,!1),document.removeEventListener("visibilitychange",m,!1),c&&window.clearTimeout(c)}})}finally{i()}}function IB(n){var t,s,i,r,o,c,h,d,m,_;const e=Ll();he(typeof((t=e==null?void 0:e.universalLinks)==null?void 0:t.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),he(typeof((s=e==null?void 0:e.BuildInfo)==null?void 0:s.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),he(typeof((o=(r=(i=e==null?void 0:e.cordova)==null?void 0:i.plugins)==null?void 0:r.browsertab)==null?void 0:o.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he(typeof((d=(h=(c=e==null?void 0:e.cordova)==null?void 0:c.plugins)==null?void 0:h.browsertab)==null?void 0:d.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he(typeof((_=(m=e==null?void 0:e.cordova)==null?void 0:m.InAppBrowser)==null?void 0:_.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function RB(n){const e=CB(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function CB(n){if(di(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let s=0;s<n.length;s++)t[s]=n.charCodeAt(s);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NB=20;class DB extends Zk{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function kB(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:PB(),postBody:null,tenantId:n.tenantId,error:_n(n,"no-auth-event")}}function OB(n,e){return _b()._set(yb(n),e)}async function x1(n){const e=await _b()._get(yb(n));return e&&await _b()._remove(yb(n)),e}function MB(n,e){var s,i;const t=LB(e);if(t.includes("/__/auth/callback")){const r=ip(t),o=r.firebaseError?VB(decodeURIComponent(r.firebaseError)):null,c=(i=(s=o==null?void 0:o.code)==null?void 0:s.split("auth/"))==null?void 0:i[1],h=c?_n(c):null;return h?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:h,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:t,postBody:null}}return null}function PB(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<NB;t++){const s=Math.floor(Math.random()*e.length);n.push(e.charAt(s))}return n.join("")}function _b(){return Is(bE)}function yb(n){return El("authEvent",n.config.apiKey,n.name)}function VB(n){try{return JSON.parse(n)}catch{return null}}function LB(n){const e=ip(n),t=e.link?decodeURIComponent(e.link):void 0,s=ip(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return ip(i).link||i||s||t||n}function ip(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return Qc(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB=500;class UB{constructor(){this._redirectPersistence=Pl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L_,this._overrideRedirectResult=SE}async _initialize(e){const t=e._key();let s=this.eventManagers.get(t);return s||(s=new DB(e),this.eventManagers.set(t,s),this.attachCallbackListeners(e,s)),s}_openPopup(e){Vn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,s,i){IB(e);const r=await this._initialize(e);await r.initialized(),r.resetRedirect(),OF(),await this._originValidation(e);const o=kB(e,s,i);await OB(e,o);const c=await TB(e,o,t),h=await SB(c);return AB(e,r,h)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=wB(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:s,handleOpenURL:i,BuildInfo:r}=Ll(),o=setTimeout(async()=>{await x1(e),t.onEvent(E1())},jB),c=async m=>{clearTimeout(o);const _=await x1(e);let b=null;_&&(m!=null&&m.url)&&(b=MB(_,m.url)),t.onEvent(b||E1())};typeof s<"u"&&typeof s.subscribe=="function"&&s.subscribe(null,c);const h=i,d=`${r.packageName.toLowerCase()}://`;Ll().handleOpenURL=async m=>{if(m.toLowerCase().startsWith(d)&&c({url:m}),typeof h=="function")try{h(m)}catch(_){console.error(_)}}}}const FB=UB;function E1(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_n("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BB(n,e){Ft(n)._logFramework(e)}var zB="@firebase/auth-compat",HB="0.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB=1e3;function Hd(){var n;return((n=self==null?void 0:self.location)==null?void 0:n.protocol)||null}function GB(){return Hd()==="http:"||Hd()==="https:"}function nO(n=Ut()){return!!((Hd()==="file:"||Hd()==="ionic:"||Hd()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function WB(){return Yb()||e_()}function $B(){return i2()&&(document==null?void 0:document.documentMode)===11}function YB(n=Ut()){return/Edge\/\d+/.test(n)}function KB(n=Ut()){return $B()||YB(n)}function sO(){try{const n=self.localStorage,e=Qf();if(n)return n.setItem(e,"1"),n.removeItem(e),KB()?Kd():!0}catch{return IE()&&Kd()}return!1}function IE(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function gv(){return(GB()||s2()||nO())&&!WB()&&sO()&&!IE()}function iO(){return nO()&&typeof document<"u"}async function QB(){return iO()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},qB);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function XB(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As={LOCAL:"local",NONE:"none",SESSION:"session"},od=he,rO="persistence";function ZB(n,e){if(od(Object.values(As).includes(e),n,"invalid-persistence-type"),Yb()){od(e!==As.SESSION,n,"unsupported-persistence-type");return}if(e_()){od(e===As.NONE,n,"unsupported-persistence-type");return}if(IE()){od(e===As.NONE||e===As.LOCAL&&Kd(),n,"unsupported-persistence-type");return}od(e===As.NONE||sO(),n,"unsupported-persistence-type")}async function vb(n){await n._initializationPromise;const e=aO(),t=El(rO,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistenceType())}function JB(n,e){const t=aO();if(!t)return[];const s=El(rO,n,e);switch(t.getItem(s)){case As.NONE:return[Su];case As.LOCAL:return[yf,Pl];case As.SESSION:return[Pl];default:return[]}}function aO(){var n;try{return((n=XB())==null?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9=he;class Pa{constructor(){this.browserResolver=Is(gB),this.cordovaResolver=Is(FB),this.underlyingResolver=null,this._redirectPersistence=Pl,this._completeRedirectFn=L_,this._overrideRedirectResult=SE}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,s,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,s,i)}async _openRedirect(e,t,s,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,s,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return iO()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return e9(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await QB();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(n){return n.unwrap()}function t9(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n9(n){return lO(n)}function s9(n,e){var s;const t=(s=e.customData)==null?void 0:s._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new i9(n,YU(n,e))}else if(t){const i=lO(e),r=e;i&&(r.credential=i,r.tenantId=t.tenantId||void 0,r.email=t.email||void 0,r.phoneNumber=t.phoneNumber||void 0)}}function lO(n){const{_tokenResponse:e}=n instanceof ss?n.customData:n;if(!e)return null;if(!(n instanceof ss)&&"temporaryProof"in e&&"phoneNumber"in e)return Vl.credentialFromResult(n);const t=e.providerId;if(!t||t===rd.PASSWORD)return null;let s;switch(t){case rd.GOOGLE:s=Mi;break;case rd.FACEBOOK:s=Oi;break;case rd.GITHUB:s=Pi;break;case rd.TWITTER:s=Vi;break;default:const{oauthIdToken:i,oauthAccessToken:r,oauthTokenSecret:o,pendingToken:c,nonce:h}=e;return!r&&!o&&!i&&!c?null:c?t.startsWith("saml.")?Au._create(t,c):Yi._fromParams({providerId:t,signInMethod:t,pendingToken:c,idToken:i,accessToken:r}):new tu(t).credential({idToken:i,accessToken:r,rawNonce:h})}return n instanceof ss?s.credentialFromError(n):s.credentialFromResult(n)}function hs(n,e){return e.catch(t=>{throw t instanceof ss&&s9(n,t),t}).then(t=>{const s=t.operationType,i=t.user;return{operationType:s,credential:n9(t),additionalUserInfo:$U(t),user:wr.getOrCreate(i)}})}async function bb(n,e){const t=await e;return{verificationId:t.verificationId,confirm:s=>hs(n,t.confirm(s))}}class i9{constructor(e,t){this.resolver=t,this.auth=t9(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return hs(oO(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this._delegate=e,this.multiFactor=XU(e)}static getOrCreate(e){return wr.USER_MAP.has(e)||wr.USER_MAP.set(e,new wr(e)),wr.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return hs(this.auth,Lk(this._delegate,e))}async linkWithPhoneNumber(e,t){return bb(this.auth,bF(this._delegate,e,t))}async linkWithPopup(e){return hs(this.auth,CF(this._delegate,e,Pa))}async linkWithRedirect(e){return await vb(Ft(this.auth)),jF(this._delegate,e,Pa)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return hs(this.auth,jk(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return bb(this.auth,xF(this._delegate,e,t))}reauthenticateWithPopup(e){return hs(this.auth,RF(this._delegate,e,Pa))}async reauthenticateWithRedirect(e){return await vb(Ft(this.auth)),VF(this._delegate,e,Pa)}sendEmailVerification(e){return VU(this._delegate,e)}async unlink(e){return await EU(this._delegate,e),this}updateEmail(e){return FU(this._delegate,e)}updatePassword(e){return BU(this._delegate,e)}updatePhoneNumber(e){return EF(this._delegate,e)}updateProfile(e){return UU(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return LU(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}wr.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=he;class xb{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:s}=e.options;ld(s,"invalid-api-key",{appName:e.name}),ld(s,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Pa:void 0;this._delegate=t.initialize({options:{persistence:r9(s,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(h5),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?wr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){J5(this._delegate,e,t)}applyActionCode(e){return IU(this._delegate,e)}checkActionCode(e){return Uk(this._delegate,e)}confirmPasswordReset(e,t){return AU(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return hs(this._delegate,CU(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return PU(this._delegate,e)}isSignInWithEmailLink(e){return kU(this._delegate,e)}async getRedirectResult(){ld(gv(),this._delegate,"operation-not-supported-in-this-environment");const e=await FF(this._delegate,Pa);return e?hs(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){BB(this._delegate,e)}onAuthStateChanged(e,t,s){const{next:i,error:r,complete:o}=T1(e,t,s);return this._delegate.onAuthStateChanged(i,r,o)}onIdTokenChanged(e,t,s){const{next:i,error:r,complete:o}=T1(e,t,s);return this._delegate.onIdTokenChanged(i,r,o)}sendSignInLinkToEmail(e,t){return DU(this._delegate,e,t)}sendPasswordResetEmail(e,t){return SU(this._delegate,e,t||void 0)}async setPersistence(e){ZB(this._delegate,e);let t;switch(e){case As.SESSION:t=Pl;break;case As.LOCAL:t=await Is(yf)._isAvailable()?yf:bE;break;case As.NONE:t=Su;break;default:return Vn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return hs(this._delegate,xU(this._delegate))}signInWithCredential(e){return hs(this._delegate,k_(this._delegate,e))}signInWithCustomToken(e){return hs(this._delegate,wU(this._delegate,e))}signInWithEmailAndPassword(e,t){return hs(this._delegate,NU(this._delegate,e,t))}signInWithEmailLink(e,t){return hs(this._delegate,OU(this._delegate,e,t))}signInWithPhoneNumber(e,t){return bb(this._delegate,vF(this._delegate,e,t))}async signInWithPopup(e){return ld(gv(),this._delegate,"operation-not-supported-in-this-environment"),hs(this._delegate,IF(this._delegate,e,Pa))}async signInWithRedirect(e){return ld(gv(),this._delegate,"operation-not-supported-in-this-environment"),await vb(this._delegate),MF(this._delegate,e,Pa)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return RU(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}xb.Persistence=As;function T1(n,e,t){let s=n;typeof n!="function"&&({next:s,error:e,complete:t}=n);const i=s;return{next:o=>i(o&&wr.getOrCreate(o)),error:e,complete:t}}function r9(n,e){const t=JB(n,e);if(typeof self<"u"&&!t.includes(yf)&&t.push(yf),typeof window<"u")for(const s of[bE,Pl])t.includes(s)||t.push(s);return t.includes(Su)||t.push(Su),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{static credential(e,t){return Vl.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new Vl(oO(qs.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}RE.PHONE_SIGN_IN_METHOD=Vl.PHONE_SIGN_IN_METHOD;RE.PROVIDER_ID=Vl.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9=he;class o9{constructor(e,t,s=qs.app()){var i;a9((i=s.options)==null?void 0:i.apiKey,"invalid-api-key",{appName:s.name}),this._delegate=new _F(s.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9="auth-compat";function c9(n){n.INTERNAL.registerComponent(new Gi(l9,e=>{const t=e.getProvider("app-compat").getImmediate(),s=e.getProvider("auth");return new xb(t,s)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Bc.EMAIL_SIGNIN,PASSWORD_RESET:Bc.PASSWORD_RESET,RECOVER_EMAIL:Bc.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Bc.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Bc.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Bc.VERIFY_EMAIL}},EmailAuthProvider:po,FacebookAuthProvider:Oi,GithubAuthProvider:Pi,GoogleAuthProvider:Mi,OAuthProvider:tu,SAMLAuthProvider:Vp,PhoneAuthProvider:RE,PhoneMultiFactorGenerator:tO,RecaptchaVerifier:o9,TwitterAuthProvider:Vi,Auth:xb,AuthCredential:Gu,Error:ss}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(zB,HB)}c9(qs);const u9=n=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),h9=n=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})}),d9=n=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),f9=n=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),m9=n=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"})]}),g9=n=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),p9=n=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),_9=n=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),y9=({page:n,currentPage:e,setCurrentPage:t,children:s,Icon:i})=>{const r=e===n;return y.jsxs("button",{onClick:()=>t(n),className:`flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 ease-in-out ${r?"bg-white/15 text-white font-semibold":"text-indigo-100 hover:bg-white/10 hover:text-white"}`,children:[y.jsx(i,{className:"h-5 w-5 mr-2 flex-shrink-0"}),s]})},v9=({currentPage:n,setCurrentPage:e})=>{const[t,s]=ce.useState(!1),i=[{page:"dashboard",label:"首頁",icon:u9},{page:"data-manager",label:"資料管理",icon:h9},{page:"asset-management",label:"資產總覽",icon:d9},{page:"cashflow-management",label:"收支帳本",icon:f9},{page:"budget-missions",label:"預算檢視",icon:m9},{page:"investment-tracking",label:"投資追蹤",icon:g9},{page:"financial-goals",label:"目標進度",icon:p9},{page:"report-analysis",label:"報表分析",icon:_9}];return y.jsxs("nav",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 shadow-lg sticky top-0 z-40",children:[y.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:y.jsxs("div",{className:"flex items-center justify-between h-16",children:[y.jsx("div",{className:"flex items-center",children:y.jsx("h1",{className:"text-xl font-bold text-white",children:"個人財務導航中心"})}),y.jsx("div",{className:"hidden md:block",children:y.jsx("div",{className:"ml-10 flex flex-wrap items-baseline justify-end gap-x-2 gap-y-1",children:i.map(r=>y.jsx(y9,{page:r.page,currentPage:n,setCurrentPage:e,Icon:r.icon,children:r.label},r.page))})}),y.jsx("div",{className:"-mr-2 flex md:hidden",children:y.jsxs("button",{onClick:()=>s(!t),type:"button",className:"bg-indigo-600 inline-flex items-center justify-center p-2 rounded-md text-indigo-200 hover:text-white hover:bg-indigo-500 focus:outline-none","aria-controls":"mobile-menu","aria-expanded":"false",children:[y.jsx("span",{className:"sr-only",children:"開啟主選單"}),t?y.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):y.jsx("svg",{className:"block h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})]})})]})}),t&&y.jsx("div",{className:"md:hidden",id:"mobile-menu",children:y.jsx("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:i.map(r=>{const o=r.icon;return y.jsxs("button",{onClick:()=>{e(r.page),s(!1)},className:`w-full text-left flex items-center px-3 py-2 rounded-md text-base font-medium transition-colors duration-200 ${n===r.page?"bg-indigo-700 text-white":"text-indigo-200 hover:bg-indigo-600 hover:text-white"}`,children:[y.jsx(o,{className:"h-5 w-5 mr-3 flex-shrink-0"}),r.label]},r.page)})})})]})},b9=()=>y.jsx("footer",{className:"bg-gray-800 text-white p-4 mt-8",children:y.jsxs("div",{className:"container mx-auto text-center text-sm",children:["© ",new Date().getFullYear()," 個人財務導航中心。"]})}),x9=({notification:n})=>{if(!n.show)return null;const e="fixed top-5 right-5 text-white px-6 py-3 rounded-lg shadow-2xl z-50 transform transition-all duration-300",t=n.show?"translate-x-0 opacity-100":"translate-x-full opacity-0",s={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"};return y.jsx("div",{className:`${e} ${s[n.type]} ${t}`,children:n.message})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Zf(n){return n+.5|0}const Va=(n,e,t)=>Math.max(Math.min(n,t),e);function Ed(n){return Va(Zf(n*2.55),0,255)}function Ga(n){return Va(Zf(n*255),0,255)}function xr(n){return Va(Zf(n/2.55)/100,0,1)}function w1(n){return Va(Zf(n*100),0,100)}const Hs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Eb=[..."0123456789ABCDEF"],E9=n=>Eb[n&15],T9=n=>Eb[(n&240)>>4]+Eb[n&15],Cg=n=>(n&240)>>4===(n&15),w9=n=>Cg(n.r)&&Cg(n.g)&&Cg(n.b)&&Cg(n.a);function S9(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Hs[n[1]]*17,g:255&Hs[n[2]]*17,b:255&Hs[n[3]]*17,a:e===5?Hs[n[4]]*17:255}:(e===7||e===9)&&(t={r:Hs[n[1]]<<4|Hs[n[2]],g:Hs[n[3]]<<4|Hs[n[4]],b:Hs[n[5]]<<4|Hs[n[6]],a:e===9?Hs[n[7]]<<4|Hs[n[8]]:255})),t}const A9=(n,e)=>n<255?e(n):"";function I9(n){var e=w9(n)?E9:T9;return n?"#"+e(n.r)+e(n.g)+e(n.b)+A9(n.a,e):void 0}const R9=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function cO(n,e,t){const s=e*Math.min(t,1-t),i=(r,o=(r+n/30)%12)=>t-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function C9(n,e,t){const s=(i,r=(i+n/60)%6)=>t-t*e*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function N9(n,e,t){const s=cO(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)s[i]*=1-e-t,s[i]+=e;return s}function D9(n,e,t,s,i){return n===i?(e-t)/s+(e<t?6:0):e===i?(t-n)/s+2:(n-e)/s+4}function CE(n){const t=n.r/255,s=n.g/255,i=n.b/255,r=Math.max(t,s,i),o=Math.min(t,s,i),c=(r+o)/2;let h,d,m;return r!==o&&(m=r-o,d=c>.5?m/(2-r-o):m/(r+o),h=D9(t,s,i,m,r),h=h*60+.5),[h|0,d||0,c]}function NE(n,e,t,s){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,s)).map(Ga)}function DE(n,e,t){return NE(cO,n,e,t)}function k9(n,e,t){return NE(N9,n,e,t)}function O9(n,e,t){return NE(C9,n,e,t)}function uO(n){return(n%360+360)%360}function M9(n){const e=R9.exec(n);let t=255,s;if(!e)return;e[5]!==s&&(t=e[6]?Ed(+e[5]):Ga(+e[5]));const i=uO(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=k9(i,r,o):e[1]==="hsv"?s=O9(i,r,o):s=DE(i,r,o),{r:s[0],g:s[1],b:s[2],a:t}}function P9(n,e){var t=CE(n);t[0]=uO(t[0]+e),t=DE(t),n.r=t[0],n.g=t[1],n.b=t[2]}function V9(n){if(!n)return;const e=CE(n),t=e[0],s=w1(e[1]),i=w1(e[2]);return n.a<255?`hsla(${t}, ${s}%, ${i}%, ${xr(n.a)})`:`hsl(${t}, ${s}%, ${i}%)`}const S1={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},A1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function L9(){const n={},e=Object.keys(A1),t=Object.keys(S1);let s,i,r,o,c;for(s=0;s<e.length;s++){for(o=c=e[s],i=0;i<t.length;i++)r=t[i],c=c.replace(r,S1[r]);r=parseInt(A1[o],16),n[c]=[r>>16&255,r>>8&255,r&255]}return n}let Ng;function j9(n){Ng||(Ng=L9(),Ng.transparent=[0,0,0,0]);const e=Ng[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const U9=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function F9(n){const e=U9.exec(n);let t=255,s,i,r;if(e){if(e[7]!==s){const o=+e[7];t=e[8]?Ed(o):Va(o*255,0,255)}return s=+e[1],i=+e[3],r=+e[5],s=255&(e[2]?Ed(s):Va(s,0,255)),i=255&(e[4]?Ed(i):Va(i,0,255)),r=255&(e[6]?Ed(r):Va(r,0,255)),{r:s,g:i,b:r,a:t}}}function B9(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${xr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const pv=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,zc=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function z9(n,e,t){const s=zc(xr(n.r)),i=zc(xr(n.g)),r=zc(xr(n.b));return{r:Ga(pv(s+t*(zc(xr(e.r))-s))),g:Ga(pv(i+t*(zc(xr(e.g))-i))),b:Ga(pv(r+t*(zc(xr(e.b))-r))),a:n.a+t*(e.a-n.a)}}function Dg(n,e,t){if(n){let s=CE(n);s[e]=Math.max(0,Math.min(s[e]+s[e]*t,e===0?360:1)),s=DE(s),n.r=s[0],n.g=s[1],n.b=s[2]}}function hO(n,e){return n&&Object.assign(e||{},n)}function I1(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Ga(n[3]))):(e=hO(n,{r:0,g:0,b:0,a:1}),e.a=Ga(e.a)),e}function H9(n){return n.charAt(0)==="r"?F9(n):M9(n)}class vf{constructor(e){if(e instanceof vf)return e;const t=typeof e;let s;t==="object"?s=I1(e):t==="string"&&(s=S9(e)||j9(e)||H9(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=hO(this._rgb);return e&&(e.a=xr(e.a)),e}set rgb(e){this._rgb=I1(e)}rgbString(){return this._valid?B9(this._rgb):void 0}hexString(){return this._valid?I9(this._rgb):void 0}hslString(){return this._valid?V9(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,i=e.rgb;let r;const o=t===r?.5:t,c=2*o-1,h=s.a-i.a,d=((c*h===-1?c:(c+h)/(1+c*h))+1)/2;r=1-d,s.r=255&d*s.r+r*i.r+.5,s.g=255&d*s.g+r*i.g+.5,s.b=255&d*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=z9(this._rgb,e._rgb,t)),this}clone(){return new vf(this.rgb)}alpha(e){return this._rgb.a=Ga(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Zf(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Dg(this._rgb,2,e),this}darken(e){return Dg(this._rgb,2,-e),this}saturate(e){return Dg(this._rgb,1,e),this}desaturate(e){return Dg(this._rgb,1,-e),this}rotate(e){return P9(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function yr(){}const q9=(()=>{let n=0;return()=>n++})();function Xe(n){return n==null}function Pt(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Je(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ht(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ws(n,e){return Ht(n)?n:e}function Fe(n,e){return typeof n>"u"?e:n}const G9=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,dO=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Tt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function ft(n,e,t,s){let i,r,o;if(Pt(n))for(r=n.length,i=0;i<r;i++)e.call(t,n[i],i);else if(Je(n))for(o=Object.keys(n),r=o.length,i=0;i<r;i++)e.call(t,n[o[i]],o[i])}function Fp(n,e){let t,s,i,r;if(!n||!e||n.length!==e.length)return!1;for(t=0,s=n.length;t<s;++t)if(i=n[t],r=e[t],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Bp(n){if(Pt(n))return n.map(Bp);if(Je(n)){const e=Object.create(null),t=Object.keys(n),s=t.length;let i=0;for(;i<s;++i)e[t[i]]=Bp(n[t[i]]);return e}return n}function fO(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function W9(n,e,t,s){if(!fO(n))return;const i=e[n],r=t[n];Je(i)&&Je(r)?bf(i,r,s):e[n]=Bp(r)}function bf(n,e,t){const s=Pt(e)?e:[e],i=s.length;if(!Je(n))return n;t=t||{};const r=t.merger||W9;let o;for(let c=0;c<i;++c){if(o=s[c],!Je(o))continue;const h=Object.keys(o);for(let d=0,m=h.length;d<m;++d)r(h[d],n,o,t)}return n}function qd(n,e){return bf(n,e,{merger:$9})}function $9(n,e,t){if(!fO(n))return;const s=e[n],i=t[n];Je(s)&&Je(i)?qd(s,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Bp(i))}const R1={"":n=>n,x:n=>n.x,y:n=>n.y};function Y9(n){const e=n.split("."),t=[];let s="";for(const i of e)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(t.push(s),s="");return t}function K9(n){const e=Y9(n);return t=>{for(const s of e){if(s==="")break;t=t&&t[s]}return t}}function ro(n,e){return(R1[e]||(R1[e]=K9(e)))(n)}function kE(n){return n.charAt(0).toUpperCase()+n.slice(1)}const xf=n=>typeof n<"u",ao=n=>typeof n=="function",C1=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function Q9(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const rt=Math.PI,Rt=2*rt,X9=Rt+rt,zp=Number.POSITIVE_INFINITY,Z9=rt/180,tn=rt/2,tl=rt/4,N1=rt*2/3,La=Math.log10,Hi=Math.sign;function Gd(n,e,t){return Math.abs(n-e)<t}function D1(n){const e=Math.round(n);n=Gd(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(La(n))),s=n/t;return(s<=1?1:s<=2?2:s<=5?5:10)*t}function J9(n){const e=[],t=Math.sqrt(n);let s;for(s=1;s<t;s++)n%s===0&&(e.push(s),e.push(n/s));return t===(t|0)&&e.push(t),e.sort((i,r)=>i-r).pop(),e}function ez(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Iu(n){return!ez(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function tz(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function mO(n,e,t){let s,i,r;for(s=0,i=n.length;s<i;s++)r=n[s][t],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function oi(n){return n*(rt/180)}function OE(n){return n*(180/rt)}function k1(n){if(!Ht(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function gO(n,e){const t=e.x-n.x,s=e.y-n.y,i=Math.sqrt(t*t+s*s);let r=Math.atan2(s,t);return r<-.5*rt&&(r+=Rt),{angle:r,distance:i}}function Tb(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function nz(n,e){return(n-e+X9)%Rt-rt}function qn(n){return(n%Rt+Rt)%Rt}function Ef(n,e,t,s){const i=qn(n),r=qn(e),o=qn(t),c=qn(r-i),h=qn(o-i),d=qn(i-r),m=qn(i-o);return i===r||i===o||s&&r===o||c>h&&d<m}function An(n,e,t){return Math.max(e,Math.min(t,n))}function sz(n){return An(n,-32768,32767)}function Sr(n,e,t,s=1e-6){return n>=Math.min(e,t)-s&&n<=Math.max(e,t)+s}function ME(n,e,t){t=t||(o=>n[o]<e);let s=n.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,t(r)?i=r:s=r;return{lo:i,hi:s}}const Ar=(n,e,t,s)=>ME(n,t,s?i=>{const r=n[i][e];return r<t||r===t&&n[i+1][e]===t}:i=>n[i][e]<t),iz=(n,e,t)=>ME(n,t,s=>n[s][e]>=t);function rz(n,e,t){let s=0,i=n.length;for(;s<i&&n[s]<e;)s++;for(;i>s&&n[i-1]>t;)i--;return s>0||i<n.length?n.slice(s,i):n}const pO=["push","pop","shift","splice","unshift"];function az(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),pO.forEach(t=>{const s="_onData"+kE(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return n._chartjs.listeners.forEach(c=>{typeof c[s]=="function"&&c[s](...r)}),o}})})}function O1(n,e){const t=n._chartjs;if(!t)return;const s=t.listeners,i=s.indexOf(e);i!==-1&&s.splice(i,1),!(s.length>0)&&(pO.forEach(r=>{delete n[r]}),delete n._chartjs)}function _O(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const yO=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function vO(n,e){let t=[],s=!1;return function(...i){t=i,s||(s=!0,yO.call(window,()=>{s=!1,n.apply(e,t)}))}}function oz(n,e){let t;return function(...s){return e?(clearTimeout(t),t=setTimeout(n,e,s)):n.apply(this,s),e}}const PE=n=>n==="start"?"left":n==="end"?"right":"center",zn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,lz=(n,e,t,s)=>n===(s?"left":"right")?t:n==="center"?(e+t)/2:e;function bO(n,e,t){const s=e.length;let i=0,r=s;if(n._sorted){const{iScale:o,vScale:c,_parsed:h}=n,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,m=o.axis,{min:_,max:b,minDefined:E,maxDefined:S}=o.getUserBounds();if(E){if(i=Math.min(Ar(h,m,_).lo,t?s:Ar(e,m,o.getPixelForValue(_)).lo),d){const T=h.slice(0,i+1).reverse().findIndex(R=>!Xe(R[c.axis]));i-=Math.max(0,T)}i=An(i,0,s-1)}if(S){let T=Math.max(Ar(h,o.axis,b,!0).hi+1,t?0:Ar(e,m,o.getPixelForValue(b),!0).hi+1);if(d){const R=h.slice(T-1).findIndex(k=>!Xe(k[c.axis]));T+=Math.max(0,R)}r=An(T,i,s)-i}else r=s-i}return{start:i,count:r}}function xO(n){const{xScale:e,yScale:t,_scaleRanges:s}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!s)return n._scaleRanges=i,!0;const r=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==t.min||s.ymax!==t.max;return Object.assign(s,i),r}const kg=n=>n===0||n===1,M1=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Rt/t)),P1=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Rt/t)+1,Wd={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*tn)+1,easeOutSine:n=>Math.sin(n*tn),easeInOutSine:n=>-.5*(Math.cos(rt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>kg(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>kg(n)?n:M1(n,.075,.3),easeOutElastic:n=>kg(n)?n:P1(n,.075,.3),easeInOutElastic(n){return kg(n)?n:n<.5?.5*M1(n*2,.1125,.45):.5+.5*P1(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Wd.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Wd.easeInBounce(n*2)*.5:Wd.easeOutBounce(n*2-1)*.5+.5};function VE(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function V1(n){return VE(n)?n:new vf(n)}function _v(n){return VE(n)?n:new vf(n).saturate(.5).darken(.1).hexString()}const cz=["x","y","borderWidth","radius","tension"],uz=["color","borderColor","backgroundColor"];function hz(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:uz},numbers:{type:"number",properties:cz}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function dz(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const L1=new Map;function fz(n,e){e=e||{};const t=n+JSON.stringify(e);let s=L1.get(t);return s||(s=new Intl.NumberFormat(n,e),L1.set(t,s)),s}function Jf(n,e,t){return fz(e,t).format(n)}const EO={values(n){return Pt(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const s=this.chart.options.locale;let i,r=n;if(t.length>1){const d=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(d<1e-4||d>1e15)&&(i="scientific"),r=mz(n,t)}const o=La(Math.abs(r)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),h={notation:i,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(h,this.options.ticks.format),Jf(n,s,h)},logarithmic(n,e,t){if(n===0)return"0";const s=t[e].significand||n/Math.pow(10,Math.floor(La(n)));return[1,2,3,5,10,15].includes(s)||e>.8*t.length?EO.numeric.call(this,n,e,t):""}};function mz(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var j_={formatters:EO};function gz(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:j_.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const jl=Object.create(null),wb=Object.create(null);function $d(n,e){if(!e)return n;const t=e.split(".");for(let s=0,i=t.length;s<i;++s){const r=t[s];n=n[r]||(n[r]=Object.create(null))}return n}function yv(n,e,t){return typeof e=="string"?bf($d(n,e),t):bf($d(n,""),e)}class pz{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>_v(i.backgroundColor),this.hoverBorderColor=(s,i)=>_v(i.borderColor),this.hoverColor=(s,i)=>_v(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return yv(this,e,t)}get(e){return $d(this,e)}describe(e,t){return yv(wb,e,t)}override(e,t){return yv(jl,e,t)}route(e,t,s,i){const r=$d(this,e),o=$d(this,s),c="_"+t;Object.defineProperties(r,{[c]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const h=this[c],d=o[i];return Je(h)?Object.assign({},d,h):Fe(h,d)},set(h){this[c]=h}}})}apply(e){e.forEach(t=>t(this))}}var Vt=new pz({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[hz,dz,gz]);function _z(n){return!n||Xe(n.size)||Xe(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Hp(n,e,t,s,i){let r=e[i];return r||(r=e[i]=n.measureText(i).width,t.push(i)),r>s&&(s=r),s}function yz(n,e,t,s){s=s||{};let i=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(i=s.data={},r=s.garbageCollect=[],s.font=e),n.save(),n.font=e;let o=0;const c=t.length;let h,d,m,_,b;for(h=0;h<c;h++)if(_=t[h],_!=null&&!Pt(_))o=Hp(n,i,r,o,_);else if(Pt(_))for(d=0,m=_.length;d<m;d++)b=_[d],b!=null&&!Pt(b)&&(o=Hp(n,i,r,o,b));n.restore();const E=r.length/2;if(E>t.length){for(h=0;h<E;h++)delete i[r[h]];r.splice(0,E)}return o}function nl(n,e,t){const s=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*s)/s+i}function j1(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function Sb(n,e,t,s){TO(n,e,t,s,null)}function TO(n,e,t,s,i){let r,o,c,h,d,m,_,b;const E=e.pointStyle,S=e.rotation,T=e.radius;let R=(S||0)*Z9;if(E&&typeof E=="object"&&(r=E.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){n.save(),n.translate(t,s),n.rotate(R),n.drawImage(E,-E.width/2,-E.height/2,E.width,E.height),n.restore();return}if(!(isNaN(T)||T<=0)){switch(n.beginPath(),E){default:i?n.ellipse(t,s,i/2,T,0,0,Rt):n.arc(t,s,T,0,Rt),n.closePath();break;case"triangle":m=i?i/2:T,n.moveTo(t+Math.sin(R)*m,s-Math.cos(R)*T),R+=N1,n.lineTo(t+Math.sin(R)*m,s-Math.cos(R)*T),R+=N1,n.lineTo(t+Math.sin(R)*m,s-Math.cos(R)*T),n.closePath();break;case"rectRounded":d=T*.516,h=T-d,o=Math.cos(R+tl)*h,_=Math.cos(R+tl)*(i?i/2-d:h),c=Math.sin(R+tl)*h,b=Math.sin(R+tl)*(i?i/2-d:h),n.arc(t-_,s-c,d,R-rt,R-tn),n.arc(t+b,s-o,d,R-tn,R),n.arc(t+_,s+c,d,R,R+tn),n.arc(t-b,s+o,d,R+tn,R+rt),n.closePath();break;case"rect":if(!S){h=Math.SQRT1_2*T,m=i?i/2:h,n.rect(t-m,s-h,2*m,2*h);break}R+=tl;case"rectRot":_=Math.cos(R)*(i?i/2:T),o=Math.cos(R)*T,c=Math.sin(R)*T,b=Math.sin(R)*(i?i/2:T),n.moveTo(t-_,s-c),n.lineTo(t+b,s-o),n.lineTo(t+_,s+c),n.lineTo(t-b,s+o),n.closePath();break;case"crossRot":R+=tl;case"cross":_=Math.cos(R)*(i?i/2:T),o=Math.cos(R)*T,c=Math.sin(R)*T,b=Math.sin(R)*(i?i/2:T),n.moveTo(t-_,s-c),n.lineTo(t+_,s+c),n.moveTo(t+b,s-o),n.lineTo(t-b,s+o);break;case"star":_=Math.cos(R)*(i?i/2:T),o=Math.cos(R)*T,c=Math.sin(R)*T,b=Math.sin(R)*(i?i/2:T),n.moveTo(t-_,s-c),n.lineTo(t+_,s+c),n.moveTo(t+b,s-o),n.lineTo(t-b,s+o),R+=tl,_=Math.cos(R)*(i?i/2:T),o=Math.cos(R)*T,c=Math.sin(R)*T,b=Math.sin(R)*(i?i/2:T),n.moveTo(t-_,s-c),n.lineTo(t+_,s+c),n.moveTo(t+b,s-o),n.lineTo(t-b,s+o);break;case"line":o=i?i/2:Math.cos(R)*T,c=Math.sin(R)*T,n.moveTo(t-o,s-c),n.lineTo(t+o,s+c);break;case"dash":n.moveTo(t,s),n.lineTo(t+Math.cos(R)*(i?i/2:T),s+Math.sin(R)*T);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Ir(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function U_(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function F_(n){n.restore()}function vz(n,e,t,s,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const r=(e.x+t.x)/2;n.lineTo(r,e.y),n.lineTo(r,t.y)}else i==="after"!=!!s?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function bz(n,e,t,s){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?t.cp2x:t.cp1x,s?t.cp2y:t.cp1y,t.x,t.y)}function xz(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Xe(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function Ez(n,e,t,s,i){if(i.strikethrough||i.underline){const r=n.measureText(s),o=e-r.actualBoundingBoxLeft,c=e+r.actualBoundingBoxRight,h=t-r.actualBoundingBoxAscent,d=t+r.actualBoundingBoxDescent,m=i.strikethrough?(h+d)/2:d;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,m),n.lineTo(c,m),n.stroke()}}function Tz(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Ul(n,e,t,s,i,r={}){const o=Pt(e)?e:[e],c=r.strokeWidth>0&&r.strokeColor!=="";let h,d;for(n.save(),n.font=i.string,xz(n,r),h=0;h<o.length;++h)d=o[h],r.backdrop&&Tz(n,r.backdrop),c&&(r.strokeColor&&(n.strokeStyle=r.strokeColor),Xe(r.strokeWidth)||(n.lineWidth=r.strokeWidth),n.strokeText(d,t,s,r.maxWidth)),n.fillText(d,t,s,r.maxWidth),Ez(n,t,s,d,r),s+=Number(i.lineHeight);n.restore()}function Tf(n,e){const{x:t,y:s,w:i,h:r,radius:o}=e;n.arc(t+o.topLeft,s+o.topLeft,o.topLeft,1.5*rt,rt,!0),n.lineTo(t,s+r-o.bottomLeft),n.arc(t+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,rt,tn,!0),n.lineTo(t+i-o.bottomRight,s+r),n.arc(t+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,tn,0,!0),n.lineTo(t+i,s+o.topRight),n.arc(t+i-o.topRight,s+o.topRight,o.topRight,0,-tn,!0),n.lineTo(t+o.topLeft,s)}const wz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Sz=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Az(n,e){const t=(""+n).match(wz);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const Iz=n=>+n||0;function LE(n,e){const t={},s=Je(e),i=s?Object.keys(e):e,r=Je(n)?s?o=>Fe(n[o],n[e[o]]):o=>n[o]:()=>n;for(const o of i)t[o]=Iz(r(o));return t}function wO(n){return LE(n,{top:"y",right:"x",bottom:"y",left:"x"})}function wl(n){return LE(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Yn(n){const e=wO(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function pn(n,e){n=n||{},e=e||Vt.font;let t=Fe(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let s=Fe(n.style,e.style);s&&!(""+s).match(Sz)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:Fe(n.family,e.family),lineHeight:Az(Fe(n.lineHeight,e.lineHeight),t),size:t,style:s,weight:Fe(n.weight,e.weight),string:""};return i.string=_z(i),i}function Td(n,e,t,s){let i,r,o;for(i=0,r=n.length;i<r;++i)if(o=n[i],o!==void 0&&o!==void 0)return o}function Rz(n,e,t){const{min:s,max:i}=n,r=dO(e,(i-s)/2),o=(c,h)=>t&&c===0?0:c+h;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function _o(n,e){return Object.assign(Object.create(n),e)}function jE(n,e=[""],t,s,i=()=>n[0]){const r=t||n;typeof s>"u"&&(s=RO("_fallback",n));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:r,_fallback:s,_getTarget:i,override:c=>jE([c,...n],e,r,s)};return new Proxy(o,{deleteProperty(c,h){return delete c[h],delete c._keys,delete n[0][h],!0},get(c,h){return AO(c,h,()=>Vz(h,e,n,c))},getOwnPropertyDescriptor(c,h){return Reflect.getOwnPropertyDescriptor(c._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,h){return F1(c).includes(h)},ownKeys(c){return F1(c)},set(c,h,d){const m=c._storage||(c._storage=i());return c[h]=m[h]=d,delete c._keys,!0}})}function Ru(n,e,t,s){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:SO(n,s),setContext:r=>Ru(n,r,t,s),override:r=>Ru(n.override(r),e,t,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete n[o],!0},get(r,o,c){return AO(r,o,()=>Nz(r,o,c))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(r,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(r,o,c){return n[o]=c,delete r[o],!0}})}function SO(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:s=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:s,isScriptable:ao(t)?t:()=>t,isIndexable:ao(s)?s:()=>s}}const Cz=(n,e)=>n?n+kE(e):e,UE=(n,e)=>Je(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function AO(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const s=t();return n[e]=s,s}function Nz(n,e,t){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=n;let c=s[e];return ao(c)&&o.isScriptable(e)&&(c=Dz(e,c,n,t)),Pt(c)&&c.length&&(c=kz(e,c,n,o.isIndexable)),UE(e,c)&&(c=Ru(c,i,r&&r[e],o)),c}function Dz(n,e,t,s){const{_proxy:i,_context:r,_subProxy:o,_stack:c}=t;if(c.has(n))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+n);c.add(n);let h=e(r,o||s);return c.delete(n),UE(n,h)&&(h=FE(i._scopes,i,n,h)),h}function kz(n,e,t,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:c}=t;if(typeof r.index<"u"&&s(n))return e[r.index%e.length];if(Je(e[0])){const h=e,d=i._scopes.filter(m=>m!==h);e=[];for(const m of h){const _=FE(d,i,n,m);e.push(Ru(_,r,o&&o[n],c))}}return e}function IO(n,e,t){return ao(n)?n(e,t):n}const Oz=(n,e)=>n===!0?e:typeof n=="string"?ro(e,n):void 0;function Mz(n,e,t,s,i){for(const r of e){const o=Oz(t,r);if(o){n.add(o);const c=IO(o._fallback,t,i);if(typeof c<"u"&&c!==t&&c!==s)return c}else if(o===!1&&typeof s<"u"&&t!==s)return null}return!1}function FE(n,e,t,s){const i=e._rootScopes,r=IO(e._fallback,t,s),o=[...n,...i],c=new Set;c.add(s);let h=U1(c,o,t,r||t,s);return h===null||typeof r<"u"&&r!==t&&(h=U1(c,o,r,h,s),h===null)?!1:jE(Array.from(c),[""],i,r,()=>Pz(e,t,s))}function U1(n,e,t,s,i){for(;t;)t=Mz(n,e,t,s,i);return t}function Pz(n,e,t){const s=n._getTarget();e in s||(s[e]={});const i=s[e];return Pt(i)&&Je(t)?t:i||{}}function Vz(n,e,t,s){let i;for(const r of e)if(i=RO(Cz(r,n),t),typeof i<"u")return UE(n,i)?FE(t,s,n,i):i}function RO(n,e){for(const t of e){if(!t)continue;const s=t[n];if(typeof s<"u")return s}}function F1(n){let e=n._keys;return e||(e=n._keys=Lz(n._scopes)),e}function Lz(n){const e=new Set;for(const t of n)for(const s of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(s);return Array.from(e)}function CO(n,e,t,s){const{iScale:i}=n,{key:r="r"}=this._parsing,o=new Array(s);let c,h,d,m;for(c=0,h=s;c<h;++c)d=c+t,m=e[d],o[c]={r:i.parse(ro(m,r),d)};return o}const jz=Number.EPSILON||1e-14,Cu=(n,e)=>e<n.length&&!n[e].skip&&n[e],NO=n=>n==="x"?"y":"x";function Uz(n,e,t,s){const i=n.skip?e:n,r=e,o=t.skip?e:t,c=Tb(r,i),h=Tb(o,r);let d=c/(c+h),m=h/(c+h);d=isNaN(d)?0:d,m=isNaN(m)?0:m;const _=s*d,b=s*m;return{previous:{x:r.x-_*(o.x-i.x),y:r.y-_*(o.y-i.y)},next:{x:r.x+b*(o.x-i.x),y:r.y+b*(o.y-i.y)}}}function Fz(n,e,t){const s=n.length;let i,r,o,c,h,d=Cu(n,0);for(let m=0;m<s-1;++m)if(h=d,d=Cu(n,m+1),!(!h||!d)){if(Gd(e[m],0,jz)){t[m]=t[m+1]=0;continue}i=t[m]/e[m],r=t[m+1]/e[m],c=Math.pow(i,2)+Math.pow(r,2),!(c<=9)&&(o=3/Math.sqrt(c),t[m]=i*o*e[m],t[m+1]=r*o*e[m])}}function Bz(n,e,t="x"){const s=NO(t),i=n.length;let r,o,c,h=Cu(n,0);for(let d=0;d<i;++d){if(o=c,c=h,h=Cu(n,d+1),!c)continue;const m=c[t],_=c[s];o&&(r=(m-o[t])/3,c[`cp1${t}`]=m-r,c[`cp1${s}`]=_-r*e[d]),h&&(r=(h[t]-m)/3,c[`cp2${t}`]=m+r,c[`cp2${s}`]=_+r*e[d])}}function zz(n,e="x"){const t=NO(e),s=n.length,i=Array(s).fill(0),r=Array(s);let o,c,h,d=Cu(n,0);for(o=0;o<s;++o)if(c=h,h=d,d=Cu(n,o+1),!!h){if(d){const m=d[e]-h[e];i[o]=m!==0?(d[t]-h[t])/m:0}r[o]=c?d?Hi(i[o-1])!==Hi(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}Fz(n,i,r),Bz(n,r,e)}function Og(n,e,t){return Math.max(Math.min(n,t),e)}function Hz(n,e){let t,s,i,r,o,c=Ir(n[0],e);for(t=0,s=n.length;t<s;++t)o=r,r=c,c=t<s-1&&Ir(n[t+1],e),r&&(i=n[t],o&&(i.cp1x=Og(i.cp1x,e.left,e.right),i.cp1y=Og(i.cp1y,e.top,e.bottom)),c&&(i.cp2x=Og(i.cp2x,e.left,e.right),i.cp2y=Og(i.cp2y,e.top,e.bottom)))}function qz(n,e,t,s,i){let r,o,c,h;if(e.spanGaps&&(n=n.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")zz(n,i);else{let d=s?n[n.length-1]:n[0];for(r=0,o=n.length;r<o;++r)c=n[r],h=Uz(d,c,n[Math.min(r+1,o-(s?0:1))%o],e.tension),c.cp1x=h.previous.x,c.cp1y=h.previous.y,c.cp2x=h.next.x,c.cp2y=h.next.y,d=c}e.capBezierPoints&&Hz(n,t)}function BE(){return typeof window<"u"&&typeof document<"u"}function zE(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function qp(n,e,t){let s;return typeof n=="string"?(s=parseInt(n,10),n.indexOf("%")!==-1&&(s=s/100*e.parentNode[t])):s=n,s}const B_=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Gz(n,e){return B_(n).getPropertyValue(e)}const Wz=["top","right","bottom","left"];function Sl(n,e,t){const s={};t=t?"-"+t:"";for(let i=0;i<4;i++){const r=Wz[i];s[r]=parseFloat(n[e+"-"+r+t])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const $z=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Yz(n,e){const t=n.touches,s=t&&t.length?t[0]:n,{offsetX:i,offsetY:r}=s;let o=!1,c,h;if($z(i,r,n.target))c=i,h=r;else{const d=e.getBoundingClientRect();c=s.clientX-d.left,h=s.clientY-d.top,o=!0}return{x:c,y:h,box:o}}function ll(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:s}=e,i=B_(t),r=i.boxSizing==="border-box",o=Sl(i,"padding"),c=Sl(i,"border","width"),{x:h,y:d,box:m}=Yz(n,t),_=o.left+(m&&c.left),b=o.top+(m&&c.top);let{width:E,height:S}=e;return r&&(E-=o.width+c.width,S-=o.height+c.height),{x:Math.round((h-_)/E*t.width/s),y:Math.round((d-b)/S*t.height/s)}}function Kz(n,e,t){let s,i;if(e===void 0||t===void 0){const r=n&&zE(n);if(!r)e=n.clientWidth,t=n.clientHeight;else{const o=r.getBoundingClientRect(),c=B_(r),h=Sl(c,"border","width"),d=Sl(c,"padding");e=o.width-d.width-h.width,t=o.height-d.height-h.height,s=qp(c.maxWidth,r,"clientWidth"),i=qp(c.maxHeight,r,"clientHeight")}}return{width:e,height:t,maxWidth:s||zp,maxHeight:i||zp}}const Mg=n=>Math.round(n*10)/10;function Qz(n,e,t,s){const i=B_(n),r=Sl(i,"margin"),o=qp(i.maxWidth,n,"clientWidth")||zp,c=qp(i.maxHeight,n,"clientHeight")||zp,h=Kz(n,e,t);let{width:d,height:m}=h;if(i.boxSizing==="content-box"){const b=Sl(i,"border","width"),E=Sl(i,"padding");d-=E.width+b.width,m-=E.height+b.height}return d=Math.max(0,d-r.width),m=Math.max(0,s?d/s:m-r.height),d=Mg(Math.min(d,o,h.maxWidth)),m=Mg(Math.min(m,c,h.maxHeight)),d&&!m&&(m=Mg(d/2)),(e!==void 0||t!==void 0)&&s&&h.height&&m>h.height&&(m=h.height,d=Mg(Math.floor(m*s))),{width:d,height:m}}function B1(n,e,t){const s=e||1,i=Math.floor(n.height*s),r=Math.floor(n.width*s);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(n.currentDevicePixelRatio=s,o.height=i,o.width=r,n.ctx.setTransform(s,0,0,s,0,0),!0):!1}const Xz=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};BE()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function z1(n,e){const t=Gz(n,e),s=t&&t.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function cl(n,e,t,s){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function Zz(n,e,t,s){return{x:n.x+t*(e.x-n.x),y:s==="middle"?t<.5?n.y:e.y:s==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function Jz(n,e,t,s){const i={x:n.cp2x,y:n.cp2y},r={x:e.cp1x,y:e.cp1y},o=cl(n,i,t),c=cl(i,r,t),h=cl(r,e,t),d=cl(o,c,t),m=cl(c,h,t);return cl(d,m,t)}const e8=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,s){return t-s},leftForLtr(t,s){return t-s}}},t8=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function su(n,e,t){return n?e8(e,t):t8()}function DO(n,e){let t,s;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,s=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=s)}function kO(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function OO(n){return n==="angle"?{between:Ef,compare:nz,normalize:qn}:{between:Sr,compare:(e,t)=>e-t,normalize:e=>e}}function H1({start:n,end:e,count:t,loop:s,style:i}){return{start:n%t,end:e%t,loop:s&&(e-n+1)%t===0,style:i}}function n8(n,e,t){const{property:s,start:i,end:r}=t,{between:o,normalize:c}=OO(s),h=e.length;let{start:d,end:m,loop:_}=n,b,E;if(_){for(d+=h,m+=h,b=0,E=h;b<E&&o(c(e[d%h][s]),i,r);++b)d--,m--;d%=h,m%=h}return m<d&&(m+=h),{start:d,end:m,loop:_,style:n.style}}function MO(n,e,t){if(!t)return[n];const{property:s,start:i,end:r}=t,o=e.length,{compare:c,between:h,normalize:d}=OO(s),{start:m,end:_,loop:b,style:E}=n8(n,e,t),S=[];let T=!1,R=null,k,L,M;const H=()=>h(i,M,k)&&c(i,M)!==0,U=()=>c(r,k)===0||h(r,M,k),z=()=>T||H(),C=()=>!T||U();for(let I=m,N=m;I<=_;++I)L=e[I%o],!L.skip&&(k=d(L[s]),k!==M&&(T=h(k,i,r),R===null&&z()&&(R=c(k,i)===0?I:N),R!==null&&C()&&(S.push(H1({start:R,end:I,loop:b,count:o,style:E})),R=null),N=I,M=k));return R!==null&&S.push(H1({start:R,end:_,loop:b,count:o,style:E})),S}function PO(n,e){const t=[],s=n.segments;for(let i=0;i<s.length;i++){const r=MO(s[i],n.points,e);r.length&&t.push(...r)}return t}function s8(n,e,t,s){let i=0,r=e-1;if(t&&!s)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(r+=i);r>i&&n[r%e].skip;)r--;return r%=e,{start:i,end:r}}function i8(n,e,t,s){const i=n.length,r=[];let o=e,c=n[e],h;for(h=e+1;h<=t;++h){const d=n[h%i];d.skip||d.stop?c.skip||(s=!1,r.push({start:e%i,end:(h-1)%i,loop:s}),e=o=d.stop?h:null):(o=h,c.skip&&(e=h)),c=d}return o!==null&&r.push({start:e%i,end:o%i,loop:s}),r}function r8(n,e){const t=n.points,s=n.options.spanGaps,i=t.length;if(!i)return[];const r=!!n._loop,{start:o,end:c}=s8(t,i,r,s);if(s===!0)return q1(n,[{start:o,end:c,loop:r}],t,e);const h=c<o?c+i:c,d=!!n._fullLoop&&o===0&&c===i-1;return q1(n,i8(t,o,h,d),t,e)}function q1(n,e,t,s){return!s||!s.setContext||!t?e:a8(n,e,t,s)}function a8(n,e,t,s){const i=n._chart.getContext(),r=G1(n.options),{_datasetIndex:o,options:{spanGaps:c}}=n,h=t.length,d=[];let m=r,_=e[0].start,b=_;function E(S,T,R,k){const L=c?-1:1;if(S!==T){for(S+=h;t[S%h].skip;)S-=L;for(;t[T%h].skip;)T+=L;S%h!==T%h&&(d.push({start:S%h,end:T%h,loop:R,style:k}),m=k,_=T%h)}}for(const S of e){_=c?_:S.start;let T=t[_%h],R;for(b=_+1;b<=S.end;b++){const k=t[b%h];R=G1(s.setContext(_o(i,{type:"segment",p0:T,p1:k,p0DataIndex:(b-1)%h,p1DataIndex:b%h,datasetIndex:o}))),o8(R,m)&&E(_,b-1,S.loop,m),T=k,m=R}_<b-1&&E(_,b-1,S.loop,m)}return d}function G1(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function o8(n,e){if(!e)return!1;const t=[],s=function(i,r){return VE(r)?(t.includes(r)||t.push(r),t.indexOf(r)):r};return JSON.stringify(n,s)!==JSON.stringify(e,s)}function Pg(n,e,t){return n.options.clip?n[t]:e[t]}function l8(n,e){const{xScale:t,yScale:s}=n;return t&&s?{left:Pg(t,e,"left"),right:Pg(t,e,"right"),top:Pg(s,e,"top"),bottom:Pg(s,e,"bottom")}:e}function VO(n,e){const t=e._clip;if(t.disabled)return!1;const s=l8(e,n.chartArea);return{left:t.left===!1?0:s.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:s.right+(t.right===!0?0:t.right),top:t.top===!1?0:s.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:s.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class c8{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,i){const r=t.listeners[i],o=t.duration;r.forEach(c=>c({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(s-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=yO.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,c=!1,h;for(;o>=0;--o)h=r[o],h._active?(h._total>s.duration&&(s.duration=h._total),h.tick(e),c=!0):(r[o]=r[r.length-1],r.pop());c&&(i.draw(),this._notify(i,s,e,"progress")),r.length||(s.running=!1,this._notify(i,s,e,"complete"),s.initial=!1),t+=r.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var vr=new c8;const W1="transparent",u8={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const s=V1(n||W1),i=s.valid&&V1(e||W1);return i&&i.valid?i.mix(s,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class h8{constructor(e,t,s,i){const r=t[s];i=Td([e.to,i,r,e.from]);const o=Td([e.from,r,i]);this._active=!0,this._fn=e.fn||u8[e.type||typeof o],this._easing=Wd[e.easing]||Wd.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Td([e.to,t,i,e.from]),this._from=Td([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,c=this._to;let h;if(this._active=r!==c&&(o||t<s),!this._active){this._target[i]=c,this._notify(!0);return}if(t<0){this._target[i]=r;return}h=t/s%2,h=o&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[i]=this._fn(r,c,h)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][t]()}}class LO{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Je(e))return;const t=Object.keys(Vt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!Je(r))return;const o={};for(const c of t)o[c]=r[c];(Pt(r.properties)&&r.properties||[i]).forEach(c=>{(c===i||!s.has(c))&&s.set(c,o)})})}_animateOptions(e,t){const s=t.options,i=f8(e,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&d8(e.options.$animations,s).then(()=>{e.options=s},()=>{}),r}_createAnimations(e,t){const s=this._properties,i=[],r=e.$animations||(e.$animations={}),o=Object.keys(t),c=Date.now();let h;for(h=o.length-1;h>=0;--h){const d=o[h];if(d.charAt(0)==="$")continue;if(d==="options"){i.push(...this._animateOptions(e,t));continue}const m=t[d];let _=r[d];const b=s.get(d);if(_)if(b&&_.active()){_.update(b,m,c);continue}else _.cancel();if(!b||!b.duration){e[d]=m;continue}r[d]=_=new h8(b,e,d,m),i.push(_)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const s=this._createAnimations(e,t);if(s.length)return vr.add(this._chart,s),!0}}function d8(n,e){const t=[],s=Object.keys(e);for(let i=0;i<s.length;i++){const r=n[s[i]];r&&r.active()&&t.push(r.wait())}return Promise.all(t)}function f8(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function $1(n,e){const t=n&&n.options||{},s=t.reverse,i=t.min===void 0?e:0,r=t.max===void 0?e:0;return{start:s?r:i,end:s?i:r}}function m8(n,e,t){if(t===!1)return!1;const s=$1(n,t),i=$1(e,t);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function g8(n){let e,t,s,i;return Je(n)?(e=n.top,t=n.right,s=n.bottom,i=n.left):e=t=s=i=n,{top:e,right:t,bottom:s,left:i,disabled:n===!1}}function jO(n,e){const t=[],s=n._getSortedDatasetMetas(e);let i,r;for(i=0,r=s.length;i<r;++i)t.push(s[i].index);return t}function Y1(n,e,t,s={}){const i=n.keys,r=s.mode==="single";let o,c,h,d;if(e===null)return;let m=!1;for(o=0,c=i.length;o<c;++o){if(h=+i[o],h===t){if(m=!0,s.all)continue;break}d=n.values[h],Ht(d)&&(r||e===0||Hi(e)===Hi(d))&&(e+=d)}return!m&&!s.all?0:e}function p8(n,e){const{iScale:t,vScale:s}=e,i=t.axis==="x"?"x":"y",r=s.axis==="x"?"x":"y",o=Object.keys(n),c=new Array(o.length);let h,d,m;for(h=0,d=o.length;h<d;++h)m=o[h],c[h]={[i]:m,[r]:n[m]};return c}function vv(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function _8(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function y8(n){const{min:e,max:t,minDefined:s,maxDefined:i}=n.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function v8(n,e,t){const s=n[e]||(n[e]={});return s[t]||(s[t]={})}function K1(n,e,t,s){for(const i of e.getMatchingVisibleMetas(s).reverse()){const r=n[i.index];if(t&&r>0||!t&&r<0)return i.index}return null}function Q1(n,e){const{chart:t,_cachedMeta:s}=n,i=t._stacks||(t._stacks={}),{iScale:r,vScale:o,index:c}=s,h=r.axis,d=o.axis,m=_8(r,o,s),_=e.length;let b;for(let E=0;E<_;++E){const S=e[E],{[h]:T,[d]:R}=S,k=S._stacks||(S._stacks={});b=k[d]=v8(i,m,T),b[c]=R,b._top=K1(b,o,!0,s.type),b._bottom=K1(b,o,!1,s.type);const L=b._visualValues||(b._visualValues={});L[c]=R}}function bv(n,e){const t=n.scales;return Object.keys(t).filter(s=>t[s].axis===e).shift()}function b8(n,e){return _o(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function x8(n,e,t){return _o(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function cd(n,e){const t=n.controller.index,s=n.vScale&&n.vScale.axis;if(s){e=e||n._parsed;for(const i of e){const r=i._stacks;if(!r||r[s]===void 0||r[s][t]===void 0)return;delete r[s][t],r[s]._visualValues!==void 0&&r[s]._visualValues[t]!==void 0&&delete r[s]._visualValues[t]}}}const xv=n=>n==="reset"||n==="none",X1=(n,e)=>e?n:Object.assign({},n),E8=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:jO(t,!0),values:null};class hi{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=vv(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&cd(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),i=(_,b,E,S)=>_==="x"?b:_==="r"?S:E,r=t.xAxisID=Fe(s.xAxisID,bv(e,"x")),o=t.yAxisID=Fe(s.yAxisID,bv(e,"y")),c=t.rAxisID=Fe(s.rAxisID,bv(e,"r")),h=t.indexAxis,d=t.iAxisID=i(h,r,o,c),m=t.vAxisID=i(h,o,r,c);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(o),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&O1(this._data,this),e._stacked&&cd(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(Je(t)){const i=this._cachedMeta;this._data=p8(t,i)}else if(s!==t){if(s){O1(s,this);const i=this._cachedMeta;cd(i),i._parsed=[]}t&&Object.isExtensible(t)&&az(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=vv(t.vScale,t),t.stack!==s.stack&&(i=!0,cd(t),t.stack=s.stack),this._resyncElements(e),(i||r!==t._stacked)&&(Q1(this,t._parsed),t._stacked=vv(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,c=r.axis;let h=e===0&&t===i.length?!0:s._sorted,d=e>0&&s._parsed[e-1],m,_,b;if(this._parsing===!1)s._parsed=i,s._sorted=!0,b=i;else{Pt(i[e])?b=this.parseArrayData(s,i,e,t):Je(i[e])?b=this.parseObjectData(s,i,e,t):b=this.parsePrimitiveData(s,i,e,t);const E=()=>_[c]===null||d&&_[c]<d[c];for(m=0;m<t;++m)s._parsed[m+e]=_=b[m],h&&(E()&&(h=!1),d=_);s._sorted=h}o&&Q1(this,b)}parsePrimitiveData(e,t,s,i){const{iScale:r,vScale:o}=e,c=r.axis,h=o.axis,d=r.getLabels(),m=r===o,_=new Array(i);let b,E,S;for(b=0,E=i;b<E;++b)S=b+s,_[b]={[c]:m||r.parse(d[S],S),[h]:o.parse(t[S],S)};return _}parseArrayData(e,t,s,i){const{xScale:r,yScale:o}=e,c=new Array(i);let h,d,m,_;for(h=0,d=i;h<d;++h)m=h+s,_=t[m],c[h]={x:r.parse(_[0],m),y:o.parse(_[1],m)};return c}parseObjectData(e,t,s,i){const{xScale:r,yScale:o}=e,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,d=new Array(i);let m,_,b,E;for(m=0,_=i;m<_;++m)b=m+s,E=t[b],d[m]={x:r.parse(ro(E,c),b),y:o.parse(ro(E,h),b)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const i=this.chart,r=this._cachedMeta,o=t[e.axis],c={keys:jO(i,!0),values:t._stacks[e.axis]._visualValues};return Y1(c,o,r.index,{mode:s})}updateRangeFromParsed(e,t,s,i){const r=s[t.axis];let o=r===null?NaN:r;const c=i&&s._stacks[t.axis];i&&c&&(i.values=c,o=Y1(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,t){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&e===s.iScale,o=i.length,c=this._getOtherScale(e),h=E8(t,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:_}=y8(c);let b,E;function S(){E=i[b];const T=E[c.axis];return!Ht(E[e.axis])||m>T||_<T}for(b=0;b<o&&!(!S()&&(this.updateRangeFromParsed(d,e,E,h),r));++b);if(r){for(b=o-1;b>=0;--b)if(!S()){this.updateRangeFromParsed(d,e,E,h);break}}return d}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=t.length;i<r;++i)o=t[i][e.axis],Ht(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=g8(Fe(this.options.clip,m8(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,i=s.data||[],r=t.chartArea,o=[],c=this._drawStart||0,h=this._drawCount||i.length-c,d=this.options.drawActiveElementsOnTop;let m;for(s.dataset&&s.dataset.draw(e,r,c,h),m=c;m<c+h;++m){const _=i[m];_.hidden||(_.active&&d?o.push(_):_.draw(e,r))}for(m=0;m<o.length;++m)o[m].draw(e,r)}getStyle(e,t){const s=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=x8(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=b8(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=s,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",s){const i=t==="active",r=this._cachedDataOpts,o=e+"-"+t,c=r[o],h=this.enableOptionSharing&&xf(s);if(c)return X1(c,h);const d=this.chart.config,m=d.datasetElementScopeKeys(this._type,e),_=i?[`${e}Hover`,"hover",e,""]:[e,""],b=d.getOptionScopes(this.getDataset(),m),E=Object.keys(Vt.elements[e]),S=()=>this.getContext(s,i,t),T=d.resolveNamedOptions(b,E,S,_);return T.$shared&&(T.$shared=h,r[o]=Object.freeze(X1(T,h))),T}_resolveAnimations(e,t,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${t}`,c=r[o];if(c)return c;let h;if(i.options.animation!==!1){const m=this.chart.config,_=m.datasetAnimationScopeKeys(this._type,t),b=m.getOptionScopes(this.getDataset(),_);h=m.createResolver(b,this.getContext(e,s,t))}const d=new LO(i,h&&h.animations);return h&&h._cacheable&&(r[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||xv(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,s),{sharedOptions:r,includeOptions:o}}updateElement(e,t,s,i){xv(i)?Object.assign(e,s):this._resolveAnimations(t,i).update(e,s)}updateSharedOptions(e,t,s){e&&!xv(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,s,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[c,h,d]of this._syncList)this[c](h,d);this._syncList=[];const i=s.length,r=t.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t,s=!0){const i=this._cachedMeta,r=i.data,o=e+t;let c;const h=d=>{for(d.length+=t,c=d.length-1;c>=o;c--)d[c]=d[c-t]};for(h(r),c=e;c<o;++c)r[c]=new this.dataElementType;this._parsing&&h(i._parsed),this.parse(e,t),s&&this.updateElements(r,e,t,"reset")}updateElements(e,t,s,i){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(e,t);s._stacked&&cd(s,i)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,i]=e;this[t](s,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ye(hi,"defaults",{}),ye(hi,"datasetElementType",null),ye(hi,"dataElementType",null);function T8(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let s=[];for(let i=0,r=t.length;i<r;i++)s=s.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=_O(s.sort((i,r)=>i-r))}return n._cache.$bar}function w8(n){const e=n.iScale,t=T8(e,n.type);let s=e._length,i,r,o,c;const h=()=>{o===32767||o===-32768||(xf(c)&&(s=Math.min(s,Math.abs(o-c)||s)),c=o)};for(i=0,r=t.length;i<r;++i)o=e.getPixelForValue(t[i]),h();for(c=void 0,i=0,r=e.ticks.length;i<r;++i)o=e.getPixelForTick(i),h();return s}function S8(n,e,t,s){const i=t.barThickness;let r,o;return Xe(i)?(r=e.min*t.categoryPercentage,o=t.barPercentage):(r=i*s,o=1),{chunk:r/s,ratio:o,start:e.pixels[n]-r/2}}function A8(n,e,t,s){const i=e.pixels,r=i[n];let o=n>0?i[n-1]:null,c=n<i.length-1?i[n+1]:null;const h=t.categoryPercentage;o===null&&(o=r-(c===null?e.end-e.start:c-r)),c===null&&(c=r+r-o);const d=r-(r-Math.min(o,c))/2*h;return{chunk:Math.abs(c-o)/2*h/s,ratio:t.barPercentage,start:d}}function I8(n,e,t,s){const i=t.parse(n[0],s),r=t.parse(n[1],s),o=Math.min(i,r),c=Math.max(i,r);let h=o,d=c;Math.abs(o)>Math.abs(c)&&(h=c,d=o),e[t.axis]=d,e._custom={barStart:h,barEnd:d,start:i,end:r,min:o,max:c}}function UO(n,e,t,s){return Pt(n)?I8(n,e,t,s):e[t.axis]=t.parse(n,s),e}function Z1(n,e,t,s){const i=n.iScale,r=n.vScale,o=i.getLabels(),c=i===r,h=[];let d,m,_,b;for(d=t,m=t+s;d<m;++d)b=e[d],_={},_[i.axis]=c||i.parse(o[d],d),h.push(UO(b,_,r,d));return h}function Ev(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function R8(n,e,t){return n!==0?Hi(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function C8(n){let e,t,s,i,r;return n.horizontal?(e=n.base>n.x,t="left",s="right"):(e=n.base<n.y,t="bottom",s="top"),e?(i="end",r="start"):(i="start",r="end"),{start:t,end:s,reverse:e,top:i,bottom:r}}function N8(n,e,t,s){let i=e.borderSkipped;const r={};if(!i){n.borderSkipped=r;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:c,reverse:h,top:d,bottom:m}=C8(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===s?i=d:(t._bottom||0)===s?i=m:(r[J1(m,o,c,h)]=!0,i=d)),r[J1(i,o,c,h)]=!0,n.borderSkipped=r}function J1(n,e,t,s){return s?(n=D8(n,e,t),n=eR(n,t,e)):n=eR(n,e,t),n}function D8(n,e,t){return n===e?t:n===t?e:n}function eR(n,e,t){return n==="start"?e:n==="end"?t:n}function k8(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class rp extends hi{parsePrimitiveData(e,t,s,i){return Z1(e,t,s,i)}parseArrayData(e,t,s,i){return Z1(e,t,s,i)}parseObjectData(e,t,s,i){const{iScale:r,vScale:o}=e,{xAxisKey:c="x",yAxisKey:h="y"}=this._parsing,d=r.axis==="x"?c:h,m=o.axis==="x"?c:h,_=[];let b,E,S,T;for(b=s,E=s+i;b<E;++b)T=t[b],S={},S[r.axis]=r.parse(ro(T,d),b),_.push(UO(ro(T,m),S,o,b));return _}updateRangeFromParsed(e,t,s,i){super.updateRangeFromParsed(e,t,s,i);const r=s._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:s,vScale:i}=t,r=this.getParsed(e),o=r._custom,c=Ev(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,s,i){const r=i==="reset",{index:o,_cachedMeta:{vScale:c}}=this,h=c.getBasePixel(),d=c.isHorizontal(),m=this._getRuler(),{sharedOptions:_,includeOptions:b}=this._getSharedOptions(t,i);for(let E=t;E<t+s;E++){const S=this.getParsed(E),T=r||Xe(S[c.axis])?{base:h,head:h}:this._calculateBarValuePixels(E),R=this._calculateBarIndexPixels(E,m),k=(S._stacks||{})[c.axis],L={horizontal:d,base:T.base,enableBorderRadius:!k||Ev(S._custom)||o===k._top||o===k._bottom,x:d?T.head:R.center,y:d?R.center:T.head,height:d?R.size:Math.abs(T.size),width:d?Math.abs(T.size):R.size};b&&(L.options=_||this.resolveDataElementOptions(E,e[E].active?"active":i));const M=L.options||e[E].options;N8(L,M,k,o),k8(L,M,m.ratio),this.updateElement(e[E],E,L,i)}}_getStacks(e,t){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),r=s.options.stacked,o=[],c=this._cachedMeta.controller.getParsed(t),h=c&&c[s.axis],d=m=>{const _=m._parsed.find(E=>E[s.axis]===h),b=_&&_[m.vScale.axis];if(Xe(b)||isNaN(b))return!0};for(const m of i)if(!(t!==void 0&&d(m))&&((r===!1||o.indexOf(m.stack)===-1||r===void 0&&m.stack===void 0)&&o.push(m.stack),m.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[Fe(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,s){const i=this._getStacks(e,s),r=t!==void 0?i.indexOf(t):-1;return r===-1?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,s=t.iScale,i=[];let r,o;for(r=0,o=t.data.length;r<o;++r)i.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const c=e.barThickness;return{min:c||w8(t),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:s,index:i},options:{base:r,minBarLength:o}}=this,c=r||0,h=this.getParsed(e),d=h._custom,m=Ev(d);let _=h[t.axis],b=0,E=s?this.applyStack(t,h,s):_,S,T;E!==_&&(b=E-_,E=_),m&&(_=d.barStart,E=d.barEnd-d.barStart,_!==0&&Hi(_)!==Hi(d.barEnd)&&(b=0),b+=_);const R=!Xe(r)&&!m?r:b;let k=t.getPixelForValue(R);if(this.chart.getDataVisibility(e)?S=t.getPixelForValue(b+E):S=k,T=S-k,Math.abs(T)<o){T=R8(T,t,c)*o,_===c&&(k-=T/2);const L=t.getPixelForDecimal(0),M=t.getPixelForDecimal(1),H=Math.min(L,M),U=Math.max(L,M);k=Math.max(Math.min(k,U),H),S=k+T,s&&!m&&(h._stacks[t.axis]._visualValues[i]=t.getValueForPixel(S)-t.getValueForPixel(k))}if(k===t.getPixelForValue(c)){const L=Hi(T)*t.getLineWidthForValue(c)/2;k+=L,T-=L}return{size:T,base:k,head:S,center:S+T/2}}_calculateBarIndexPixels(e,t){const s=t.scale,i=this.options,r=i.skipNull,o=Fe(i.maxBarThickness,1/0);let c,h;const d=this._getAxisCount();if(t.grouped){const m=r?this._getStackCount(e):t.stackCount,_=i.barThickness==="flex"?A8(e,t,i,m*d):S8(e,t,i,m*d),b=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,E=this._getAxis().indexOf(Fe(b,this.getFirstScaleIdForIndexAxis())),S=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+E;c=_.start+_.chunk*S+_.chunk/2,h=Math.min(o,_.chunk*_.ratio)}else c=s.getPixelForValue(this.getParsed(e)[s.axis],e),h=Math.min(o,t.min*t.ratio);return{base:c-h/2,head:c+h/2,center:c,size:h}}draw(){const e=this._cachedMeta,t=e.vScale,s=e.data,i=s.length;let r=0;for(;r<i;++r)this.getParsed(r)[t.axis]!==null&&!s[r].hidden&&s[r].draw(this._ctx)}}ye(rp,"id","bar"),ye(rp,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ye(rp,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class ap extends hi{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,s,i){const r=super.parsePrimitiveData(e,t,s,i);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+s).radius;return r}parseArrayData(e,t,s,i){const r=super.parseArrayData(e,t,s,i);for(let o=0;o<r.length;o++){const c=t[s+o];r[o]._custom=Fe(c[2],this.resolveDataElementOptions(o+s).radius)}return r}parseObjectData(e,t,s,i){const r=super.parseObjectData(e,t,s,i);for(let o=0;o<r.length;o++){const c=t[s+o];r[o]._custom=Fe(c&&c.r&&+c.r,this.resolveDataElementOptions(o+s).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let s=e.length-1;s>=0;--s)t=Math.max(t,e[s].size(this.resolveDataElementOptions(s))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=t,o=this.getParsed(e),c=i.getLabelForValue(o.x),h=r.getLabelForValue(o.y),d=o._custom;return{label:s[e]||"",value:"("+c+", "+h+(d?", "+d:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,s,i){const r=i==="reset",{iScale:o,vScale:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(t,i),m=o.axis,_=c.axis;for(let b=t;b<t+s;b++){const E=e[b],S=!r&&this.getParsed(b),T={},R=T[m]=r?o.getPixelForDecimal(.5):o.getPixelForValue(S[m]),k=T[_]=r?c.getBasePixel():c.getPixelForValue(S[_]);T.skip=isNaN(R)||isNaN(k),d&&(T.options=h||this.resolveDataElementOptions(b,E.active?"active":i),r&&(T.options.radius=0)),this.updateElement(E,b,T,i)}}resolveDataElementOptions(e,t){const s=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return t!=="active"&&(i.radius=0),i.radius+=Fe(s&&s._custom,r),i}}ye(ap,"id","bubble"),ye(ap,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),ye(ap,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function O8(n,e,t){let s=1,i=1,r=0,o=0;if(e<Rt){const c=n,h=c+e,d=Math.cos(c),m=Math.sin(c),_=Math.cos(h),b=Math.sin(h),E=(M,H,U)=>Ef(M,c,h,!0)?1:Math.max(H,H*t,U,U*t),S=(M,H,U)=>Ef(M,c,h,!0)?-1:Math.min(H,H*t,U,U*t),T=E(0,d,_),R=E(tn,m,b),k=S(rt,d,_),L=S(rt+tn,m,b);s=(T-k)/2,i=(R-L)/2,r=-(T+k)/2,o=-(R+L)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class vl extends hi{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=h=>+s[h];if(Je(s[e])){const{key:h="value"}=this._parsing;r=d=>+ro(s[d],h)}let o,c;for(o=e,c=e+t;o<c;++o)i._parsed[o]=r(o)}}_getRotation(){return oi(this.options.rotation-90)}_getCircumference(){return oi(this.options.circumference)}_getRotationExtents(){let e=Rt,t=-Rt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+o)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,c=Math.max((Math.min(s.width,s.height)-o)/2,0),h=Math.min(G9(this.options.cutout,c),1),d=this._getRingWeight(this.index),{circumference:m,rotation:_}=this._getRotationExtents(),{ratioX:b,ratioY:E,offsetX:S,offsetY:T}=O8(_,m,h),R=(s.width-o)/b,k=(s.height-o)/E,L=Math.max(Math.min(R,k)/2,0),M=dO(this.options.radius,L),H=Math.max(M*h,0),U=(M-H)/this._getVisibleDatasetWeightTotal();this.offsetX=S*M,this.offsetY=T*M,i.total=this.calculateTotal(),this.outerRadius=M-U*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-U*d,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/Rt)}updateElements(e,t,s,i){const r=i==="reset",o=this.chart,c=o.chartArea,d=o.options.animation,m=(c.left+c.right)/2,_=(c.top+c.bottom)/2,b=r&&d.animateScale,E=b?0:this.innerRadius,S=b?0:this.outerRadius,{sharedOptions:T,includeOptions:R}=this._getSharedOptions(t,i);let k=this._getRotation(),L;for(L=0;L<t;++L)k+=this._circumference(L,r);for(L=t;L<t+s;++L){const M=this._circumference(L,r),H=e[L],U={x:m+this.offsetX,y:_+this.offsetY,startAngle:k,endAngle:k+M,circumference:M,outerRadius:S,innerRadius:E};R&&(U.options=T||this.resolveDataElementOptions(L,H.active?"active":i)),k+=M,this.updateElement(H,L,U,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let s=0,i;for(i=0;i<t.length;i++){const r=e._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Rt*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=Jf(t._parsed[e],s.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const s=this.chart;let i,r,o,c,h;if(!e){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),e=o.data,c=o.controller;break}}if(!e)return 0;for(i=0,r=e.length;i<r;++i)h=c.resolveDataElementOptions(i),h.borderAlign!=="inner"&&(t=Math.max(t,h.borderWidth||0,h.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,i=e.length;s<i;++s){const r=this.resolveDataElementOptions(s);t=Math.max(t,r.offset||0,r.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max(Fe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ye(vl,"id","doughnut"),ye(vl,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ye(vl,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ye(vl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:i}}=e.legend.options;return t.labels.map((r,o)=>{const h=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:i,lineWidth:h.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}}});class op extends hi{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=t,o=this.chart._animationsDisabled;let{start:c,count:h}=bO(t,i,o);this._drawStart=c,this._drawCount=h,xO(t)&&(c=0,h=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:d},e),this.updateElements(i,c,h,e)}updateElements(e,t,s,i){const r=i==="reset",{iScale:o,vScale:c,_stacked:h,_dataset:d}=this._cachedMeta,{sharedOptions:m,includeOptions:_}=this._getSharedOptions(t,i),b=o.axis,E=c.axis,{spanGaps:S,segment:T}=this.options,R=Iu(S)?S:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||r||i==="none",L=t+s,M=e.length;let H=t>0&&this.getParsed(t-1);for(let U=0;U<M;++U){const z=e[U],C=k?z:{};if(U<t||U>=L){C.skip=!0;continue}const I=this.getParsed(U),N=Xe(I[E]),V=C[b]=o.getPixelForValue(I[b],U),j=C[E]=r||N?c.getBasePixel():c.getPixelForValue(h?this.applyStack(c,I,h):I[E],U);C.skip=isNaN(V)||isNaN(j)||N,C.stop=U>0&&Math.abs(I[b]-H[b])>R,T&&(C.parsed=I,C.raw=d.data[U]),_&&(C.options=m||this.resolveDataElementOptions(U,z.active?"active":i)),k||this.updateElement(z,U,C,i),H=I}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,s=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ye(op,"id","line"),ye(op,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ye(op,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Yd extends hi{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=Jf(t._parsed[e].r,s.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,s,i){return CO.bind(this)(e,t,s,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((s,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,s=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),o=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),c=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(e,t,s,i){const r=i==="reset",o=this.chart,h=o.options.animation,d=this._cachedMeta.rScale,m=d.xCenter,_=d.yCenter,b=d.getIndexAngle(0)-.5*rt;let E=b,S;const T=360/this.countVisibleElements();for(S=0;S<t;++S)E+=this._computeAngle(S,i,T);for(S=t;S<t+s;S++){const R=e[S];let k=E,L=E+this._computeAngle(S,i,T),M=o.getDataVisibility(S)?d.getDistanceFromCenterForValue(this.getParsed(S).r):0;E=L,r&&(h.animateScale&&(M=0),h.animateRotate&&(k=L=b));const H={x:m,y:_,innerRadius:0,outerRadius:M,startAngle:k,endAngle:L,options:this.resolveDataElementOptions(S,R.active?"active":i)};this.updateElement(R,S,H,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((s,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,s){return this.chart.getDataVisibility(e)?oi(this.resolveDataElementOptions(e,t).angle||s):0}}ye(Yd,"id","polarArea"),ye(Yd,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ye(Yd,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:i}}=e.legend.options;return t.labels.map((r,o)=>{const h=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:i,lineWidth:h.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Ab extends vl{}ye(Ab,"id","pie"),ye(Ab,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class lp extends hi{getLabelAndValue(e){const t=this._cachedMeta.vScale,s=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(s[t.axis])}}parseObjectData(e,t,s,i){return CO.bind(this)(e,t,s,i)}update(e){const t=this._cachedMeta,s=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(s.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const c={_loop:!0,_fullLoop:r.length===i.length,options:o};this.updateElement(s,void 0,c,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,s,i){const r=this._cachedMeta.rScale,o=i==="reset";for(let c=t;c<t+s;c++){const h=e[c],d=this.resolveDataElementOptions(c,h.active?"active":i),m=r.getPointPositionForValue(c,this.getParsed(c).r),_=o?r.xCenter:m.x,b=o?r.yCenter:m.y,E={x:_,y:b,angle:m.angle,skip:isNaN(_)||isNaN(b),options:d};this.updateElement(h,c,E,i)}}}ye(lp,"id","radar"),ye(lp,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ye(lp,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class cp extends hi{getLabelAndValue(e){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=t,o=this.getParsed(e),c=i.getLabelForValue(o.x),h=r.getLabelForValue(o.y);return{label:s[e]||"",value:"("+c+", "+h+")"}}update(e){const t=this._cachedMeta,{data:s=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:o}=bO(t,s,i);if(this._drawStart=r,this._drawCount=o,xO(t)&&(r=0,o=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:c,_dataset:h}=t;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!h._decimated,c.points=s;const d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(c,void 0,{animated:!i,options:d},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(s,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,s,i){const r=i==="reset",{iScale:o,vScale:c,_stacked:h,_dataset:d}=this._cachedMeta,m=this.resolveDataElementOptions(t,i),_=this.getSharedOptions(m),b=this.includeOptions(i,_),E=o.axis,S=c.axis,{spanGaps:T,segment:R}=this.options,k=Iu(T)?T:Number.POSITIVE_INFINITY,L=this.chart._animationsDisabled||r||i==="none";let M=t>0&&this.getParsed(t-1);for(let H=t;H<t+s;++H){const U=e[H],z=this.getParsed(H),C=L?U:{},I=Xe(z[S]),N=C[E]=o.getPixelForValue(z[E],H),V=C[S]=r||I?c.getBasePixel():c.getPixelForValue(h?this.applyStack(c,z,h):z[S],H);C.skip=isNaN(N)||isNaN(V)||I,C.stop=H>0&&Math.abs(z[E]-M[E])>k,R&&(C.parsed=z,C.raw=d.data[H]),b&&(C.options=_||this.resolveDataElementOptions(H,U.active?"active":i)),L||this.updateElement(U,H,C,i),M=z}this.updateSharedOptions(_,i,m)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let c=0;for(let h=t.length-1;h>=0;--h)c=Math.max(c,t[h].size(this.resolveDataElementOptions(h))/2);return c>0&&c}const s=e.dataset,i=s.options&&s.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),o=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,o)/2}}ye(cp,"id","scatter"),ye(cp,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ye(cp,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var M8=Object.freeze({__proto__:null,BarController:rp,BubbleController:ap,DoughnutController:vl,LineController:op,PieController:Ab,PolarAreaController:Yd,RadarController:lp,ScatterController:cp});function sl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class HE{constructor(e){ye(this,"options");this.options=e||{}}static override(e){Object.assign(HE.prototype,e)}init(){}formats(){return sl()}parse(){return sl()}format(){return sl()}add(){return sl()}diff(){return sl()}startOf(){return sl()}endOf(){return sl()}}var P8={_date:HE};function V8(n,e,t,s){const{controller:i,data:r,_sorted:o}=n,c=i._cachedMeta.iScale,h=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(c&&e===c.axis&&e!=="r"&&o&&r.length){const d=c._reversePixels?iz:Ar;if(s){if(i._sharedOptions){const m=r[0],_=typeof m.getRange=="function"&&m.getRange(e);if(_){const b=d(r,e,t-_),E=d(r,e,t+_);return{lo:b.lo,hi:E.hi}}}}else{const m=d(r,e,t);if(h){const{vScale:_}=i._cachedMeta,{_parsed:b}=n,E=b.slice(0,m.lo+1).reverse().findIndex(T=>!Xe(T[_.axis]));m.lo-=Math.max(0,E);const S=b.slice(m.hi).findIndex(T=>!Xe(T[_.axis]));m.hi+=Math.max(0,S)}return m}}return{lo:0,hi:r.length-1}}function z_(n,e,t,s,i){const r=n.getSortedVisibleDatasetMetas(),o=t[e];for(let c=0,h=r.length;c<h;++c){const{index:d,data:m}=r[c],{lo:_,hi:b}=V8(r[c],e,o,i);for(let E=_;E<=b;++E){const S=m[E];S.skip||s(S,d,E)}}}function L8(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(s,i){const r=e?Math.abs(s.x-i.x):0,o=t?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function Tv(n,e,t,s,i){const r=[];return!i&&!n.isPointInArea(e)||z_(n,t,e,function(c,h,d){!i&&!Ir(c,n.chartArea,0)||c.inRange(e.x,e.y,s)&&r.push({element:c,datasetIndex:h,index:d})},!0),r}function j8(n,e,t,s){let i=[];function r(o,c,h){const{startAngle:d,endAngle:m}=o.getProps(["startAngle","endAngle"],s),{angle:_}=gO(o,{x:e.x,y:e.y});Ef(_,d,m)&&i.push({element:o,datasetIndex:c,index:h})}return z_(n,t,e,r),i}function U8(n,e,t,s,i,r){let o=[];const c=L8(t);let h=Number.POSITIVE_INFINITY;function d(m,_,b){const E=m.inRange(e.x,e.y,i);if(s&&!E)return;const S=m.getCenterPoint(i);if(!(!!r||n.isPointInArea(S))&&!E)return;const R=c(e,S);R<h?(o=[{element:m,datasetIndex:_,index:b}],h=R):R===h&&o.push({element:m,datasetIndex:_,index:b})}return z_(n,t,e,d),o}function wv(n,e,t,s,i,r){return!r&&!n.isPointInArea(e)?[]:t==="r"&&!s?j8(n,e,t,i):U8(n,e,t,s,i,r)}function tR(n,e,t,s,i){const r=[],o=t==="x"?"inXRange":"inYRange";let c=!1;return z_(n,t,e,(h,d,m)=>{h[o]&&h[o](e[t],i)&&(r.push({element:h,datasetIndex:d,index:m}),c=c||h.inRange(e.x,e.y,i))}),s&&!c?[]:r}var F8={modes:{index(n,e,t,s){const i=ll(e,n),r=t.axis||"x",o=t.includeInvisible||!1,c=t.intersect?Tv(n,i,r,s,o):wv(n,i,r,!1,s,o),h=[];return c.length?(n.getSortedVisibleDatasetMetas().forEach(d=>{const m=c[0].index,_=d.data[m];_&&!_.skip&&h.push({element:_,datasetIndex:d.index,index:m})}),h):[]},dataset(n,e,t,s){const i=ll(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;let c=t.intersect?Tv(n,i,r,s,o):wv(n,i,r,!1,s,o);if(c.length>0){const h=c[0].datasetIndex,d=n.getDatasetMeta(h).data;c=[];for(let m=0;m<d.length;++m)c.push({element:d[m],datasetIndex:h,index:m})}return c},point(n,e,t,s){const i=ll(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return Tv(n,i,r,s,o)},nearest(n,e,t,s){const i=ll(e,n),r=t.axis||"xy",o=t.includeInvisible||!1;return wv(n,i,r,t.intersect,s,o)},x(n,e,t,s){const i=ll(e,n);return tR(n,i,"x",t.intersect,s)},y(n,e,t,s){const i=ll(e,n);return tR(n,i,"y",t.intersect,s)}}};const FO=["left","top","right","bottom"];function ud(n,e){return n.filter(t=>t.pos===e)}function nR(n,e){return n.filter(t=>FO.indexOf(t.pos)===-1&&t.box.axis===e)}function hd(n,e){return n.sort((t,s)=>{const i=e?s:t,r=e?t:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function B8(n){const e=[];let t,s,i,r,o,c;for(t=0,s=(n||[]).length;t<s;++t)i=n[t],{position:r,options:{stack:o,stackWeight:c=1}}=i,e.push({index:t,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:c});return e}function z8(n){const e={};for(const t of n){const{stack:s,pos:i,stackWeight:r}=t;if(!s||!FO.includes(i))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function H8(n,e){const t=z8(n),{vBoxMaxWidth:s,hBoxMaxHeight:i}=e;let r,o,c;for(r=0,o=n.length;r<o;++r){c=n[r];const{fullSize:h}=c.box,d=t[c.stack],m=d&&c.stackWeight/d.weight;c.horizontal?(c.width=m?m*s:h&&e.availableWidth,c.height=i):(c.width=s,c.height=m?m*i:h&&e.availableHeight)}return t}function q8(n){const e=B8(n),t=hd(e.filter(d=>d.box.fullSize),!0),s=hd(ud(e,"left"),!0),i=hd(ud(e,"right")),r=hd(ud(e,"top"),!0),o=hd(ud(e,"bottom")),c=nR(e,"x"),h=nR(e,"y");return{fullSize:t,leftAndTop:s.concat(r),rightAndBottom:i.concat(h).concat(o).concat(c),chartArea:ud(e,"chartArea"),vertical:s.concat(i).concat(h),horizontal:r.concat(o).concat(c)}}function sR(n,e,t,s){return Math.max(n[t],e[t])+Math.max(n[s],e[s])}function BO(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function G8(n,e,t,s){const{pos:i,box:r}=t,o=n.maxPadding;if(!Je(i)){t.size&&(n[i]-=t.size);const _=s[t.stack]||{size:0,count:1};_.size=Math.max(_.size,t.horizontal?r.height:r.width),t.size=_.size/_.count,n[i]+=t.size}r.getPadding&&BO(o,r.getPadding());const c=Math.max(0,e.outerWidth-sR(o,n,"left","right")),h=Math.max(0,e.outerHeight-sR(o,n,"top","bottom")),d=c!==n.w,m=h!==n.h;return n.w=c,n.h=h,t.horizontal?{same:d,other:m}:{same:m,other:d}}function W8(n){const e=n.maxPadding;function t(s){const i=Math.max(e[s]-n[s],0);return n[s]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function $8(n,e){const t=e.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(e[o],t[o])}),r}return s(n?["left","right"]:["top","bottom"])}function wd(n,e,t,s){const i=[];let r,o,c,h,d,m;for(r=0,o=n.length,d=0;r<o;++r){c=n[r],h=c.box,h.update(c.width||e.w,c.height||e.h,$8(c.horizontal,e));const{same:_,other:b}=G8(e,t,c,s);d|=_&&i.length,m=m||b,h.fullSize||i.push(c)}return d&&wd(i,e,t,s)||m}function Vg(n,e,t,s,i){n.top=t,n.left=e,n.right=e+s,n.bottom=t+i,n.width=s,n.height=i}function iR(n,e,t,s){const i=t.padding;let{x:r,y:o}=e;for(const c of n){const h=c.box,d=s[c.stack]||{placed:0,weight:1},m=c.stackWeight/d.weight||1;if(c.horizontal){const _=e.w*m,b=d.size||h.height;xf(d.start)&&(o=d.start),h.fullSize?Vg(h,i.left,o,t.outerWidth-i.right-i.left,b):Vg(h,e.left+d.placed,o,_,b),d.start=o,d.placed+=_,o=h.bottom}else{const _=e.h*m,b=d.size||h.width;xf(d.start)&&(r=d.start),h.fullSize?Vg(h,r,i.top,b,t.outerHeight-i.bottom-i.top):Vg(h,r,e.top+d.placed,b,_),d.start=r,d.placed+=_,r=h.right}}e.x=r,e.y=o}var Wn={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,s){if(!n)return;const i=Yn(n.options.layout.padding),r=Math.max(e-i.width,0),o=Math.max(t-i.height,0),c=q8(n.boxes),h=c.vertical,d=c.horizontal;ft(n.boxes,T=>{typeof T.beforeLayout=="function"&&T.beforeLayout()});const m=h.reduce((T,R)=>R.box.options&&R.box.options.display===!1?T:T+1,0)||1,_=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/m,hBoxMaxHeight:o/2}),b=Object.assign({},i);BO(b,Yn(s));const E=Object.assign({maxPadding:b,w:r,h:o,x:i.left,y:i.top},i),S=H8(h.concat(d),_);wd(c.fullSize,E,_,S),wd(h,E,_,S),wd(d,E,_,S)&&wd(h,E,_,S),W8(E),iR(c.leftAndTop,E,_,S),E.x+=E.w,E.y+=E.h,iR(c.rightAndBottom,E,_,S),n.chartArea={left:E.left,top:E.top,right:E.left+E.w,bottom:E.top+E.h,height:E.h,width:E.w},ft(c.chartArea,T=>{const R=T.box;Object.assign(R,n.chartArea),R.update(E.w,E.h,{left:0,top:0,right:0,bottom:0})})}};class zO{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,i){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):s)}}isAttached(e){return!0}updateConfig(e){}}class Y8 extends zO{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const up="$chartjs",K8={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},rR=n=>n===null||n==="";function Q8(n,e){const t=n.style,s=n.getAttribute("height"),i=n.getAttribute("width");if(n[up]={initial:{height:s,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",rR(i)){const r=z1(n,"width");r!==void 0&&(n.width=r)}if(rR(s))if(n.style.height==="")n.height=n.width/(e||2);else{const r=z1(n,"height");r!==void 0&&(n.height=r)}return n}const HO=Xz?{passive:!0}:!1;function X8(n,e,t){n&&n.addEventListener(e,t,HO)}function Z8(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,HO)}function J8(n,e){const t=K8[n.type]||n.type,{x:s,y:i}=ll(n,e);return{type:t,chart:e,native:n,x:s!==void 0?s:null,y:i!==void 0?i:null}}function Gp(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function e7(n,e,t){const s=n.canvas,i=new MutationObserver(r=>{let o=!1;for(const c of r)o=o||Gp(c.addedNodes,s),o=o&&!Gp(c.removedNodes,s);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function t7(n,e,t){const s=n.canvas,i=new MutationObserver(r=>{let o=!1;for(const c of r)o=o||Gp(c.removedNodes,s),o=o&&!Gp(c.addedNodes,s);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const wf=new Map;let aR=0;function qO(){const n=window.devicePixelRatio;n!==aR&&(aR=n,wf.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function n7(n,e){wf.size||window.addEventListener("resize",qO),wf.set(n,e)}function s7(n){wf.delete(n),wf.size||window.removeEventListener("resize",qO)}function i7(n,e,t){const s=n.canvas,i=s&&zE(s);if(!i)return;const r=vO((c,h)=>{const d=i.clientWidth;t(c,h),d<i.clientWidth&&t()},window),o=new ResizeObserver(c=>{const h=c[0],d=h.contentRect.width,m=h.contentRect.height;d===0&&m===0||r(d,m)});return o.observe(i),n7(n,r),o}function Sv(n,e,t){t&&t.disconnect(),e==="resize"&&s7(n)}function r7(n,e,t){const s=n.canvas,i=vO(r=>{n.ctx!==null&&t(J8(r,n))},n);return X8(s,e,i),i}class a7 extends zO{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(Q8(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[up])return!1;const s=t[up].initial;["height","width"].forEach(r=>{const o=s[r];Xe(o)?t.removeAttribute(r):t.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{t.style[r]=i[r]}),t.width=t.width,delete t[up],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),o={attach:e7,detach:t7,resize:i7}[t]||r7;i[t]=o(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),i=s[t];if(!i)return;({attach:Sv,detach:Sv,resize:Sv}[t]||Z8)(e,t,i),s[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,i){return Qz(e,t,s,i)}isAttached(e){const t=e&&zE(e);return!!(t&&t.isConnected)}}function o7(n){return!BE()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Y8:a7}class fi{constructor(){ye(this,"x");ye(this,"y");ye(this,"active",!1);ye(this,"options");ye(this,"$animations")}tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return Iu(this.x)&&Iu(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const i={};return e.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}}ye(fi,"defaults",{}),ye(fi,"defaultRoutes");function l7(n,e){const t=n.options.ticks,s=c7(n),i=Math.min(t.maxTicksLimit||s,s),r=t.major.enabled?h7(e):[],o=r.length,c=r[0],h=r[o-1],d=[];if(o>i)return d7(e,d,r,o/i),d;const m=u7(r,e,i);if(o>0){let _,b;const E=o>1?Math.round((h-c)/(o-1)):null;for(Lg(e,d,m,Xe(E)?0:c-E,c),_=0,b=o-1;_<b;_++)Lg(e,d,m,r[_],r[_+1]);return Lg(e,d,m,h,Xe(E)?e.length:h+E),d}return Lg(e,d,m),d}function c7(n){const e=n.options.offset,t=n._tickSize(),s=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(s,i))}function u7(n,e,t){const s=f7(n),i=e.length/t;if(!s)return Math.max(i,1);const r=J9(s);for(let o=0,c=r.length-1;o<c;o++){const h=r[o];if(h>i)return h}return Math.max(i,1)}function h7(n){const e=[];let t,s;for(t=0,s=n.length;t<s;t++)n[t].major&&e.push(t);return e}function d7(n,e,t,s){let i=0,r=t[0],o;for(s=Math.ceil(s),o=0;o<n.length;o++)o===r&&(e.push(n[o]),i++,r=t[i*s])}function Lg(n,e,t,s,i){const r=Fe(s,0),o=Math.min(Fe(i,n.length),n.length);let c=0,h,d,m;for(t=Math.ceil(t),i&&(h=i-s,t=h/Math.floor(h/t)),m=r;m<0;)c++,m=Math.round(r+c*t);for(d=Math.max(r,0);d<o;d++)d===m&&(e.push(n[d]),c++,m=Math.round(r+c*t))}function f7(n){const e=n.length;let t,s;if(e<2)return!1;for(s=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==s)return!1;return s}const m7=n=>n==="left"?"right":n==="right"?"left":n,oR=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,lR=(n,e)=>Math.min(e||n,n);function cR(n,e){const t=[],s=n.length/e,i=n.length;let r=0;for(;r<i;r+=s)t.push(n[Math.floor(r)]);return t}function g7(n,e,t){const s=n.ticks.length,i=Math.min(e,s-1),r=n._startPixel,o=n._endPixel,c=1e-6;let h=n.getPixelForTick(i),d;if(!(t&&(s===1?d=Math.max(h-r,o-h):e===0?d=(n.getPixelForTick(1)-h)/2:d=(h-n.getPixelForTick(i-1))/2,h+=i<e?d:-d,h<r-c||h>o+c)))return h}function p7(n,e){ft(n,t=>{const s=t.gc,i=s.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[s[r]];s.splice(0,i)}})}function dd(n){return n.drawTicks?n.tickLength:0}function uR(n,e){if(!n.display)return 0;const t=pn(n.font,e),s=Yn(n.padding);return(Pt(n.text)?n.text.length:1)*t.lineHeight+s.height}function _7(n,e){return _o(n,{scale:e,type:"scale"})}function y7(n,e,t){return _o(n,{tick:t,index:e,type:"tick"})}function v7(n,e,t){let s=PE(n);return(t&&e!=="right"||!t&&e==="right")&&(s=m7(s)),s}function b7(n,e,t,s){const{top:i,left:r,bottom:o,right:c,chart:h}=n,{chartArea:d,scales:m}=h;let _=0,b,E,S;const T=o-i,R=c-r;if(n.isHorizontal()){if(E=zn(s,r,c),Je(t)){const k=Object.keys(t)[0],L=t[k];S=m[k].getPixelForValue(L)+T-e}else t==="center"?S=(d.bottom+d.top)/2+T-e:S=oR(n,t,e);b=c-r}else{if(Je(t)){const k=Object.keys(t)[0],L=t[k];E=m[k].getPixelForValue(L)-R+e}else t==="center"?E=(d.left+d.right)/2-R+e:E=oR(n,t,e);S=zn(s,o,i),_=t==="left"?-tn:tn}return{titleX:E,titleY:S,maxWidth:b,rotation:_}}let em=class GO extends fi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:i}=this;return e=ws(e,Number.POSITIVE_INFINITY),t=ws(t,Number.NEGATIVE_INFINITY),s=ws(s,Number.POSITIVE_INFINITY),i=ws(i,Number.NEGATIVE_INFINITY),{min:ws(e,s),max:ws(t,i),minDefined:Ht(e),maxDefined:Ht(t)}}getMinMax(e){let{min:t,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:t,max:s};const c=this.getMatchingVisibleMetas();for(let h=0,d=c.length;h<d;++h)o=c[h].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),r||(s=Math.max(s,o.max));return t=r&&t>s?s:t,s=i&&t>s?t:s,{min:ws(t,ws(s,t)),max:ws(s,ws(t,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Tt(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Rz(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const h=c<this.ticks.length;this._convertTicksToLabels(h?cR(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=l7(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,s;this.isHorizontal()?(t=this.left,s=this.right):(t=this.top,s=this.bottom,e=!e),this._startPixel=t,this._endPixel=s,this._reversePixels=e,this._length=s-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Tt(this.options.afterUpdate,[this])}beforeSetDimensions(){Tt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Tt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Tt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Tt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,i,r;for(s=0,i=e.length;s<i;s++)r=e[s],r.label=Tt(t.callback,[r.value,s,e],this)}afterTickToLabelConversion(){Tt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Tt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=lR(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let o=i,c,h,d;if(!this._isVisible()||!t.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const m=this._getLabelSizes(),_=m.widest.width,b=m.highest.height,E=An(this.chart.width-_,0,this.maxWidth);c=e.offset?this.maxWidth/s:E/(s-1),_+6>c&&(c=E/(s-(e.offset?.5:1)),h=this.maxHeight-dd(e.grid)-t.padding-uR(e.title,this.chart.options.font),d=Math.sqrt(_*_+b*b),o=OE(Math.min(Math.asin(An((m.highest.height+6)/c,-1,1)),Math.asin(An(h/d,-1,1))-Math.asin(An(b/d,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Tt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Tt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const h=uR(i,t.options.font);if(c?(e.width=this.maxWidth,e.height=dd(r)+h):(e.height=this.maxHeight,e.width=dd(r)+h),s.display&&this.ticks.length){const{first:d,last:m,widest:_,highest:b}=this._getLabelSizes(),E=s.padding*2,S=oi(this.labelRotation),T=Math.cos(S),R=Math.sin(S);if(c){const k=s.mirror?0:R*_.width+T*b.height;e.height=Math.min(this.maxHeight,e.height+k+E)}else{const k=s.mirror?0:T*_.width+R*b.height;e.width=Math.min(this.maxWidth,e.width+k+E)}this._calculatePadding(d,m,R,T)}}this._handleMargins(),c?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,i){const{ticks:{align:r,padding:o},position:c}=this.options,h=this.labelRotation!==0,d=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let b=0,E=0;h?d?(b=i*e.width,E=s*t.height):(b=s*e.height,E=i*t.width):r==="start"?E=t.width:r==="end"?b=e.width:r!=="inner"&&(b=e.width/2,E=t.width/2),this.paddingLeft=Math.max((b-m+o)*this.width/(this.width-m),0),this.paddingRight=Math.max((E-_+o)*this.width/(this.width-_),0)}else{let m=t.height/2,_=e.height/2;r==="start"?(m=0,_=e.height):r==="end"&&(m=t.height,_=0),this.paddingTop=m+o,this.paddingBottom=_+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Tt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,s;for(t=0,s=e.length;t<s;t++)Xe(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=cR(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:i,_longestTextCache:r}=this,o=[],c=[],h=Math.floor(t/lR(t,s));let d=0,m=0,_,b,E,S,T,R,k,L,M,H,U;for(_=0;_<t;_+=h){if(S=e[_].label,T=this._resolveTickFontOptions(_),i.font=R=T.string,k=r[R]=r[R]||{data:{},gc:[]},L=T.lineHeight,M=H=0,!Xe(S)&&!Pt(S))M=Hp(i,k.data,k.gc,M,S),H=L;else if(Pt(S))for(b=0,E=S.length;b<E;++b)U=S[b],!Xe(U)&&!Pt(U)&&(M=Hp(i,k.data,k.gc,M,U),H+=L);o.push(M),c.push(H),d=Math.max(M,d),m=Math.max(H,m)}p7(r,t);const z=o.indexOf(d),C=c.indexOf(m),I=N=>({width:o[N]||0,height:c[N]||0});return{first:I(0),last:I(t-1),widest:I(z),highest:I(C),widths:o,heights:c}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return sz(this._alignToPixels?nl(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=y7(this.getContext(),e,s))}return this.$context||(this.$context=_7(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=oi(this.labelRotation),s=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,c=r?r.widest.width+o:0,h=r?r.highest.height+o:0;return this.isHorizontal()?h*s>c*i?c/s:h/i:h*i<c*s?h/s:c/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:c}=i,h=r.offset,d=this.isHorizontal(),_=this.ticks.length+(h?1:0),b=dd(r),E=[],S=c.setContext(this.getContext()),T=S.display?S.width:0,R=T/2,k=function(Y){return nl(s,Y,T)};let L,M,H,U,z,C,I,N,V,j,F,O;if(o==="top")L=k(this.bottom),C=this.bottom-b,N=L-R,j=k(e.top)+R,O=e.bottom;else if(o==="bottom")L=k(this.top),j=e.top,O=k(e.bottom)-R,C=L+R,N=this.top+b;else if(o==="left")L=k(this.right),z=this.right-b,I=L-R,V=k(e.left)+R,F=e.right;else if(o==="right")L=k(this.left),V=e.left,F=k(e.right)-R,z=L+R,I=this.left+b;else if(t==="x"){if(o==="center")L=k((e.top+e.bottom)/2+.5);else if(Je(o)){const Y=Object.keys(o)[0],ae=o[Y];L=k(this.chart.scales[Y].getPixelForValue(ae))}j=e.top,O=e.bottom,C=L+R,N=C+b}else if(t==="y"){if(o==="center")L=k((e.left+e.right)/2);else if(Je(o)){const Y=Object.keys(o)[0],ae=o[Y];L=k(this.chart.scales[Y].getPixelForValue(ae))}z=L-R,I=z-b,V=e.left,F=e.right}const ne=Fe(i.ticks.maxTicksLimit,_),be=Math.max(1,Math.ceil(_/ne));for(M=0;M<_;M+=be){const Y=this.getContext(M),ae=r.setContext(Y),ge=c.setContext(Y),Ne=ae.lineWidth,B=ae.color,se=ge.dash||[],de=ge.dashOffset,fe=ae.tickWidth,ve=ae.tickColor,Ve=ae.tickBorderDash||[],Ie=ae.tickBorderDashOffset;H=g7(this,M,h),H!==void 0&&(U=nl(s,H,Ne),d?z=I=V=F=U:C=N=j=O=U,E.push({tx1:z,ty1:C,tx2:I,ty2:N,x1:V,y1:j,x2:F,y2:O,width:Ne,color:B,borderDash:se,borderDashOffset:de,tickWidth:fe,tickColor:ve,tickBorderDash:Ve,tickBorderDashOffset:Ie}))}return this._ticksLength=_,this._borderValue=L,E}_computeLabelItems(e){const t=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),c=this.ticks,{align:h,crossAlign:d,padding:m,mirror:_}=r,b=dd(s.grid),E=b+m,S=_?-m:E,T=-oi(this.labelRotation),R=[];let k,L,M,H,U,z,C,I,N,V,j,F,O="middle";if(i==="top")z=this.bottom-S,C=this._getXAxisLabelAlignment();else if(i==="bottom")z=this.top+S,C=this._getXAxisLabelAlignment();else if(i==="left"){const be=this._getYAxisLabelAlignment(b);C=be.textAlign,U=be.x}else if(i==="right"){const be=this._getYAxisLabelAlignment(b);C=be.textAlign,U=be.x}else if(t==="x"){if(i==="center")z=(e.top+e.bottom)/2+E;else if(Je(i)){const be=Object.keys(i)[0],Y=i[be];z=this.chart.scales[be].getPixelForValue(Y)+E}C=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")U=(e.left+e.right)/2-E;else if(Je(i)){const be=Object.keys(i)[0],Y=i[be];U=this.chart.scales[be].getPixelForValue(Y)}C=this._getYAxisLabelAlignment(b).textAlign}t==="y"&&(h==="start"?O="top":h==="end"&&(O="bottom"));const ne=this._getLabelSizes();for(k=0,L=c.length;k<L;++k){M=c[k],H=M.label;const be=r.setContext(this.getContext(k));I=this.getPixelForTick(k)+r.labelOffset,N=this._resolveTickFontOptions(k),V=N.lineHeight,j=Pt(H)?H.length:1;const Y=j/2,ae=be.color,ge=be.textStrokeColor,Ne=be.textStrokeWidth;let B=C;o?(U=I,C==="inner"&&(k===L-1?B=this.options.reverse?"left":"right":k===0?B=this.options.reverse?"right":"left":B="center"),i==="top"?d==="near"||T!==0?F=-j*V+V/2:d==="center"?F=-ne.highest.height/2-Y*V+V:F=-ne.highest.height+V/2:d==="near"||T!==0?F=V/2:d==="center"?F=ne.highest.height/2-Y*V:F=ne.highest.height-j*V,_&&(F*=-1),T!==0&&!be.showLabelBackdrop&&(U+=V/2*Math.sin(T))):(z=I,F=(1-j)*V/2);let se;if(be.showLabelBackdrop){const de=Yn(be.backdropPadding),fe=ne.heights[k],ve=ne.widths[k];let Ve=F-de.top,Ie=0-de.left;switch(O){case"middle":Ve-=fe/2;break;case"bottom":Ve-=fe;break}switch(C){case"center":Ie-=ve/2;break;case"right":Ie-=ve;break;case"inner":k===L-1?Ie-=ve:k>0&&(Ie-=ve/2);break}se={left:Ie,top:Ve,width:ve+de.width,height:fe+de.height,color:be.backdropColor}}R.push({label:H,font:N,textOffset:F,options:{rotation:T,color:ae,strokeColor:ge,strokeWidth:Ne,textAlign:B,textBaseline:O,translation:[U,z],backdrop:se}})}return R}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-oi(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),c=e+r,h=o.widest.width;let d,m;return t==="left"?i?(m=this.right+r,s==="near"?d="left":s==="center"?(d="center",m+=h/2):(d="right",m+=h)):(m=this.right-c,s==="near"?d="right":s==="center"?(d="center",m-=h/2):(d="left",m=this.left)):t==="right"?i?(m=this.left+r,s==="near"?d="right":s==="center"?(d="center",m-=h/2):(d="left",m-=h)):(m=this.left+c,s==="near"?d="left":s==="center"?(d="center",m+=h/2):(d="right",m=this.right)):d="right",{textAlign:d,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:i,width:r,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,i,r,o),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(r=>r.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const c=(h,d,m)=>{!m.width||!m.color||(s.save(),s.lineWidth=m.width,s.strokeStyle=m.color,s.setLineDash(m.borderDash||[]),s.lineDashOffset=m.borderDashOffset,s.beginPath(),s.moveTo(h.x,h.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(t.display)for(r=0,o=i.length;r<o;++r){const h=i[r];t.drawOnChartArea&&c({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),t.drawTicks&&c({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const c=i.setContext(this.getContext(0)).lineWidth,h=this._borderValue;let d,m,_,b;this.isHorizontal()?(d=nl(e,this.left,o)-o/2,m=nl(e,this.right,c)+c/2,_=b=h):(_=nl(e,this.top,o)-o/2,b=nl(e,this.bottom,c)+c/2,d=m=h),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(d,_),t.lineTo(m,b),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&U_(s,i);const r=this.getLabelItems(e);for(const o of r){const c=o.options,h=o.font,d=o.label,m=o.textOffset;Ul(s,d,0,m,h,c)}i&&F_(s)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:i}}=this;if(!s.display)return;const r=pn(s.font),o=Yn(s.padding),c=s.align;let h=r.lineHeight/2;t==="bottom"||t==="center"||Je(t)?(h+=o.bottom,Pt(s.text)&&(h+=r.lineHeight*(s.text.length-1))):h+=o.top;const{titleX:d,titleY:m,maxWidth:_,rotation:b}=b7(this,h,t,c);Ul(e,s.text,0,0,r,{color:s.color,maxWidth:_,rotation:b,textAlign:v7(c,t,i),textBaseline:"middle",translation:[d,m]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=Fe(e.grid&&e.grid.z,-1),i=Fe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==GO.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=t.length;r<o;++r){const c=t[r];c[s]===this.id&&(!e||c.type===e)&&i.push(c)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return pn(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}};class jg{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;T7(t)&&(s=this.register(t));const i=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,x7(e,o,s),this.override&&Vt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,i=this.scope;s in t&&delete t[s],i&&s in Vt[i]&&(delete Vt[i][s],this.override&&delete jl[s])}}function x7(n,e,t){const s=bf(Object.create(null),[t?Vt.get(t):{},Vt.get(e),n.defaults]);Vt.set(e,s),n.defaultRoutes&&E7(e,n.defaultRoutes),n.descriptors&&Vt.describe(e,n.descriptors)}function E7(n,e){Object.keys(e).forEach(t=>{const s=t.split("."),i=s.pop(),r=[n].concat(s).join("."),o=e[t].split("."),c=o.pop(),h=o.join(".");Vt.route(r,i,h,c)})}function T7(n){return"id"in n&&"defaults"in n}class w7{constructor(){this.controllers=new jg(hi,"datasets",!0),this.elements=new jg(fi,"elements"),this.plugins=new jg(Object,"plugins"),this.scales=new jg(em,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,s){[...t].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(e,r,i):ft(i,o=>{const c=s||this._getRegistryForType(o);this._exec(e,c,o)})})}_exec(e,t,s){const i=kE(e);Tt(s["before"+i],[],s),t[e](s),Tt(s["after"+i],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return i}}var Ni=new w7;class S7{constructor(){this._init=[]}notify(e,t,s,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(r,e,t,s);return t==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,s,i){i=i||{};for(const r of e){const o=r.plugin,c=o[s],h=[t,i,r.options];if(Tt(c,h,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Xe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,i=Fe(s.options&&s.options.plugins,{}),r=A7(s);return i===!1&&!t?[]:R7(e,r,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(c=>!o.some(h=>c.plugin.id===h.plugin.id));this._notify(i(t,s),e,"stop"),this._notify(i(s,t),e,"start")}}function A7(n){const e={},t=[],s=Object.keys(Ni.plugins.items);for(let r=0;r<s.length;r++)t.push(Ni.getPlugin(s[r]));const i=n.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function I7(n,e){return!e&&n===!1?null:n===!0?{}:n}function R7(n,{plugins:e,localIds:t},s,i){const r=[],o=n.getContext();for(const c of e){const h=c.id,d=I7(s[h],i);d!==null&&r.push({plugin:c,options:C7(n.config,{plugin:c,local:t[h]},d,o)})}return r}function C7(n,{plugin:e,local:t},s,i){const r=n.pluginScopeKeys(e),o=n.getOptionScopes(s,r);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ib(n,e){const t=Vt.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function N7(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function D7(n,e){return n===e?"_index_":"_value_"}function hR(n){if(n==="x"||n==="y"||n==="r")return n}function k7(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Rb(n,...e){if(hR(n))return n;for(const t of e){const s=t.axis||k7(t.position)||n.length>1&&hR(n[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function dR(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function O7(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(s=>s.xAxisID===n||s.yAxisID===n);if(t.length)return dR(n,"x",t[0])||dR(n,"y",t[0])}return{}}function M7(n,e){const t=jl[n.type]||{scales:{}},s=e.scales||{},i=Ib(n.type,e),r=Object.create(null);return Object.keys(s).forEach(o=>{const c=s[o];if(!Je(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const h=Rb(o,c,O7(o,n),Vt.scales[c.type]),d=D7(h,i),m=t.scales||{};r[o]=qd(Object.create(null),[{axis:h},c,m[h],m[d]])}),n.data.datasets.forEach(o=>{const c=o.type||n.type,h=o.indexAxis||Ib(c,e),m=(jl[c]||{}).scales||{};Object.keys(m).forEach(_=>{const b=N7(_,h),E=o[b+"AxisID"]||b;r[E]=r[E]||Object.create(null),qd(r[E],[{axis:b},s[E],m[_]])})}),Object.keys(r).forEach(o=>{const c=r[o];qd(c,[Vt.scales[c.type],Vt.scale])}),r}function WO(n){const e=n.options||(n.options={});e.plugins=Fe(e.plugins,{}),e.scales=M7(n,e)}function $O(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function P7(n){return n=n||{},n.data=$O(n.data),WO(n),n}const fR=new Map,YO=new Set;function Ug(n,e){let t=fR.get(n);return t||(t=e(),fR.set(n,t),YO.add(t)),t}const fd=(n,e,t)=>{const s=ro(e,t);s!==void 0&&n.add(s)};class V7{constructor(e){this._config=P7(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=$O(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),WO(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ug(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Ug(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Ug(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,s=this.type;return Ug(`${s}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let i=s.get(e);return(!i||t)&&(i=new Map,s.set(e,i)),i}getOptionScopes(e,t,s){const{options:i,type:r}=this,o=this._cachedScopes(e,s),c=o.get(t);if(c)return c;const h=new Set;t.forEach(m=>{e&&(h.add(e),m.forEach(_=>fd(h,e,_))),m.forEach(_=>fd(h,i,_)),m.forEach(_=>fd(h,jl[r]||{},_)),m.forEach(_=>fd(h,Vt,_)),m.forEach(_=>fd(h,wb,_))});const d=Array.from(h);return d.length===0&&d.push(Object.create(null)),YO.has(t)&&o.set(t,d),d}chartOptionScopes(){const{options:e,type:t}=this;return[e,jl[t]||{},Vt.datasets[t]||{},{type:t},Vt,wb]}resolveNamedOptions(e,t,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:c}=mR(this._resolverCache,e,i);let h=o;if(j7(o,t)){r.$shared=!1,s=ao(s)?s():s;const d=this.createResolver(e,s,c);h=Ru(o,s,d)}for(const d of t)r[d]=h[d];return r}createResolver(e,t,s=[""],i){const{resolver:r}=mR(this._resolverCache,e,s);return Je(t)?Ru(r,t,void 0,i):r}}function mR(n,e,t){let s=n.get(e);s||(s=new Map,n.set(e,s));const i=t.join();let r=s.get(i);return r||(r={resolver:jE(e,t),subPrefixes:t.filter(c=>!c.toLowerCase().includes("hover"))},s.set(i,r)),r}const L7=n=>Je(n)&&Object.getOwnPropertyNames(n).some(e=>ao(n[e]));function j7(n,e){const{isScriptable:t,isIndexable:s}=SO(n);for(const i of e){const r=t(i),o=s(i),c=(o||r)&&n[i];if(r&&(ao(c)||L7(c))||o&&Pt(c))return!0}return!1}var U7="4.5.0";const F7=["top","bottom","left","right","chartArea"];function gR(n,e){return n==="top"||n==="bottom"||F7.indexOf(n)===-1&&e==="x"}function pR(n,e){return function(t,s){return t[n]===s[n]?t[e]-s[e]:t[n]-s[n]}}function _R(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Tt(t&&t.onComplete,[n],e)}function B7(n){const e=n.chart,t=e.options.animation;Tt(t&&t.onProgress,[n],e)}function KO(n){return BE()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const hp={},yR=n=>{const e=KO(n);return Object.values(hp).filter(t=>t.canvas===e).pop()};function z7(n,e,t){const s=Object.keys(n);for(const i of s){const r=+i;if(r>=e){const o=n[i];delete n[i],(t>0||r>e)&&(n[r+t]=o)}}}function H7(n,e,t,s){return!t||n.type==="mouseout"?null:s?e:n}class On{static register(...e){Ni.add(...e),vR()}static unregister(...e){Ni.remove(...e),vR()}constructor(e,t){const s=this.config=new V7(t),i=KO(e),r=yR(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||o7(i)),this.platform.updateConfig(s);const c=this.platform.acquireContext(i,o.aspectRatio),h=c&&c.canvas,d=h&&h.height,m=h&&h.width;if(this.id=q9(),this.ctx=c,this.canvas=h,this.width=m,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new S7,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=oz(_=>this.update(_),o.resizeDelay||0),this._dataChanges=[],hp[this.id]=this,!c||!h){console.error("Failed to create chart: can't acquire context from the given item");return}vr.listen(this,"complete",_R),vr.listen(this,"progress",B7),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:i,_aspectRatio:r}=this;return Xe(e)?t&&r?r:i?s/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ni}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():B1(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return j1(this.canvas,this.ctx),this}stop(){return vr.stop(this),this}resize(e,t){vr.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,t,r),c=s.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,B1(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),Tt(s.onResize,[this,o],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};ft(t,(s,i)=>{s.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,i=Object.keys(s).reduce((o,c)=>(o[c]=!1,o),{});let r=[];t&&(r=r.concat(Object.keys(t).map(o=>{const c=t[o],h=Rb(o,c),d=h==="r",m=h==="x";return{options:c,dposition:d?"chartArea":m?"bottom":"left",dtype:d?"radialLinear":m?"category":"linear"}}))),ft(r,o=>{const c=o.options,h=c.id,d=Rb(h,c),m=Fe(c.type,o.dtype);(c.position===void 0||gR(c.position,d)!==gR(o.dposition))&&(c.position=o.dposition),i[h]=!0;let _=null;if(h in s&&s[h].type===m)_=s[h];else{const b=Ni.getScale(m);_=new b({id:h,type:m,ctx:this.ctx,chart:this}),s[_.id]=_}_.init(c,e)}),ft(i,(o,c)=>{o||delete s[c]}),ft(s,o=>{Wn.configure(this,o,o.options),Wn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((i,r)=>i.index-r.index),s>t){for(let i=t;i<s;++i)this._destroyDatasetMeta(i);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(pR("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((s,i)=>{t.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=t.length;s<i;s++){const r=t[s];let o=this.getDatasetMeta(s);const c=r.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=c,o.indexAxis=r.indexAxis||Ib(c,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const h=Ni.getController(c),{datasetElementType:d,dataElementType:m}=Vt.datasets[c];Object.assign(h,{dataElementType:Ni.getElement(m),datasetElementType:d&&Ni.getElement(d)}),o.controller=new h(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ft(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,m=this.data.datasets.length;d<m;d++){const{controller:_}=this.getDatasetMeta(d),b=!i&&r.indexOf(_)===-1;_.buildOrUpdateElements(b),o=Math.max(+_.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||ft(r,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(pR("z","_idx"));const{_active:c,_lastEvent:h}=this;h?this._eventHandler(h,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){ft(this.scales,e=>{Wn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!C1(t,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of t){const o=s==="_removeElements"?-r:r;z7(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=r=>new Set(e.filter(o=>o[0]===r).map((o,c)=>c+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<t;r++)if(!C1(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Wn.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],ft(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,s=this.data.datasets.length;t<s;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,ao(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),i={meta:s,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(vr.has(this)?this.attached&&!vr.running(this)&&vr.start(this):(this.draw(),_R({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let i,r;for(i=0,r=t.length;i<r;++i){const o=t[i];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s={meta:e,index:e.index,cancelable:!0},i=VO(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&U_(t,i),e.controller.draw(),i&&F_(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Ir(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,i){const r=F8.modes[t];return typeof r=="function"?r(this,e,s,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let i=s.filter(r=>r&&r._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=_o(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!t.hidden}setDatasetVisibility(e,t){const s=this.getDatasetMeta(e);s.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const i=s?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,i);xf(t)?(r.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(r,{visible:s}),this.update(c=>c.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),vr.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),j1(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete hp[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(r,o)=>{t.addEventListener(this,r,o),e[r]=o},i=(r,o,c)=>{r.offsetX=o,r.offsetY=c,this._eventHandler(r)};ft(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(h,d)=>{t.addEventListener(this,h,d),e[h]=d},i=(h,d)=>{e[h]&&(t.removeEventListener(this,h,d),delete e[h])},r=(h,d)=>{this.canvas&&this.resize(h,d)};let o;const c=()=>{i("attach",c),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",c)},t.isAttached(this.canvas)?c():o()}unbindEvents(){ft(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},ft(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const i=s?"set":"remove";let r,o,c,h;for(t==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),c=0,h=e.length;c<h;++c){o=e[c];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(({datasetIndex:r,index:o})=>{const c=this.getDatasetMeta(r);if(!c)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:c.data[o],index:o}});!Fp(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,s){const i=this.options.hover,r=(h,d)=>h.filter(m=>!d.some(_=>m.datasetIndex===_.datasetIndex&&m.index===_.index)),o=r(t,e),c=s?e:r(e,t);o.length&&this.updateHoverStyle(o,i.mode,!1),c.length&&i.mode&&this.updateHoverStyle(c,i.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:i=[],options:r}=this,o=t,c=this._getActiveElements(e,i,s,o),h=Q9(e),d=H7(e,this._lastEvent,s,h);s&&(this._lastEvent=null,Tt(r.onHover,[e,c,this],this),h&&Tt(r.onClick,[e,c,this],this));const m=!Fp(c,i);return(m||t)&&(this._active=c,this._updateHoverStyles(c,i,t)),this._lastEvent=d,m}_getActiveElements(e,t,s,i){if(e.type==="mouseout")return[];if(!s)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}ye(On,"defaults",Vt),ye(On,"instances",hp),ye(On,"overrides",jl),ye(On,"registry",Ni),ye(On,"version",U7),ye(On,"getChart",yR);function vR(){return ft(On.instances,n=>n._plugins.invalidate())}function q7(n,e,t){const{startAngle:s,x:i,y:r,outerRadius:o,innerRadius:c,options:h}=e,{borderWidth:d,borderJoinStyle:m}=h,_=Math.min(d/o,qn(s-t));if(n.beginPath(),n.arc(i,r,o-d/2,s+_/2,t-_/2),c>0){const b=Math.min(d/c,qn(s-t));n.arc(i,r,c+d/2,t-b/2,s+b/2,!0)}else{const b=Math.min(d/2,o*qn(s-t));if(m==="round")n.arc(i,r,b,t-rt/2,s+rt/2,!0);else if(m==="bevel"){const E=2*b*b,S=-E*Math.cos(t+rt/2)+i,T=-E*Math.sin(t+rt/2)+r,R=E*Math.cos(s+rt/2)+i,k=E*Math.sin(s+rt/2)+r;n.lineTo(S,T),n.lineTo(R,k)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function G7(n,e,t){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:c,innerRadius:h}=e;let d=i/c;n.beginPath(),n.arc(r,o,c,s-d,t+d),h>i?(d=i/h,n.arc(r,o,h,t+d,s-d,!0)):n.arc(r,o,i,t+tn,s-tn),n.closePath(),n.clip()}function W7(n){return LE(n,["outerStart","outerEnd","innerStart","innerEnd"])}function $7(n,e,t,s){const i=W7(n.options.borderRadius),r=(t-e)/2,o=Math.min(r,s*e/2),c=h=>{const d=(t-Math.min(r,h))*s/2;return An(h,0,Math.min(r,d))};return{outerStart:c(i.outerStart),outerEnd:c(i.outerEnd),innerStart:An(i.innerStart,0,o),innerEnd:An(i.innerEnd,0,o)}}function Hc(n,e,t,s){return{x:t+n*Math.cos(e),y:s+n*Math.sin(e)}}function Wp(n,e,t,s,i,r){const{x:o,y:c,startAngle:h,pixelMargin:d,innerRadius:m}=e,_=Math.max(e.outerRadius+s+t-d,0),b=m>0?m+s+t+d:0;let E=0;const S=i-h;if(s){const be=m>0?m-s:0,Y=_>0?_-s:0,ae=(be+Y)/2,ge=ae!==0?S*ae/(ae+s):S;E=(S-ge)/2}const T=Math.max(.001,S*_-t/rt)/_,R=(S-T)/2,k=h+R+E,L=i-R-E,{outerStart:M,outerEnd:H,innerStart:U,innerEnd:z}=$7(e,b,_,L-k),C=_-M,I=_-H,N=k+M/C,V=L-H/I,j=b+U,F=b+z,O=k+U/j,ne=L-z/F;if(n.beginPath(),r){const be=(N+V)/2;if(n.arc(o,c,_,N,be),n.arc(o,c,_,be,V),H>0){const Ne=Hc(I,V,o,c);n.arc(Ne.x,Ne.y,H,V,L+tn)}const Y=Hc(F,L,o,c);if(n.lineTo(Y.x,Y.y),z>0){const Ne=Hc(F,ne,o,c);n.arc(Ne.x,Ne.y,z,L+tn,ne+Math.PI)}const ae=(L-z/b+(k+U/b))/2;if(n.arc(o,c,b,L-z/b,ae,!0),n.arc(o,c,b,ae,k+U/b,!0),U>0){const Ne=Hc(j,O,o,c);n.arc(Ne.x,Ne.y,U,O+Math.PI,k-tn)}const ge=Hc(C,k,o,c);if(n.lineTo(ge.x,ge.y),M>0){const Ne=Hc(C,N,o,c);n.arc(Ne.x,Ne.y,M,k-tn,N)}}else{n.moveTo(o,c);const be=Math.cos(N)*_+o,Y=Math.sin(N)*_+c;n.lineTo(be,Y);const ae=Math.cos(V)*_+o,ge=Math.sin(V)*_+c;n.lineTo(ae,ge)}n.closePath()}function Y7(n,e,t,s,i){const{fullCircles:r,startAngle:o,circumference:c}=e;let h=e.endAngle;if(r){Wp(n,e,t,s,h,i);for(let d=0;d<r;++d)n.fill();isNaN(c)||(h=o+(c%Rt||Rt))}return Wp(n,e,t,s,h,i),n.fill(),h}function K7(n,e,t,s,i){const{fullCircles:r,startAngle:o,circumference:c,options:h}=e,{borderWidth:d,borderJoinStyle:m,borderDash:_,borderDashOffset:b,borderRadius:E}=h,S=h.borderAlign==="inner";if(!d)return;n.setLineDash(_||[]),n.lineDashOffset=b,S?(n.lineWidth=d*2,n.lineJoin=m||"round"):(n.lineWidth=d,n.lineJoin=m||"bevel");let T=e.endAngle;if(r){Wp(n,e,t,s,T,i);for(let R=0;R<r;++R)n.stroke();isNaN(c)||(T=o+(c%Rt||Rt))}S&&G7(n,e,T),h.selfJoin&&T-o>=rt&&E===0&&m!=="miter"&&q7(n,e,T),r||(Wp(n,e,t,s,T,i),n.stroke())}class Sd extends fi{constructor(t){super();ye(this,"circumference");ye(this,"endAngle");ye(this,"fullCircles");ye(this,"innerRadius");ye(this,"outerRadius");ye(this,"pixelMargin");ye(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,s,i){const r=this.getProps(["x","y"],i),{angle:o,distance:c}=gO(r,{x:t,y:s}),{startAngle:h,endAngle:d,innerRadius:m,outerRadius:_,circumference:b}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),E=(this.options.spacing+this.options.borderWidth)/2,S=Fe(b,d-h),T=Ef(o,h,d)&&h!==d,R=S>=Rt||T,k=Sr(c,m+E,_+E);return R&&k}getCenterPoint(t){const{x:s,y:i,startAngle:r,endAngle:o,innerRadius:c,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:d,spacing:m}=this.options,_=(r+o)/2,b=(c+h+m+d)/2;return{x:s+Math.cos(_)*b,y:i+Math.sin(_)*b}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:s,circumference:i}=this,r=(s.offset||0)/4,o=(s.spacing||0)/2,c=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=i>Rt?Math.floor(i/Rt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const h=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(h)*r,Math.sin(h)*r);const d=1-Math.sin(Math.min(rt,i||0)),m=r*d;t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,Y7(t,this,m,o,c),K7(t,this,m,o,c),t.restore()}}ye(Sd,"id","arc"),ye(Sd,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ye(Sd,"defaultRoutes",{backgroundColor:"backgroundColor"}),ye(Sd,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function QO(n,e,t=e){n.lineCap=Fe(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Fe(t.borderDash,e.borderDash)),n.lineDashOffset=Fe(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Fe(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Fe(t.borderWidth,e.borderWidth),n.strokeStyle=Fe(t.borderColor,e.borderColor)}function Q7(n,e,t){n.lineTo(t.x,t.y)}function X7(n){return n.stepped?vz:n.tension||n.cubicInterpolationMode==="monotone"?bz:Q7}function XO(n,e,t={}){const s=n.length,{start:i=0,end:r=s-1}=t,{start:o,end:c}=e,h=Math.max(i,o),d=Math.min(r,c),m=i<o&&r<o||i>c&&r>c;return{count:s,start:h,loop:e.loop,ilen:d<h&&!m?s+d-h:d-h}}function Z7(n,e,t,s){const{points:i,options:r}=e,{count:o,start:c,loop:h,ilen:d}=XO(i,t,s),m=X7(r);let{move:_=!0,reverse:b}=s||{},E,S,T;for(E=0;E<=d;++E)S=i[(c+(b?d-E:E))%o],!S.skip&&(_?(n.moveTo(S.x,S.y),_=!1):m(n,T,S,b,r.stepped),T=S);return h&&(S=i[(c+(b?d:0))%o],m(n,T,S,b,r.stepped)),!!h}function J7(n,e,t,s){const i=e.points,{count:r,start:o,ilen:c}=XO(i,t,s),{move:h=!0,reverse:d}=s||{};let m=0,_=0,b,E,S,T,R,k;const L=H=>(o+(d?c-H:H))%r,M=()=>{T!==R&&(n.lineTo(m,R),n.lineTo(m,T),n.lineTo(m,k))};for(h&&(E=i[L(0)],n.moveTo(E.x,E.y)),b=0;b<=c;++b){if(E=i[L(b)],E.skip)continue;const H=E.x,U=E.y,z=H|0;z===S?(U<T?T=U:U>R&&(R=U),m=(_*m+H)/++_):(M(),n.lineTo(H,U),S=z,_=0,T=R=U),k=U}M()}function Cb(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?J7:Z7}function eH(n){return n.stepped?Zz:n.tension||n.cubicInterpolationMode==="monotone"?Jz:cl}function tH(n,e,t,s){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,s)&&i.closePath()),QO(n,e.options),n.stroke(i)}function nH(n,e,t,s){const{segments:i,options:r}=e,o=Cb(e);for(const c of i)QO(n,r,c.style),n.beginPath(),o(n,e,c,{start:t,end:t+s-1})&&n.closePath(),n.stroke()}const sH=typeof Path2D=="function";function iH(n,e,t,s){sH&&!e.options.segment?tH(n,e,t,s):nH(n,e,t,s)}class ja extends fi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;qz(this._points,s,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=r8(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,s=e.length;return s&&t[e[s-1].end]}interpolate(e,t){const s=this.options,i=e[t],r=this.points,o=PO(this,{property:t,start:i,end:i});if(!o.length)return;const c=[],h=eH(s);let d,m;for(d=0,m=o.length;d<m;++d){const{start:_,end:b}=o[d],E=r[_],S=r[b];if(E===S){c.push(E);continue}const T=Math.abs((i-E[t])/(S[t]-E[t])),R=h(E,S,T,s.stepped);R[t]=e[t],c.push(R)}return c.length===1?c[0]:c}pathSegment(e,t,s){return Cb(this)(e,this,t,s)}path(e,t,s){const i=this.segments,r=Cb(this);let o=this._loop;t=t||0,s=s||this.points.length-t;for(const c of i)o&=r(e,this,c,{start:t,end:t+s-1});return!!o}draw(e,t,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),iH(e,this,s,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ye(ja,"id","line"),ye(ja,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ye(ja,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ye(ja,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function bR(n,e,t,s){const i=n.options,{[t]:r}=n.getProps([t],s);return Math.abs(e-r)<i.radius+i.hitRadius}class dp extends fi{constructor(t){super();ye(this,"parsed");ye(this,"skip");ye(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,s,i){const r=this.options,{x:o,y:c}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(s-c,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,s){return bR(this,t,"x",s)}inYRange(t,s){return bR(this,t,"y",s)}getCenterPoint(t){const{x:s,y:i}=this.getProps(["x","y"],t);return{x:s,y:i}}size(t){t=t||this.options||{};let s=t.radius||0;s=Math.max(s,s&&t.hoverRadius||0);const i=s&&t.borderWidth||0;return(s+i)*2}draw(t,s){const i=this.options;this.skip||i.radius<.1||!Ir(this,s,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,Sb(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}ye(dp,"id","point"),ye(dp,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ye(dp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function ZO(n,e){const{x:t,y:s,base:i,width:r,height:o}=n.getProps(["x","y","base","width","height"],e);let c,h,d,m,_;return n.horizontal?(_=o/2,c=Math.min(t,i),h=Math.max(t,i),d=s-_,m=s+_):(_=r/2,c=t-_,h=t+_,d=Math.min(s,i),m=Math.max(s,i)),{left:c,top:d,right:h,bottom:m}}function Ua(n,e,t,s){return n?0:An(e,t,s)}function rH(n,e,t){const s=n.options.borderWidth,i=n.borderSkipped,r=wO(s);return{t:Ua(i.top,r.top,0,t),r:Ua(i.right,r.right,0,e),b:Ua(i.bottom,r.bottom,0,t),l:Ua(i.left,r.left,0,e)}}function aH(n,e,t){const{enableBorderRadius:s}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,r=wl(i),o=Math.min(e,t),c=n.borderSkipped,h=s||Je(i);return{topLeft:Ua(!h||c.top||c.left,r.topLeft,0,o),topRight:Ua(!h||c.top||c.right,r.topRight,0,o),bottomLeft:Ua(!h||c.bottom||c.left,r.bottomLeft,0,o),bottomRight:Ua(!h||c.bottom||c.right,r.bottomRight,0,o)}}function oH(n){const e=ZO(n),t=e.right-e.left,s=e.bottom-e.top,i=rH(n,t/2,s/2),r=aH(n,t/2,s/2);return{outer:{x:e.left,y:e.top,w:t,h:s,radius:r},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function Av(n,e,t,s){const i=e===null,r=t===null,c=n&&!(i&&r)&&ZO(n,s);return c&&(i||Sr(e,c.left,c.right))&&(r||Sr(t,c.top,c.bottom))}function lH(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function cH(n,e){n.rect(e.x,e.y,e.w,e.h)}function Iv(n,e,t={}){const s=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,r=(n.x+n.w!==t.x+t.w?e:0)-s,o=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+s,y:n.y+i,w:n.w+r,h:n.h+o,radius:n.radius}}class fp extends fi{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:s,backgroundColor:i}}=this,{inner:r,outer:o}=oH(this),c=lH(o.radius)?Tf:cH;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),c(e,Iv(o,t,r)),e.clip(),c(e,Iv(r,-t,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),c(e,Iv(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,s){return Av(this,e,t,s)}inXRange(e,t){return Av(this,e,null,t)}inYRange(e,t){return Av(this,null,e,t)}getCenterPoint(e){const{x:t,y:s,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?s:(s+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ye(fp,"id","bar"),ye(fp,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ye(fp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var uH=Object.freeze({__proto__:null,ArcElement:Sd,BarElement:fp,LineElement:ja,PointElement:dp});const Nb=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],xR=Nb.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function JO(n){return Nb[n%Nb.length]}function eM(n){return xR[n%xR.length]}function hH(n,e){return n.borderColor=JO(e),n.backgroundColor=eM(e),++e}function dH(n,e){return n.backgroundColor=n.data.map(()=>JO(e++)),e}function fH(n,e){return n.backgroundColor=n.data.map(()=>eM(e++)),e}function mH(n){let e=0;return(t,s)=>{const i=n.getDatasetMeta(s).controller;i instanceof vl?e=dH(t,e):i instanceof Yd?e=fH(t,e):i&&(e=hH(t,e))}}function ER(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function gH(n){return n&&(n.borderColor||n.backgroundColor)}function pH(){return Vt.borderColor!=="rgba(0,0,0,0.1)"||Vt.backgroundColor!=="rgba(0,0,0,0.1)"}var _H={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;const{data:{datasets:s},options:i}=n.config,{elements:r}=i,o=ER(s)||gH(i)||r&&ER(r)||pH();if(!t.forceOverride&&o)return;const c=mH(n);s.forEach(c)}};function yH(n,e,t,s,i){const r=i.samples||s;if(r>=t)return n.slice(e,e+t);const o=[],c=(t-2)/(r-2);let h=0;const d=e+t-1;let m=e,_,b,E,S,T;for(o[h++]=n[m],_=0;_<r-2;_++){let R=0,k=0,L;const M=Math.floor((_+1)*c)+1+e,H=Math.min(Math.floor((_+2)*c)+1,t)+e,U=H-M;for(L=M;L<H;L++)R+=n[L].x,k+=n[L].y;R/=U,k/=U;const z=Math.floor(_*c)+1+e,C=Math.min(Math.floor((_+1)*c)+1,t)+e,{x:I,y:N}=n[m];for(E=S=-1,L=z;L<C;L++)S=.5*Math.abs((I-R)*(n[L].y-N)-(I-n[L].x)*(k-N)),S>E&&(E=S,b=n[L],T=L);o[h++]=b,m=T}return o[h++]=n[d],o}function vH(n,e,t,s){let i=0,r=0,o,c,h,d,m,_,b,E,S,T;const R=[],k=e+t-1,L=n[e].x,H=n[k].x-L;for(o=e;o<e+t;++o){c=n[o],h=(c.x-L)/H*s,d=c.y;const U=h|0;if(U===m)d<S?(S=d,_=o):d>T&&(T=d,b=o),i=(r*i+c.x)/++r;else{const z=o-1;if(!Xe(_)&&!Xe(b)){const C=Math.min(_,b),I=Math.max(_,b);C!==E&&C!==z&&R.push({...n[C],x:i}),I!==E&&I!==z&&R.push({...n[I],x:i})}o>0&&z!==E&&R.push(n[z]),R.push(c),m=U,r=0,S=T=d,_=b=E=o}}return R}function tM(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function TR(n){n.data.datasets.forEach(e=>{tM(e)})}function bH(n,e){const t=e.length;let s=0,i;const{iScale:r}=n,{min:o,max:c,minDefined:h,maxDefined:d}=r.getUserBounds();return h&&(s=An(Ar(e,r.axis,o).lo,0,t-1)),d?i=An(Ar(e,r.axis,c).hi+1,s,t)-s:i=t-s,{start:s,count:i}}var xH={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){TR(n);return}const s=n.width;n.data.datasets.forEach((i,r)=>{const{_data:o,indexAxis:c}=i,h=n.getDatasetMeta(r),d=o||i.data;if(Td([c,n.options.indexAxis])==="y"||!h.controller.supportsDecimation)return;const m=n.scales[h.xAxisID];if(m.type!=="linear"&&m.type!=="time"||n.options.parsing)return;let{start:_,count:b}=bH(h,d);const E=t.threshold||4*s;if(b<=E){tM(i);return}Xe(o)&&(i._data=d,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(T){this._data=T}}));let S;switch(t.algorithm){case"lttb":S=yH(d,_,b,s,t);break;case"min-max":S=vH(d,_,b,s);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=S})},destroy(n){TR(n)}};function EH(n,e,t){const s=n.segments,i=n.points,r=e.points,o=[];for(const c of s){let{start:h,end:d}=c;d=H_(h,d,i);const m=Db(t,i[h],i[d],c.loop);if(!e.segments){o.push({source:c,target:m,start:i[h],end:i[d]});continue}const _=PO(e,m);for(const b of _){const E=Db(t,r[b.start],r[b.end],b.loop),S=MO(c,i,E);for(const T of S)o.push({source:T,target:b,start:{[t]:wR(m,E,"start",Math.max)},end:{[t]:wR(m,E,"end",Math.min)}})}}return o}function Db(n,e,t,s){if(s)return;let i=e[n],r=t[n];return n==="angle"&&(i=qn(i),r=qn(r)),{property:n,start:i,end:r}}function TH(n,e){const{x:t=null,y:s=null}=n||{},i=e.points,r=[];return e.segments.forEach(({start:o,end:c})=>{c=H_(o,c,i);const h=i[o],d=i[c];s!==null?(r.push({x:h.x,y:s}),r.push({x:d.x,y:s})):t!==null&&(r.push({x:t,y:h.y}),r.push({x:t,y:d.y}))}),r}function H_(n,e,t){for(;e>n;e--){const s=t[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function wR(n,e,t,s){return n&&e?s(n[t],e[t]):n?n[t]:e?e[t]:0}function nM(n,e){let t=[],s=!1;return Pt(n)?(s=!0,t=n):t=TH(n,e),t.length?new ja({points:t,options:{tension:0},_loop:s,_fullLoop:s}):null}function SR(n){return n&&n.fill!==!1}function wH(n,e,t){let i=n[e].fill;const r=[e];let o;if(!t)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!Ht(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function SH(n,e,t){const s=CH(n);if(Je(s))return isNaN(s.value)?!1:s;let i=parseFloat(s);return Ht(i)&&Math.floor(i)===i?AH(s[0],e,i,t):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function AH(n,e,t,s){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=s?!1:t}function IH(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Je(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function RH(n,e,t){let s;return n==="start"?s=t:n==="end"?s=e.options.reverse?e.min:e.max:Je(n)?s=n.value:s=e.getBaseValue(),s}function CH(n){const e=n.options,t=e.fill;let s=Fe(t&&t.target,t);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function NH(n){const{scale:e,index:t,line:s}=n,i=[],r=s.segments,o=s.points,c=DH(e,t);c.push(nM({x:null,y:e.bottom},s));for(let h=0;h<r.length;h++){const d=r[h];for(let m=d.start;m<=d.end;m++)kH(i,o[m],c)}return new ja({points:i,options:{}})}function DH(n,e){const t=[],s=n.getMatchingVisibleMetas("line");for(let i=0;i<s.length;i++){const r=s[i];if(r.index===e)break;r.hidden||t.unshift(r.dataset)}return t}function kH(n,e,t){const s=[];for(let i=0;i<t.length;i++){const r=t[i],{first:o,last:c,point:h}=OH(r,e,"x");if(!(!h||o&&c)){if(o)s.unshift(h);else if(n.push(h),!c)break}}n.push(...s)}function OH(n,e,t){const s=n.interpolate(e,t);if(!s)return{};const i=s[t],r=n.segments,o=n.points;let c=!1,h=!1;for(let d=0;d<r.length;d++){const m=r[d],_=o[m.start][t],b=o[m.end][t];if(Sr(i,_,b)){c=i===_,h=i===b;break}}return{first:c,last:h,point:s}}class sM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,s){const{x:i,y:r,radius:o}=this;return t=t||{start:0,end:Rt},e.arc(i,r,o,t.end,t.start,!0),!s.bounds}interpolate(e){const{x:t,y:s,radius:i}=this,r=e.angle;return{x:t+Math.cos(r)*i,y:s+Math.sin(r)*i,angle:r}}}function MH(n){const{chart:e,fill:t,line:s}=n;if(Ht(t))return PH(e,t);if(t==="stack")return NH(n);if(t==="shape")return!0;const i=VH(n);return i instanceof sM?i:nM(i,s)}function PH(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function VH(n){return(n.scale||{}).getPointPositionForValue?jH(n):LH(n)}function LH(n){const{scale:e={},fill:t}=n,s=IH(t,e);if(Ht(s)){const i=e.isHorizontal();return{x:i?s:null,y:i?null:s}}return null}function jH(n){const{scale:e,fill:t}=n,s=e.options,i=e.getLabels().length,r=s.reverse?e.max:e.min,o=RH(t,e,r),c=[];if(s.grid.circular){const h=e.getPointPositionForValue(0,r);return new sM({x:h.x,y:h.y,radius:e.getDistanceFromCenterForValue(o)})}for(let h=0;h<i;++h)c.push(e.getPointPositionForValue(h,o));return c}function Rv(n,e,t){const s=MH(e),{chart:i,index:r,line:o,scale:c,axis:h}=e,d=o.options,m=d.fill,_=d.backgroundColor,{above:b=_,below:E=_}=m||{},S=i.getDatasetMeta(r),T=VO(i,S);s&&o.points.length&&(U_(n,t),UH(n,{line:o,target:s,above:b,below:E,area:t,scale:c,axis:h,clip:T}),F_(n))}function UH(n,e){const{line:t,target:s,above:i,below:r,area:o,scale:c,clip:h}=e,d=t._loop?"angle":e.axis;n.save();let m=r;r!==i&&(d==="x"?(AR(n,s,o.top),Cv(n,{line:t,target:s,color:i,scale:c,property:d,clip:h}),n.restore(),n.save(),AR(n,s,o.bottom)):d==="y"&&(IR(n,s,o.left),Cv(n,{line:t,target:s,color:r,scale:c,property:d,clip:h}),n.restore(),n.save(),IR(n,s,o.right),m=i)),Cv(n,{line:t,target:s,color:m,scale:c,property:d,clip:h}),n.restore()}function AR(n,e,t){const{segments:s,points:i}=e;let r=!0,o=!1;n.beginPath();for(const c of s){const{start:h,end:d}=c,m=i[h],_=i[H_(h,d,i)];r?(n.moveTo(m.x,m.y),r=!1):(n.lineTo(m.x,t),n.lineTo(m.x,m.y)),o=!!e.pathSegment(n,c,{move:o}),o?n.closePath():n.lineTo(_.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function IR(n,e,t){const{segments:s,points:i}=e;let r=!0,o=!1;n.beginPath();for(const c of s){const{start:h,end:d}=c,m=i[h],_=i[H_(h,d,i)];r?(n.moveTo(m.x,m.y),r=!1):(n.lineTo(t,m.y),n.lineTo(m.x,m.y)),o=!!e.pathSegment(n,c,{move:o}),o?n.closePath():n.lineTo(t,_.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function Cv(n,e){const{line:t,target:s,property:i,color:r,scale:o,clip:c}=e,h=EH(t,s,i);for(const{source:d,target:m,start:_,end:b}of h){const{style:{backgroundColor:E=r}={}}=d,S=s!==!0;n.save(),n.fillStyle=E,FH(n,o,c,S&&Db(i,_,b)),n.beginPath();const T=!!t.pathSegment(n,d);let R;if(S){T?n.closePath():RR(n,s,b,i);const k=!!s.pathSegment(n,m,{move:T,reverse:!0});R=T&&k,R||RR(n,s,_,i)}n.closePath(),n.fill(R?"evenodd":"nonzero"),n.restore()}}function FH(n,e,t,s){const i=e.chart.chartArea,{property:r,start:o,end:c}=s||{};if(r==="x"||r==="y"){let h,d,m,_;r==="x"?(h=o,d=i.top,m=c,_=i.bottom):(h=i.left,d=o,m=i.right,_=c),n.beginPath(),t&&(h=Math.max(h,t.left),m=Math.min(m,t.right),d=Math.max(d,t.top),_=Math.min(_,t.bottom)),n.rect(h,d,m-h,_-d),n.clip()}}function RR(n,e,t,s){const i=e.interpolate(t,s);i&&n.lineTo(i.x,i.y)}var BH={id:"filler",afterDatasetsUpdate(n,e,t){const s=(n.data.datasets||[]).length,i=[];let r,o,c,h;for(o=0;o<s;++o)r=n.getDatasetMeta(o),c=r.dataset,h=null,c&&c.options&&c instanceof ja&&(h={visible:n.isDatasetVisible(o),index:o,fill:SH(c,o,s),chart:n,axis:r.controller.options.indexAxis,scale:r.vScale,line:c}),r.$filler=h,i.push(h);for(o=0;o<s;++o)h=i[o],!(!h||h.fill===!1)&&(h.fill=wH(i,o,t.propagate))},beforeDraw(n,e,t){const s=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),r=n.chartArea;for(let o=i.length-1;o>=0;--o){const c=i[o].$filler;c&&(c.line.updateControlPoints(r,c.axis),s&&c.fill&&Rv(n.ctx,c,r))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const s=n.getSortedVisibleDatasetMetas();for(let i=s.length-1;i>=0;--i){const r=s[i].$filler;SR(r)&&Rv(n.ctx,r,n.chartArea)}},beforeDatasetDraw(n,e,t){const s=e.meta.$filler;!SR(s)||t.drawTime!=="beforeDatasetDraw"||Rv(n.ctx,s,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const CR=(n,e)=>{let{boxHeight:t=e,boxWidth:s=e}=n;return n.usePointStyle&&(t=Math.min(t,e),s=n.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:t,itemHeight:Math.max(e,t)}},zH=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class NR extends fi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Tt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(s=>e.filter(s,this.chart.data))),e.sort&&(t=t.sort((s,i)=>e.sort(s,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,i=pn(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:h}=CR(s,r);let d,m;t.font=i.string,this.isHorizontal()?(d=this.maxWidth,m=this._fitRows(o,r,c,h)+10):(m=this.maxHeight,d=this._fitCols(o,i,c,h)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(m,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],d=this.lineWidths=[0],m=i+c;let _=e;r.textAlign="left",r.textBaseline="middle";let b=-1,E=-m;return this.legendItems.forEach((S,T)=>{const R=s+t/2+r.measureText(S.text).width;(T===0||d[d.length-1]+R+2*c>o)&&(_+=m,d[d.length-(T>0?0:1)]=0,E+=m,b++),h[T]={left:0,top:E,row:b,width:R,height:i},d[d.length-1]+=R+c}),_}_fitCols(e,t,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:c}}}=this,h=this.legendHitBoxes=[],d=this.columnSizes=[],m=o-e;let _=c,b=0,E=0,S=0,T=0;return this.legendItems.forEach((R,k)=>{const{itemWidth:L,itemHeight:M}=HH(s,t,r,R,i);k>0&&E+M+2*c>m&&(_+=b+c,d.push({width:b,height:E}),S+=b+c,T++,b=E=0),h[k]={left:S,top:E,col:T,width:L,height:M},b=Math.max(b,L),E+=M+c}),_+=b,d.push({width:b,height:E}),_}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:i},rtl:r}}=this,o=su(r,this.left,this.width);if(this.isHorizontal()){let c=0,h=zn(s,this.left+i,this.right-this.lineWidths[c]);for(const d of t)c!==d.row&&(c=d.row,h=zn(s,this.left+i,this.right-this.lineWidths[c])),d.top+=this.top+e+i,d.left=o.leftForLtr(o.x(h),d.width),h+=d.width+i}else{let c=0,h=zn(s,this.top+e+i,this.bottom-this.columnSizes[c].height);for(const d of t)d.col!==c&&(c=d.col,h=zn(s,this.top+e+i,this.bottom-this.columnSizes[c].height)),d.top=h,d.left+=this.left+i,d.left=o.leftForLtr(o.x(d.left),d.width),h+=d.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;U_(e,this),this._draw(),F_(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:i}=this,{align:r,labels:o}=e,c=Vt.color,h=su(e.rtl,this.left,this.width),d=pn(o.font),{padding:m}=o,_=d.size,b=_/2;let E;this.drawTitle(),i.textAlign=h.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=d.string;const{boxWidth:S,boxHeight:T,itemHeight:R}=CR(o,_),k=function(z,C,I){if(isNaN(S)||S<=0||isNaN(T)||T<0)return;i.save();const N=Fe(I.lineWidth,1);if(i.fillStyle=Fe(I.fillStyle,c),i.lineCap=Fe(I.lineCap,"butt"),i.lineDashOffset=Fe(I.lineDashOffset,0),i.lineJoin=Fe(I.lineJoin,"miter"),i.lineWidth=N,i.strokeStyle=Fe(I.strokeStyle,c),i.setLineDash(Fe(I.lineDash,[])),o.usePointStyle){const V={radius:T*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:N},j=h.xPlus(z,S/2),F=C+b;TO(i,V,j,F,o.pointStyleWidth&&S)}else{const V=C+Math.max((_-T)/2,0),j=h.leftForLtr(z,S),F=wl(I.borderRadius);i.beginPath(),Object.values(F).some(O=>O!==0)?Tf(i,{x:j,y:V,w:S,h:T,radius:F}):i.rect(j,V,S,T),i.fill(),N!==0&&i.stroke()}i.restore()},L=function(z,C,I){Ul(i,I.text,z,C+R/2,d,{strikethrough:I.hidden,textAlign:h.textAlign(I.textAlign)})},M=this.isHorizontal(),H=this._computeTitleHeight();M?E={x:zn(r,this.left+m,this.right-s[0]),y:this.top+m+H,line:0}:E={x:this.left+m,y:zn(r,this.top+H+m,this.bottom-t[0].height),line:0},DO(this.ctx,e.textDirection);const U=R+m;this.legendItems.forEach((z,C)=>{i.strokeStyle=z.fontColor,i.fillStyle=z.fontColor;const I=i.measureText(z.text).width,N=h.textAlign(z.textAlign||(z.textAlign=o.textAlign)),V=S+b+I;let j=E.x,F=E.y;h.setWidth(this.width),M?C>0&&j+V+m>this.right&&(F=E.y+=U,E.line++,j=E.x=zn(r,this.left+m,this.right-s[E.line])):C>0&&F+U>this.bottom&&(j=E.x=j+t[E.line].width+m,E.line++,F=E.y=zn(r,this.top+H+m,this.bottom-t[E.line].height));const O=h.x(j);if(k(O,F,z),j=lz(N,j+S+b,M?j+V:this.right,e.rtl),L(h.x(j),F,z),M)E.x+=V+m;else if(typeof z.text!="string"){const ne=d.lineHeight;E.y+=iM(z,ne)+m}else E.y+=U}),kO(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=pn(t.font),i=Yn(t.padding);if(!t.display)return;const r=su(e.rtl,this.left,this.width),o=this.ctx,c=t.position,h=s.size/2,d=i.top+h;let m,_=this.left,b=this.width;if(this.isHorizontal())b=Math.max(...this.lineWidths),m=this.top+d,_=zn(e.align,_,this.right-b);else{const S=this.columnSizes.reduce((T,R)=>Math.max(T,R.height),0);m=d+zn(e.align,this.top,this.bottom-S-e.labels.padding-this._computeTitleHeight())}const E=zn(c,_,_+b);o.textAlign=r.textAlign(PE(c)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=s.string,Ul(o,t.text,E,m,s)}_computeTitleHeight(){const e=this.options.title,t=pn(e.font),s=Yn(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,i,r;if(Sr(e,this.left,this.right)&&Sr(t,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],Sr(e,i.left,i.left+i.width)&&Sr(t,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(e){const t=this.options;if(!WH(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,r=zH(i,s);i&&!r&&Tt(t.onLeave,[e,i,this],this),this._hoveredItem=s,s&&!r&&Tt(t.onHover,[e,s,this],this)}else s&&Tt(t.onClick,[e,s,this],this)}}function HH(n,e,t,s,i){const r=qH(s,n,e,t),o=GH(i,s,e.lineHeight);return{itemWidth:r,itemHeight:o}}function qH(n,e,t,s){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),e+t.size/2+s.measureText(i).width}function GH(n,e,t){let s=n;return typeof e.text!="string"&&(s=iM(e,t)),s}function iM(n,e){const t=n.text?n.text.length:0;return e*t}function WH(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var $H={id:"legend",_element:NR,start(n,e,t){const s=n.legend=new NR({ctx:n.ctx,options:t,chart:n});Wn.configure(n,s,t),Wn.addBox(n,s)},stop(n){Wn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const s=n.legend;Wn.configure(n,s,t),s.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const s=e.datasetIndex,i=t.chart;i.isDatasetVisible(s)?(i.hide(s),e.hidden=!0):(i.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:c}}=n.legend.options;return n._getSortedDatasetMetas().map(h=>{const d=h.controller.getStyle(t?0:void 0),m=Yn(d.borderWidth);return{text:e[h.index].label,fillStyle:d.backgroundColor,fontColor:r,hidden:!h.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:i||d.textAlign,borderRadius:o&&(c||d.borderRadius),datasetIndex:h.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class qE extends fi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=Pt(s.text)?s.text.length:1;this._padding=Yn(s.padding);const r=i*pn(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:s,bottom:i,right:r,options:o}=this,c=o.align;let h=0,d,m,_;return this.isHorizontal()?(m=zn(c,s,r),_=t+e,d=r-s):(o.position==="left"?(m=s+e,_=zn(c,i,t),h=rt*-.5):(m=r-e,_=zn(c,t,i),h=rt*.5),d=i-t),{titleX:m,titleY:_,maxWidth:d,rotation:h}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const s=pn(t.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:h,rotation:d}=this._drawArgs(r);Ul(e,t.text,0,0,s,{color:t.color,maxWidth:h,rotation:d,textAlign:PE(t.align),textBaseline:"middle",translation:[o,c]})}}function YH(n,e){const t=new qE({ctx:n.ctx,options:e,chart:n});Wn.configure(n,t,e),Wn.addBox(n,t),n.titleBlock=t}var KH={id:"title",_element:qE,start(n,e,t){YH(n,t)},stop(n){const e=n.titleBlock;Wn.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const s=n.titleBlock;Wn.configure(n,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Fg=new WeakMap;var QH={id:"subtitle",start(n,e,t){const s=new qE({ctx:n.ctx,options:t,chart:n});Wn.configure(n,s,t),Wn.addBox(n,s),Fg.set(n,s)},stop(n){Wn.removeBox(n,Fg.get(n)),Fg.delete(n)},beforeUpdate(n,e,t){const s=Fg.get(n);Wn.configure(n,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ad={average(n){if(!n.length)return!1;let e,t,s=new Set,i=0,r=0;for(e=0,t=n.length;e<t;++e){const c=n[e].element;if(c&&c.hasValue()){const h=c.tooltipPosition();s.add(h.x),i+=h.y,++r}}return r===0||s.size===0?!1:{x:[...s].reduce((c,h)=>c+h)/s.size,y:i/r}},nearest(n,e){if(!n.length)return!1;let t=e.x,s=e.y,i=Number.POSITIVE_INFINITY,r,o,c;for(r=0,o=n.length;r<o;++r){const h=n[r].element;if(h&&h.hasValue()){const d=h.getCenterPoint(),m=Tb(e,d);m<i&&(i=m,c=h)}}if(c){const h=c.tooltipPosition();t=h.x,s=h.y}return{x:t,y:s}}};function Ci(n,e){return e&&(Pt(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function br(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function XH(n,e){const{element:t,datasetIndex:s,index:i}=e,r=n.getDatasetMeta(s).controller,{label:o,value:c}=r.getLabelAndValue(i);return{chart:n,label:o,parsed:r.getParsed(i),raw:n.data.datasets[s].data[i],formattedValue:c,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:t}}function DR(n,e){const t=n.chart.ctx,{body:s,footer:i,title:r}=n,{boxWidth:o,boxHeight:c}=e,h=pn(e.bodyFont),d=pn(e.titleFont),m=pn(e.footerFont),_=r.length,b=i.length,E=s.length,S=Yn(e.padding);let T=S.height,R=0,k=s.reduce((H,U)=>H+U.before.length+U.lines.length+U.after.length,0);if(k+=n.beforeBody.length+n.afterBody.length,_&&(T+=_*d.lineHeight+(_-1)*e.titleSpacing+e.titleMarginBottom),k){const H=e.displayColors?Math.max(c,h.lineHeight):h.lineHeight;T+=E*H+(k-E)*h.lineHeight+(k-1)*e.bodySpacing}b&&(T+=e.footerMarginTop+b*m.lineHeight+(b-1)*e.footerSpacing);let L=0;const M=function(H){R=Math.max(R,t.measureText(H).width+L)};return t.save(),t.font=d.string,ft(n.title,M),t.font=h.string,ft(n.beforeBody.concat(n.afterBody),M),L=e.displayColors?o+2+e.boxPadding:0,ft(s,H=>{ft(H.before,M),ft(H.lines,M),ft(H.after,M)}),L=0,t.font=m.string,ft(n.footer,M),t.restore(),R+=S.width,{width:R,height:T}}function ZH(n,e){const{y:t,height:s}=e;return t<s/2?"top":t>n.height-s/2?"bottom":"center"}function JH(n,e,t,s){const{x:i,width:r}=s,o=t.caretSize+t.caretPadding;if(n==="left"&&i+r+o>e.width||n==="right"&&i-r-o<0)return!0}function eq(n,e,t,s){const{x:i,width:r}=t,{width:o,chartArea:{left:c,right:h}}=n;let d="center";return s==="center"?d=i<=(c+h)/2?"left":"right":i<=r/2?d="left":i>=o-r/2&&(d="right"),JH(d,n,e,t)&&(d="center"),d}function kR(n,e,t){const s=t.yAlign||e.yAlign||ZH(n,t);return{xAlign:t.xAlign||e.xAlign||eq(n,e,t,s),yAlign:s}}function tq(n,e){let{x:t,width:s}=n;return e==="right"?t-=s:e==="center"&&(t-=s/2),t}function nq(n,e,t){let{y:s,height:i}=n;return e==="top"?s+=t:e==="bottom"?s-=i+t:s-=i/2,s}function OR(n,e,t,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=n,{xAlign:c,yAlign:h}=t,d=i+r,{topLeft:m,topRight:_,bottomLeft:b,bottomRight:E}=wl(o);let S=tq(e,c);const T=nq(e,h,d);return h==="center"?c==="left"?S+=d:c==="right"&&(S-=d):c==="left"?S-=Math.max(m,b)+i:c==="right"&&(S+=Math.max(_,E)+i),{x:An(S,0,s.width-e.width),y:An(T,0,s.height-e.height)}}function Bg(n,e,t){const s=Yn(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-s.right:n.x+s.left}function MR(n){return Ci([],br(n))}function sq(n,e,t){return _o(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function PR(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const rM={beforeTitle:yr,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,s=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return t[e.dataIndex]}return""},afterTitle:yr,beforeBody:yr,beforeLabel:yr,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Xe(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:yr,afterBody:yr,beforeFooter:yr,footer:yr,afterFooter:yr};function us(n,e,t,s){const i=n[e].call(t,s);return typeof i>"u"?rM[e].call(t,s):i}class kb extends fi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&t.options.animation&&s.animations,r=new LO(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=sq(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:s}=t,i=us(s,"beforeTitle",this,e),r=us(s,"title",this,e),o=us(s,"afterTitle",this,e);let c=[];return c=Ci(c,br(i)),c=Ci(c,br(r)),c=Ci(c,br(o)),c}getBeforeBody(e,t){return MR(us(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,i=[];return ft(e,r=>{const o={before:[],lines:[],after:[]},c=PR(s,r);Ci(o.before,br(us(c,"beforeLabel",this,r))),Ci(o.lines,us(c,"label",this,r)),Ci(o.after,br(us(c,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(e,t){return MR(us(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,i=us(s,"beforeFooter",this,e),r=us(s,"footer",this,e),o=us(s,"afterFooter",this,e);let c=[];return c=Ci(c,br(i)),c=Ci(c,br(r)),c=Ci(c,br(o)),c}_createItems(e){const t=this._active,s=this.chart.data,i=[],r=[],o=[];let c=[],h,d;for(h=0,d=t.length;h<d;++h)c.push(XH(this.chart,t[h]));return e.filter&&(c=c.filter((m,_,b)=>e.filter(m,_,b,s))),e.itemSort&&(c=c.sort((m,_)=>e.itemSort(m,_,s))),ft(c,m=>{const _=PR(e.callbacks,m);i.push(us(_,"labelColor",this,m)),r.push(us(_,"labelPointStyle",this,m)),o.push(us(_,"labelTextColor",this,m))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=c,c}update(e,t){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const c=Ad[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const h=this._size=DR(this,s),d=Object.assign({},c,h),m=kR(this.chart,s,d),_=OR(s,d,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,r={opacity:1,x:_.x,y:_.y,width:h.width,height:h.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,i){const r=this.getCaretPosition(e,s,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:c}=s,{topLeft:h,topRight:d,bottomLeft:m,bottomRight:_}=wl(c),{x:b,y:E}=e,{width:S,height:T}=t;let R,k,L,M,H,U;return r==="center"?(H=E+T/2,i==="left"?(R=b,k=R-o,M=H+o,U=H-o):(R=b+S,k=R+o,M=H-o,U=H+o),L=R):(i==="left"?k=b+Math.max(h,m)+o:i==="right"?k=b+S-Math.max(d,_)-o:k=this.caretX,r==="top"?(M=E,H=M-o,R=k-o,L=k+o):(M=E+T,H=M+o,R=k+o,L=k-o),U=M),{x1:R,x2:k,x3:L,y1:M,y2:H,y3:U}}drawTitle(e,t,s){const i=this.title,r=i.length;let o,c,h;if(r){const d=su(s.rtl,this.x,this.width);for(e.x=Bg(this,s.titleAlign,s),t.textAlign=d.textAlign(s.titleAlign),t.textBaseline="middle",o=pn(s.titleFont),c=s.titleSpacing,t.fillStyle=s.titleColor,t.font=o.string,h=0;h<r;++h)t.fillText(i[h],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+c,h+1===r&&(e.y+=s.titleMarginBottom-c)}}_drawColorBox(e,t,s,i,r){const o=this.labelColors[s],c=this.labelPointStyles[s],{boxHeight:h,boxWidth:d}=r,m=pn(r.bodyFont),_=Bg(this,"left",r),b=i.x(_),E=h<m.lineHeight?(m.lineHeight-h)/2:0,S=t.y+E;if(r.usePointStyle){const T={radius:Math.min(d,h)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},R=i.leftForLtr(b,d)+d/2,k=S+h/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Sb(e,T,R,k),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Sb(e,T,R,k)}else{e.lineWidth=Je(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const T=i.leftForLtr(b,d),R=i.leftForLtr(i.xPlus(b,1),d-2),k=wl(o.borderRadius);Object.values(k).some(L=>L!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Tf(e,{x:T,y:S,w:d,h,radius:k}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Tf(e,{x:R,y:S+1,w:d-2,h:h-2,radius:k}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(T,S,d,h),e.strokeRect(T,S,d,h),e.fillStyle=o.backgroundColor,e.fillRect(R,S+1,d-2,h-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:c,boxHeight:h,boxWidth:d,boxPadding:m}=s,_=pn(s.bodyFont);let b=_.lineHeight,E=0;const S=su(s.rtl,this.x,this.width),T=function(I){t.fillText(I,S.x(e.x+E),e.y+b/2),e.y+=b+r},R=S.textAlign(o);let k,L,M,H,U,z,C;for(t.textAlign=o,t.textBaseline="middle",t.font=_.string,e.x=Bg(this,R,s),t.fillStyle=s.bodyColor,ft(this.beforeBody,T),E=c&&R!=="right"?o==="center"?d/2+m:d+2+m:0,H=0,z=i.length;H<z;++H){for(k=i[H],L=this.labelTextColors[H],t.fillStyle=L,ft(k.before,T),M=k.lines,c&&M.length&&(this._drawColorBox(t,e,H,S,s),b=Math.max(_.lineHeight,h)),U=0,C=M.length;U<C;++U)T(M[U]),b=_.lineHeight;ft(k.after,T)}E=0,b=_.lineHeight,ft(this.afterBody,T),e.y-=r}drawFooter(e,t,s){const i=this.footer,r=i.length;let o,c;if(r){const h=su(s.rtl,this.x,this.width);for(e.x=Bg(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=h.textAlign(s.footerAlign),t.textBaseline="middle",o=pn(s.footerFont),t.fillStyle=s.footerColor,t.font=o.string,c=0;c<r;++c)t.fillText(i[c],h.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,t,s,i){const{xAlign:r,yAlign:o}=this,{x:c,y:h}=e,{width:d,height:m}=s,{topLeft:_,topRight:b,bottomLeft:E,bottomRight:S}=wl(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(c+_,h),o==="top"&&this.drawCaret(e,t,s,i),t.lineTo(c+d-b,h),t.quadraticCurveTo(c+d,h,c+d,h+b),o==="center"&&r==="right"&&this.drawCaret(e,t,s,i),t.lineTo(c+d,h+m-S),t.quadraticCurveTo(c+d,h+m,c+d-S,h+m),o==="bottom"&&this.drawCaret(e,t,s,i),t.lineTo(c+E,h+m),t.quadraticCurveTo(c,h+m,c,h+m-E),o==="center"&&r==="left"&&this.drawCaret(e,t,s,i),t.lineTo(c,h+_),t.quadraticCurveTo(c,h,c+_,h),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=Ad[e.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=DR(this,e),h=Object.assign({},o,this._size),d=kR(t,e,h),m=OR(e,h,d,t);(i._to!==m.x||r._to!==m.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Yn(t.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&c&&(e.save(),e.globalAlpha=s,this.drawBackground(r,e,i,t),DO(e,t.textDirection),r.y+=o.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),kO(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,i=e.map(({datasetIndex:c,index:h})=>{const d=this.chart.getDatasetMeta(c);if(!d)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:d.data[h],index:h}}),r=!Fp(s,i),o=this._positionChanged(i,t);(r||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,s=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(e,r,t,s),c=this._positionChanged(o,e),h=t||!Fp(o,r)||c;return h&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),h}_getActiveElements(e,t,s,i){const r=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(e,t){const{caretX:s,caretY:i,options:r}=this,o=Ad[r.position].call(this,e,t);return o!==!1&&(s!==o.x||i!==o.y)}}ye(kb,"positioners",Ad);var iq={id:"tooltip",_element:kb,positioners:Ad,afterInit(n,e,t){t&&(n.tooltip=new kb({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:rM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},rq=Object.freeze({__proto__:null,Colors:_H,Decimation:xH,Filler:BH,Legend:$H,SubTitle:QH,Title:KH,Tooltip:iq});const aq=(n,e,t,s)=>(typeof e=="string"?(t=n.push(e)-1,s.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function oq(n,e,t,s){const i=n.indexOf(e);if(i===-1)return aq(n,e,t,s);const r=n.lastIndexOf(e);return i!==r?t:i}const lq=(n,e)=>n===null?null:An(Math.round(n),0,e);function VR(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class Ob extends em{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const s=this.getLabels();for(const{index:i,label:r}of t)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Xe(e))return null;const s=this.getLabels();return t=isFinite(t)&&s[t]===e?t:oq(s,e,Fe(t,e),this._addedLabels),lq(t,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),t||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const e=this.min,t=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=e===0&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=t;o++)i.push({value:o});return i}getLabelForValue(e){return VR.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ye(Ob,"id","category"),ye(Ob,"defaults",{ticks:{callback:VR}});function cq(n,e){const t=[],{bounds:i,step:r,min:o,max:c,precision:h,count:d,maxTicks:m,maxDigits:_,includeBounds:b}=n,E=r||1,S=m-1,{min:T,max:R}=e,k=!Xe(o),L=!Xe(c),M=!Xe(d),H=(R-T)/(_+1);let U=D1((R-T)/S/E)*E,z,C,I,N;if(U<1e-14&&!k&&!L)return[{value:T},{value:R}];N=Math.ceil(R/U)-Math.floor(T/U),N>S&&(U=D1(N*U/S/E)*E),Xe(h)||(z=Math.pow(10,h),U=Math.ceil(U*z)/z),i==="ticks"?(C=Math.floor(T/U)*U,I=Math.ceil(R/U)*U):(C=T,I=R),k&&L&&r&&tz((c-o)/r,U/1e3)?(N=Math.round(Math.min((c-o)/U,m)),U=(c-o)/N,C=o,I=c):M?(C=k?o:C,I=L?c:I,N=d-1,U=(I-C)/N):(N=(I-C)/U,Gd(N,Math.round(N),U/1e3)?N=Math.round(N):N=Math.ceil(N));const V=Math.max(k1(U),k1(C));z=Math.pow(10,Xe(h)?V:h),C=Math.round(C*z)/z,I=Math.round(I*z)/z;let j=0;for(k&&(b&&C!==o?(t.push({value:o}),C<o&&j++,Gd(Math.round((C+j*U)*z)/z,o,LR(o,H,n))&&j++):C<o&&j++);j<N;++j){const F=Math.round((C+j*U)*z)/z;if(L&&F>c)break;t.push({value:F})}return L&&b&&I!==c?t.length&&Gd(t[t.length-1].value,c,LR(c,H,n))?t[t.length-1].value=c:t.push({value:c}):(!L||I===c)&&t.push({value:I}),t}function LR(n,e,{horizontal:t,minRotation:s}){const i=oi(s),r=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+n).length;return Math.min(e/r,o)}class $p extends em{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Xe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=h=>i=t?i:h,c=h=>r=s?r:h;if(e){const h=Hi(i),d=Hi(r);h<0&&d<0?c(0):h>0&&d>0&&o(0)}if(i===r){let h=r===0?1:Math.abs(r*.05);c(r+h),e||o(i-h)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:s}=e,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},r=this._range||this,o=cq(i,r);return e.bounds==="ticks"&&mO(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const i=(s-t)/Math.max(e.length-1,1)/2;t-=i,s+=i}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(e){return Jf(e,this.chart.options.locale,this.options.ticks.format)}}class Mb extends $p{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ht(e)?e:0,this.max=Ht(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,s=oi(this.options.ticks.minRotation),i=(e?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ye(Mb,"id","linear"),ye(Mb,"defaults",{ticks:{callback:j_.formatters.numeric}});const Sf=n=>Math.floor(La(n)),il=(n,e)=>Math.pow(10,Sf(n)+e);function jR(n){return n/Math.pow(10,Sf(n))===1}function UR(n,e,t){const s=Math.pow(10,t),i=Math.floor(n/s);return Math.ceil(e/s)-i}function uq(n,e){const t=e-n;let s=Sf(t);for(;UR(n,e,s)>10;)s++;for(;UR(n,e,s)<10;)s--;return Math.min(s,Sf(n))}function hq(n,{min:e,max:t}){e=ws(n.min,e);const s=[],i=Sf(e);let r=uq(e,t),o=r<0?Math.pow(10,Math.abs(r)):1;const c=Math.pow(10,r),h=i>r?Math.pow(10,i):0,d=Math.round((e-h)*o)/o,m=Math.floor((e-h)/c/10)*c*10;let _=Math.floor((d-m)/Math.pow(10,r)),b=ws(n.min,Math.round((h+m+_*Math.pow(10,r))*o)/o);for(;b<t;)s.push({value:b,major:jR(b),significand:_}),_>=10?_=_<15?15:20:_++,_>=20&&(r++,_=2,o=r>=0?1:o),b=Math.round((h+m+_*Math.pow(10,r))*o)/o;const E=ws(n.max,b);return s.push({value:E,major:jR(E),significand:_}),s}class Pb extends em{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const s=$p.prototype.parse.apply(this,[e,t]);if(s===0){this._zero=!0;return}return Ht(s)&&s>0?s:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ht(e)?Math.max(0,e):null,this.max=Ht(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ht(this._userMin)&&(this.min=e===il(this.min,0)?il(this.min,-1):il(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let s=this.min,i=this.max;const r=c=>s=e?s:c,o=c=>i=t?i:c;s===i&&(s<=0?(r(1),o(10)):(r(il(s,-1)),o(il(i,1)))),s<=0&&r(il(i,-1)),i<=0&&o(il(s,1)),this.min=s,this.max=i}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},s=hq(t,this);return e.bounds==="ticks"&&mO(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(e){return e===void 0?"0":Jf(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=La(e),this._valueRange=La(this.max)-La(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(La(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}ye(Pb,"id","logarithmic"),ye(Pb,"defaults",{ticks:{callback:j_.formatters.logarithmic,major:{enabled:!0}}});function Vb(n){const e=n.ticks;if(e.display&&n.display){const t=Yn(e.backdropPadding);return Fe(e.font&&e.font.size,Vt.font.size)+t.height}return 0}function dq(n,e,t){return t=Pt(t)?t:[t],{w:yz(n,e.string,t),h:t.length*e.lineHeight}}function FR(n,e,t,s,i){return n===s||n===i?{start:e-t/2,end:e+t/2}:n<s||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function fq(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),s=[],i=[],r=n._pointLabels.length,o=n.options.pointLabels,c=o.centerPointLabels?rt/r:0;for(let h=0;h<r;h++){const d=o.setContext(n.getPointLabelContext(h));i[h]=d.padding;const m=n.getPointPosition(h,n.drawingArea+i[h],c),_=pn(d.font),b=dq(n.ctx,_,n._pointLabels[h]);s[h]=b;const E=qn(n.getIndexAngle(h)+c),S=Math.round(OE(E)),T=FR(S,m.x,b.w,0,180),R=FR(S,m.y,b.h,90,270);mq(t,e,E,T,R)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=_q(n,s,i)}function mq(n,e,t,s,i){const r=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t));let c=0,h=0;s.start<e.l?(c=(e.l-s.start)/r,n.l=Math.min(n.l,e.l-c)):s.end>e.r&&(c=(s.end-e.r)/r,n.r=Math.max(n.r,e.r+c)),i.start<e.t?(h=(e.t-i.start)/o,n.t=Math.min(n.t,e.t-h)):i.end>e.b&&(h=(i.end-e.b)/o,n.b=Math.max(n.b,e.b+h))}function gq(n,e,t){const s=n.drawingArea,{extra:i,additionalAngle:r,padding:o,size:c}=t,h=n.getPointPosition(e,s+i+o,r),d=Math.round(OE(qn(h.angle+tn))),m=bq(h.y,c.h,d),_=yq(d),b=vq(h.x,c.w,_);return{visible:!0,x:h.x,y:m,textAlign:_,left:b,top:m,right:b+c.w,bottom:m+c.h}}function pq(n,e){if(!e)return!0;const{left:t,top:s,right:i,bottom:r}=n;return!(Ir({x:t,y:s},e)||Ir({x:t,y:r},e)||Ir({x:i,y:s},e)||Ir({x:i,y:r},e))}function _q(n,e,t){const s=[],i=n._pointLabels.length,r=n.options,{centerPointLabels:o,display:c}=r.pointLabels,h={extra:Vb(r)/2,additionalAngle:o?rt/i:0};let d;for(let m=0;m<i;m++){h.padding=t[m],h.size=e[m];const _=gq(n,m,h);s.push(_),c==="auto"&&(_.visible=pq(_,d),_.visible&&(d=_))}return s}function yq(n){return n===0||n===180?"center":n<180?"left":"right"}function vq(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function bq(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function xq(n,e,t){const{left:s,top:i,right:r,bottom:o}=t,{backdropColor:c}=e;if(!Xe(c)){const h=wl(e.borderRadius),d=Yn(e.backdropPadding);n.fillStyle=c;const m=s-d.left,_=i-d.top,b=r-s+d.width,E=o-i+d.height;Object.values(h).some(S=>S!==0)?(n.beginPath(),Tf(n,{x:m,y:_,w:b,h:E,radius:h}),n.fill()):n.fillRect(m,_,b,E)}}function Eq(n,e){const{ctx:t,options:{pointLabels:s}}=n;for(let i=e-1;i>=0;i--){const r=n._pointLabelItems[i];if(!r.visible)continue;const o=s.setContext(n.getPointLabelContext(i));xq(t,o,r);const c=pn(o.font),{x:h,y:d,textAlign:m}=r;Ul(t,n._pointLabels[i],h,d+c.lineHeight/2,c,{color:o.color,textAlign:m,textBaseline:"middle"})}}function aM(n,e,t,s){const{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,Rt);else{let r=n.getPointPosition(0,e);i.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=n.getPointPosition(o,e),i.lineTo(r.x,r.y)}}function Tq(n,e,t,s,i){const r=n.ctx,o=e.circular,{color:c,lineWidth:h}=e;!o&&!s||!c||!h||t<0||(r.save(),r.strokeStyle=c,r.lineWidth=h,r.setLineDash(i.dash||[]),r.lineDashOffset=i.dashOffset,r.beginPath(),aM(n,t,o,s),r.closePath(),r.stroke(),r.restore())}function wq(n,e,t){return _o(n,{label:t,index:e,type:"pointLabel"})}class Id extends $p{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Yn(Vb(this.options)/2),t=this.width=this.maxWidth-e.width,s=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+s/2+e.top),this.drawingArea=Math.floor(Math.min(t,s)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Ht(e)&&!isNaN(e)?e:0,this.max=Ht(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Vb(this.options))}generateTickLabels(e){$p.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,s)=>{const i=Tt(this.options.pointLabels.callback,[t,s],this);return i||i===0?i:""}).filter((t,s)=>this.chart.getDataVisibility(s))}fit(){const e=this.options;e.display&&e.pointLabels.display?fq(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,s,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,s,i))}getIndexAngle(e){const t=Rt/(this._pointLabels.length||1),s=this.options.startAngle||0;return qn(e*t+oi(s))}getDistanceFromCenterForValue(e){if(Xe(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Xe(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const s=t[e];return wq(this.getContext(),e,s)}}getPointPosition(e,t,s=0){const i=this.getIndexAngle(e)-tn+s;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:s,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:s,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const s=this.ctx;s.save(),s.beginPath(),aM(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),s.closePath(),s.fillStyle=e,s.fill(),s.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:s,grid:i,border:r}=t,o=this._pointLabels.length;let c,h,d;if(t.pointLabels.display&&Eq(this,o),i.display&&this.ticks.forEach((m,_)=>{if(_!==0||_===0&&this.min<0){h=this.getDistanceFromCenterForValue(m.value);const b=this.getContext(_),E=i.setContext(b),S=r.setContext(b);Tq(this,E,h,o,S)}}),s.display){for(e.save(),c=o-1;c>=0;c--){const m=s.setContext(this.getPointLabelContext(c)),{color:_,lineWidth:b}=m;!b||!_||(e.lineWidth=b,e.strokeStyle=_,e.setLineDash(m.borderDash),e.lineDashOffset=m.borderDashOffset,h=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),d=this.getPointPosition(c,h),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,s=t.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((c,h)=>{if(h===0&&this.min>=0&&!t.reverse)return;const d=s.setContext(this.getContext(h)),m=pn(d.font);if(r=this.getDistanceFromCenterForValue(this.ticks[h].value),d.showLabelBackdrop){e.font=m.string,o=e.measureText(c.label).width,e.fillStyle=d.backdropColor;const _=Yn(d.backdropPadding);e.fillRect(-o/2-_.left,-r-m.size/2-_.top,o+_.width,m.size+_.height)}Ul(e,c.label,0,-r,m,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}ye(Id,"id","radialLinear"),ye(Id,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:j_.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ye(Id,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ye(Id,"descriptors",{angleLines:{_fallback:"grid"}});const q_={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ds=Object.keys(q_);function BR(n,e){return n-e}function zR(n,e){if(Xe(e))return null;const t=n._adapter,{parser:s,round:i,isoWeekday:r}=n._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Ht(o)||(o=typeof s=="string"?t.parse(o,s):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(Iu(r)||r===!0)?t.startOf(o,"isoWeek",r):t.startOf(o,i)),+o)}function HR(n,e,t,s){const i=ds.length;for(let r=ds.indexOf(n);r<i-1;++r){const o=q_[ds[r]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(c*o.size))<=s)return ds[r]}return ds[i-1]}function Sq(n,e,t,s,i){for(let r=ds.length-1;r>=ds.indexOf(t);r--){const o=ds[r];if(q_[o].common&&n._adapter.diff(i,s,o)>=e-1)return o}return ds[t?ds.indexOf(t):0]}function Aq(n){for(let e=ds.indexOf(n)+1,t=ds.length;e<t;++e)if(q_[ds[e]].common)return ds[e]}function qR(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:s,hi:i}=ME(t,e),r=t[s]>=e?t[s]:t[i];n[r]=!0}}function Iq(n,e,t,s){const i=n._adapter,r=+i.startOf(e[0].value,s),o=e[e.length-1].value;let c,h;for(c=r;c<=o;c=+i.add(c,1,s))h=t[c],h>=0&&(e[h].major=!0);return e}function GR(n,e,t){const s=[],i={},r=e.length;let o,c;for(o=0;o<r;++o)c=e[o],i[c]=o,s.push({value:c,major:!1});return r===0||!t?s:Iq(n,s,i,t)}class Af extends em{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const s=e.time||(e.time={}),i=this._adapter=new P8._date(e.adapters.date);i.init(t),qd(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:zR(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:c}=this.getUserBounds();function h(d){!o&&!isNaN(d.min)&&(i=Math.min(i,d.min)),!c&&!isNaN(d.max)&&(r=Math.max(r,d.max))}(!o||!c)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),i=Ht(i)&&!isNaN(i)?i:+t.startOf(Date.now(),s),r=Ht(r)&&!isNaN(r)?r:+t.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,c=rz(i,r,o);return this._unit=t.unit||(s.autoSkip?HR(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):Sq(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Aq(this._unit),this.initOffsets(i),e.reverse&&c.reverse(),GR(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,s=0,i,r;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?s=r:s=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;t=An(t,0,o),s=An(s,0,o),this._offsets={start:t,end:s,factor:1/(t+1+s)}}_generate(){const e=this._adapter,t=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||HR(r.minUnit,t,s,this._getLabelCapacity(t)),c=Fe(i.ticks.stepSize,1),h=o==="week"?r.isoWeekday:!1,d=Iu(h)||h===!0,m={};let _=t,b,E;if(d&&(_=+e.startOf(_,"isoWeek",h)),_=+e.startOf(_,d?"day":o),e.diff(s,t,o)>1e5*c)throw new Error(t+" and "+s+" are too far apart with stepSize of "+c+" "+o);const S=i.ticks.source==="data"&&this.getDataTimestamps();for(b=_,E=0;b<s;b=+e.add(b,c,o),E++)qR(m,b,S);return(b===s||i.bounds==="ticks"||E===1)&&qR(m,b,S),Object.keys(m).sort(BR).map(T=>+T)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,r=this._unit,o=t||i[r];return this._adapter.format(e,o)}_tickFormatFunction(e,t,s,i){const r=this.options,o=r.ticks.callback;if(o)return Tt(o,[e,t,s],this);const c=r.time.displayFormats,h=this._unit,d=this._majorUnit,m=h&&c[h],_=d&&c[d],b=s[t],E=d&&_&&b&&b.major;return this._adapter.format(e,i||(E?_:m))}generateTickLabels(e){let t,s,i;for(t=0,s=e.length;t<s;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,i=oi(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),o=Math.sin(i),c=this._resolveTickFontOptions(0).size;return{w:s*r+c*o,h:s*o+c*r}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,i=s[t.unit]||s.millisecond,r=this._tickFormatFunction(e,0,GR(this,[e],this._majorUnit),i),o=this._getLabelSize(r),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],t,s;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,s=i.length;t<s;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const i=this.getLabels();for(t=0,s=i.length;t<s;++t)e.push(zR(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return _O(e.sort(BR))}}ye(Af,"id","time"),ye(Af,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function zg(n,e,t){let s=0,i=n.length-1,r,o,c,h;t?(e>=n[s].pos&&e<=n[i].pos&&({lo:s,hi:i}=Ar(n,"pos",e)),{pos:r,time:c}=n[s],{pos:o,time:h}=n[i]):(e>=n[s].time&&e<=n[i].time&&({lo:s,hi:i}=Ar(n,"time",e)),{time:r,pos:c}=n[s],{time:o,pos:h}=n[i]);const d=o-r;return d?c+(h-c)*(e-r)/d:c}class Lb extends Af{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=zg(t,this.min),this._tableRange=zg(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:s}=this,i=[],r=[];let o,c,h,d,m;for(o=0,c=e.length;o<c;++o)d=e[o],d>=t&&d<=s&&i.push(d);if(i.length<2)return[{time:t,pos:0},{time:s,pos:1}];for(o=0,c=i.length;o<c;++o)m=i[o+1],h=i[o-1],d=i[o],Math.round((m+h)/2)!==d&&r.push({time:d,pos:o/(c-1)});return r}_generate(){const e=this.min,t=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(t)||s.length===1)&&s.push(t),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),s=this.getLabelTimestamps();return t.length&&s.length?e=this.normalize(t.concat(s)):e=t.length?t:s,e=this._cache.all=e,e}getDecimalForValue(e){return(zg(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return zg(this._table,s*this._tableRange+this._minPos,!0)}}ye(Lb,"id","timeseries"),ye(Lb,"defaults",Af.defaults);var Rq=Object.freeze({__proto__:null,CategoryScale:Ob,LinearScale:Mb,LogarithmicScale:Pb,RadialLinearScale:Id,TimeScale:Af,TimeSeriesScale:Lb});const Cq=[M8,uH,rq,Rq];On.register(...Cq);const Yp={income:["薪水","獎金","投資收益","副業收入","其他收入"],expense:["餐飲","交通","居住","娛樂","教育","醫療","購物","通訊","保險","其他支出"]},md={現金:"#4CAF50",ETF:"#2196F3",股票:"#FFC107",不動產:"#9C27B0",美元資產:"#FF5722"},Nq=(n,e)=>n.map(t=>({...t,assets:(t.assets||[]).map(s=>{const i=parseFloat(String(s.currentValue))||0,r=parseFloat(String(s.cost))||0,o=parseFloat(String(s.units))||0,c=s.currency==="USD"?e:1,h=i*o*c,d=r*o*c,m=h-d;return{...s,currentValueTWD:h,costTWD:d,profitLossTWD:m}})})),GE=n=>{let e=0,t=0;const s={現金:{value:0,color:md.現金},ETF:{value:0,color:md.ETF},股票:{value:0,color:md.股票},不動產:{value:0,color:md.不動產},美元資產:{value:0,color:md.美元資產}};n.forEach(r=>{(r.assets||[]).forEach(o=>{const c=o.currentValueTWD||0;e+=c,s[o.accountType]&&(s[o.accountType].value+=c),o.currency==="USD"&&(t+=c)})});const i=Object.keys(s).filter(r=>s[r].value>0).map(r=>({type:r,value:s[r].value,color:s[r].color}));return{total:e,breakdown:i,totalUsdAssetsInTwd:t}},Dq=(n,e)=>{var H,U;const{total:t,breakdown:s}=GE(n);if(t===0)return{score:0,feedback:["請先新增您的資產以進行評分。"],level:"待加強",levelColor:"text-red-500"};let i=0;const r=[],o=e.filter(z=>z.type==="expense"),c=new Map;o.forEach(z=>{const C=z.date.slice(0,7);c.set(C,(c.get(C)||0)+z.amount)});const h=Array.from(c.values()).reduce((z,C)=>z+C,0),d=c.size>0?h/c.size:0,m=((H=s.find(z=>z.type==="現金"))==null?void 0:H.value)||0,_=d>0?m/d:0;d===0?(i+=10,r.push("尚無支出數據，無法評估緊急備用金。")):_>=3&&_<=6?(i+=40,r.push(`緊急備用金充足 (${_.toFixed(1)}個月)，財務基礎穩固。`)):_>6?(i+=25,r.push(`現金持有稍多 (${_.toFixed(1)}個月)，可考慮將部分資金用於投資。`)):_>=1?(i+=15,r.push(`緊急備用金 (${_.toFixed(1)}個月) 略顯不足，建議提升至3-6個月。`)):(i+=5,r.push(`緊急備用金嚴重不足 (${_.toFixed(1)}個月)，請優先儲蓄！`));const b=n.flatMap(z=>z.assets||[]).filter(z=>["股票","ETF"].includes(z.accountType)),E=b.reduce((z,C)=>z+(C.currentValueTWD||0),0),S=E>0?[...b].sort((z,C)=>(C.currentValueTWD??0)-(z.currentValueTWD??0))[0]:null,T=E>0&&S?(S.currentValueTWD??0)/E*100:0;T>50?(i+=5,r.push(`投資過度集中於「${S==null?void 0:S.code}」(${T.toFixed(1)}%)，風險極高。`)):T>30?(i+=15,r.push(`單一資產佔比較高 (${T.toFixed(1)}%)，建議分散投資。`)):(i+=30,r.push(`投資組合分散良好，最大持股佔比為 ${T.toFixed(1)}%。`));const R=((U=s.find(z=>z.type==="股票"))==null?void 0:U.value)||0,k=t>0?R/t*100:0;k>60?(i+=5,r.push(`個股佔總資產 ${k.toFixed(1)}%，風險配置過於激進。`)):k>35?(i+=15,r.push(`個股佔比 ${k.toFixed(1)}% 偏高，請留意風險。`)):(i+=30,r.push(`個股風險控制良好，佔總資產 ${k.toFixed(1)}%。`)),i=Math.round(i);let L,M;return i>=80?(L="優良",M="text-green-500"):i>=50?(L="中等",M="text-yellow-500"):(L="待加強",M="text-red-500"),{score:i,feedback:r,level:L,levelColor:M}},gn=({children:n,className:e=""})=>y.jsx("div",{className:`bg-white rounded-xl shadow-lg border border-gray-200/75 p-6 sm:p-8 ${e}`,children:n}),Fr=({title:n,subtitle:e})=>y.jsxs("div",{className:"mb-8 border-b border-gray-200 pb-5",children:[y.jsx("h2",{className:"text-3xl font-semibold tracking-tight text-gray-900",children:n}),e&&y.jsx("p",{className:"mt-2 text-base text-gray-600",children:e})]}),tm=({Icon:n,title:e,message:t,children:s})=>y.jsxs("div",{className:"text-center flex flex-col items-center justify-center h-full text-gray-500 bg-gray-50 rounded-lg p-8 border-2 border-dashed",children:[y.jsx(n,{className:"h-16 w-16 text-gray-400 mb-4",strokeWidth:1}),y.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:e}),y.jsx("p",{className:"text-sm mt-1 max-w-sm mx-auto",children:t}),s&&y.jsx("div",{className:"mt-6",children:s})]}),kq=n=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24",stroke:"currentColor",...n,children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"})]}),Oq=({score:n,level:e,color:t,feedback:s})=>{const i=2*Math.PI*52,r=i-n/100*i;return y.jsxs(gn,{className:"flex flex-col items-center justify-center",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"財務健康分數"}),y.jsxs("div",{className:"relative w-40 h-40",children:[y.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 120 120",children:[y.jsx("circle",{cx:"60",cy:"60",r:"52",fill:"none",stroke:"#e6e6e6",strokeWidth:"8"}),y.jsx("circle",{cx:"60",cy:"60",r:"52",fill:"none",className:`stroke-current ${t.replace("text-","stroke-")}`,strokeWidth:"8",strokeDasharray:i,strokeDashoffset:r,strokeLinecap:"round",transform:"rotate(-90 60 60)",style:{transition:"stroke-dashoffset 0.8s ease-out"}})]}),y.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[y.jsx("span",{className:`text-4xl font-bold ${t}`,children:n}),y.jsx("span",{className:`text-sm font-semibold ${t}`,children:e})]})]}),y.jsx("div",{className:"text-center mt-3 text-xs text-gray-500 w-full",children:s.slice(0,1).map((o,c)=>y.jsx("p",{children:o},c))})]})},Mq=({assetAccounts:n})=>{const{total:e,breakdown:t}=GE(n),i=(()=>{var b,E,S;if(e===0)return{title:"開始您的理財之旅",message:"您的資產組合目前是空的。請前往「資料管理」新增您的第一筆資產，開始追踪您的財務狀況！",icon:"🚀"};const r=(((b=t.find(T=>T.type==="現金"))==null?void 0:b.value)||0)/e,o=(((E=t.find(T=>T.type==="ETF"))==null?void 0:E.value)||0)/e,c=(((S=t.find(T=>T.type==="股票"))==null?void 0:S.value)||0)/e,h=n.flatMap(T=>T.assets||[]).filter(T=>["股票","ETF"].includes(T.accountType)),d=h.reduce((T,R)=>T+(R.currentValueTWD||0),0),m=d>0?[...h].sort((T,R)=>(R.currentValueTWD??0)-(T.currentValueTWD??0))[0]:null,_=d>0&&m?(m.currentValueTWD??0)/d*100:0;return r>.4?{title:"現金比例偏高",message:`您有超過 ${(r*100).toFixed(0)}% 的資產是現金。雖然保有流動性是好事，但考慮將部分閒置資金投入 ETF 或其他投資，可能會有更好的長期回報。`,icon:"💰"}:_>40?{title:"注意投資集中風險",message:`您在「${m==null?void 0:m.code}」上的投資佔了投資組合的 ${_.toFixed(1)}%。這可能會帶來較高的風險。建議您考慮增加其他標的，以達到更好的分散效果。`,icon:"⚠️"}:o<.3&&(c>0||r>.1)?{title:"建立穩健的投資核心",message:"您的 ETF 佔比目前較低。考慮增加指數型 ETF 的配置，這有助於建立一個分散風險、穩健增長的投資組合核心。",icon:"📈"}:{title:"資產配置均衡",message:"您的資產配置看起來相當均衡。請繼續保持定期檢視，並根據您的財務目標進行調整。做得很好！",icon:"👍"}})();return y.jsxs(gn,{children:[y.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:[y.jsx("span",{className:"text-2xl mr-2",children:i.icon}),"投資組合洞察"]}),y.jsxs("div",{className:"text-gray-600 text-base leading-relaxed h-full flex flex-col justify-center",children:[y.jsx("p",{className:"font-semibold text-gray-700 mb-1",children:i.title}),y.jsx("p",{className:"text-sm",children:i.message})]})]})},WR=({userId:n,assetAccounts:e,cashflowRecords:t})=>{const s=ce.useRef(null),i=ce.useRef(null),r=ce.useMemo(()=>GE(e),[e]),o=ce.useMemo(()=>Dq(e,t),[e,t]),{total:c,breakdown:h,totalUsdAssetsInTwd:d}=r,m=ce.useMemo(()=>{const _=new Date,b=new Date(_.getFullYear(),_.getMonth(),15),E=new Date(b);E.setMonth(E.getMonth()-1);const S=E.getFullYear(),T=E.getMonth(),R=`${S}-${String(T+1).padStart(2,"0")}`,k=t.filter(z=>z.date.startsWith(R)),L=k.filter(z=>z.type==="income").reduce((z,C)=>z+C.amount,0),M=k.filter(z=>z.type==="expense").reduce((z,C)=>z+C.amount,0),H=L-M,U=L>0?H/L*100:0;return{totalIncome:L,totalExpense:M,netSavings:H,savingsRate:U,monthLabel:`${S}年${T+1}月`}},[t]);return ce.useEffect(()=>{if(s.current&&c>0){i.current&&i.current.destroy();const _=s.current.getContext("2d");_&&(i.current=new On(_,{type:"pie",data:{labels:h.map(b=>b.type),datasets:[{data:h.map(b=>b.value),backgroundColor:h.map(b=>b.color),borderColor:"#fff",borderWidth:2,hoverOffset:8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{size:14,family:"Inter, sans-serif"},color:"#333",boxWidth:20}},title:{display:!0,text:"資產配置圓餅圖",font:{size:18,family:"Inter, sans-serif"},color:"#333"}}}}))}else i.current&&(i.current.destroy(),i.current=null);return()=>{i.current&&i.current.destroy()}},[c,h]),y.jsxs("div",{children:[y.jsx(Fr,{title:"您的個人財務導航中心"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[y.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 p-6 rounded-xl shadow-lg text-white transform hover:scale-105 transition-transform duration-300 relative overflow-hidden",children:[y.jsx("div",{className:"absolute -top-4 -left-4 w-24 h-24 bg-white/10 rounded-full"}),y.jsxs("div",{className:"relative z-10",children:[y.jsxs("h3",{className:"text-xl font-semibold mb-2 flex items-center",children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-7 h-7 mr-2 opacity-75",children:[y.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),y.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),"總資產顯示"]}),y.jsxs("p",{className:"text-4xl font-bold mt-4",children:["$",c.toLocaleString(void 0,{maximumFractionDigits:0})]}),y.jsx("p",{className:"text-blue-200 text-sm mt-2",children:"包含所有帳戶資產"})]})]}),y.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-600 p-6 rounded-xl shadow-lg text-white transform hover:scale-105 transition-transform duration-300 relative overflow-hidden",children:[y.jsx("div",{className:"absolute -top-4 -right-4 w-24 h-24 bg-white/10 rounded-full"}),y.jsxs("div",{className:"relative z-10",children:[y.jsxs("h3",{className:"text-xl font-semibold mb-2 flex items-center",children:[y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-7 h-7 mr-2 opacity-75",children:[y.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),y.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),"美元計價資產總值 (TWD)"]}),y.jsxs("p",{className:"text-4xl font-bold mt-4",children:["$",d.toLocaleString(void 0,{maximumFractionDigits:0})]}),y.jsx("p",{className:"text-emerald-100 text-sm mt-2",children:"已轉換為新台幣"})]})]}),y.jsx(Oq,{score:o.score,level:o.level,color:o.levelColor,feedback:o.feedback}),y.jsx(Mq,{assetAccounts:e})]}),y.jsxs("div",{className:"mb-8",children:[y.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:[m.monthLabel," 財務摘要"]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[y.jsxs(gn,{className:"bg-green-50 border-green-200",children:[y.jsxs("h4",{className:"text-md font-semibold text-green-800 mb-2 flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"總收入"]}),y.jsxs("p",{className:"text-3xl font-bold text-green-900",children:["$",m.totalIncome.toLocaleString()]})]}),y.jsxs(gn,{className:"bg-red-50 border-red-200",children:[y.jsxs("h4",{className:"text-md font-semibold text-red-800 mb-2 flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"總支出"]}),y.jsxs("p",{className:"text-3xl font-bold text-red-900",children:["$",m.totalExpense.toLocaleString()]})]}),y.jsxs(gn,{className:"bg-blue-50 border-blue-200",children:[y.jsxs("h4",{className:"text-md font-semibold text-blue-800 mb-2 flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),"淨儲蓄"]}),y.jsxs("p",{className:`text-3xl font-bold ${m.netSavings>=0?"text-blue-900":"text-red-900"}`,children:["$",m.netSavings.toLocaleString()]})]}),y.jsxs(gn,{className:"bg-purple-50 border-purple-200",children:[y.jsxs("h4",{className:"text-md font-semibold text-purple-800 mb-2 flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),"儲蓄率"]}),y.jsxs("p",{className:"text-3xl font-bold text-purple-900",children:[m.savingsRate.toFixed(1),"%"]})]})]})]}),y.jsx(gn,{className:"h-[450px]",children:c>0?y.jsx("canvas",{ref:s}):y.jsx(tm,{Icon:kq,title:"尚無資產數據",message:"新增您的第一個資產，開始視覺化您的財務狀況。"})})]})},Nv=25,Pq=({userId:n,db:e,cashflowRecords:t,assetAccounts:s,settings:i,setNotification:r,appId:o,effectiveUsdToTwdRate:c})=>{const h={id:"",date:new Date().toISOString().split("T")[0],type:"expense",category:"",amount:"",currency:"TWD",description:"",isRecurring:!1,accountId:"",recurrenceDay:""},[d,m]=ce.useState(h),[_,b]=ce.useState(null),[E,S]=ce.useState(String(c)),[T,R]=ce.useState(""),[k,L]=ce.useState(""),[M,H]=ce.useState(1);ce.useEffect(()=>{S(String(c))},[c]),ce.useEffect(()=>{const ne=setTimeout(()=>{L(T),H(1)},300);return()=>{clearTimeout(ne)}},[T]);const U=ce.useMemo(()=>k?t.filter(ne=>{var be;return ne.category.toLowerCase().includes(k.toLowerCase())||ne.description.toLowerCase().includes(k.toLowerCase())||((be=ne.accountName)==null?void 0:be.toLowerCase().includes(k.toLowerCase()))||ne.amount.toString().includes(k)}):t,[t,k]),z=ce.useMemo(()=>{const ne=(M-1)*Nv;return U.slice(ne,ne+Nv)},[U,M]),C=Math.ceil(U.length/Nv),I=ne=>{const{name:be,value:Y}=ne.target,ae=ne.target.checked;m(ge=>({...ge,[be]:ne.target.type==="checkbox"?ae:Y}))},N=async()=>{const ne=parseFloat(E);!isNaN(ne)&&ne>0?ne!==i.manualRate&&(await e.doc(`artifacts/${o}/users/${n}/settings/userSettings`).set({manualRate:ne},{merge:!0}),r({message:`匯率已更新為 ${ne}`,type:"info",show:!0})):E===""&&i.manualRate!==null&&(await e.doc(`artifacts/${o}/users/${n}/settings/userSettings`).set({manualRate:null},{merge:!0}),r({message:"手動匯率已清除，將使用系統預設值。",type:"info",show:!0}))},V=async ne=>{var ge;if(ne.preventDefault(),!d.category||!d.amount||!d.accountId){r({message:"類別、金額和帳戶為必填項。",type:"error",show:!0});return}if(d.isRecurring&&(!d.recurrenceDay||Number(d.recurrenceDay)<1||Number(d.recurrenceDay)>31)){r({message:"請為定額項目設定有效的每月執行日期 (1-31)。",type:"error",show:!0});return}const be=`artifacts/${o}/users/${n}/cashflowRecords`,Y=((ge=s.find(Ne=>Ne.id===d.accountId))==null?void 0:ge.name)||"",ae={date:d.date,type:d.type,category:d.category,amount:parseFloat(d.amount)||0,currency:d.currency,description:d.description,isRecurring:d.isRecurring,accountId:d.accountId,accountName:Y};d.isRecurring&&(ae.recurrenceDay=Number(d.recurrenceDay));try{_?(await e.doc(`${be}/${_}`).set(ae),r({message:"收支紀錄更新成功！",type:"success",show:!0})):(await e.collection(be).add(ae),r({message:"收支紀錄新增成功！",type:"success",show:!0})),m(h),b(null)}catch(Ne){console.error("Error saving cashflow record:",Ne);const B=Ne instanceof Error?Ne.message:"An unknown error occurred.";r({message:`儲存失敗: ${B}`,type:"error",show:!0})}},j=ne=>{m({...h,...ne,amount:ne.amount.toString(),recurrenceDay:String(ne.recurrenceDay||"")}),b(ne.id),window.scrollTo({top:0,behavior:"smooth"})},F=async ne=>{window.confirm("您確定要刪除這筆紀錄嗎？")&&(await e.doc(`artifacts/${o}/users/${n}/cashflowRecords/${ne}`).delete(),r({message:"紀錄已刪除。",type:"success",show:!0}))},O=d.type==="income"?[...Yp.income,...i.customIncome||[]]:[...Yp.expense,...i.customExpense||[]];return y.jsxs("div",{children:[y.jsxs("form",{onSubmit:V,className:"mb-8 p-6 border rounded-lg bg-gray-50 shadow-sm",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:_?"編輯收支紀錄":"新增收支紀錄"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"日期"}),y.jsx("input",{type:"date",name:"date",value:d.date,onChange:I,className:"mt-1 w-full p-2 border rounded-md shadow-sm"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"帳戶*"}),y.jsxs("select",{name:"accountId",value:d.accountId,onChange:I,className:"mt-1 w-full p-2 border rounded-md shadow-sm bg-white",children:[y.jsx("option",{value:"",children:"選擇帳戶"}),s.map(ne=>y.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"類型"}),y.jsxs("select",{name:"type",value:d.type,onChange:I,className:"mt-1 w-full p-2 border rounded-md shadow-sm bg-white",children:[y.jsx("option",{value:"expense",children:"支出"}),y.jsx("option",{value:"income",children:"收入"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"類別*"}),y.jsxs("select",{name:"category",value:d.category,onChange:I,className:"mt-1 w-full p-2 border rounded-md shadow-sm bg-white",children:[y.jsx("option",{value:"",children:"選擇類別"}),O.map(ne=>y.jsx("option",{value:ne,children:ne},ne))]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"金額*"}),y.jsx("input",{type:"number",name:"amount",placeholder:"輸入金額",value:d.amount,onChange:I,className:"mt-1 w-full p-2 border rounded-md shadow-sm"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"幣別 & 匯率"}),y.jsxs("div",{className:"flex space-x-2 mt-1",children:[y.jsxs("select",{name:"currency",value:d.currency,onChange:I,className:`p-2 border rounded-md shadow-sm bg-white transition-all duration-200 ${d.currency==="USD"?"w-1/2":"w-full"}`,children:[y.jsx("option",{value:"TWD",children:"TWD"}),y.jsx("option",{value:"USD",children:"USD"})]}),d.currency==="USD"&&y.jsx("input",{type:"number",step:"0.01","aria-label":"USD to TWD Exchange Rate",placeholder:"匯率",value:E,onChange:ne=>S(ne.target.value),onBlur:N,className:"p-2 border rounded-md shadow-sm w-1/2"})]})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"說明 (選填)"}),y.jsx("input",{type:"text",name:"description",placeholder:"例如：與同事的午餐",value:d.description,onChange:I,className:"mt-1 w-full p-2 border rounded-md shadow-sm"})]}),y.jsx("div",{className:"flex items-end",children:y.jsxs("div",{className:"p-3 border rounded-md bg-white shadow-sm w-full",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:"isRecurring",name:"isRecurring",checked:d.isRecurring,onChange:I,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),y.jsx("label",{htmlFor:"isRecurring",className:"ml-2 block text-sm text-gray-900",children:"設為定額項目"})]}),d.isRecurring&&y.jsxs("div",{className:"flex items-center mt-2",children:[y.jsx("label",{htmlFor:"recurrenceDay",className:"mr-2 text-sm text-gray-700",children:"每月"}),y.jsx("input",{type:"number",id:"recurrenceDay",name:"recurrenceDay",value:d.recurrenceDay,onChange:I,min:"1",max:"31",placeholder:"日",className:"p-1 border rounded-md shadow-sm w-20"}),y.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"日執行"})]})]})})]}),y.jsxs("div",{className:"mt-4 flex justify-end space-x-3",children:[_&&y.jsx("button",{type:"button",onClick:()=>{b(null),m(h)},className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300 font-medium",children:"取消編輯"}),y.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 font-medium shadow-sm",children:_?"更新紀錄":"新增紀錄"})]})]}),y.jsx("div",{className:"mb-4",children:y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),y.jsx("input",{type:"text",placeholder:"搜尋類別、說明、金額...",value:T,onChange:ne=>R(ne.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]})}),y.jsxs("div",{className:"overflow-x-auto shadow-md rounded-lg",children:[y.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[y.jsx("thead",{className:"bg-gray-50",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"日期"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"帳戶"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"類型"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"類別"}),y.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"金額"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"說明"}),y.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),y.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map((ne,be)=>y.jsxs("tr",{className:`transition-colors ${be%2===0?"bg-white":"bg-gray-50"} ${_===ne.id?"bg-blue-100":"hover:bg-yellow-50"}`,children:[y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:ne.date}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:ne.accountName}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:y.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ne.type==="income"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ne.type==="income"?"收入":"支出"})}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:ne.category}),y.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right font-medium ${ne.type==="income"?"text-green-700":"text-red-700"}`,children:[ne.amount.toLocaleString()," ",y.jsx("span",{className:"text-xs text-gray-400",children:ne.currency})]}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 truncate max-w-xs",title:ne.description||"-",children:ne.description||"-"}),y.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:[ne.isRecurring&&y.jsx("span",{title:`定額項目: 每月 ${ne.recurrenceDay} 日`,className:"mr-3 text-blue-500 cursor-help",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h5M5 12a7 7 0 0011.66 4.995M20 20v-5h-5"})})}),y.jsx("button",{onClick:()=>j(ne),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"編輯"}),y.jsx("button",{onClick:()=>F(ne.id),className:"text-red-600 hover:text-red-900",children:"刪除"})]})]},ne.id))})]}),C>1&&y.jsxs("div",{className:"flex justify-between items-center mt-4 p-2",children:[y.jsx("button",{onClick:()=>H(ne=>Math.max(1,ne-1)),disabled:M===1,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"上一頁"}),y.jsxs("span",{className:"text-sm text-gray-700",children:["第 ",M," 頁 / 共 ",C," 頁"]}),y.jsx("button",{onClick:()=>H(ne=>Math.min(C,ne+1)),disabled:M===C,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"下一頁"})]})]})]})},Vq=({userId:n,db:e,assetAccounts:t,setNotification:s,appId:i})=>{var C;const[r,o]=ce.useState(""),[c,h]=ce.useState(""),d={code:"",accountType:"股票",units:0,cost:0,currentValue:0,currency:"TWD"},[m,_]=ce.useState(d),[b,E]=ce.useState(null);ce.useEffect(()=>{!c&&t.length>0&&h(t[0].id)},[t,c]);const S=async()=>{r.trim()&&(await e.collection(`artifacts/${i}/users/${n}/assetAccounts`).add({name:r,assets:[]}),o(""),s({message:"帳戶新增成功！",type:"success",show:!0}))},T=async I=>{window.confirm("您確定嗎？這將會刪除該帳戶及其中的所有資產。")&&(I===c&&h(""),await e.doc(`artifacts/${i}/users/${n}/assetAccounts/${I}`).delete(),s({message:"帳戶已刪除。",type:"success",show:!0}))},R=async I=>{I.preventDefault();const N=t.find(ae=>ae.id===c);if(!N)return;const V=Number(m.units)||0,j=Number(m.cost)||0,F=Number(m.currentValue)||0;let O;switch(m.accountType){case"現金":O={...m,units:1,cost:F,currentValue:F};break;case"不動產":case"美元資產":O={...m,units:1,cost:j,currentValue:F};break;default:O={...m,units:V,cost:j,currentValue:F};break}const{id:ne,...be}=O;let Y;if(b)Y=(N.assets||[]).map(ae=>ae.id===b?{...ae,...be}:ae);else{const ae={...be,id:Date.now().toString()};Y=[...N.assets||[],ae]}await e.doc(`artifacts/${i}/users/${n}/assetAccounts/${c}`).update({assets:Y}),_(d),E(null),s({message:`資產${b?"更新":"新增"}成功！`,type:"success",show:!0})},k=async()=>{s({message:"正在模擬抓取最新市價...",type:"info",show:!0});for(const I of t){if(!I.assets||I.assets.length===0)continue;const N=I.assets.map(V=>{if(V.accountType==="股票"||V.accountType==="ETF"){const j=(Math.random()-.45)*.1,F=parseFloat(String(V.currentValue))*(1+j);return{...V,currentValue:F}}return V});await e.doc(`artifacts/${i}/users/${n}/assetAccounts/${I.id}`).update({assets:N})}s({message:"所有投資標的市價已更新！",type:"success",show:!0})},L=I=>{_(I),E(I.id),window.scrollTo({top:0,behavior:"smooth"})},M=async I=>{const N=t.find(j=>j.id===c);if(!N)return;const V=N.assets.filter(j=>j.id!==I);await e.doc(`artifacts/${i}/users/${n}/assetAccounts/${c}`).update({assets:V}),s({message:"資產已刪除。",type:"success",show:!0})},H=I=>{const N=I.target.value;_({...d,accountType:N,currency:N==="美元資產"?"USD":"TWD"})},U=()=>{const I="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",N=(V,j,F,O,ne,be)=>y.jsxs("div",{children:[y.jsx("label",{htmlFor:V,className:"block text-sm font-medium text-gray-700 mb-1",children:j}),y.jsx("input",{id:V,name:be,type:F,placeholder:O,value:ne,onChange:Y=>_({...m,[be]:Y.target.value}),className:I,required:!0})]});switch(m.accountType){case"股票":case"ETF":return y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N("asset-code","股票/ETF 代號*","text","例如: 2330, 0050, AAPL",m.code,"code"),N("asset-units","持有股數/單位數*","number","例如: 1000 (股) or 2 (張)",m.units,"units"),N("asset-cost","平均買入成本 (每股)*","number","例如: 650.5",m.cost,"cost"),N("asset-currentValue","目前市價 (每股)*","number","例如: 680",m.currentValue,"currentValue")]});case"現金":return y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N("asset-code","現金項目名稱*","text","例如: 台幣活存、緊急備用金",m.code,"code"),N("asset-currentValue","現金總額*","number","例如: 500000",m.currentValue,"currentValue")]});case"不動產":return y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N("asset-code","房產地址/名稱*","text","例如: 台北市信義區的房子",m.code,"code"),N("asset-cost","購入總成本*","number","例如: 30000000",m.cost,"cost"),N("asset-currentValue","目前估計市價*","number","例如: 45000000",m.currentValue,"currentValue")]});case"美元資產":return y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N("asset-code","資產名稱*","text","例如: 美元定存, 美元計價基金",m.code,"code"),N("asset-cost","投入成本 (USD)*","number","例如: 10000",m.cost,"cost"),N("asset-currentValue","目前價值 (USD)*","number","例如: 10500",m.currentValue,"currentValue")]});default:return null}},z=((C=t.find(I=>I.id===c))==null?void 0:C.assets)||[];return y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"p-6 border rounded-lg bg-gray-50 shadow-sm",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"1. 管理資產帳戶"}),y.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[y.jsx("input",{type:"text",value:r,onChange:I=>o(I.target.value),placeholder:"新帳戶名稱 (例如: 富邦證券)",className:"p-2 border rounded-md shadow-sm flex-grow"}),y.jsx("button",{onClick:S,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 shadow-sm transition-colors",children:"新增帳戶"})]}),t.length>0&&y.jsxs("div",{className:"mt-4 space-y-2",children:[y.jsx("p",{className:"text-sm font-medium text-gray-600",children:"現有帳戶:"}),t.map(I=>y.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded-md border group",children:[y.jsx("span",{className:"text-gray-800",children:I.name}),y.jsx("button",{onClick:()=>T(I.id),className:"text-red-500 hover:text-red-700 text-sm opacity-50 group-hover:opacity-100 transition-opacity",children:"刪除"})]},I.id))]})]}),y.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-4",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"2. 管理帳戶內的資產"}),y.jsx("button",{onClick:k,className:"bg-blue-500 text-white text-sm px-4 py-2 rounded-md hover:bg-blue-600 shadow-sm transition-colors w-full sm:w-auto",children:"模擬獲取最新市價"})]}),y.jsxs("div",{className:"mb-6",children:[y.jsx("label",{htmlFor:"managing-account-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"選擇要管理的帳戶:"}),y.jsxs("select",{id:"managing-account-select",value:c,onChange:I=>h(I.target.value),className:"w-full p-2 border rounded-md shadow-sm bg-white",disabled:t.length===0,children:[y.jsx("option",{value:"",children:t.length>0?"— 請選擇 —":"請先新增一個帳戶"}),t.map(I=>y.jsx("option",{value:I.id,children:I.name},I.id))]})]}),c&&y.jsxs(y.Fragment,{children:[y.jsxs("form",{onSubmit:R,className:"mb-6 p-4 border rounded-lg bg-gray-50 space-y-4",children:[y.jsx("h4",{className:"font-semibold text-gray-700",children:b?"編輯資產":"新增資產"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"asset-type",className:"block text-sm font-medium text-gray-700 mb-1",children:"資產類型*"}),y.jsxs("select",{id:"asset-type",value:m.accountType,onChange:H,className:"w-full p-2 border border-gray-300 rounded-md bg-white shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:[y.jsx("option",{value:"股票",children:"股票 (Stock)"}),y.jsx("option",{value:"ETF",children:"ETF"}),y.jsx("option",{value:"現金",children:"現金 (Cash)"}),y.jsx("option",{value:"不動產",children:"不動產 (Real Estate)"}),y.jsx("option",{value:"美元資產",children:"其他美元計價資產"})]})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"asset-currency",className:"block text-sm font-medium text-gray-700 mb-1",children:"幣別*"}),y.jsxs("select",{id:"asset-currency",name:"currency",value:m.currency,disabled:m.accountType==="美元資產",onChange:I=>_({...m,currency:I.target.value}),className:"w-full p-2 border border-gray-300 rounded-md bg-white shadow-sm focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100",children:[y.jsx("option",{value:"TWD",children:"TWD"}),y.jsx("option",{value:"USD",children:"USD"})]})]})]}),U(),y.jsxs("div",{className:"col-span-full flex justify-end space-x-3 pt-2",children:[b&&y.jsx("button",{type:"button",onClick:()=>{E(null),_(d)},className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300 font-medium",children:"取消編輯"}),y.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 font-medium shadow-sm",children:b?"更新資產":"新增資產"})]})]}),y.jsx("h4",{className:"text-md font-medium mb-3 text-gray-700",children:"帳戶資產列表"}),y.jsxs("div",{className:"overflow-x-auto shadow-md rounded-lg",children:[y.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500",children:[y.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:y.jsxs("tr",{children:[y.jsx("th",{scope:"col",className:"px-4 py-3",children:"代號/名稱"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"類型"}),y.jsx("th",{scope:"col",className:"px-4 py-3 text-right",children:"單位"}),y.jsx("th",{scope:"col",className:"px-4 py-3 text-right",children:"成本"}),y.jsx("th",{scope:"col",className:"px-4 py-3 text-right",children:"現價"}),y.jsx("th",{scope:"col",className:"px-4 py-3",children:"幣別"}),y.jsx("th",{scope:"col",className:"px-4 py-3 text-center",children:"操作"})]})}),y.jsx("tbody",{children:z.map(I=>y.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50 transition-colors",children:[y.jsx("td",{className:"px-4 py-2 font-medium text-gray-900 whitespace-nowrap",children:I.code}),y.jsx("td",{className:"px-4 py-2",children:I.accountType}),y.jsx("td",{className:"px-4 py-2 text-right",children:I.units.toLocaleString()}),y.jsx("td",{className:"px-4 py-2 text-right",children:I.cost.toLocaleString()}),y.jsx("td",{className:"px-4 py-2 text-right",children:I.currentValue.toLocaleString()}),y.jsx("td",{className:"px-4 py-2",children:I.currency}),y.jsxs("td",{className:"px-4 py-2 text-center",children:[y.jsx("button",{onClick:()=>L(I),className:"font-medium text-indigo-600 hover:text-indigo-900 mr-4",children:"編輯"}),y.jsx("button",{onClick:()=>M(I.id),className:"font-medium text-red-600 hover:text-red-900",children:"刪除"})]})]},I.id))})]}),z.length===0&&y.jsx("p",{className:"text-center text-gray-500 py-6 bg-white",children:"此帳戶尚無資產。"})]})]})]})]})},Lq=({userId:n,db:e,budgets:t,cashflowRecords:s,settings:i,setNotification:r,appId:o})=>{const[c,h]=ce.useState(new Date().toISOString().slice(0,7)),[d,m]=ce.useState({}),_=[...Yp.expense,...i.customExpense||[]];ce.useEffect(()=>{const L=t.filter(M=>M.month===c).reduce((M,H)=>({...M,[H.category]:String(H.amount)}),{});m(L)},[c,t]);const{monthlySpending:b,averageSpending:E}=ce.useMemo(()=>{const k={},L={};s.filter(C=>C.date.startsWith(c)&&C.type==="expense").forEach(C=>{k[C.category]=(k[C.category]||0)+C.amount});const M=new Date(c);M.setMonth(M.getMonth()-3);const H=M.toISOString().slice(0,7),U=s.filter(C=>C.type==="expense"&&C.date>=H&&C.date<c),z={};return U.forEach(C=>{const I=C.date.slice(0,7);z[I]||(z[I]={}),z[I][C.category]=(z[I][C.category]||0)+C.amount}),_.forEach(C=>{let I=0,N=0;Object.values(z).forEach(V=>{V[C]&&(I+=V[C],N++)}),N>0&&(L[C]=I/N)}),{monthlySpending:k,averageSpending:L}},[c,s,_]),S=(k,L)=>{m(M=>({...M,[k]:L}))},T=()=>{const k=new Date(c+"-02");k.setMonth(k.getMonth()-1);const L=k.toISOString().slice(0,7),M=t.filter(U=>U.month===L);if(M.length===0){r({message:"上個月沒有設定預算可供複製。",type:"info",show:!0});return}const H=M.reduce((U,z)=>({...U,[z.category]:String(z.amount)}),{});m(H),r({message:`已從 ${L} 複製 ${Object.keys(H).length} 個預算項目。請記得儲存變更。`,type:"success",show:!0})},R=async()=>{try{const k=e.batch(),L=`artifacts/${o}/users/${n}/budgets`;for(const M of _){const H=d[M],U=H?parseFloat(H):0,z=t.find(C=>C.month===c&&C.category===M);if(z)if(U>0){if(z.amount!==U){const C=e.doc(`${L}/${z.id}`);k.update(C,{amount:U})}}else{const C=e.doc(`${L}/${z.id}`);k.delete(C)}else if(U>0){const C=e.collection(L).doc();k.set(C,{month:c,category:M,amount:U})}}await k.commit(),r({message:"預算儲存成功！",type:"success",show:!0})}catch(k){console.error("Error saving budgets:",k),r({message:"儲存預算時發生錯誤。",type:"error",show:!0})}};return y.jsxs("div",{className:"p-6 border rounded-lg bg-gray-50 shadow-sm",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center mb-6 gap-4",children:[y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx("label",{htmlFor:"budget-month",className:"text-md font-medium text-gray-700",children:"選擇月份:"}),y.jsx("input",{type:"month",id:"budget-month",value:c,onChange:k=>h(k.target.value),className:"p-2 border rounded-md shadow-sm bg-white"})]}),y.jsxs("button",{onClick:T,className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 shadow-sm transition-colors font-medium flex items-center justify-center text-sm",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})}),"從上個月複製"]}),y.jsx("button",{onClick:R,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 shadow-sm transition-colors font-medium",children:"儲存所有預算"})]}),y.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-x-8 gap-y-4",children:_.map(k=>{const L=b[k]||0,M=parseFloat(d[k])||0,H=M-L,U=M>0,z=E[k];return y.jsxs("div",{className:"grid grid-cols-2 items-center gap-2",children:[y.jsxs("label",{className:"text-right font-medium text-gray-700",children:[k,":"]}),y.jsxs("div",{children:[y.jsxs("div",{className:"relative",children:[y.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"$"}),y.jsx("input",{type:"number",value:d[k]||"",onChange:C=>S(k,C.target.value),placeholder:"設定預算",className:"p-2 pl-7 border rounded-md shadow-sm w-full"})]}),y.jsx("div",{className:"text-xs mt-1 text-right h-4",children:U?y.jsxs("p",{className:`${H>=0?"text-gray-500":"text-red-500 font-bold"}`,children:["已支出: ",L.toLocaleString(),", ",H>=0?`剩餘: ${H.toLocaleString()}`:`超支: ${Math.abs(H).toLocaleString()}`]}):L>0?y.jsxs("p",{className:"text-gray-500",children:["已支出: ",L.toLocaleString()]}):z&&y.jsxs("p",{className:"text-gray-400 italic",children:["近3個月平均: ",Math.round(z).toLocaleString()]})})]})]},k)})}),y.jsx("div",{className:"mt-6 flex justify-end",children:y.jsx("button",{onClick:R,className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 shadow-sm transition-colors font-medium",children:"儲存所有預算"})})]})},jq=({userId:n,db:e,goals:t,assetAccounts:s,setNotification:i,appId:r,effectiveUsdToTwdRate:o})=>{const c={name:"",targetAmount:"",currentAmount:"",targetDate:"",linkedAccountIds:[]},[h,d]=ce.useState(c),[m,_]=ce.useState(null),b=ce.useMemo(()=>s.map(M=>{const H=(M.assets||[]).reduce((U,z)=>{const C=z.currency==="USD"?o:1,I=parseFloat(String(z.currentValue))||0,N=parseFloat(String(z.units))||0;return U+I*N*C},0);return{id:M.id,name:M.name,totalValueTWD:H}}).sort((M,H)=>H.totalValueTWD-M.totalValueTWD),[s,o]);ce.useEffect(()=>{const M=(h.linkedAccountIds||[]).reduce((H,U)=>{const z=b.find(C=>C.id===U);return H+((z==null?void 0:z.totalValueTWD)||0)},0);h.linkedAccountIds.length>0&&d(H=>({...H,currentAmount:M.toFixed(0)}))},[h.linkedAccountIds,b]);const E=M=>{d(H=>{const U=H.linkedAccountIds||[],z=U.includes(M)?U.filter(C=>C!==M):[...U,M];return z.length===0?{...H,linkedAccountIds:[],currentAmount:""}:{...H,linkedAccountIds:z}})},S=M=>{const{name:H,value:U}=M.target;d(z=>({...z,[H]:U}))},T=async M=>{M.preventDefault();const H={name:h.name,targetAmount:parseFloat(h.targetAmount)||0,targetDate:h.targetDate,linkedAccountIds:h.linkedAccountIds||[]};H.linkedAccountIds.length===0&&(H.currentAmount=parseFloat(h.currentAmount)||0);const U=`artifacts/${r}/users/${n}/goals`;m?(await e.doc(`${U}/${m}`).set(H),i({message:"目標更新成功！",type:"success",show:!0})):(await e.collection(U).add(H),i({message:"目標新增成功！",type:"success",show:!0})),d(c),_(null)},R=M=>{d({name:M.name,targetAmount:String(M.targetAmount),currentAmount:String(M.currentAmount||0),targetDate:M.targetDate,linkedAccountIds:M.linkedAccountIds||[]}),_(M.id),window.scrollTo({top:0,behavior:"smooth"})},k=async M=>{window.confirm("您確定要刪除這個目標嗎？")&&(await e.doc(`artifacts/${r}/users/${n}/goals/${M}`).delete(),i({message:"目標已刪除。",type:"success",show:!0}))},L=h.linkedAccountIds&&h.linkedAccountIds.length>0;return y.jsxs("div",{children:[y.jsxs("form",{onSubmit:T,className:"mb-8 p-6 border rounded-lg bg-gray-50 space-y-4 shadow-sm",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:m?"編輯財務目標":"新增財務目標"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"目標名稱*"}),y.jsx("input",{name:"name",value:h.name,onChange:S,placeholder:"例如: 購車基金",className:"mt-1 w-full p-2 border rounded-md shadow-sm",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"目標金額 (TWD)*"}),y.jsx("input",{type:"number",name:"targetAmount",value:h.targetAmount,onChange:S,placeholder:"例如: 500000",className:"mt-1 w-full p-2 border rounded-md shadow-sm",required:!0})]}),y.jsxs("div",{className:"md:col-span-2",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"連結資產帳戶 (選填)"}),y.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"選擇一個或多個帳戶，將自動加總其目前價值作為已存金額。"}),y.jsx("div",{className:"p-2 border rounded-md bg-white shadow-sm max-h-32 overflow-y-auto space-y-1",children:b.map(M=>y.jsxs("div",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",id:`acc-${M.id}`,checked:(h.linkedAccountIds||[]).includes(M.id),onChange:()=>E(M.id),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),y.jsxs("label",{htmlFor:`acc-${M.id}`,className:"ml-2 text-sm text-gray-700",children:[M.name," ($",M.totalValueTWD.toLocaleString(void 0,{maximumFractionDigits:0}),")"]})]},M.id))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:L?"目前已存金額 (自動計算)":"目前已存金額 (手動輸入)*"}),y.jsx("input",{type:"number",name:"currentAmount",value:h.currentAmount,onChange:S,placeholder:L?"由連結帳戶計算":"例如: 150000",className:"mt-1 w-full p-2 border rounded-md shadow-sm disabled:bg-gray-100 disabled:text-gray-500",required:!0,disabled:L})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"目標日期"}),y.jsx("input",{type:"date",name:"targetDate",value:h.targetDate,onChange:S,className:"mt-1 w-full p-2 border rounded-md shadow-sm"})]})]}),y.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[m&&y.jsx("button",{type:"button",onClick:()=>{_(null),d(c)},className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300 font-medium",children:"取消"}),y.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 font-medium shadow-sm",children:m?"更新目標":"新增目標"})]})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"現有目標"}),t.map(M=>{const H=M.linkedAccountIds&&M.linkedAccountIds.length>0?(M.linkedAccountIds||[]).reduce((C,I)=>{const N=b.find(V=>V.id===I);return C+((N==null?void 0:N.totalValueTWD)||0)},0):M.currentAmount||0,U=Math.min(H/M.targetAmount*100,100),z=(M.linkedAccountIds||[]).map(C=>{var I;return(I=s.find(N=>N.id===C))==null?void 0:I.name}).filter(Boolean).join(", ");return y.jsxs("div",{className:"p-4 border rounded-lg bg-white shadow-sm transition-shadow hover:shadow-md",children:[y.jsxs("div",{className:"flex justify-between items-start mb-2",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"font-bold text-gray-800",children:M.name}),y.jsxs("p",{className:"text-xs text-gray-500",children:["目標日期: ",M.targetDate||"未設定",z&&` | 連結帳戶: ${z}`]})]}),y.jsxs("div",{children:[y.jsx("button",{onClick:()=>R(M),className:"text-indigo-600 hover:text-indigo-900 mr-3 text-sm font-medium",children:"編輯"}),y.jsx("button",{onClick:()=>k(M.id),className:"text-red-600 hover:text-red-900 text-sm font-medium",children:"刪除"})]})]}),y.jsxs("p",{className:"text-gray-700 text-sm mt-3",children:["$",H.toLocaleString(void 0,{maximumFractionDigits:0})," / ",y.jsxs("span",{className:"font-medium",children:["$",M.targetAmount.toLocaleString()]})]}),y.jsxs("div",{className:"mt-1",children:[y.jsxs("div",{className:"flex justify-between mb-1",children:[y.jsx("span",{className:"text-xs font-medium text-blue-700",children:"進度"}),y.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[U.toFixed(1),"%"]})]}),y.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:y.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-2.5 rounded-full transition-all duration-1000 ease-out",style:{width:`${U}%`}})})]})]},M.id)}),t.length===0&&y.jsx("p",{className:"text-gray-500 text-center py-6",children:"尚未新增任何財務目標。"})]})]})},Uq=n=>{const{userId:e,db:t,settings:s,setNotification:i,appId:r,assetAccounts:o,cashflowRecords:c,budgets:h,goals:d}=n,[m,_]=ce.useState(""),[b,E]=ce.useState(""),[S,T]=ce.useState(s.manualRate||""),[R,k]=ce.useState(""),[L,M]=ce.useState(""),[H,U]=ce.useState("financial_data.json"),[z,C]=ce.useState(null),[I,N]=ce.useState(!1),[V,j]=ce.useState("同步中...");ce.useEffect(()=>{T(s.manualRate||""),k(localStorage.getItem("githubToken")||""),M(localStorage.getItem("githubRepo")||""),U(localStorage.getItem("githubPath")||"financial_data.json"),C(localStorage.getItem("lastSync"))},[s.manualRate]);const F=()=>{localStorage.setItem("githubToken",R),localStorage.setItem("githubRepo",L),localStorage.setItem("githubPath",H),i({message:"GitHub settings saved locally in your browser.",type:"info",show:!0})},O=()=>({assetAccounts:o,cashflowRecords:c,budgets:h,goals:d,settings:s,backupTimestamp:new Date().toISOString()}),ne=()=>{N(!0),j("正在產生備份檔案..."),setTimeout(()=>{try{const B=O(),se=JSON.stringify(B,null,2),de=new Blob([se],{type:"application/json"}),fe=URL.createObjectURL(de),ve=document.createElement("a");ve.href=fe,ve.download="financial_data_backup.json",document.body.appendChild(ve),ve.click(),document.body.removeChild(ve),URL.revokeObjectURL(fe),i({message:"備份檔案已成功下載！",type:"success",show:!0})}catch(B){console.error("Backup file generation error:",B);const se=B instanceof Error?B.message:"An unknown error occurred.";i({message:`產生備份檔案失敗: ${se}`,type:"error",show:!0})}finally{N(!1)}},50)},be=async()=>{if(!R||!L||!H){i({message:"請填寫完整的 GitHub 同步設定。",type:"error",show:!0});return}N(!0),j("正在同步至 GitHub...");const B=`https://api.github.com/repos/${L}/contents/${H}`,se={Authorization:`Bearer ${R}`,Accept:"application/vnd.github.v3+json"};try{let de;try{const $t=await fetch(B,{headers:se});if($t.ok)de=(await $t.json()).sha;else if($t.status!==404)throw new Error(`無法讀取 GitHub 檔案: ${$t.statusText}`)}catch($t){console.warn("Could not fetch current file SHA, proceeding without it.",$t)}const fe=O(),ve=JSON.stringify(fe,null,2),Ve=btoa(unescape(encodeURIComponent(ve))),Ie=JSON.stringify({message:`Sync financial data: ${new Date().toISOString()}`,content:Ve,sha:de}),Ct=await fetch(B,{method:"PUT",headers:se,body:Ie});if(!Ct.ok)throw new Error(`GitHub API 錯誤: ${(await Ct.json()).message}`);const nt=new Date().toLocaleString();C(nt),localStorage.setItem("lastSync",nt),i({message:"資料已成功同步至 GitHub！",type:"success",show:!0})}catch(de){console.error("GitHub Sync Error:",de);const fe=de instanceof Error?de.message:"An unknown error occurred.";i({message:`同步失敗: ${fe}`,type:"error",show:!0})}finally{N(!1)}},Y=async()=>{if(!R||!L||!H){i({message:"請填寫完整的 GitHub 同步設定。",type:"error",show:!0});return}if(!window.confirm("您確定要從 GitHub 載入資料嗎？這將會覆寫您目前的所有本地資料！"))return;N(!0),j("正在從 GitHub 載入...");const B=`https://api.github.com/repos/${L}/contents/${H}`;try{const se=await fetch(B,{headers:{Authorization:`Bearer ${R}`,Accept:"application/vnd.github.v3+json"}});if(!se.ok)throw new Error(`無法讀取 GitHub 檔案: ${se.statusText}`);const de=await se.json(),fe=decodeURIComponent(escape(atob(de.content))),ve=JSON.parse(fe),Ve=[{name:"assetAccounts",data:ve.assetAccounts||[]},{name:"cashflowRecords",data:ve.cashflowRecords||[]},{name:"budgets",data:ve.budgets||[]},{name:"goals",data:ve.goals||[]}];j("正在寫入資料庫...");for(const Ie of Ve){const Ct=`artifacts/${r}/users/${e}/${Ie.name}`,nt=await t.collection(Ct).get(),$t=t.batch();nt.docs.forEach(mi=>$t.delete(mi.ref)),await $t.commit();const Br=t.batch();Ie.data.forEach(mi=>{const{id:Ki,...Qi}=mi,zr=Ki?t.collection(Ct).doc(Ki):t.collection(Ct).doc();Br.set(zr,Qi)}),await Br.commit()}await t.doc(`artifacts/${r}/users/${e}/settings/userSettings`).set(ve.settings||{}),i({message:"資料已成功從 GitHub 載入並同步！",type:"success",show:!0})}catch(se){console.error("GitHub Load Error:",se);const de=se instanceof Error?se.message:"An unknown error occurred.";i({message:`載入失敗: ${de}`,type:"error",show:!0})}finally{N(!1)}},ae=async()=>{const B={...s,manualRate:parseFloat(String(S))||null};await t.doc(`artifacts/${r}/users/${e}/settings/userSettings`).set(B,{merge:!0}),i({message:"設定已儲存！",type:"success",show:!0})},ge=async B=>{const se=B==="income"?m.trim():b.trim();if(!se)return;const de=B==="income"?"customIncome":"customExpense",fe=s[de]||[];if(fe.includes(se)){i({message:"類別已存在。",type:"error",show:!0});return}await t.doc(`artifacts/${r}/users/${e}/settings/userSettings`).set({[de]:[...fe,se]},{merge:!0}),B==="income"?_(""):E(""),i({message:"類別新增成功！",type:"success",show:!0})},Ne=async(B,se)=>{if(window.confirm(`您確定要移除「${se}」這個類別嗎？`)){const de=B==="income"?"customIncome":"customExpense",fe=(s[de]||[]).filter(ve=>ve!==se);await t.doc(`artifacts/${r}/users/${e}/settings/userSettings`).set({[de]:fe},{merge:!0}),i({message:"類別已移除。",type:"success",show:!0})}};return y.jsxs("div",{className:"relative",children:[I&&y.jsxs("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm flex flex-col items-center justify-center z-50 rounded-lg",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"}),y.jsx("p",{className:"text-lg text-gray-700 mt-4 font-semibold",children:V})]}),y.jsxs("div",{className:`space-y-8 max-w-3xl mx-auto ${I?"filter blur-sm":""}`,children:[y.jsxs("div",{className:"p-6 border rounded-xl bg-white shadow-lg",children:[y.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-2 flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})}),"GitHub 同步"]}),y.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"將您的財務資料安全地備份至私有 GitHub 儲存庫，實現跨裝置同步。"}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GitHub Personal Access Token (PAT)"}),y.jsx("input",{type:"password",value:R,onChange:B=>k(B.target.value),onBlur:F,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm",placeholder:"ghp_xxxxxxxxxxxxxxxxxxxx"}),y.jsxs("div",{className:"mt-1 text-xs text-gray-500 p-2 bg-gray-50 rounded-md border",children:[y.jsxs("p",{children:["1. 前往您的 GitHub ",y.jsx("a",{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline font-semibold",children:"開發者設定"}),"。"]}),y.jsx("p",{children:'2. 點擊 "Generate new token" 並選擇 "Generate new token (classic)"。'}),y.jsxs("p",{children:["3. ",y.jsxs("strong",{children:["最重要的一步：請務必勾選授予 ",y.jsx("code",{className:"text-xs bg-gray-200 p-1 rounded",children:"repo"})," 權限"]}),"，以允許此應用程式讀寫您的儲存庫。"]}),y.jsx("strong",{className:"block text-red-600 mt-2",children:"警告：此金鑰將儲存在您的瀏覽器本地儲存空間中。請勿在公共或不信任的電腦上使用此功能。"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"儲存庫 (Repository)"}),y.jsx("input",{type:"text",value:L,onChange:B=>M(B.target.value),onBlur:F,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm",placeholder:"your_username/your_repo_name"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"檔案路徑 (File Path)"}),y.jsx("input",{type:"text",value:H,onChange:B=>U(B.target.value),onBlur:F,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm"})]})]}),y.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-4",children:[y.jsxs("button",{onClick:be,disabled:I,className:"flex-1 bg-green-600 text-white px-6 py-3 rounded-md hover:bg-green-700 transition-colors shadow-sm flex items-center justify-center font-semibold disabled:bg-green-300",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),I?"同步中...":"儲存至 GitHub"]}),y.jsxs("button",{onClick:Y,disabled:I,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors shadow-sm flex items-center justify-center font-semibold disabled:bg-blue-300",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),I?"載入中...":"從 GitHub 載入"]})]}),z&&y.jsxs("p",{className:"text-xs text-gray-500 mt-4 text-center",children:["上次同步時間: ",z]})]}),y.jsxs("div",{className:"p-6 border rounded-xl bg-white shadow-lg",children:[y.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"手動資料匯出 / 備份"]}),y.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"點擊按鈕將您的所有應用程式資料匯出為一個 JSON 檔案作為手動備份。"}),y.jsx("div",{className:"flex justify-center",children:y.jsxs("button",{onClick:ne,disabled:I,className:"w-full sm:w-auto bg-gray-600 text-white px-6 py-3 rounded-md hover:bg-gray-700 transition-colors shadow-sm flex items-center justify-center font-semibold disabled:bg-gray-400",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"下載手動備份"]})})]}),y.jsxs("div",{className:"p-6 border rounded-xl bg-white shadow-lg",children:[y.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 012-2h2a2 2 0 012 2v1m-6 0h6"})}),"自訂類別"]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[y.jsxs("div",{children:[y.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"收入類別"}),y.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[y.jsx("input",{value:m,onChange:B=>_(B.target.value),onKeyPress:B=>{B.key==="Enter"&&ge("income")},placeholder:"新增收入類別",className:"flex-grow p-2 border rounded-md"}),y.jsx("button",{onClick:()=>ge("income"),className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors",children:"新增"})]}),y.jsx("ul",{className:"space-y-2",children:(s.customIncome||[]).map(B=>y.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded-md group",children:[y.jsx("span",{className:"text-gray-700",children:B}),y.jsx("button",{onClick:()=>Ne("income",B),className:"text-gray-400 opacity-0 group-hover:opacity-100 h-t-r",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},B))})]}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"支出類別"}),y.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[y.jsx("input",{value:b,onChange:B=>E(B.target.value),onKeyPress:B=>{B.key==="Enter"&&ge("expense")},placeholder:"新增支出類別",className:"flex-grow p-2 border rounded-md"}),y.jsx("button",{onClick:()=>ge("expense"),className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors",children:"新增"})]}),y.jsx("ul",{className:"space-y-2",children:(s.customExpense||[]).map(B=>y.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-2 rounded-md group",children:[y.jsx("span",{className:"text-gray-700",children:B}),y.jsx("button",{onClick:()=>Ne("expense",B),className:"text-gray-400 opacity-0 group-hover:opacity-100 h-t-r",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},B))})]})]})]}),y.jsxs("div",{className:"p-6 border rounded-xl bg-white shadow-lg",children:[y.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01"})}),"匯率設定"]}),y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx("label",{className:"font-medium text-gray-700",children:"USD-TWD 手動匯率:"}),y.jsx("input",{type:"number",step:"any",value:S,onChange:B=>T(B.target.value),className:"p-2 border border-gray-300 rounded-md shadow-sm",placeholder:"例如: 32.5"})]}),y.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"* 留白則使用系統預設匯率。"})]}),y.jsx("div",{className:"flex justify-end pt-6 border-t mt-8",children:y.jsx("button",{onClick:ae,className:"bg-blue-600 text-white px-8 py-2.5 rounded-lg hover:bg-blue-700 shadow-md font-semibold transition-transform transform hover:scale-105",children:"儲存所有設定"})})]})]})},Fq={cashflow:n=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),assets:n=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),budgets:n=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M12 8h.01M15 8h.01M15 14h.01M18 17h.01M18 14h.01M18 11h.01M18 8h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),goals:n=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),settings:n=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},Bq=n=>{const[e,t]=ce.useState("cashflow"),s=()=>{switch(e){case"assets":return y.jsx(Vq,{...n});case"cashflow":return y.jsx(Pq,{...n});case"budgets":return y.jsx(Lq,{...n});case"goals":return y.jsx(jq,{...n});case"settings":return y.jsx(Uq,{...n});default:return null}},i=[{id:"cashflow",label:"收支管理"},{id:"assets",label:"資產管理"},{id:"budgets",label:"預算管理"},{id:"goals",label:"目標管理"},{id:"settings",label:"系統設定"}];return y.jsxs("div",{children:[y.jsx(Fr,{title:"資料管理中心"}),y.jsx("div",{className:"border-b border-gray-200 mb-6",children:y.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto","aria-label":"Tabs",children:i.map(r=>{const o=Fq[r.id];return y.jsxs("button",{onClick:()=>t(r.id),className:`${e===r.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} flex items-center whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm capitalize transition-colors duration-200`,children:[y.jsx(o,{className:"h-5 w-5 mr-2"}),r.label]},r.id)})})}),y.jsx("div",{className:"mt-6",children:s()})]})},zq=n=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),Dv=15,Hq=({assetAccounts:n})=>{const[e,t]=ce.useState(null),[s,i]=ce.useState({key:"currentValueTWD",direction:"descending"}),[r,o]=ce.useState(1);ce.useEffect(()=>{n.length>0&&!e||n.length>0&&!n.find(S=>S.id===e)?(t(n[0].id),o(1)):n.length===0&&t(null)},[n,e]);const c=n.find(S=>S.id===e),h=ce.useMemo(()=>!c||!c.assets?0:c.assets.reduce((S,T)=>S+(T.currentValueTWD||0),0),[c]),d=ce.useMemo(()=>{o(1);const S=c==null?void 0:c.assets;if(!S)return[];const T=[...S];return T.sort((R,k)=>{const L=R[s.key]??(s.key==="code"?"":0),M=k[s.key]??(s.key==="code"?"":0);return L<M?s.direction==="ascending"?-1:1:L>M?s.direction==="ascending"?1:-1:0}),T},[c,s]),m=ce.useMemo(()=>{const S=(r-1)*Dv;return d.slice(S,S+Dv)},[d,r]),_=Math.ceil(d.length/Dv),b=S=>{let T="ascending";s.key===S&&s.direction==="ascending"&&(T="descending"),i({key:S,direction:T})},E=S=>s.key!==S?null:s.direction==="ascending"?" ▲":" ▼";return y.jsxs(gn,{children:[y.jsx(Fr,{title:"資產總覽",subtitle:"此頁面為您的資產總覽。如需新增、編輯或刪除資產，請前往「資料管理」頁面。"}),n.length===0?y.jsx("div",{className:"mt-8",children:y.jsx(tm,{Icon:zq,title:"尚未建立任何資產帳戶",message:"請先至「資料管理」頁面的「資產管理」分頁新增您的第一個帳戶，再來此處查看總覽。"})}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"mb-6",children:[y.jsx("label",{htmlFor:"account-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"選擇資產帳戶:"}),y.jsx("select",{id:"account-select",className:"mt-1 block w-full md:w-1/2 pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md shadow-sm",value:e||"",onChange:S=>t(S.target.value),children:n.map(S=>y.jsx("option",{value:S.id,children:S.name},S.id))})]}),c?y.jsxs("div",{className:"mt-8",children:[y.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-4 p-4 bg-gray-50 rounded-lg border",children:[y.jsxs("h3",{className:"text-2xl font-semibold text-gray-800",children:[c.name," 的資產"]}),y.jsxs("div",{className:"text-right",children:[y.jsx("p",{className:"text-sm text-gray-600",children:"帳戶總價值 (TWD)"}),y.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["$",h.toLocaleString(void 0,{maximumFractionDigits:0})]})]})]}),c.assets&&c.assets.length>0?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"overflow-x-auto relative shadow-md sm:rounded-lg mt-6",children:y.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[y.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:y.jsxs("tr",{children:[y.jsxs("th",{scope:"col",className:"py-3 px-6 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>b("code"),children:["代號/名稱",E("code")]}),y.jsx("th",{scope:"col",className:"py-3 px-6",children:"單位"}),y.jsx("th",{scope:"col",className:"py-3 px-6",children:"成本"}),y.jsx("th",{scope:"col",className:"py-3 px-6",children:"幣別"}),y.jsxs("th",{scope:"col",className:"py-3 px-6 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>b("currentValueTWD"),children:["當前價值 (TWD)",E("currentValueTWD")]}),y.jsxs("th",{scope:"col",className:"py-3 px-6 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>b("profitLossTWD"),children:["損益 (TWD)",E("profitLossTWD")]})]})}),y.jsx("tbody",{children:m.map((S,T)=>{const R=S.profitLossTWD||0;return y.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[y.jsx("td",{className:"py-4 px-6 font-medium text-gray-900 whitespace-nowrap",children:S.code}),y.jsx("td",{className:"py-4 px-6",children:S.units.toLocaleString()}),y.jsx("td",{className:"py-4 px-6",children:S.cost.toLocaleString()}),y.jsx("td",{className:"py-4 px-6",children:S.currency}),y.jsx("td",{className:"py-4 px-6",children:(S.currentValueTWD||0).toLocaleString(void 0,{maximumFractionDigits:0})}),y.jsx("td",{className:`py-4 px-6 font-semibold ${R>=0?"text-green-600":"text-red-600"}`,children:R.toLocaleString(void 0,{maximumFractionDigits:0})})]},S.id||T)})})]})}),_>1&&y.jsxs("div",{className:"flex justify-between items-center mt-4",children:[y.jsx("button",{onClick:()=>o(S=>Math.max(1,S-1)),disabled:r===1,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"上一頁"}),y.jsxs("span",{className:"text-sm text-gray-700",children:["第 ",r," 頁 / 共 ",_," 頁"]}),y.jsx("button",{onClick:()=>o(S=>Math.min(_,S+1)),disabled:r===_,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"下一頁"})]})]}):y.jsx("p",{className:"text-gray-500 text-center py-8",children:"此帳戶中沒有資產，快去「資料管理」新增吧！"})]}):y.jsx("p",{className:"text-center text-gray-500 py-12",children:"請選擇一個帳戶以查看其資產。"})]})]})},qq=n=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),kv=25,Gq=({cashflowRecords:n})=>{const[e,t]=ce.useState({key:"date",direction:"descending"}),[s,i]=ce.useState(1),r=new Date().toISOString().slice(0,7),o=ce.useMemo(()=>{const b=n.filter(R=>R.date.startsWith(r)),E=b.filter(R=>R.type==="income").reduce((R,k)=>R+k.amount,0),S=b.filter(R=>R.type==="expense").reduce((R,k)=>R+k.amount,0),T=E-S;return{income:E,expense:S,net:T}},[n,r]),c=ce.useMemo(()=>{if(i(1),n.length===0)return[];let b=[...n];return b.sort((E,S)=>{const T=E[e.key],R=S[e.key];return T<R?e.direction==="ascending"?-1:1:T>R?e.direction==="ascending"?1:-1:0}),b},[n,e]),h=ce.useMemo(()=>{const b=(s-1)*kv;return c.slice(b,b+kv)},[c,s]),d=Math.ceil(c.length/kv),m=b=>{let E="ascending";e.key===b&&e.direction==="ascending"&&(E="descending"),t({key:b,direction:E})},_=[{key:"date",label:"日期"},{key:"type",label:"類型"},{key:"category",label:"類別"},{key:"amount",label:"金額"},{key:"currency",label:"幣別"},{key:"accountName",label:"帳戶"},{key:"description",label:"說明"}];return y.jsxs(gn,{children:[y.jsx(Fr,{title:"收支管理 & 帳本",subtitle:"此頁面為您的收支記錄。如需新增、編輯或刪除記錄，請前往「資料管理」頁面。"}),y.jsxs("div",{className:"mb-8 p-4 bg-gray-50 rounded-lg border",children:[y.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:["本月 (",r,") 財務快照"]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium text-green-600",children:"總收入"}),y.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["$",o.income.toLocaleString()]})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium text-red-600",children:"總支出"}),y.jsxs("p",{className:"text-2xl font-bold text-red-700",children:["$",o.expense.toLocaleString()]})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium text-blue-600",children:"淨儲蓄"}),y.jsxs("p",{className:`text-2xl font-bold ${o.net>=0?"text-blue-700":"text-red-700"}`,children:["$",o.net.toLocaleString()]})]})]})]}),y.jsx("div",{className:"mt-8",children:n.length>0?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"overflow-x-auto relative shadow-md sm:rounded-lg",children:y.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[y.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:y.jsx("tr",{children:_.map(({key:b,label:E})=>y.jsxs("th",{scope:"col",className:"py-3 px-6 cursor-pointer",onClick:()=>m(b),children:[E,e.key===b?e.direction==="ascending"?" ▲":" ▼":""]},b))})}),y.jsx("tbody",{children:h.map(b=>y.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[y.jsx("td",{className:"py-4 px-6",children:b.date}),y.jsx("td",{className:`py-4 px-6 font-medium ${b.type==="income"?"text-green-600":"text-red-600"}`,children:b.type==="income"?"收入":"支出"}),y.jsx("td",{className:"py-4 px-6",children:b.category}),y.jsx("td",{className:"py-4 px-6",children:b.amount.toLocaleString()}),y.jsx("td",{className:"py-4 px-6",children:b.currency||"TWD"}),y.jsx("td",{className:"py-4 px-6 text-gray-600",children:b.accountName||"N/A"}),y.jsx("td",{className:"py-4 px-6 max-w-xs truncate",title:b.description||"N/A",children:b.description||"N/A"})]},b.id))})]})}),d>1&&y.jsxs("div",{className:"flex justify-between items-center mt-4",children:[y.jsx("button",{onClick:()=>i(b=>Math.max(1,b-1)),disabled:s===1,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"上一頁"}),y.jsxs("span",{className:"text-sm text-gray-700",children:["第 ",s," 頁 / 共 ",d," 頁"]}),y.jsx("button",{onClick:()=>i(b=>Math.min(d,b+1)),disabled:s===d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"下一頁"})]})]}):y.jsx(tm,{Icon:qq,title:"目前沒有收支記錄",message:"請前往「資料管理」頁面的「收支管理」分頁，開始記錄您的第一筆收入或支出。"})})]})},Wq=({cashflowRecords:n,budgets:e,db:t,userId:s,appId:i,settings:r,setNotification:o})=>{const c=ce.useRef(null),h=ce.useRef(null),[d,m]=ce.useState(new Date().toISOString().slice(0,7)),[_,b]=ce.useState(!1),E={category:"",amount:""},[S,T]=ce.useState(E),R=[...Yp.expense,...r.customExpense||[]],k=ce.useMemo(()=>{const z=n.filter(O=>O.date.startsWith(d)&&O.type==="expense"),C=e.filter(O=>O.month===d),I=z.reduce((O,ne)=>(O[ne.category]=(O[ne.category]||0)+ne.amount,O),{}),V=[...new Set([...C.map(O=>O.category),...Object.keys(I)])].map(O=>{var Y;const ne=((Y=C.find(ae=>ae.category===O))==null?void 0:Y.amount)||0,be=I[O]||0;return{category:O,budget:ne,spent:be,overBudget:be>ne}}),j=C.reduce((O,ne)=>O+ne.amount,0),F=Object.values(I).reduce((O,ne)=>O+Number(ne),0);return{combinedData:V,totalBudget:j,totalSpent:F}},[d,n,e]),L=()=>{T(E),b(!0)},M=async z=>{z.preventDefault();const{category:C,amount:I}=S,N=parseFloat(I);if(!C||isNaN(N)||N<=0){o({message:"請選擇一個類別並輸入有效的預算金額。",type:"error",show:!0});return}const V=`artifacts/${i}/users/${s}/budgets`,j=e.find(F=>F.month===d&&F.category===C);try{j?(await t.doc(`${V}/${j.id}`).update({amount:N}),o({message:"預算更新成功！",type:"success",show:!0})):(await t.collection(V).add({month:d,category:C,amount:N}),o({message:"預算新增成功！",type:"success",show:!0}))}catch(F){console.error("Error saving budget:",F),o({message:"儲存預算時發生錯誤。",type:"error",show:!0})}b(!1)};ce.useEffect(()=>{if(c.current&&k.combinedData.length>0){h.current&&h.current.destroy();const z=c.current.getContext("2d");if(z){const C=k.combinedData.map(O=>O.category),I=k.combinedData.map(O=>O.budget),N=k.combinedData.map(O=>O.spent),V=z.createLinearGradient(0,0,0,400);V.addColorStop(0,"rgba(59, 130, 246, 0.7)"),V.addColorStop(1,"rgba(59, 130, 246, 0.3)");const j=z.createLinearGradient(0,0,0,400);j.addColorStop(0,"rgba(16, 185, 129, 0.7)"),j.addColorStop(1,"rgba(16, 185, 129, 0.3)");const F=z.createLinearGradient(0,0,0,400);F.addColorStop(0,"rgba(239, 68, 68, 0.7)"),F.addColorStop(1,"rgba(239, 68, 68, 0.3)"),h.current=new On(z,{type:"bar",data:{labels:C,datasets:[{label:"預算金額",data:I,backgroundColor:V,borderColor:"rgba(59, 130, 246, 1)",borderWidth:1,borderRadius:5,hoverBackgroundColor:"rgba(59, 130, 246, 1)"},{label:"實際支出",data:N,backgroundColor:N.map((O,ne)=>O>I[ne]?F:j),borderColor:N.map((O,ne)=>O>I[ne]?"rgba(239, 68, 68, 1)":"rgba(16, 185, 129, 1)"),borderWidth:1,borderRadius:5,hoverBackgroundColor:N.map((O,ne)=>O>I[ne]?"rgba(239, 68, 68, 1)":"rgba(16, 185, 129, 1)")}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{y:{beginAtZero:!0,grid:{color:"rgba(200, 200, 200, 0.2)"},ticks:{callback:O=>`${Number(O)/1e3}k`}},x:{grid:{display:!1}}},plugins:{title:{display:!0,text:`${d} 預算 vs. 支出分析`,font:{size:16}},tooltip:{enabled:!0,backgroundColor:"rgba(30, 41, 59, 0.9)",titleColor:"#ffffff",bodyColor:"#ffffff",footerColor:"#ffffff",titleFont:{size:14,weight:"bold"},bodyFont:{size:12},footerFont:{size:12,weight:"bold"},padding:12,cornerRadius:8,displayColors:!0,callbacks:{label:function(O){let ne=O.dataset.label||"";return ne&&(ne+=": "),O.parsed.y!==null&&(ne+=new Intl.NumberFormat("en-US",{style:"currency",currency:"TWD",minimumFractionDigits:0,maximumFractionDigits:0}).format(O.parsed.y)),ne},footer:O=>{let ne=0,be=0;const Y=O.find(ge=>ge.dataset.label==="預算金額"),ae=O.find(ge=>ge.dataset.label==="實際支出");if(Y&&(ne=Y.raw),ae&&(be=ae.raw),ne>0){const ge=ne-be;return ge>=0?`剩餘額度: ${ge.toLocaleString()} 元`:`超支金額: ${Math.abs(ge).toLocaleString()} 元`}return""}}}}}})}}return()=>{h.current&&h.current.destroy()}},[k,d]);const H=ce.useMemo(()=>{const z=[],{combinedData:C,totalBudget:I,totalSpent:N}=k;I>0?z.push(N>I?{title:"超出總預算",message:`本月總支出已超出總預算 ${(N-I).toLocaleString()} 元。`,type:"warning"}:{title:"預算控制良好",message:`本月總支出仍在預算內，剩餘額度為 ${(I-N).toLocaleString()} 元。`,type:"success"}):z.push({title:"設定月度預算",message:"您尚未設定本月預算，可點擊上方按鈕快速新增或前往「資料管理」設定。",type:"info"});const V=C.filter(j=>j.overBudget&&j.budget>0);return V.length>0&&z.push({title:"注意超支項目",message:`您在「${V.map(j=>j.category).join(", ")}」等項目上已超支。`,type:"warning"}),z},[k]),U={success:"bg-green-50 border-green-500 text-green-800",warning:"bg-red-100 border-red-600 text-red-900",info:"bg-blue-50 border-blue-500 text-blue-800"};return y.jsxs(gn,{children:[y.jsx(Fr,{title:"預算檢視 & 月任務卡",subtitle:"此頁面為您的預算檢視。點擊「快速新增預算」來為當前月份新增項目，或前往「資料管理」頁面進行更詳細的設定。"}),y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("label",{htmlFor:"budget-month-select",className:"text-sm font-medium text-gray-700",children:"選擇月份:"}),y.jsx("input",{type:"month",id:"budget-month-select",value:d,onChange:z=>m(z.target.value),className:"p-2 border rounded-md shadow-sm"})]}),y.jsxs("button",{onClick:L,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 shadow-sm transition-colors flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"快速新增預算"]})]}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[y.jsx("div",{className:"lg:col-span-3 bg-gray-50 p-4 rounded-lg border h-96",children:k.combinedData.length>0?y.jsx("canvas",{ref:c}):y.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:"此月份無預算或支出數據可供分析。"})}),y.jsxs("div",{className:"lg:col-span-2",children:[y.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"本月任務與洞察"}),y.jsx("div",{className:"space-y-4",children:H.map((z,C)=>y.jsxs("div",{className:`flex items-start p-4 ${z.type==="warning"?"border-l-8":"border-l-[5px]"} rounded-r-lg shadow-sm ${U[z.type]}`,children:[z.type==="warning"&&y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 flex-shrink-0 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),z.type==="success"&&y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 flex-shrink-0 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),z.type==="info"&&y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-3 flex-shrink-0 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-bold",children:z.title}),y.jsx("p",{className:"text-sm leading-tight",children:z.message})]})]},C))})]})]}),_&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 transition-opacity",onClick:()=>b(!1),children:y.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md transform transition-all",onClick:z=>z.stopPropagation(),children:[y.jsxs("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:["為 ",d," 新增/更新預算"]}),y.jsxs("form",{onSubmit:M,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"budget-category",className:"block text-sm font-medium text-gray-700",children:"支出類別"}),y.jsxs("select",{id:"budget-category",name:"category",value:S.category,onChange:z=>T(C=>({...C,category:z.target.value})),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",required:!0,children:[y.jsx("option",{value:"",disabled:!0,children:"-- 請選擇類別 --"}),R.map(z=>y.jsx("option",{value:z,children:z},z))]})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"budget-amount",className:"block text-sm font-medium text-gray-700",children:"預算金額 (TWD)"}),y.jsx("input",{type:"number",id:"budget-amount",name:"amount",value:S.amount,onChange:z=>T(C=>({...C,amount:z.target.value})),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"例如: 5000",required:!0,min:"1"})]}),y.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[y.jsx("button",{type:"button",onClick:()=>b(!1),className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 font-medium",children:"取消"}),y.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 font-medium",children:"儲存預算"})]})]})]})})]})},$q=n=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Yq=({assetAccounts:n})=>{const[e,t]=ce.useState(null),s=ce.useRef(null),i=ce.useRef(null),r=e||n,o=ce.useMemo(()=>{const T=r.flatMap(F=>(F.assets||[]).map(O=>({...O,accountName:F.name}))).filter(F=>F.accountType==="股票"||F.accountType==="ETF");if(T.length===0)return{totalValue:0,totalCost:0,totalPNL:0,roi:0,assets:[],best:null,worst:null,concentration:0,topAsset:null,stockPercentage:0,numberOfAssets:0};const R=T.reduce((F,O)=>F+(O.currentValueTWD||0),0),k=T.reduce((F,O)=>F+(O.costTWD||0),0),L=R-k,M=k>0?L/k*100:0,H=T.map(F=>{const O=F.profitLossTWD||0,ne=F.costTWD||0,be=ne>0?O/ne*100:0;return{...F,pnl:O,roi:be}}).sort((F,O)=>O.pnl-F.pnl),U=H[0],z=H[H.length-1],C=[...H].sort((F,O)=>(O.currentValueTWD??0)-(F.currentValueTWD??0))[0],I=R>0&&C?(C.currentValueTWD??0)/R*100:0,N=T.filter(F=>F.accountType==="股票").reduce((F,O)=>F+(O.currentValueTWD||0),0),V=R>0?N/R*100:0,j=T.length;return{totalValue:R,totalCost:k,totalPNL:L,roi:M,assets:H,best:U,worst:z,topAsset:C,concentration:I,stockPercentage:V,numberOfAssets:j}},[r]),c=()=>{const R=JSON.parse(JSON.stringify(e||n)).map(k=>({...k,assets:(k.assets||[]).map(L=>{if(L.accountType==="股票"||L.accountType==="ETF"){const M=(Math.random()-.45)*.1,H=(L.currentValueTWD||0)*(1+M);return{...L,currentValueTWD:H,profitLossTWD:H-(L.costTWD||0)}}return L})}));t(R)},h=()=>{t(null)},d=()=>{const{best:T,worst:R,concentration:k,topAsset:L,stockPercentage:M,numberOfAssets:H}=o,U=[];return H===0?(U.push({title:"開始您的投資",message:"您尚未加入任何投資項目。前往「資料管理」新增您的股票或ETF，開始追蹤績效。",type:"info"}),U):(M>60?U.push({title:"風險等級: 偏高",message:`您的投資組合偏向高風險，個股佔比達 ${M.toFixed(1)}%。`,type:"warning"}):M<30?U.push({title:"風險等級: 穩健",message:`您的投資組合偏向穩健，個股佔比為 ${M.toFixed(1)}%。`,type:"success"}):U.push({title:"風險等級: 適中",message:`您的投資組合風險適中，個股佔比為 ${M.toFixed(1)}%。`,type:"info"}),k>40&&U.push({title:"風險集中警告",message:`您的資金過度集中於「${L==null?void 0:L.code}」，佔總投資額的 ${k.toFixed(1)}%。`,type:"warning"}),H<5&&U.push({title:"分散度提醒",message:`您目前僅持有 ${H} 項投資標的，可考慮增加持股以提高分散性。`,type:"info"}),T&&U.push({title:"最佳貢獻",message:`「${T.code}」是您目前獲利最高的資產，貢獻了 ${T.pnl.toLocaleString()} 元的收益。`,type:"info"}),R&&R.pnl<0&&U.push({title:"主要虧損來源",message:`「${R.code}」是您目前虧損最多的資產，虧損達 ${R.pnl.toLocaleString()} 元。`,type:"warning"}),U)},m=()=>{const{stockPercentage:T,concentration:R,topAsset:k,numberOfAssets:L}=o,M=[];let H=!1;return L===0?{suggestions:[],isBalanced:!1}:(T>60&&M.push("考慮增加指數型ETF的比重，以分散個股風險並降低波動性。"),R>40&&M.push(`建議適度減持「${k==null?void 0:k.code}」，並將資金分配到其他資產中。`),L<5&&M.push("研究並增加新的投資標的，以提高投資組合的多元性。"),M.length===0&&(H=!0,M.push("您的投資組合目前配置均衡，無需立即進行重大調整。繼續保持監控！")),{suggestions:M,isBalanced:H})};ce.useEffect(()=>{if(s.current&&o.assets.length>0){i.current&&i.current.destroy();const T=s.current.getContext("2d");if(T){const R=o.assets.reduce((k,L)=>{const M=L.code;return k[M]=(k[M]||0)+(L.currentValueTWD??0),k},{});i.current=new On(T,{type:"doughnut",data:{labels:Object.keys(R),datasets:[{data:Object.values(R),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#E7E9ED"],borderColor:"#fff",borderWidth:2,hoverOffset:8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{boxWidth:20}},title:{display:!0,text:"投資組合佔比"}}}})}}return()=>{i.current&&i.current.destroy()}},[o]);const _=d(),{suggestions:b,isBalanced:E}=m(),S={success:"bg-green-100 border-green-400 text-green-800",warning:"bg-yellow-100 border-yellow-400 text-yellow-800",info:"bg-blue-100 border-blue-400 text-blue-800"};return y.jsxs(gn,{children:[y.jsx(Fr,{title:"投資追蹤 & 智慧分析"}),n.length===0||o.numberOfAssets===0?y.jsx(tm,{Icon:$q,title:"開始追蹤您的投資",message:"您尚未新增任何股票或ETF資產。請前往「資料管理」新增您的投資項目，即可在此查看詳細的績效分析與智慧建議。"}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[y.jsxs("div",{className:"p-4 bg-green-100 rounded-lg text-center shadow-sm",children:[y.jsx("h3",{className:"text-sm font-semibold text-green-800",children:"總投資價值 (TWD)"}),y.jsxs("p",{className:"text-2xl font-bold text-green-900",children:["$",o.totalValue.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),y.jsxs("div",{className:`p-4 rounded-lg text-center shadow-sm ${o.totalPNL>=0?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:[y.jsx("h3",{className:"text-sm font-semibold",children:"總損益 (TWD)"}),y.jsx("p",{className:`text-2xl font-bold ${o.totalPNL>=0?"text-blue-900":"text-red-900"}`,children:o.totalPNL.toLocaleString(void 0,{maximumFractionDigits:0})})]}),y.jsxs("div",{className:"p-4 bg-purple-100 rounded-lg text-center shadow-sm",children:[y.jsx("h3",{className:"text-sm font-semibold text-purple-800",children:"總投資回報率"}),y.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[o.roi.toFixed(2),"%"]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[y.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[y.jsxs(gn,{className:"h-96 flex flex-col",children:[y.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-800 text-center",children:"投資組合分佈"}),y.jsx("div",{className:"relative flex-grow h-full",children:y.jsx("canvas",{ref:s})})]}),y.jsxs(gn,{children:[y.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"資產詳細表現"}),y.jsx("div",{className:"overflow-x-auto max-h-96 shadow-inner rounded-lg bg-gray-50",children:y.jsxs("table",{className:"w-full text-sm text-left",children:[y.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 sticky top-0",children:y.jsxs("tr",{children:[y.jsx("th",{className:"py-2 px-4",children:"代號"}),y.jsx("th",{className:"py-2 px-4",children:"帳戶"}),y.jsx("th",{className:"py-2 px-4",children:"損益(TWD)"}),y.jsx("th",{className:"py-2 px-4",children:"回報率"})]})}),y.jsx("tbody",{children:o.assets.map(T=>y.jsxs("tr",{className:"bg-white border-b",children:[y.jsx("td",{className:"py-2 px-4 font-medium",children:T.code}),y.jsx("td",{className:"py-2 px-4 text-gray-600",children:T.accountName}),y.jsx("td",{className:`py-2 px-4 font-semibold ${T.pnl>=0?"text-green-600":"text-red-600"}`,children:T.pnl.toLocaleString(void 0,{maximumFractionDigits:0})}),y.jsxs("td",{className:`py-2 px-4 font-semibold ${T.roi>=0?"text-green-600":"text-red-600"}`,children:[T.roi.toFixed(2),"%"]})]},T.id))})]})})]})]}),y.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[y.jsxs(gn,{className:"bg-gray-50",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:'"What-If" 壓力測試'}),y.jsx("p",{className:"text-xs text-gray-600 mb-4",children:"模擬市場波動對您投資組合的影響，此操作不會儲存。"}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsxs("button",{onClick:c,className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors shadow-lg font-semibold flex items-center justify-center text-sm",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"執行市場模擬"]}),e&&y.jsxs("button",{onClick:h,className:"w-full bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition-colors shadow-lg font-semibold flex items-center justify-center text-sm",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h5M5 12a7 7 0 0011.66 4.995M20 20v-5h-5"})}),"重置為原始數據"]})]}),e&&y.jsx("p",{className:"text-center text-indigo-700 text-xs mt-3 font-semibold",children:"模擬模式已啟用"})]}),y.jsxs(gn,{children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"投資組合洞察"}),y.jsx("div",{className:"space-y-3",children:_.map((T,R)=>y.jsxs("div",{className:`p-3 border-l-4 rounded-r-lg ${S[T.type]}`,children:[y.jsx("h4",{className:"font-bold text-sm",children:T.title}),y.jsx("p",{className:"text-xs",children:T.message})]},R))})]}),y.jsxs(gn,{className:"bg-teal-50 border border-teal-200",children:[y.jsxs("h3",{className:"text-xl font-semibold text-teal-800 mb-4 flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"智慧再平衡建議"]}),E?y.jsxs("div",{className:"flex items-center",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3 text-green-600 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),y.jsx("p",{className:"text-green-900 text-sm font-medium",children:b[0]})]}):y.jsx("ul",{className:"space-y-3",children:b.map((T,R)=>y.jsxs("li",{className:"flex items-start",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3 mt-0.5 text-teal-600 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),y.jsx("span",{className:"text-teal-900 text-sm",children:T})]},R))})]})]})]})]})]})},Kq=n=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...n,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),Qq=({goals:n,assetAccounts:e,cashflowRecords:t})=>{const s=ce.useMemo(()=>{const o=new Date;o.setMonth(o.getMonth()-6);const c=o.toISOString().slice(0,7),h={};t.filter(_=>_.date>=c).forEach(_=>{const b=_.date.slice(0,7);h[b]||(h[b]=0),h[b]+=_.type==="income"?_.amount:-_.amount});const d=Object.values(h);return d.length===0?0:d.reduce((_,b)=>_+b,0)/d.length},[t]),i=o=>(o||[]).map(c=>{var h;return(h=e.find(d=>d.id===c))==null?void 0:h.name}).filter(Boolean).join(", ")||"未連結",r=ce.useMemo(()=>n.map(o=>{const c=(o.linkedAccountIds||[]).reduce((d,m)=>{const _=e.find(E=>E.id===m),b=((_==null?void 0:_.assets)||[]).reduce((E,S)=>E+(S.currentValueTWD||0),0);return d+b},0),h=o.linkedAccountIds&&o.linkedAccountIds.length>0?c:o.currentAmount||0;return{...o,currentAmount:h}}),[n,e]);return y.jsxs(gn,{children:[y.jsx(Fr,{title:"財務目標進度",subtitle:"此頁面為您的目標進度。如需新增或修改目標，請前往「資料管理」頁面。"}),r.length>0?y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(o=>{const c=Math.min(o.currentAmount/o.targetAmount*100,100),h=c>=100,d=Math.max(0,o.targetAmount-o.currentAmount);let m=null;if(!h&&s>0&&d>0){const _=Math.ceil(d/s),b=new Date;b.setMonth(b.getMonth()+_),m=`${_} 個月後 (${b.getFullYear()}/${b.getMonth()+1})`}return y.jsxs("div",{className:"p-5 border rounded-lg shadow-sm bg-white transition-transform transform hover:-translate-y-1 hover:shadow-lg flex flex-col",children:[y.jsxs("div",{className:"flex justify-between items-start mb-2",children:[y.jsxs("div",{children:[y.jsxs("h3",{className:"font-bold text-lg text-gray-800 flex items-center",children:[h&&y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),o.name]}),y.jsxs("p",{className:"text-xs text-gray-500",children:["連結帳戶: ",i(o.linkedAccountIds)]})]}),y.jsx("span",{className:"text-sm text-gray-500 font-medium bg-gray-100 px-2 py-1 rounded",children:o.targetDate})]}),y.jsxs("p",{className:"text-gray-700 text-sm mt-4",children:["進度: $",o.currentAmount.toLocaleString(void 0,{maximumFractionDigits:0})," / ",y.jsxs("span",{className:"font-medium",children:["$",o.targetAmount.toLocaleString()]})]}),y.jsxs("div",{className:"mt-2 mb-4",children:[y.jsxs("div",{className:"flex justify-between mb-1",children:[y.jsx("span",{className:"text-xs font-medium text-blue-700",children:"進度"}),y.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[c.toFixed(1),"%"]})]}),y.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 overflow-hidden",children:y.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-4 rounded-full transition-all duration-1000 ease-out",style:{width:`${c}%`},"aria-valuenow":c,"aria-valuemin":0,"aria-valuemax":100,role:"progressbar","aria-label":`${o.name} progress`})})]}),y.jsx("div",{className:"mt-auto pt-4 border-t border-gray-100",children:h?y.jsx("div",{className:"text-center font-semibold text-green-600",children:"恭喜！目標已達成！"}):y.jsxs("div",{className:"text-xs text-gray-600",children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"尚需金額:"}),y.jsxs("span",{className:"font-medium",children:["$",d.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx("span",{children:"預計達成時間:"}),y.jsx("span",{className:"font-medium",children:m||"需正向儲蓄"})]})]})})]},o.id)})}):y.jsx(tm,{Icon:Kq,title:"尚無財務目標",message:"設定您的第一個財務目標，例如「購車基金」或「房屋頭期款」，並開始追踪您的進度！"})]})},Xq=({assetAccounts:n,onBack:e})=>{const[t,s]=ce.useState({key:"profitLossTWD",direction:"desc"}),{pnlData:i,totalValue:r,totalCost:o,totalPNL:c,overallROI:h,bestPerformer:d,topGainer:m}=ce.useMemo(()=>{const T=n.flatMap(C=>(C.assets||[]).map(I=>({...I,accountName:C.name}))).filter(C=>C.accountType==="股票"||C.accountType==="ETF"||C.accountType==="美元資產");if(T.length===0)return{pnlData:[],totalValue:0,totalCost:0,totalPNL:0,overallROI:0,bestPerformer:null,topGainer:null};const R=T.map(C=>{const I=C.costTWD||0,N=C.profitLossTWD||0,V=I>0?N/I*100:0;return{...C,pnlPercentage:V}}),k=[...R].sort((C,I)=>(I.profitLossTWD||0)-(C.profitLossTWD||0))[0],L=[...R].sort((C,I)=>I.pnlPercentage-C.pnlPercentage)[0],M=R.reduce((C,I)=>C+(I.currentValueTWD||0),0),H=R.reduce((C,I)=>C+(I.costTWD||0),0),U=M-H,z=H>0?U/H*100:0;return{pnlData:R,totalValue:M,totalCost:H,totalPNL:U,overallROI:z,bestPerformer:k,topGainer:L}},[n]),_=ce.useMemo(()=>[...i].sort((T,R)=>{const k=T[t.key]||(t.key==="code"?"":0),L=R[t.key]||(t.key==="code"?"":0);return k<L?t.direction==="asc"?-1:1:k>L?t.direction==="asc"?1:-1:0}),[i,t]),b=T=>{let R="asc";t.key===T&&t.direction==="asc"&&(R="desc"),s({key:T,direction:R})},E=T=>t.key!==T?null:t.direction==="asc"?" ▲":" ▼",S=[{key:"code",label:"資產代號"},{key:"accountType",label:"類型"},{key:"accountName",label:"帳戶"},{key:"costTWD",label:"總成本 (TWD)",className:"text-right"},{key:"currentValueTWD",label:"現值 (TWD)",className:"text-right"},{key:"profitLossTWD",label:"損益 (TWD)",className:"text-right"},{key:"pnlPercentage",label:"損益 (%)",className:"text-right"}];return y.jsxs(gn,{children:[y.jsxs("div",{className:"flex justify-between items-start mb-6",children:[y.jsx(Fr,{title:"詳細投資損益表",subtitle:"此為您目前所有投資項目的總損益。注意：因缺乏歷史數據，尚不支援依日期範圍篩選。"}),y.jsx("button",{onClick:e,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 font-medium h-fit whitespace-nowrap shadow-sm transition-colors",children:"← 返回總覽"})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[y.jsxs("div",{className:`p-4 rounded-lg text-center shadow-sm ${c>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[y.jsx("h3",{className:`text-sm font-semibold ${c>=0?"text-green-800":"text-red-800"}`,children:"總損益 (TWD)"}),y.jsx("p",{className:`text-2xl font-bold ${c>=0?"text-green-900":"text-red-900"}`,children:c.toLocaleString(void 0,{maximumFractionDigits:0,signDisplay:"always"})})]}),y.jsxs("div",{className:`p-4 rounded-lg text-center shadow-sm ${h>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[y.jsx("h3",{className:`text-sm font-semibold ${h>=0?"text-green-800":"text-red-800"}`,children:"總投資回報率 (ROI)"}),y.jsxs("p",{className:`text-2xl font-bold ${h>=0?"text-green-900":"text-red-900"}`,children:[h.toFixed(2),"%"]})]}),y.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg text-center shadow-sm",children:[y.jsx("h3",{className:"text-sm font-semibold text-blue-800",children:"最佳貢獻 (依金額)"}),d?y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"text-xl font-bold text-blue-900 truncate",children:d.code}),y.jsxs("p",{className:"text-sm font-medium text-green-600",children:["+",(d.profitLossTWD||0).toLocaleString(void 0,{maximumFractionDigits:0})," 元"]})]}):y.jsx("p",{className:"text-gray-500 pt-2",children:"-"})]}),y.jsxs("div",{className:"p-4 bg-indigo-50 border border-indigo-200 rounded-lg text-center shadow-sm",children:[y.jsx("h3",{className:"text-sm font-semibold text-indigo-800",children:"最高回報 (依 ROI)"}),m?y.jsxs(y.Fragment,{children:[y.jsx("p",{className:"text-xl font-bold text-indigo-900 truncate",children:m.code}),y.jsxs("p",{className:"text-sm font-medium text-green-600",children:["+",m.pnlPercentage.toFixed(2),"%"]})]}):y.jsx("p",{className:"text-gray-500 pt-2",children:"-"})]})]}),y.jsxs("div",{className:"overflow-x-auto",children:[y.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[y.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100",children:y.jsx("tr",{children:S.map(T=>y.jsxs("th",{scope:"col",className:`py-3 px-6 cursor-pointer hover:bg-gray-200 transition-colors ${T.className||""}`,onClick:()=>b(T.key),children:[T.label," ",E(T.key)]},T.key))})}),y.jsx("tbody",{children:_.map((T,R)=>{const k=T.profitLossTWD||0,L=k>=0;return y.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[y.jsx("td",{className:"py-4 px-6 font-medium text-gray-900",children:T.code}),y.jsx("td",{className:"py-4 px-6 text-gray-600",children:T.accountType}),y.jsx("td",{className:"py-4 px-6 text-gray-600",children:T.accountName}),y.jsx("td",{className:"py-4 px-6 text-right",children:(T.costTWD||0).toLocaleString(void 0,{maximumFractionDigits:0})}),y.jsx("td",{className:"py-4 px-6 text-right",children:(T.currentValueTWD||0).toLocaleString(void 0,{maximumFractionDigits:0})}),y.jsx("td",{className:`py-4 px-6 text-right font-semibold ${L?"text-green-600":"text-red-600"}`,children:k.toLocaleString(void 0,{maximumFractionDigits:0,signDisplay:"always"})}),y.jsxs("td",{className:`py-4 px-6 text-right font-semibold ${L?"text-green-600":"text-red-600"}`,children:[T.pnlPercentage.toFixed(2),"%"]})]},T.id||R)})}),y.jsx("tfoot",{className:"bg-gray-100 border-t-2 border-gray-300",children:y.jsxs("tr",{className:"font-bold text-gray-800",children:[y.jsx("td",{className:"py-3 px-6",colSpan:3,children:"總計"}),y.jsx("td",{className:"py-3 px-6 text-right",children:o.toLocaleString(void 0,{maximumFractionDigits:0})}),y.jsx("td",{className:"py-3 px-6 text-right",children:r.toLocaleString(void 0,{maximumFractionDigits:0})}),y.jsx("td",{className:`py-3 px-6 text-right ${c>=0?"text-green-600":"text-red-600"}`,children:c.toLocaleString(void 0,{maximumFractionDigits:0,signDisplay:"always"})}),y.jsxs("td",{className:`py-3 px-6 text-right ${h>=0?"text-green-600":"text-red-600"}`,children:[h.toFixed(2),"%"]})]})})]}),_.length===0&&y.jsx("p",{className:"text-center text-gray-500 py-8",children:"無投資項目可供分析。"})]})]})},Zq=({assetAccounts:n,cashflowRecords:e})=>{const[t,s]=ce.useState(new Date().toISOString().slice(0,7)),[i,r]=ce.useState("desc"),[o,c]=ce.useState("main"),h=ce.useRef(null),d=ce.useRef(null),m=ce.useRef(null),_=ce.useMemo(()=>{const E={},S=new Date;for(let V=11;V>=0;V--){const F=new Date(S.getFullYear(),S.getMonth()-V,1).toISOString().slice(0,7);E[F]={income:0,expense:0,net:0}}e.forEach(V=>{const j=V.date.slice(0,7);E[j]&&(V.type==="income"?E[j].income+=V.amount:E[j].expense+=V.amount)}),Object.keys(E).forEach(V=>{E[V].net=E[V].income-E[V].expense});const T=e.filter(V=>V.date.startsWith(t)&&V.type==="expense").reduce((V,j)=>(V[j.category]=(V[j.category]||0)+j.amount,V),{}),R=n.reduce((V,j)=>V+(j.assets||[]).reduce((F,O)=>F+(O.currentValueTWD||0),0),0),L=n.flatMap(V=>V.assets||[]).map(V=>{const j=V.costTWD||0,F=V.profitLossTWD||0,O=j>0?F/j*100:0;return{...V,pnlPercentage:O}}),M=Object.keys(E).sort((V,j)=>j.localeCompare(V)),U=L.reduce((V,j)=>V+(j.profitLossTWD||0),0)/12;let z=R;const C=[];for(const V of M)C.push({month:V,value:z}),z-=E[V].net+U;C.reverse();const I=E[t]||{income:0,expense:0},N=I.income>0?(I.income-I.expense)/I.income*100:0;return{monthlySummaries:E,expenseBreakdown:T,pnlReportData:L,netWorthTrendData:C,kpis:{savingsRate:N.toFixed(1)}}},[e,n,t]),b=ce.useMemo(()=>[..._.pnlReportData].sort((E,S)=>{const T=E.profitLossTWD||0,R=S.profitLossTWD||0;return i==="desc"?R-T:T-R}),[_.pnlReportData,i]);return ce.useEffect(()=>{if(o!=="main")return;const E=[],S={enabled:!0,backgroundColor:"rgba(30, 41, 59, 0.9)",titleColor:"#ffffff",bodyColor:"#ffffff",titleFont:{size:14,weight:"bold"},bodyFont:{size:12},padding:12,cornerRadius:8,displayColors:!1};if(h.current){const T=On.getChart(h.current);T&&T.destroy();const R=h.current.getContext("2d");if(R){const k=Object.keys(_.monthlySummaries),L=R.createLinearGradient(0,0,0,400);L.addColorStop(0,"rgba(59, 130, 246, 0.8)"),L.addColorStop(1,"rgba(59, 130, 246, 0.1)");const M=R.createLinearGradient(0,0,0,400);M.addColorStop(0,"rgba(239, 68, 68, 0.8)"),M.addColorStop(1,"rgba(239, 68, 68, 0.1)");const H=new On(h.current,{type:"bar",data:{labels:k,datasets:[{label:"總收入",data:k.map(U=>_.monthlySummaries[U].income),backgroundColor:L,borderColor:"rgba(59, 130, 246, 1)",hoverBackgroundColor:"rgba(59, 130, 246, 1)",borderWidth:1,borderRadius:5},{label:"總支出",data:k.map(U=>_.monthlySummaries[U].expense),backgroundColor:M,borderColor:"rgba(239, 68, 68, 1)",hoverBackgroundColor:"rgba(239, 68, 68, 1)",borderWidth:1,borderRadius:5}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{title:{display:!0,text:"近12個月收支趨勢",font:{size:16}},tooltip:{...S,callbacks:{title:U=>U[0].label,label:U=>` ${U.dataset.label}: ${Number(U.raw).toLocaleString()} 元`}}},scales:{y:{beginAtZero:!0,ticks:{callback:U=>`${Number(U)/1e3}k`}},x:{grid:{display:!1}}}}});E.push(H)}}if(d.current){const T=On.getChart(d.current);T&&T.destroy();const R=Object.keys(_.expenseBreakdown),k=Object.values(_.expenseBreakdown),L=k.reduce((U,z)=>U+z,0),M=["#3B82F6","#10B981","#F59E0B","#8B5CF6","#EF4444","#EC4899","#6366F1","#F97316"],H=new On(d.current,{type:"doughnut",data:{labels:R,datasets:[{data:k,backgroundColor:M,borderColor:"#fff",borderWidth:3,hoverOffset:15,hoverBorderColor:"#fff"}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"60%",plugins:{title:{display:!1},legend:{position:"right"},tooltip:{...S,callbacks:{title:U=>U[0].label,label:U=>{const z=U.raw,C=L>0?(z/L*100).toFixed(1):0;return`金額: ${z.toLocaleString()} 元 (${C}%)`}}}}}});E.push(H)}if(m.current){const T=On.getChart(m.current);T&&T.destroy();const R=m.current.getContext("2d");if(R){const k=R.createLinearGradient(0,0,0,400);k.addColorStop(0,"rgba(139, 92, 246, 0.7)"),k.addColorStop(1,"rgba(139, 92, 246, 0.1)");const L=new On(m.current,{type:"line",data:{labels:_.netWorthTrendData.map(M=>M.month),datasets:[{label:"資產淨值趨勢 (TWD)",data:_.netWorthTrendData.map(M=>M.value),borderColor:"rgb(139, 92, 246)",backgroundColor:k,tension:.4,fill:!0,pointBackgroundColor:"rgb(139, 92, 246)",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(139, 92, 246)",pointRadius:4,pointHoverRadius:8,pointBorderWidth:2,pointHoverBorderWidth:3}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{title:{display:!0,text:"資產淨值趨勢 (含投資損益模擬)",font:{size:16}},tooltip:{...S,callbacks:{title:M=>`月份: ${M[0].label}`,label:M=>` 淨值: ${Number(M.raw).toLocaleString()} 元`}}},scales:{y:{ticks:{callback:M=>`${Number(M)/1e3}k`}},x:{grid:{display:!1}}}}});E.push(L)}}return()=>E.forEach(T=>T.destroy())},[_,o]),o==="pnl"?y.jsx(Xq,{assetAccounts:n,onBack:()=>c("main")}):y.jsxs(gn,{children:[y.jsx(Fr,{title:"財務報表與分析"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 items-center",children:[y.jsxs("div",{className:"md:col-span-2 flex items-center space-x-4 bg-gray-50 p-4 rounded-lg border",children:[y.jsx("label",{htmlFor:"analysis-month-select",className:"text-lg font-medium text-gray-700",children:"分析月份:"}),y.jsx("input",{id:"analysis-month-select",type:"month",value:t,onChange:E=>s(E.target.value),className:"p-2 border rounded-md shadow-sm","aria-label":"Select month for analysis"})]}),y.jsxs("div",{className:"p-4 bg-blue-100 rounded-lg shadow",children:[y.jsxs("h3",{className:"text-lg font-semibold text-blue-800",children:["儲蓄率 (",t,")"]}),y.jsxs("p",{className:"text-3xl font-bold text-blue-900",children:[_.kpis.savingsRate,"%"]}),y.jsx("p",{className:"text-xs text-blue-700",children:"(收入 - 支出) / 收入"})]})]}),y.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border mb-8",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"近12個月收支趨勢"}),y.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"將滑鼠懸停在圖表上以查看詳細數據。"}),y.jsx("div",{className:"h-96",children:y.jsx("canvas",{ref:h})})]}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[y.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border h-96 flex flex-col",children:[y.jsxs("h3",{className:"text-xl font-semibold text-gray-800 text-center",children:[t," 支出分類"]}),y.jsx("p",{className:"text-xs text-gray-500 mb-2 text-center",children:"將滑鼠懸停在圓環圖上以查看百分比。"}),y.jsx("div",{className:"relative flex-grow h-full",children:y.jsx("canvas",{ref:d})})]}),y.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border h-96 flex flex-col",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"資產淨值趨勢"}),y.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"將滑鼠懸停在圖表上以查看每月淨值。"}),y.jsx("div",{className:"relative flex-grow h-full",children:y.jsx("canvas",{ref:m})}),y.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"* 此圖表基於歷史收支淨額，並將總投資損益平均分配至過去12個月進行模擬。"})]})]}),y.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"資產損益總表"}),y.jsxs("button",{onClick:()=>c("pnl"),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors shadow-sm font-semibold flex items-center",children:["查看詳細報表",y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]}),y.jsxs("div",{className:"overflow-x-auto",children:[y.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[y.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100",children:y.jsxs("tr",{children:[y.jsx("th",{scope:"col",className:"py-3 px-6",children:"資產代號"}),y.jsx("th",{scope:"col",className:"py-3 px-6",children:"類型"}),y.jsx("th",{scope:"col",className:"py-3 px-6 text-right",children:"現值 (TWD)"}),y.jsxs("th",{scope:"col",className:"py-3 px-6 text-right cursor-pointer",onClick:()=>r(E=>E==="asc"?"desc":"asc"),children:["損益 (TWD) ",i==="desc"?"▼":"▲"]}),y.jsx("th",{scope:"col",className:"py-3 px-6 text-right",children:"損益 (%)"})]})}),y.jsx("tbody",{children:b.slice(0,5).map((E,S)=>{const T=E.profitLossTWD||0,R=T>=0;return y.jsxs("tr",{className:"bg-white border-b hover:bg-gray-50",children:[y.jsx("td",{className:"py-4 px-6 font-medium text-gray-900",children:E.code}),y.jsx("td",{className:"py-4 px-6",children:E.accountType}),y.jsx("td",{className:"py-4 px-6 text-right",children:(E.currentValueTWD||0).toLocaleString(void 0,{maximumFractionDigits:0})}),y.jsx("td",{className:`py-4 px-6 text-right font-semibold ${R?"text-green-600":"text-red-600"}`,children:T.toLocaleString(void 0,{maximumFractionDigits:0,signDisplay:"always"})}),y.jsxs("td",{className:`py-4 px-6 text-right font-semibold ${R?"text-green-600":"text-red-600"}`,children:[E.pnlPercentage.toFixed(2),"%"]})]},E.id||S)})})]}),b.length>5&&y.jsxs("p",{className:"text-center text-xs text-gray-500 pt-2",children:["...及其他 ",b.length-5," 項資產。請至詳細報表查看。"]})]})]})]})};var at;(function(n){n.assertEqual=i=>{};function e(i){}n.assertIs=e;function t(i){throw new Error}n.assertNever=t,n.arrayToEnum=i=>{const r={};for(const o of i)r[o]=o;return r},n.getValidEnumValues=i=>{const r=n.objectKeys(i).filter(c=>typeof i[i[c]]!="number"),o={};for(const c of r)o[c]=i[c];return n.objectValues(o)},n.objectValues=i=>n.objectKeys(i).map(function(r){return i[r]}),n.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const r=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&r.push(o);return r},n.find=(i,r)=>{for(const o of i)if(r(o))return o},n.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function s(i,r=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(r)}n.joinValues=s,n.jsonStringifyReplacer=(i,r)=>typeof r=="bigint"?r.toString():r})(at||(at={}));var $R;(function(n){n.mergeShapes=(e,t)=>({...e,...t})})($R||($R={}));const Ae=at.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Da=n=>{switch(typeof n){case"undefined":return Ae.undefined;case"string":return Ae.string;case"number":return Number.isNaN(n)?Ae.nan:Ae.number;case"boolean":return Ae.boolean;case"function":return Ae.function;case"bigint":return Ae.bigint;case"symbol":return Ae.symbol;case"object":return Array.isArray(n)?Ae.array:n===null?Ae.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Ae.promise:typeof Map<"u"&&n instanceof Map?Ae.map:typeof Set<"u"&&n instanceof Set?Ae.set:typeof Date<"u"&&n instanceof Date?Ae.date:Ae.object;default:return Ae.unknown}},me=at.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Or extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(r){return r.message},s={_errors:[]},i=r=>{for(const o of r.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)s._errors.push(t(o));else{let c=s,h=0;for(;h<o.path.length;){const d=o.path[h];h===o.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(t(o))):c[d]=c[d]||{_errors:[]},c=c[d],h++}}};return i(this),s}static assert(e){if(!(e instanceof Or))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,at.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},s=[];for(const i of this.issues)if(i.path.length>0){const r=i.path[0];t[r]=t[r]||[],t[r].push(e(i))}else s.push(e(i));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}Or.create=n=>new Or(n);const jb=(n,e)=>{let t;switch(n.code){case me.invalid_type:n.received===Ae.undefined?t="Required":t=`Expected ${n.expected}, received ${n.received}`;break;case me.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(n.expected,at.jsonStringifyReplacer)}`;break;case me.unrecognized_keys:t=`Unrecognized key(s) in object: ${at.joinValues(n.keys,", ")}`;break;case me.invalid_union:t="Invalid input";break;case me.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${at.joinValues(n.options)}`;break;case me.invalid_enum_value:t=`Invalid enum value. Expected ${at.joinValues(n.options)}, received '${n.received}'`;break;case me.invalid_arguments:t="Invalid function arguments";break;case me.invalid_return_type:t="Invalid function return type";break;case me.invalid_date:t="Invalid date";break;case me.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(t=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?t=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?t=`Invalid input: must end with "${n.validation.endsWith}"`:at.assertNever(n.validation):n.validation!=="regex"?t=`Invalid ${n.validation}`:t="Invalid";break;case me.too_small:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="bigint"?t=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:t="Invalid input";break;case me.too_big:n.type==="array"?t=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?t=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?t=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?t=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?t=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:t="Invalid input";break;case me.custom:t="Invalid input";break;case me.invalid_intersection_types:t="Intersection results could not be merged";break;case me.not_multiple_of:t=`Number must be a multiple of ${n.multipleOf}`;break;case me.not_finite:t="Number must be finite";break;default:t=e.defaultError,at.assertNever(n)}return{message:t}};let Jq=jb;function eG(){return Jq}const tG=n=>{const{data:e,path:t,errorMaps:s,issueData:i}=n,r=[...t,...i.path||[]],o={...i,path:r};if(i.message!==void 0)return{...i,path:r,message:i.message};let c="";const h=s.filter(d=>!!d).slice().reverse();for(const d of h)c=d(o,{data:e,defaultError:c}).message;return{...i,path:r,message:c}};function Te(n,e){const t=eG(),s=tG({issueData:e,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,t,t===jb?void 0:jb].filter(i=>!!i)});n.common.issues.push(s)}class Ns{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const i of t){if(i.status==="aborted")return Ue;i.status==="dirty"&&e.dirty(),s.push(i.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){const s=[];for(const i of t){const r=await i.key,o=await i.value;s.push({key:r,value:o})}return Ns.mergeObjectSync(e,s)}static mergeObjectSync(e,t){const s={};for(const i of t){const{key:r,value:o}=i;if(r.status==="aborted"||o.status==="aborted")return Ue;r.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),r.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(s[r.value]=o.value)}return{status:e.value,value:s}}}const Ue=Object.freeze({status:"aborted"}),Rd=n=>({status:"dirty",value:n}),Ys=n=>({status:"valid",value:n}),YR=n=>n.status==="aborted",KR=n=>n.status==="dirty",Nu=n=>n.status==="valid",Kp=n=>typeof Promise<"u"&&n instanceof Promise;var Re;(function(n){n.errToObj=e=>typeof e=="string"?{message:e}:e||{},n.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Re||(Re={}));class oo{constructor(e,t,s,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const QR=(n,e)=>{if(Nu(e))return{success:!0,data:e.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Or(n.common.issues);return this._error=t,this._error}}};function We(n){if(!n)return{};const{errorMap:e,invalid_type_error:t,required_error:s,description:i}=n;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,c)=>{const{message:h}=n;return o.code==="invalid_enum_value"?{message:h??c.defaultError}:typeof c.data>"u"?{message:h??s??c.defaultError}:o.code!=="invalid_type"?{message:c.defaultError}:{message:h??t??c.defaultError}},description:i}}class st{get description(){return this._def.description}_getType(e){return Da(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Da(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ns,ctx:{common:e.parent.common,data:e.data,parsedType:Da(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Kp(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){const s={common:{issues:[],async:(t==null?void 0:t.async)??!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Da(e)},i=this._parseSync({data:e,path:s.path,parent:s});return QR(s,i)}"~validate"(e){var s,i;const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Da(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return Nu(r)?{value:r.value}:{issues:t.common.issues}}catch(r){(i=(s=r==null?void 0:r.message)==null?void 0:s.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(r=>Nu(r)?{value:r.value}:{issues:t.common.issues})}async parseAsync(e,t){const s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){const s={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Da(e)},i=this._parse({data:e,path:s.path,parent:s}),r=await(Kp(i)?i:Promise.resolve(i));return QR(s,r)}refine(e,t){const s=i=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(i):t;return this._refinement((i,r)=>{const o=e(i),c=()=>r.addIssue({code:me.custom,...s(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(h=>h?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(e,t){return this._refinement((s,i)=>e(s)?!0:(i.addIssue(typeof t=="function"?t(s,i):t),!1))}_refinement(e){return new ku({schema:this,typeName:Be.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Wa.create(this,this._def)}nullable(){return Ou.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qi.create(this)}promise(){return Jp.create(this,this._def)}or(e){return Xp.create([this,e],this._def)}and(e){return Zp.create(this,e,this._def)}transform(e){return new ku({...We(this._def),schema:this,typeName:Be.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new Fb({...We(this._def),innerType:this,defaultValue:t,typeName:Be.ZodDefault})}brand(){return new wG({typeName:Be.ZodBranded,type:this,...We(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new Bb({...We(this._def),innerType:this,catchValue:t,typeName:Be.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return WE.create(this,e)}readonly(){return zb.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const nG=/^c[^\s-]{8,}$/i,sG=/^[0-9a-z]+$/,iG=/^[0-9A-HJKMNP-TV-Z]{26}$/i,rG=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,aG=/^[a-z0-9_-]{21}$/i,oG=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,lG=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,cG=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,uG="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ov;const hG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,dG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,fG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,mG=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,gG=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,pG=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,oM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",_G=new RegExp(`^${oM}$`);function lM(n){let e="[0-5]\\d";n.precision?e=`${e}\\.\\d{${n.precision}}`:n.precision==null&&(e=`${e}(\\.\\d+)?`);const t=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function yG(n){return new RegExp(`^${lM(n)}$`)}function vG(n){let e=`${oM}T${lM(n)}`;const t=[];return t.push(n.local?"Z?":"Z"),n.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function bG(n,e){return!!((e==="v4"||!e)&&hG.test(n)||(e==="v6"||!e)&&fG.test(n))}function xG(n,e){if(!oG.test(n))return!1;try{const[t]=n.split(".");if(!t)return!1;const s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),i=JSON.parse(atob(s));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function EG(n,e){return!!((e==="v4"||!e)&&dG.test(n)||(e==="v6"||!e)&&mG.test(n))}class bl extends st{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ae.string){const r=this._getOrReturnCtx(e);return Te(r,{code:me.invalid_type,expected:Ae.string,received:r.parsedType}),Ue}const s=new Ns;let i;for(const r of this._def.checks)if(r.kind==="min")e.data.length<r.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:me.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="max")e.data.length>r.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:me.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),s.dirty());else if(r.kind==="length"){const o=e.data.length>r.value,c=e.data.length<r.value;(o||c)&&(i=this._getOrReturnCtx(e,i),o?Te(i,{code:me.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):c&&Te(i,{code:me.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),s.dirty())}else if(r.kind==="email")cG.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"email",code:me.invalid_string,message:r.message}),s.dirty());else if(r.kind==="emoji")Ov||(Ov=new RegExp(uG,"u")),Ov.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"emoji",code:me.invalid_string,message:r.message}),s.dirty());else if(r.kind==="uuid")rG.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"uuid",code:me.invalid_string,message:r.message}),s.dirty());else if(r.kind==="nanoid")aG.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"nanoid",code:me.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid")nG.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"cuid",code:me.invalid_string,message:r.message}),s.dirty());else if(r.kind==="cuid2")sG.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"cuid2",code:me.invalid_string,message:r.message}),s.dirty());else if(r.kind==="ulid")iG.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"ulid",code:me.invalid_string,message:r.message}),s.dirty());else if(r.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),Te(i,{validation:"url",code:me.invalid_string,message:r.message}),s.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"regex",code:me.invalid_string,message:r.message}),s.dirty())):r.kind==="trim"?e.data=e.data.trim():r.kind==="includes"?e.data.includes(r.value,r.position)||(i=this._getOrReturnCtx(e,i),Te(i,{code:me.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),s.dirty()):r.kind==="toLowerCase"?e.data=e.data.toLowerCase():r.kind==="toUpperCase"?e.data=e.data.toUpperCase():r.kind==="startsWith"?e.data.startsWith(r.value)||(i=this._getOrReturnCtx(e,i),Te(i,{code:me.invalid_string,validation:{startsWith:r.value},message:r.message}),s.dirty()):r.kind==="endsWith"?e.data.endsWith(r.value)||(i=this._getOrReturnCtx(e,i),Te(i,{code:me.invalid_string,validation:{endsWith:r.value},message:r.message}),s.dirty()):r.kind==="datetime"?vG(r).test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:me.invalid_string,validation:"datetime",message:r.message}),s.dirty()):r.kind==="date"?_G.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:me.invalid_string,validation:"date",message:r.message}),s.dirty()):r.kind==="time"?yG(r).test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{code:me.invalid_string,validation:"time",message:r.message}),s.dirty()):r.kind==="duration"?lG.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"duration",code:me.invalid_string,message:r.message}),s.dirty()):r.kind==="ip"?bG(e.data,r.version)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"ip",code:me.invalid_string,message:r.message}),s.dirty()):r.kind==="jwt"?xG(e.data,r.alg)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"jwt",code:me.invalid_string,message:r.message}),s.dirty()):r.kind==="cidr"?EG(e.data,r.version)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"cidr",code:me.invalid_string,message:r.message}),s.dirty()):r.kind==="base64"?gG.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"base64",code:me.invalid_string,message:r.message}),s.dirty()):r.kind==="base64url"?pG.test(e.data)||(i=this._getOrReturnCtx(e,i),Te(i,{validation:"base64url",code:me.invalid_string,message:r.message}),s.dirty()):at.assertNever(r);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(i=>e.test(i),{validation:t,code:me.invalid_string,...Re.errToObj(s)})}_addCheck(e){return new bl({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Re.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Re.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Re.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Re.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Re.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Re.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Re.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Re.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Re.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Re.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Re.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Re.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Re.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Re.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Re.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Re.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Re.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t==null?void 0:t.position,...Re.errToObj(t==null?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Re.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Re.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Re.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Re.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Re.errToObj(t)})}nonempty(e){return this.min(1,Re.errToObj(e))}trim(){return new bl({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new bl({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new bl({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}bl.create=n=>new bl({checks:[],typeName:Be.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...We(n)});function TG(n,e){const t=(n.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,i=t>s?t:s,r=Number.parseInt(n.toFixed(i).replace(".","")),o=Number.parseInt(e.toFixed(i).replace(".",""));return r%o/10**i}class If extends st{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ae.number){const r=this._getOrReturnCtx(e);return Te(r,{code:me.invalid_type,expected:Ae.number,received:r.parsedType}),Ue}let s;const i=new Ns;for(const r of this._def.checks)r.kind==="int"?at.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{code:me.invalid_type,expected:"integer",received:"float",message:r.message}),i.dirty()):r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),Te(s,{code:me.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),Te(s,{code:me.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),i.dirty()):r.kind==="multipleOf"?TG(e.data,r.value)!==0&&(s=this._getOrReturnCtx(e,s),Te(s,{code:me.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):r.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{code:me.not_finite,message:r.message}),i.dirty()):at.assertNever(r);return{status:i.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Re.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Re.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Re.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Re.toString(t))}setLimit(e,t,s,i){return new If({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:Re.toString(i)}]})}_addCheck(e){return new If({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Re.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Re.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Re.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Re.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Re.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&at.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}If.create=n=>new If({checks:[],typeName:Be.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...We(n)});class Rf extends st{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ae.bigint)return this._getInvalidInput(e);let s;const i=new Ns;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?e.data<r.value:e.data<=r.value)&&(s=this._getOrReturnCtx(e,s),Te(s,{code:me.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):r.kind==="max"?(r.inclusive?e.data>r.value:e.data>=r.value)&&(s=this._getOrReturnCtx(e,s),Te(s,{code:me.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),i.dirty()):r.kind==="multipleOf"?e.data%r.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),Te(s,{code:me.not_multiple_of,multipleOf:r.value,message:r.message}),i.dirty()):at.assertNever(r);return{status:i.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return Te(t,{code:me.invalid_type,expected:Ae.bigint,received:t.parsedType}),Ue}gte(e,t){return this.setLimit("min",e,!0,Re.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Re.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Re.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Re.toString(t))}setLimit(e,t,s,i){return new Rf({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:Re.toString(i)}]})}_addCheck(e){return new Rf({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Rf.create=n=>new Rf({checks:[],typeName:Be.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...We(n)});class XR extends st{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ae.boolean){const s=this._getOrReturnCtx(e);return Te(s,{code:me.invalid_type,expected:Ae.boolean,received:s.parsedType}),Ue}return Ys(e.data)}}XR.create=n=>new XR({typeName:Be.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...We(n)});class Qp extends st{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ae.date){const r=this._getOrReturnCtx(e);return Te(r,{code:me.invalid_type,expected:Ae.date,received:r.parsedType}),Ue}if(Number.isNaN(e.data.getTime())){const r=this._getOrReturnCtx(e);return Te(r,{code:me.invalid_date}),Ue}const s=new Ns;let i;for(const r of this._def.checks)r.kind==="min"?e.data.getTime()<r.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:me.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),s.dirty()):r.kind==="max"?e.data.getTime()>r.value&&(i=this._getOrReturnCtx(e,i),Te(i,{code:me.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),s.dirty()):at.assertNever(r);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Qp({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Re.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Re.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Qp.create=n=>new Qp({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:Be.ZodDate,...We(n)});class ZR extends st{_parse(e){if(this._getType(e)!==Ae.symbol){const s=this._getOrReturnCtx(e);return Te(s,{code:me.invalid_type,expected:Ae.symbol,received:s.parsedType}),Ue}return Ys(e.data)}}ZR.create=n=>new ZR({typeName:Be.ZodSymbol,...We(n)});class JR extends st{_parse(e){if(this._getType(e)!==Ae.undefined){const s=this._getOrReturnCtx(e);return Te(s,{code:me.invalid_type,expected:Ae.undefined,received:s.parsedType}),Ue}return Ys(e.data)}}JR.create=n=>new JR({typeName:Be.ZodUndefined,...We(n)});class eC extends st{_parse(e){if(this._getType(e)!==Ae.null){const s=this._getOrReturnCtx(e);return Te(s,{code:me.invalid_type,expected:Ae.null,received:s.parsedType}),Ue}return Ys(e.data)}}eC.create=n=>new eC({typeName:Be.ZodNull,...We(n)});class tC extends st{constructor(){super(...arguments),this._any=!0}_parse(e){return Ys(e.data)}}tC.create=n=>new tC({typeName:Be.ZodAny,...We(n)});class nC extends st{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ys(e.data)}}nC.create=n=>new nC({typeName:Be.ZodUnknown,...We(n)});class lo extends st{_parse(e){const t=this._getOrReturnCtx(e);return Te(t,{code:me.invalid_type,expected:Ae.never,received:t.parsedType}),Ue}}lo.create=n=>new lo({typeName:Be.ZodNever,...We(n)});class sC extends st{_parse(e){if(this._getType(e)!==Ae.undefined){const s=this._getOrReturnCtx(e);return Te(s,{code:me.invalid_type,expected:Ae.void,received:s.parsedType}),Ue}return Ys(e.data)}}sC.create=n=>new sC({typeName:Be.ZodVoid,...We(n)});class qi extends st{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),i=this._def;if(t.parsedType!==Ae.array)return Te(t,{code:me.invalid_type,expected:Ae.array,received:t.parsedType}),Ue;if(i.exactLength!==null){const o=t.data.length>i.exactLength.value,c=t.data.length<i.exactLength.value;(o||c)&&(Te(t,{code:o?me.too_big:me.too_small,minimum:c?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),s.dirty())}if(i.minLength!==null&&t.data.length<i.minLength.value&&(Te(t,{code:me.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),s.dirty()),i.maxLength!==null&&t.data.length>i.maxLength.value&&(Te(t,{code:me.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((o,c)=>i.type._parseAsync(new oo(t,o,t.path,c)))).then(o=>Ns.mergeArray(s,o));const r=[...t.data].map((o,c)=>i.type._parseSync(new oo(t,o,t.path,c)));return Ns.mergeArray(s,r)}get element(){return this._def.type}min(e,t){return new qi({...this._def,minLength:{value:e,message:Re.toString(t)}})}max(e,t){return new qi({...this._def,maxLength:{value:e,message:Re.toString(t)}})}length(e,t){return new qi({...this._def,exactLength:{value:e,message:Re.toString(t)}})}nonempty(e){return this.min(1,e)}}qi.create=(n,e)=>new qi({type:n,minLength:null,maxLength:null,exactLength:null,typeName:Be.ZodArray,...We(e)});function Kc(n){if(n instanceof mn){const e={};for(const t in n.shape){const s=n.shape[t];e[t]=Wa.create(Kc(s))}return new mn({...n._def,shape:()=>e})}else return n instanceof qi?new qi({...n._def,type:Kc(n.element)}):n instanceof Wa?Wa.create(Kc(n.unwrap())):n instanceof Ou?Ou.create(Kc(n.unwrap())):n instanceof Fl?Fl.create(n.items.map(e=>Kc(e))):n}class mn extends st{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=at.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==Ae.object){const d=this._getOrReturnCtx(e);return Te(d,{code:me.invalid_type,expected:Ae.object,received:d.parsedType}),Ue}const{status:s,ctx:i}=this._processInputParams(e),{shape:r,keys:o}=this._getCached(),c=[];if(!(this._def.catchall instanceof lo&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||c.push(d);const h=[];for(const d of o){const m=r[d],_=i.data[d];h.push({key:{status:"valid",value:d},value:m._parse(new oo(i,_,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof lo){const d=this._def.unknownKeys;if(d==="passthrough")for(const m of c)h.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(d==="strict")c.length>0&&(Te(i,{code:me.unrecognized_keys,keys:c}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const m of c){const _=i.data[m];h.push({key:{status:"valid",value:m},value:d._parse(new oo(i,_,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const m of h){const _=await m.key,b=await m.value;d.push({key:_,value:b,alwaysSet:m.alwaysSet})}return d}).then(d=>Ns.mergeObjectSync(s,d)):Ns.mergeObjectSync(s,h)}get shape(){return this._def.shape()}strict(e){return Re.errToObj,new mn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var r,o;const i=((o=(r=this._def).errorMap)==null?void 0:o.call(r,t,s).message)??s.defaultError;return t.code==="unrecognized_keys"?{message:Re.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new mn({...this._def,unknownKeys:"strip"})}passthrough(){return new mn({...this._def,unknownKeys:"passthrough"})}extend(e){return new mn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new mn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Be.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new mn({...this._def,catchall:e})}pick(e){const t={};for(const s of at.objectKeys(e))e[s]&&this.shape[s]&&(t[s]=this.shape[s]);return new mn({...this._def,shape:()=>t})}omit(e){const t={};for(const s of at.objectKeys(this.shape))e[s]||(t[s]=this.shape[s]);return new mn({...this._def,shape:()=>t})}deepPartial(){return Kc(this)}partial(e){const t={};for(const s of at.objectKeys(this.shape)){const i=this.shape[s];e&&!e[s]?t[s]=i:t[s]=i.optional()}return new mn({...this._def,shape:()=>t})}required(e){const t={};for(const s of at.objectKeys(this.shape))if(e&&!e[s])t[s]=this.shape[s];else{let r=this.shape[s];for(;r instanceof Wa;)r=r._def.innerType;t[s]=r}return new mn({...this._def,shape:()=>t})}keyof(){return cM(at.objectKeys(this.shape))}}mn.create=(n,e)=>new mn({shape:()=>n,unknownKeys:"strip",catchall:lo.create(),typeName:Be.ZodObject,...We(e)});mn.strictCreate=(n,e)=>new mn({shape:()=>n,unknownKeys:"strict",catchall:lo.create(),typeName:Be.ZodObject,...We(e)});mn.lazycreate=(n,e)=>new mn({shape:n,unknownKeys:"strip",catchall:lo.create(),typeName:Be.ZodObject,...We(e)});class Xp extends st{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;function i(r){for(const c of r)if(c.result.status==="valid")return c.result;for(const c of r)if(c.result.status==="dirty")return t.common.issues.push(...c.ctx.common.issues),c.result;const o=r.map(c=>new Or(c.ctx.common.issues));return Te(t,{code:me.invalid_union,unionErrors:o}),Ue}if(t.common.async)return Promise.all(s.map(async r=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await r._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(i);{let r;const o=[];for(const h of s){const d={...t,common:{...t.common,issues:[]},parent:null},m=h._parseSync({data:t.data,path:t.path,parent:d});if(m.status==="valid")return m;m.status==="dirty"&&!r&&(r={result:m,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(r)return t.common.issues.push(...r.ctx.common.issues),r.result;const c=o.map(h=>new Or(h));return Te(t,{code:me.invalid_union,unionErrors:c}),Ue}}get options(){return this._def.options}}Xp.create=(n,e)=>new Xp({options:n,typeName:Be.ZodUnion,...We(e)});function Ub(n,e){const t=Da(n),s=Da(e);if(n===e)return{valid:!0,data:n};if(t===Ae.object&&s===Ae.object){const i=at.objectKeys(e),r=at.objectKeys(n).filter(c=>i.indexOf(c)!==-1),o={...n,...e};for(const c of r){const h=Ub(n[c],e[c]);if(!h.valid)return{valid:!1};o[c]=h.data}return{valid:!0,data:o}}else if(t===Ae.array&&s===Ae.array){if(n.length!==e.length)return{valid:!1};const i=[];for(let r=0;r<n.length;r++){const o=n[r],c=e[r],h=Ub(o,c);if(!h.valid)return{valid:!1};i.push(h.data)}return{valid:!0,data:i}}else return t===Ae.date&&s===Ae.date&&+n==+e?{valid:!0,data:n}:{valid:!1}}class Zp extends st{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),i=(r,o)=>{if(YR(r)||YR(o))return Ue;const c=Ub(r.value,o.value);return c.valid?((KR(r)||KR(o))&&t.dirty(),{status:t.value,value:c.data}):(Te(s,{code:me.invalid_intersection_types}),Ue)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([r,o])=>i(r,o)):i(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}Zp.create=(n,e,t)=>new Zp({left:n,right:e,typeName:Be.ZodIntersection,...We(t)});class Fl extends st{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==Ae.array)return Te(s,{code:me.invalid_type,expected:Ae.array,received:s.parsedType}),Ue;if(s.data.length<this._def.items.length)return Te(s,{code:me.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ue;!this._def.rest&&s.data.length>this._def.items.length&&(Te(s,{code:me.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...s.data].map((o,c)=>{const h=this._def.items[c]||this._def.rest;return h?h._parse(new oo(s,o,s.path,c)):null}).filter(o=>!!o);return s.common.async?Promise.all(r).then(o=>Ns.mergeArray(t,o)):Ns.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new Fl({...this._def,rest:e})}}Fl.create=(n,e)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Fl({items:n,typeName:Be.ZodTuple,rest:null,...We(e)})};class iC extends st{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==Ae.map)return Te(s,{code:me.invalid_type,expected:Ae.map,received:s.parsedType}),Ue;const i=this._def.keyType,r=this._def.valueType,o=[...s.data.entries()].map(([c,h],d)=>({key:i._parse(new oo(s,c,s.path,[d,"key"])),value:r._parse(new oo(s,h,s.path,[d,"value"]))}));if(s.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const h of o){const d=await h.key,m=await h.value;if(d.status==="aborted"||m.status==="aborted")return Ue;(d.status==="dirty"||m.status==="dirty")&&t.dirty(),c.set(d.value,m.value)}return{status:t.value,value:c}})}else{const c=new Map;for(const h of o){const d=h.key,m=h.value;if(d.status==="aborted"||m.status==="aborted")return Ue;(d.status==="dirty"||m.status==="dirty")&&t.dirty(),c.set(d.value,m.value)}return{status:t.value,value:c}}}}iC.create=(n,e,t)=>new iC({valueType:e,keyType:n,typeName:Be.ZodMap,...We(t)});class Cf extends st{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==Ae.set)return Te(s,{code:me.invalid_type,expected:Ae.set,received:s.parsedType}),Ue;const i=this._def;i.minSize!==null&&s.data.size<i.minSize.value&&(Te(s,{code:me.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),i.maxSize!==null&&s.data.size>i.maxSize.value&&(Te(s,{code:me.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const r=this._def.valueType;function o(h){const d=new Set;for(const m of h){if(m.status==="aborted")return Ue;m.status==="dirty"&&t.dirty(),d.add(m.value)}return{status:t.value,value:d}}const c=[...s.data.values()].map((h,d)=>r._parse(new oo(s,h,s.path,d)));return s.common.async?Promise.all(c).then(h=>o(h)):o(c)}min(e,t){return new Cf({...this._def,minSize:{value:e,message:Re.toString(t)}})}max(e,t){return new Cf({...this._def,maxSize:{value:e,message:Re.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Cf.create=(n,e)=>new Cf({valueType:n,minSize:null,maxSize:null,typeName:Be.ZodSet,...We(e)});class rC extends st{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}rC.create=(n,e)=>new rC({getter:n,typeName:Be.ZodLazy,...We(e)});class aC extends st{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Te(t,{received:t.data,code:me.invalid_literal,expected:this._def.value}),Ue}return{status:"valid",value:e.data}}get value(){return this._def.value}}aC.create=(n,e)=>new aC({value:n,typeName:Be.ZodLiteral,...We(e)});function cM(n,e){return new Du({values:n,typeName:Be.ZodEnum,...We(e)})}class Du extends st{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),s=this._def.values;return Te(t,{expected:at.joinValues(s),received:t.parsedType,code:me.invalid_type}),Ue}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return Te(t,{received:t.data,code:me.invalid_enum_value,options:s}),Ue}return Ys(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Du.create(e,{...this._def,...t})}exclude(e,t=this._def){return Du.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}}Du.create=cM;class oC extends st{_parse(e){const t=at.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==Ae.string&&s.parsedType!==Ae.number){const i=at.objectValues(t);return Te(s,{expected:at.joinValues(i),received:s.parsedType,code:me.invalid_type}),Ue}if(this._cache||(this._cache=new Set(at.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=at.objectValues(t);return Te(s,{received:s.data,code:me.invalid_enum_value,options:i}),Ue}return Ys(e.data)}get enum(){return this._def.values}}oC.create=(n,e)=>new oC({values:n,typeName:Be.ZodNativeEnum,...We(e)});class Jp extends st{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Ae.promise&&t.common.async===!1)return Te(t,{code:me.invalid_type,expected:Ae.promise,received:t.parsedType}),Ue;const s=t.parsedType===Ae.promise?t.data:Promise.resolve(t.data);return Ys(s.then(i=>this._def.type.parseAsync(i,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Jp.create=(n,e)=>new Jp({type:n,typeName:Be.ZodPromise,...We(e)});class ku extends st{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Be.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),i=this._def.effect||null,r={addIssue:o=>{Te(s,o),o.fatal?t.abort():t.dirty()},get path(){return s.path}};if(r.addIssue=r.addIssue.bind(r),i.type==="preprocess"){const o=i.transform(s.data,r);if(s.common.async)return Promise.resolve(o).then(async c=>{if(t.value==="aborted")return Ue;const h=await this._def.schema._parseAsync({data:c,path:s.path,parent:s});return h.status==="aborted"?Ue:h.status==="dirty"||t.value==="dirty"?Rd(h.value):h});{if(t.value==="aborted")return Ue;const c=this._def.schema._parseSync({data:o,path:s.path,parent:s});return c.status==="aborted"?Ue:c.status==="dirty"||t.value==="dirty"?Rd(c.value):c}}if(i.type==="refinement"){const o=c=>{const h=i.refinement(c,r);if(s.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(s.common.async===!1){const c=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return c.status==="aborted"?Ue:(c.status==="dirty"&&t.dirty(),o(c.value),{status:t.value,value:c.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(c=>c.status==="aborted"?Ue:(c.status==="dirty"&&t.dirty(),o(c.value).then(()=>({status:t.value,value:c.value}))))}if(i.type==="transform")if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Nu(o))return Ue;const c=i.transform(o.value,r);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:c}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>Nu(o)?Promise.resolve(i.transform(o.value,r)).then(c=>({status:t.value,value:c})):Ue);at.assertNever(i)}}ku.create=(n,e,t)=>new ku({schema:n,typeName:Be.ZodEffects,effect:e,...We(t)});ku.createWithPreprocess=(n,e,t)=>new ku({schema:e,effect:{type:"preprocess",transform:n},typeName:Be.ZodEffects,...We(t)});class Wa extends st{_parse(e){return this._getType(e)===Ae.undefined?Ys(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Wa.create=(n,e)=>new Wa({innerType:n,typeName:Be.ZodOptional,...We(e)});class Ou extends st{_parse(e){return this._getType(e)===Ae.null?Ys(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ou.create=(n,e)=>new Ou({innerType:n,typeName:Be.ZodNullable,...We(e)});class Fb extends st{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===Ae.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Fb.create=(n,e)=>new Fb({innerType:n,typeName:Be.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...We(e)});class Bb extends st{_parse(e){const{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Kp(i)?i.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Or(s.common.issues)},input:s.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Or(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}Bb.create=(n,e)=>new Bb({innerType:n,typeName:Be.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...We(e)});class lC extends st{_parse(e){if(this._getType(e)!==Ae.nan){const s=this._getOrReturnCtx(e);return Te(s,{code:me.invalid_type,expected:Ae.nan,received:s.parsedType}),Ue}return{status:"valid",value:e.data}}}lC.create=n=>new lC({typeName:Be.ZodNaN,...We(n)});class wG extends st{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class WE extends st{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return r.status==="aborted"?Ue:r.status==="dirty"?(t.dirty(),Rd(r.value)):this._def.out._parseAsync({data:r.value,path:s.path,parent:s})})();{const i=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?Ue:i.status==="dirty"?(t.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:s.path,parent:s})}}static create(e,t){return new WE({in:e,out:t,typeName:Be.ZodPipeline})}}class zb extends st{_parse(e){const t=this._def.innerType._parse(e),s=i=>(Nu(i)&&(i.value=Object.freeze(i.value)),i);return Kp(t)?t.then(i=>s(i)):s(t)}unwrap(){return this._def.innerType}}zb.create=(n,e)=>new zb({innerType:n,typeName:Be.ZodReadonly,...We(e)});var Be;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(Be||(Be={}));lo.create;const SG=qi.create,AG=Xp.create;Zp.create;Fl.create;const IG=Du.create;Jp.create;Wa.create;Ou.create;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cC;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(cC||(cC={}));var uC;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(uC||(uC={}));var hC;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(hC||(hC={}));var dC;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(dC||(dC={}));var fC;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(fC||(fC={}));var mC;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT"})(mC||(mC={}));var gC;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(gC||(gC={}));var pC;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(pC||(pC={}));var _C;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY"})(_C||(_C={}));var yC;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(yC||(yC={}));var vC;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(vC||(vC={}));var bC;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(bC||(bC={}));var xC;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(xC||(xC={}));var EC;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(EC||(EC={}));var TC;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(TC||(TC={}));var wC;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(wC||(wC={}));var SC;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(SC||(SC={}));var AC;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(AC||(AC={}));var IC;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(IC||(IC={}));var RC;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(RC||(RC={}));var CC;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(CC||(CC={}));var NC;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(NC||(NC={}));var DC;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(DC||(DC={}));var kC;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(kC||(kC={}));var OC;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(OC||(OC={}));var MC;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(MC||(MC={}));var PC;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(PC||(PC={}));var VC;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(VC||(VC={}));var LC;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(LC||(LC={}));var jC;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(jC||(jC={}));var UC;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(UC||(UC={}));var FC;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(FC||(FC={}));var BC;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(BC||(BC={}));var zC;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(zC||(zC={}));var HC;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(HC||(HC={}));var qC;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(qC||(qC={}));var GC;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(GC||(GC={}));var WC;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(WC||(WC={}));var $C;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY"})($C||($C={}));var YC;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(YC||(YC={}));const KC=IG(["string","number","integer","object","array","boolean","null"]);AG([KC,SG(KC)]);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var QC;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(QC||(QC={}));const RG=({text:n})=>{const e=n.split(/(\*\*.*?\*\*)/g);return y.jsx(y.Fragment,{children:e.map((t,s)=>t.startsWith("**")&&t.endsWith("**")?y.jsx("strong",{children:t.slice(2,-2)},s):t)})},CG=({isOpen:n,onClose:e,assetAccounts:t,cashflowRecords:s,budgets:i,goals:r})=>{const[o,c]=ce.useState([]),[h,d]=ce.useState(""),[m,_]=ce.useState(!1),b=ce.useRef(null),E=ce.useRef(null);ce.useEffect(()=>{if(n&&(setTimeout(()=>{var T;return(T=E.current)==null?void 0:T.focus()},100),o.length===0)){const T=t.reduce((k,L)=>k+(L.assets||[]).reduce((M,H)=>M+(H.currentValueTWD||0),0),0);let R="你好！我是您的個人財務助理 Navi。請問有什麼可以為您服務的嗎？";T>0?R=`你好！我是 Navi。我注意到您目前的總資產約為 **$${T.toLocaleString(void 0,{maximumFractionDigits:0})}**。

您可以問我：
* "分析我的資產配置"
* "我上個月的開銷如何？"
* "給我一些儲蓄建議"`:R=`你好！我是您的個人財務助理 Navi。很高興為您服務！

您可以從記錄您的第一筆資產或收支開始，然後向我提問以獲得財務建議。`,c([{role:"model",content:R}])}},[n,o.length,t]),ce.useEffect(()=>{var T;(T=b.current)==null||T.scrollIntoView({behavior:"smooth"})},[o,m]);const S=async T=>{if(T.preventDefault(),!h.trim()||m)return;const R={role:"user",content:h};c(k=>[...k,R]),d(""),_(!0);{setTimeout(()=>{const k={role:"model",content:"AI 助理未設定 API 金鑰，目前無法使用。"};c(L=>[...L,k]),_(!1)},500);return}};return n?y.jsxs("div",{className:"fixed bottom-6 right-6 w-full max-w-md h-[70vh] max-h-[600px] bg-white rounded-2xl shadow-2xl flex flex-col z-50 transition-all duration-300 ease-in-out transform origin-bottom-right",children:[y.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-600 to-indigo-700 text-white rounded-t-2xl shadow-md",children:[y.jsx("h3",{className:"text-lg font-bold",children:"AI 財務助理"}),y.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-white/20 transition-colors","aria-label":"Close chat",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),y.jsx("div",{className:"flex-1 p-4 overflow-y-auto bg-gray-50",children:y.jsxs("div",{className:"space-y-4",children:[o.map((T,R)=>y.jsx("div",{className:`flex ${T.role==="user"?"justify-end":"justify-start"}`,children:y.jsx("div",{className:`max-w-xs md:max-w-sm px-4 py-2 rounded-2xl shadow ${T.role==="user"?"bg-blue-500 text-white":"bg-gray-200 text-gray-800"}`,children:y.jsx("div",{className:"text-sm whitespace-pre-wrap",children:y.jsx(RG,{text:T.content})})})},R)),m&&y.jsx("div",{className:"flex justify-start",children:y.jsx("div",{className:"max-w-xs md:max-w-sm px-4 py-2 rounded-2xl shadow bg-gray-200 text-gray-800",children:y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse"}),y.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse delay-75"}),y.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse delay-150"})]})})}),y.jsx("div",{ref:b})]})}),y.jsx("form",{onSubmit:S,className:"p-4 border-t border-gray-200 bg-white rounded-b-2xl",children:y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("input",{ref:E,type:"text",value:h,onChange:T=>d(T.target.value),placeholder:"請在這裡輸入您的問題...",className:"flex-1 w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:m,autoComplete:"off"}),y.jsx("button",{type:"submit",className:"bg-blue-600 text-white p-3 rounded-full hover:bg-blue-700 disabled:bg-blue-300 transition-colors shadow",disabled:m||!h.trim(),children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transform rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]}):null},NG=(n,e,t)=>{const[s,i]=ce.useState([]),[r,o]=ce.useState([]),[c,h]=ce.useState([]),[d,m]=ce.useState([]),[_,b]=ce.useState({customIncome:[],customExpense:[],manualRate:null,lastRecurringCheck:null});return ce.useEffect(()=>{if(!n||!e||!t){i([]),o([]),h([]),m([]),b({customIncome:[],customExpense:[],manualRate:null,lastRecurringCheck:null});return}const E=`artifacts/${t}/users/${e}`,S=n.collection(`${E}/assetAccounts`).onSnapshot(M=>{i(M.docs.map(H=>({id:H.id,...H.data()})))}),T=n.collection(`${E}/cashflowRecords`).orderBy("date","desc").onSnapshot(M=>{o(M.docs.map(H=>({id:H.id,...H.data()})))}),R=n.collection(`${E}/budgets`).onSnapshot(M=>{h(M.docs.map(H=>({id:H.id,...H.data()})))}),k=n.collection(`${E}/goals`).orderBy("targetDate","asc").onSnapshot(M=>{m(M.docs.map(H=>({id:H.id,...H.data()})))}),L=n.doc(`${E}/settings/userSettings`).onSnapshot(M=>{M.exists?b(M.data()):b({customIncome:[],customExpense:[],manualRate:null,lastRecurringCheck:null})});return()=>{S(),T(),R(),k(),L()}},[n,e,t]),{assetAccounts:s,cashflowRecords:r,budgets:c,goals:d,settings:_}},DG=async(n,e,t,s,i)=>{const r=n.doc(`artifacts/${i}/users/${e}/settings/userSettings`),o=new Date,c=s.lastRecurringCheck?new Date(s.lastRecurringCheck):new Date(o.getFullYear(),o.getMonth(),0);if(c.getMonth()===o.getMonth()&&c.getFullYear()===o.getFullYear())return!1;const h=t.filter(_=>_.isRecurring&&_.recurrenceDay);if(h.length===0)return await r.set({lastRecurringCheck:o.toISOString()},{merge:!0}),!1;let d=!1;const m=n.collection(`artifacts/${i}/users/${e}/cashflowRecords`);for(const _ of h){const b=Number(_.recurrenceDay);if(isNaN(b)||b<1||b>31)continue;const E=new Date(o.getFullYear(),o.getMonth()+1,0).getDate(),S=Math.min(b,E),T=new Date(o.getFullYear(),o.getMonth(),S).toISOString().slice(0,10);if(!t.some(k=>{var L;return k.date.startsWith(o.toISOString().slice(0,7))&&((L=k.description)==null?void 0:L.includes(_.description))&&k.amount===_.amount&&k.category===_.category})){const{id:k,isRecurring:L,recurrenceDay:M,...H}=_,U={...H,isRecurring:!1,date:T,description:_.description?`${_.description} (定額)`:"(定額)"};await m.add(U),d=!0}}return await r.set({lastRecurringCheck:o.toISOString()},{merge:!0}),d},kG={apiKey:"AIzaSyBzIuGIG4jmUe146rexK51UNvA2dn3xnT8",authDomain:"fir-f51b8.firebaseapp.com",projectId:"fir-f51b8",storageBucket:"fir-f51b8.appspot.com",messagingSenderId:"904534740293",appId:"1:904534740293:web:c571f1f69b004c0b15022c",measurementId:"G-5WGVD478EE"},Hg="finance-dashboard-v1",OG=()=>{const[n,e]=ce.useState("dashboard"),[t,s]=ce.useState({message:"",type:"info",show:!1}),[i,r]=ce.useState(null),[o,c]=ce.useState(null),[h,d]=ce.useState(null),[m,_]=ce.useState(32.5),[b,E]=ce.useState(!1),S=ce.useCallback((N,V)=>{s({message:N,type:V,show:!0}),setTimeout(()=>{s({message:"",type:"info",show:!1})},3e3)},[]);ce.useEffect(()=>{try{qs.apps.length||qs.initializeApp(kG);const N=qs.firestore();r(N);const V=qs.auth().onAuthStateChanged(j=>{j?(c(j.uid),d(j.email??null)):(c(null),d(null))});return()=>V()}catch(N){console.error("Firebase initialization failed:",N),S("Firebase 初始化失敗，請檢查設定。","error")}},[S]);const T=async()=>{try{const N=new qs.auth.GoogleAuthProvider;await qs.auth().signInWithPopup(N),S("登入成功！","success")}catch(N){console.error("登入失敗：",N),S("登入失敗，請再試一次。","error")}},R=async()=>{try{await qs.auth().signOut(),S("已登出。","info")}catch(N){console.error("登出失敗：",N),S("登出失敗，請再試一次。","error")}};ce.useEffect(()=>{const N=setTimeout(()=>_(32.8),2e3);return()=>clearTimeout(N)},[]);const{assetAccounts:k,cashflowRecords:L,budgets:M,goals:H,settings:U}=NG(i,o??"",Hg);ce.useEffect(()=>{i&&o&&U&&DG(i,o,L,U,Hg).then(N=>{N&&S("定額收支項目已自動建立。","info")}).catch(N=>{console.error("Error checking recurring transactions:",N),S("檢查定額項目時發生錯誤。","error")})},[i,o,L,U,S]);const z=(U==null?void 0:U.manualRate)||m,C=Nq(k,z),I=()=>{switch(n){case"dashboard":return y.jsx(WR,{userId:o??"",assetAccounts:C,cashflowRecords:L});case"data-manager":return y.jsx(Bq,{userId:o??"",db:i,assetAccounts:k,cashflowRecords:L,budgets:M,goals:H,settings:U,setNotification:N=>S(N.message,N.type),appId:Hg,effectiveUsdToTwdRate:z});case"asset-management":return y.jsx(Hq,{assetAccounts:C});case"cashflow-management":return y.jsx(Gq,{cashflowRecords:L});case"budget-missions":return y.jsx(Wq,{db:i,userId:o??"",appId:Hg,cashflowRecords:L,budgets:M,settings:U,setNotification:N=>S(N.message,N.type)});case"investment-tracking":return y.jsx(Yq,{assetAccounts:C});case"financial-goals":return y.jsx(Qq,{goals:H,assetAccounts:k,cashflowRecords:L});case"report-analysis":return y.jsx(Zq,{assetAccounts:C,cashflowRecords:L});default:return y.jsx(WR,{userId:o??"",assetAccounts:C,cashflowRecords:L})}};return y.jsxs("div",{className:"flex flex-col min-h-screen font-sans",children:[y.jsx(v9,{currentPage:n,setCurrentPage:e}),y.jsx("div",{className:`border-b text-center py-2 px-4 text-sm font-semibold shadow-inner z-30
                       ${o?"bg-green-100 border-green-200 text-green-800":"bg-yellow-100 border-yellow-200 text-yellow-800"}`,children:y.jsx("div",{className:"container mx-auto flex items-center justify-center gap-3",children:o?y.jsxs(y.Fragment,{children:[y.jsxs("span",{children:["已登入 ",h??"","，雲端同步已啟用。"]}),y.jsx("button",{onClick:R,className:"bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded",children:"登出"})]}):y.jsxs(y.Fragment,{children:[y.jsx("span",{children:"未登入：目前僅本機顯示。請登入以啟用雲端同步（符合你的 Firestore 規則）。"}),y.jsx("button",{onClick:T,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded",children:"使用 Google 登入"})]})})}),y.jsx("main",{className:"flex-grow container mx-auto p-6 md:p-8",children:i?I():y.jsxs("div",{className:"fixed inset-0 bg-gray-100 flex flex-col items-center justify-center z-50",children:[y.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600"}),y.jsx("p",{className:"text-xl text-gray-700 mt-6 font-semibold",children:"正在連接您的財務數據庫..."}),y.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"請稍候，正在準備您的個人財務導航中心。"})]})}),y.jsx(x9,{notification:t}),y.jsx(b9,{}),y.jsx(CG,{isOpen:b,onClose:()=>E(!1),assetAccounts:C,cashflowRecords:L,budgets:M,goals:H}),!b&&y.jsx("button",{onClick:()=>E(!0),className:"fixed bottom-6 right-6 bg-gradient-to-r from-blue-600 to-indigo-700 text-white w-16 h-16 rounded-full shadow-2xl flex items-center justify-center transform hover:scale-110 transition-transform duration-300 ease-in-out focus:outline-none focus:ring-4 focus:ring-blue-300","aria-label":"Open AI Assistant",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})})]})},uM=document.getElementById("root");if(!uM)throw new Error("Could not find root element to mount to");const MG=XP.createRoot(uM);MG.render(y.jsx(HP.StrictMode,{children:y.jsx(OG,{})}));
